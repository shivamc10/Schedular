WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'soy/pagetree.soy' */
// This file was automatically generated from pagetree.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Pagetree.Macro.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Pagetree == 'undefined') { Confluence.Templates.Pagetree = {}; }
if (typeof Confluence.Templates.Pagetree.Macro == 'undefined') { Confluence.Templates.Pagetree.Macro = {}; }


Confluence.Templates.Pagetree.Macro.loadingIndicator = function(opt_data, opt_ignored) {
  return '<div class="plugin_pagetree_children_loading_wrapper"><div class="spinner"/><span class="plugin_pagetree_children_loading">' + soy.$$escapeHtml('Loading...') + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Pagetree.Macro.loadingIndicator.soyTemplateName = 'Confluence.Templates.Pagetree.Macro.loadingIndicator';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree.js' */
(function(){var a=function(m){this.$=m;var h=this.$;var B=999;var C=true;var k=false;var w={};var d={};var n=function(K,J,F,I,E){if(J==undefined||J==null){J=!b(K)}if(F==undefined||F==null){F=0}if(!l(K,J)){var H=h("#children"+K);if(z(H)){var G=h("#plusminus"+K);if(J==C){G.removeClass("aui-iconfont-chevron-right").addClass("aui-iconfont-chevron-down")}else{G.removeClass("aui-iconfont-chevron-down").addClass("aui-iconfont-chevron-right")}if(J==C){if(E==false){H.slideDown(300)}else{H.removeClass("plugin-pagetree-hide-children");H.animate({opacity:1})}}else{if(E==false){H.slideUp(300)}else{H.animate({opacity:0},{complete:function(){H.addClass("plugin-pagetree-hide-children")}})}}if(I){r(K)}}else{j(K,new Array(),F,"",I,E)}}if(I){r(K)}};var z=function(E){return E.children("ul[id]").length>0};var b=function(F){var E=h("#plusminus"+F);return(E.length>0)?(E.hasClass("icon-minus")||E.hasClass("aui-iconfont-chevron-down")):k};var l=function(F,E){return b(F)==E};var i=function(G,F,E){A(G,C,F,E)};var x=function(G,F,E){A(G,k,F,E)};var A=function(J,H,G,F){g(J);var I=h("#"+J);var E=I.find("div.plugin_pagetree_children_container");E.each(function(K){var L=v(this.id);n(L,H,B,K==E.length-1,F)});G.preventDefault();G.stopPropagation()};var v=function(E){if(!E||E==undefined){return null}if(E.indexOf("plusminus")!=-1){return E.substring("plusminus".length)}if(E.indexOf("children")!=-1){return E.substring("children".length)}return null};var c=function(E){if(!E||E==undefined){return null}return s(E)[1]};var s=function(E){if(!E||E==undefined){return null}return E.split("-")};var g=function(F){var E=c(F);h("div.plugin_pagetree").each(function(G){if(G==E){h(this).find("span.plugin_pagetree_status").removeClass("hidden");h(this).find("div.plugin_pagetree_expandcollapse").addClass("hidden")}})};var r=function(F){var E=c(F);h("div.plugin_pagetree").each(function(G){if(G==E){h(this).find("span.plugin_pagetree_status").addClass("hidden");h(this).find("div.plugin_pagetree_expandcollapse").removeClass("hidden")}})};var f=function(L,F,I,H,K,E,G){var J=w[L];if(F=="Orphan"){J+="&hasRoot=false&spaceKey="+K}else{J+="&hasRoot=true&pageId="+F}J+="&treeId="+L+"&startDepth="+H+"&mobile="+G;h.each(I,function(){J+="&ancestors="+this});J+="&treePageId="+E;if(G==false){J=(AJS.params.serverUrl||"")+J}return J};var q=function(G){var F=G;var E=null;h("div.plugin_pagetree").each(function(H){if(H==F){E=h(this)}});return E};var p=function(E){var F=E.children("fieldset");var G=new Object();if(F.length>0){F.children("input").each(function(){G[this.name]=this.value})}return G};var o=function(E){var G=E.children("fieldset");var H=new Array();if(G.length>0){var F=G.children("fieldset");if(F.length>0){F.children("input").each(function(){H.push(this.value)})}}return H};var e=function(G,F){var E=h("a.plugin_pagetree_childtoggle",G);E.each(function(){var H=h(this);H.attr("href","#").bind("click",function(K){var I=H.parent().parent().children("div.plugin_pagetree_children_container");var J=I.attr("id");var L=J.substring(8);n(L,null,null,null,F);K.preventDefault();K.stopPropagation()})})};var u=function(E){var F=h(document.createElement("div"));F.html(E);return F.find("ul[id^='child_ul']").length};var j=function(N,G,S,Q,J,F,H){var R=N;var K=J;var E=s(N);var I=E[0];var M=E[1];var L=h("#children"+N);var P=p(q(M));var T=false;function O(){L.find(".plugin_pagetree_children_loading_wrapper .spinner").spin("small")}L.append(Confluence.Templates.Pagetree.Macro.loadingIndicator());if(H){setTimeout(function(){if(!T){O()}},250)}else{O()}h.ajax({type:"GET",url:f(M,I,G,S,Q,P.treePageId,F),dataType:"text",success:function(U){if(u(U)){L.html(U);T=true;if(L.children().length&&L.hasClass("hidden")){L.removeClass("hidden")}e(L,F);h("#plusminus"+R).addClass("aui-iconfont-chevron-down").removeClass("aui-iconfont-chevron-right");h("#childrenspan"+d[parseInt(M)]+"-"+M).addClass("plugin_pagetree_current");if(K){r(R)}t(L);if(AJS.PageGadget&&AJS.PageGadget.contentsUpdated){AJS.PageGadget.contentsUpdated()}}else{window.location=P.loginUrl}AJS.trigger("pagetree-children-loaded")},error:function(U){if(U.status=="403"){L.text(P["i18n-pagetree.error.permission"])}else{L.text(P["i18n-pagetree.error.general"])}}})};var t=function(E){h("div.plugin_pagetree_children_container:empty",E).addClass("hidden")};var y=function(E,J){var H=p(E);var K=H.noRoot=="true";var G=K?"Orphan-"+J:H.rootPageId+"-"+J;var F=H.mobile=="true";w[J]=H.treeRequestId;if(F==false){d[J]=AJS.params.pageId}else{d[J]=h("div.content-container").parent().attr("data-content-id")}E.children("fieldset").each(function(){var L=h(this);L.children("input[treeId]").attr("value",J);L.children("input[rootPage]").attr("value",G)});if(K){E.find("div.plugin_pagetree_children").attr("id","childrenOrphan-"+J);E.find("a.plugin_pagetree_expandall").click(function(L){i("childrenOrphan-"+J,L,F);return false});E.find("a.plugin_pagetree_collapseall").click(function(L){x("childrenOrphan-"+J,L,F);return false})}else{E.find("div.plugin_pagetree_children").attr("id","children"+G);E.find("a.plugin_pagetree_expandall").click(function(L){i("children"+G,L,F);return false});E.find("a.plugin_pagetree_collapseall").click(function(L){x("children"+G,L,F);return false})}var I=o(E);j(G,I,H.startDepth,H.spaceKey,"",F,true)};this.initPageTrees=function(){h("div.plugin_pagetree").each(function(E){y(h(this),E)});D()};var D=function(){var E=self.placeFocus;if(E){self.placeFocus=function(){var F=h("form[name='pagetreesearchform']");F.attr("name","inlinecommentform");E();F.attr("name","pagetreesearchform")}}};h(".open-flyout-to-search").bind("click",function(E){if(h(".fly-out-open").length){setTimeout(function(){ConfluenceMobile.flyout.hide()},400)}else{setTimeout(function(){ConfluenceMobile.flyout.show()},400)}E.stopPropagation();E.preventDefault()})};Confluence=Confluence||{};Confluence.Plugins=Confluence.Plugins||{};Confluence.Plugins.PagetreeMacro={bind:function(b){var c=new a(b);c.initPageTrees()}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree-desktop.js' */
AJS.toInit(function(a){Confluence.Plugins.PagetreeMacro.bind(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:help-dialog-extension', location = '/jira/help-dialog.js' */
if(Confluence.KeyboardShortcuts){Confluence.KeyboardShortcuts.Editor.push({context:"editor.actions",descKey:"Insert Jira Issue/Filter"+":",keys:[["Ctrl+Shift+J"]]})};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:help-dialog-extension', location = 'js/help-dialog.js' */
AJS.toInit(function($) {
    // Add the shortcut to the shortcuts dialog
    Confluence.KeyboardShortcuts && Confluence.KeyboardShortcuts.Autoformat.push(
        {
            action: "@",
            context: "autoformat.autocomplete",
            description: "Mention"
        });
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-dashboard:footer-analytics', location = '/js/confluence-dashboard/utils/footer-analytics.js' */
define("confluence-dashboard/utils/footer-analytics",["jquery","ajs","confluence/meta"],function(e,a,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e).default,c=n(a).default,i=n(t).default;c.toInit(function(){var e=i.get("page-id"),a=o("body").hasClass("dashboard");o("#footer").on("click","a",function(){c.trigger("analytics",{name:"confluence.footer.item.click",data:{pageId:e,isDashboard:a}})})})}),require(["confluence-dashboard/utils/footer-analytics"]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog2', location = 'src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__df7047d25e7ae0c2f22a17f939177597=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__700a145ba3db9966cc95664c892049f8),j=f(__65ca28a9d6b0f244027266ff8e6a6d1c),k=f(__28c84e7bb75f6c3b0ba124d57bd69571),
b=f(__3ada4a8272640e5242be87f12c7e0fdf),l=f(__d2e8fc66dac2ecebdc205fcab991f687),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/js/page-loading-indicator.js' */
define("confluence/page-loading-indicator",["jquery","underscore","ajs","confluence/templates"],function(c,g,a,h){return function(b){function d(){return c(".confluence-page-loading-blanket",b)}function e(){return c(".confluence-loading-indicator",b)}return{show:function(){0===d().length&&c(b).append(h.pageLoadingIndicator());d().show();e().spin({lines:12,length:8,width:4,radius:10,trail:60,speed:1.5,color:"#F0F0F0"})},hide:function(){e().stop();d().hide()},showUntilResolved:function(c,b){this.show();
c.always(g.bind(this.hide,this));b&&c.fail(function(){a.messages.error(".confluence-page-loading-errors",{body:b})})},showUntilDialogVisible:function(b,d){var f=this,e=d||"An error has occurred connecting to the server. Please try again.",g=c(".aui-dialog:visible"),h=c(".aui-dialog2:visible");!g.length&&!h.length&&f.show();b.always(f.hide).fail(function(){a.messages.error(".confluence-page-loading-errors",{body:e})});a.bind("show.dialog",function i(){a.unbind("show.dialog",i);f.hide()});if(null!=a.dialog2&&void 0!=a.dialog2)a.dialog2.on("show",
function j(){a.dialog2.off("show",j);f.hide()})},destroy:function(){b.remove(".confluence-page-loading-blanket")}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence/page-loading-indicator","Confluence.PageLoadingIndicator");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/soy/page-loading-indicator.soy' */
// This file was automatically generated from page-loading-indicator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }


Confluence.Templates.pageLoadingIndicator = function(opt_data, opt_ignored) {
  return '<div class="confluence-page-loading-errors"></div><div class="confluence-page-loading-blanket aui-blanket" aria-hidden="false"><div class="confluence-loading-indicator"></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.pageLoadingIndicator.soyTemplateName = 'Confluence.Templates.pageLoadingIndicator';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/deferred-dialog-loader.js' */
define("confluence/deferred-dialog-loader",["underscore","jquery","ajs","confluence/page-loading-indicator","confluence/api/event"],function(a,d,e,g,f){return function(){var h=g(d("body"));a.each({userStatus:{resource:"confluence.userstatus:userstatus-resources",selector:"#create-user-status-link",event:"deferred.userstatus.click"},movePageDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-page-dialog-link",event:"deferred.page-move.tools-menu"},movePageDialogEditor:{resource:"confluence.web.resources:page-move-resources",
selector:"#rte-button-location",event:"deferred.page-move.editor"},moveBlogDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-blogpost-dialog-link",event:"deferred.blog-move.tools-menu"},availableGadgetsHelp:{resource:"com.atlassian.confluence.plugins.gadgets:gadget-directory-resources",selector:"#gadget-directory-link",event:"deferred.available-gadgets.help-menu"},aboutConfluenceHelp:{resource:"confluence.web.resources:about",selector:"#confluence-about-link",
event:"deferred.about-confluence.help-menu"}},function(b){d("body").on("click",b.selector,function(a){var c=WRM.require("wr!"+b.resource,function(){f.trigger(b.event)});h.showUntilDialogVisible(c);c=b.resource+".requested";e.Analytics?e.Analytics.triggerPrivacyPolicySafeEvent(c):f.trigger("analyticsEvent",{name:c});a.preventDefault()})})}});require("confluence/module-exporter").safeRequire("confluence/deferred-dialog-loader",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/page-permissions-deferred-loader.js' */
define("confluence/page-permissions-deferred-loader","confluence/dark-features confluence/legacy ajs confluence/page-loading-indicator jquery wrm".split(" "),function(a,b,c,d,e,f){var g=d(e("body"));return function(a){var b=f.require("wr!com.atlassian.confluence.plugins.confluence-page-restrictions-dialog:dialog-resources",function(){c.trigger("deferred.page.permissions")});g.showUntilDialogVisible(b,"There was an error loading the page restrictions. Please try again later.");a.preventDefault()}});
require("confluence/module-exporter").safeRequire("confluence/page-permissions-deferred-loader",function(a){var b=require("ajs");b.toInit(function(c){c("body").on("click","#rte-button-restrictions,#action-page-permissions-link",a);b.bind("system-content-metadata.open-restrictions-dialog",a)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:navigator-context', location = '/includes/js/api/navigator-context.js' */
define("confluence/api/navigator-context",["confluence/meta","document"],function(g,b){var h=function(a){a=d(a);return"undefined"!==typeof a&&0!==a},d=function(a){a=g.get(a);return isNaN(a)?void 0:Number(a)},i=function(){return!!b.querySelector(".page.view")||!!b.querySelector(".blogpost.view")},e=function(){return!!b.querySelector(".page.edit")||!!b.querySelector(".blogpost.edit")},f=function(){return g.get("content-type")},c=function(){return d("page-id")};return{getCurrent:function(){return e()&&
0===c()&&h("draft-id")?{target:"contentcreate",context:{contentId:d("draft-id"),contentType:f()}}:e()&&!i()&&0!==c()?{target:"contentedit",context:{contentId:c(),contentType:f()}}:!e()&&i()&&h("page-id")?{target:"contentview",context:{contentId:c(),contentType:f()}}:{target:"unknown",context:{}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.mxgraph.confluence.plugins.diagramly:drawio-blueprint-resources-admin', location = 'js/DiagramlyBlueprintInit.js' */
AJS.toInit(function(){if(Confluence&&Confluence.Blueprint&&Confluence.Blueprint.register){Confluence.Blueprint.register("com.mxgraph.confluence.plugins.diagramly:drawio-blueprint-item",function(b,c,a){window.location=Confluence.getContextPath()+"/pages/createpage.action?spaceKey="+encodeURIComponent(c)+"&newSpaceKey="+encodeURIComponent(c)+(b.getParentPageId()?"&fromPageId="+b.getParentPageId():"")+"&diagramlyBlueprint=1"})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:ajs-amd', location = 'lib/amd/ajs-amd.js' */
define("ajs",function(){return AJS});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm/context-path",function(){return AJS.contextPath});define("wrm/data",function(){var a=function(){};if(WRM){if(typeof WRM.data==="function"){a=WRM.data}else{if(WRM.data&&typeof WRM.data.claim==="function"){a=WRM.data.claim}}}return{claim:a}});define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:backbone-amd', location = 'lib/amd/backbone-amd.js' */
define("backbone",function(){return Backbone});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:jquery-amd', location = 'lib/amd/jquery-amd.js' */
define("jquery",function(){return AJS.$});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:underscore-amd', location = 'lib/amd/underscore-amd.js' */
define("underscore",function(){return _});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data', location = 'discovery/hipChatDiscovery.js' */
define("confluence/hipchat/integration/hipchat/discovery",["wrm/data"],function(a){var b="com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin";var c=b+":discovery-javascript-data.link-active";var d=a.claim(c);return{isLinked:function(){return d.linkActive===true},isConditionsMet:function(){return d.conditionsMet===true},isAdmin:function(){return d.admin===true},pluginKey:function(){return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data', location = 'discovery/discoveryPopup.js' */
define("confluence/hipchat/integration/hipchat/discovery/popup",["jquery"],function(a){return{show:function(g){var c,b;var h=g.featureKey;if(g.shouldShow()&&Confluence.FeatureDiscovery){b=Confluence.FeatureDiscovery.forPlugin(g.pluginKey);c=b.shouldShow(g.featureKey,true)}else{c=false}if(c){AJS.trigger("analyticsEvent",{name:g.analytics+".view",data:{}});b&&b.addDiscoveryView(h);var d;var e=function(){b&&b.markDiscovered(h);d.hide();AJS.trigger("analyticsEvent",{name:g.analytics+".accept",data:{}});if(a.isFunction(g.onAccept)){g.onAccept()}};var f=function(i){return function(j){j.preventDefault();b&&b.markDiscovered(h);d.hide();i.parent().remove();AJS.trigger("analyticsEvent",{name:g.analytics+".dismiss",data:{}});if(a.isFunction(g.onDismiss)){g.onDismiss()}}};d=AJS.InlineDialog(g.target,g.name,function(k,i,l){k.html(g.template({}));l();var j=k.parent();j.addClass("hipchat-integration-discovery");if(g.fixed===true){j.addClass("hipchat-integration-discovery-fixed")}k.find("#hipchat-integration-discovery-open").click(e);k.find("#hipchat-integration-discovery-dismiss").click(f(k))},{noBind:true});d.show();if(g.fixed===true){a(window).resize(function(){d.refresh()})}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-resources', location = 'discovery/integrationDiscovery.soy' */
// This file was automatically generated from integrationDiscovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.HipChat.Discovery.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.HipChat == 'undefined') { Confluence.Templates.HipChat = {}; }
if (typeof Confluence.Templates.HipChat.Discovery == 'undefined') { Confluence.Templates.HipChat.Discovery = {}; }


Confluence.Templates.HipChat.Discovery.integrationDialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Connect your Confluence site to Hipchat') + '</h2><p>' + soy.$$escapeHtml("Set up and send notifications to Hipchat rooms.") + '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">' + soy.$$escapeHtml('Integrate with Hipchat') + '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">' + soy.$$escapeHtml('Not now') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.HipChat.Discovery.integrationDialog.soyTemplateName = 'Confluence.Templates.HipChat.Discovery.integrationDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatServerDiscovery', location = 'discovery/integrationDiscovery.js' */
require(["jquery","confluence/hipchat/integration/hipchat/discovery","confluence/hipchat/integration/hipchat/discovery/popup"],function(c,b,a){c(function(){var d=AJS.contextPath()+"/plugins/servlet/hipchat/configure";a.show({featureKey:"hipChatServerIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.discovery",template:Confluence.Templates.HipChat.Discovery.integrationDialog,name:"hipchat-integration-dialog",target:c("#admin-menu-link"),shouldShow:function(){return !b.isLinked()&&b.isConditionsMet()&&b.isAdmin()},onAccept:function(){window.location.assign(d)},onDismiss:function(){},fixed:false})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipchat-presence-resources', location = 'presence/presence.soy' */
// This file was automatically generated from presence.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.HipChat.Presence.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.HipChat == 'undefined') { Confluence.Templates.HipChat = {}; }
if (typeof Confluence.Templates.HipChat.Presence == 'undefined') { Confluence.Templates.HipChat.Presence = {}; }


Confluence.Templates.HipChat.Presence.badge = function(opt_data, opt_ignored) {
  return '<span class="hipchat-status aui-icon aui-icon-small hipchat-icon-' + soy.$$escapeHtml(opt_data.statusCode) + '" data-status="' + soy.$$escapeHtml(opt_data.statusCode) + '" title="' + soy.$$escapeHtml(opt_data.statusMessage) + '">' + soy.$$escapeHtml(opt_data.statusMessage) + '</span>';
};
if (goog.DEBUG) {
  Confluence.Templates.HipChat.Presence.badge.soyTemplateName = 'Confluence.Templates.HipChat.Presence.badge';
}


Confluence.Templates.HipChat.Presence.chatBar = function(opt_data, opt_ignored) {
  return '<div class="hipchat-chatbar aui-buttons"><button class="aui-button hipchat-chat" title="' + soy.$$escapeHtml('Unable to start chat as this user is not known in Hipchat.') + '" aria-disabled="true"><span><span class="aui-icon aui-icon-small hipchat-icon-chat">' + soy.$$escapeHtml('Chat') + '</span></span></button><button class="aui-button hipchat-voice" title="' + soy.$$escapeHtml('Unable to start voice calls as this user is not known in Hipchat.') + '" aria-disabled="true" data-call-type="voice"><span><span class="aui-icon aui-icon-small hipchat-icon-voice">' + soy.$$escapeHtml('Voice') + '</span></span></button><button class="aui-button hipchat-video" title="' + soy.$$escapeHtml('Unable to start video calls as this user is not known in Hipchat.') + '" aria-disabled="true" data-call-type="video"><span><span class="aui-icon aui-icon-small hipchat-icon-video">' + soy.$$escapeHtml('Video') + '</span></span></button></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.HipChat.Presence.chatBar.soyTemplateName = 'Confluence.Templates.HipChat.Presence.chatBar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipchat-presence-resources', location = 'presence/presence.js' */
(function(d){var f=AJS.DarkFeatures.isEnabled("hipchat.chatbar");var a={hipChatCall:function(g,h){if(!g){return}return"hipchat://hipchat.com/user/"+encodeURI(g)+(h?"?call="+encodeURI(h):"")}};var c=AJS.contextPath()+"/rest/hipchat/integration/1.0/users/";var b=function(g){return function(j){var i=d(this);var h=i.attr("data-user-id");var k=i.attr("data-caller-id");if(!k){return}var l=i.attr("data-call-type");if(!g&&l){return}window.location.replace(a.hipChatCall(k,l));AJS.trigger("analyticsEvent",{name:"hipchat.chatbar."+(l||"chat"),data:{userId:h}});j.preventDefault()}};var e=function(g){return function(i){if(!i||!i.presence){return}var j=i.userId;var h=i.hipChatUserId;var k;var m;var l=d(g).find(".hipchat-chatbar .aui-button");l.attr("data-user-id",j);l.attr("data-caller-id",h);l.click(b(i.presence.is_online));if(i.presence.is_online){if(i.presence.show==="xa"||i.presence.show==="away"){k="away";m="Away"}else{if(i.presence.show==="dnd"){k="dnd";m="Do not disturb"}else{k="available";m="Available"}}l.filter(".hipchat-chat").attr("title","Start chat with this user in Hipchat.").removeAttr("aria-disabled");l.filter(".hipchat-voice").attr("title","Start a voice call with this user in Hipchat.").removeAttr("aria-disabled");l.filter(".hipchat-video").attr("title","Start a video call with this user in Hipchat.").removeAttr("aria-disabled")}else{k="offline";m="Offline";l.filter(".hipchat-chat").attr("title","Start chat with this user in Hipchat.").removeAttr("aria-disabled");l.filter(".hipchat-voice").attr("title","Unable to start voice calls as this user is not known in Hipchat.");l.filter(".hipchat-video").attr("title","Unable to start video calls as this user is not known in Hipchat.")}if(i.presence.status){m+=" ("+i.presence.status+")"}d("div.values",g).append(Confluence.Templates.HipChat.Presence.badge({statusCode:k,statusMessage:m}));AJS.trigger("analyticsEvent",{name:"hipchat.presence.user.found",data:{userId:i.userId}})}};d(document).bind("ajaxComplete",function(i,g,h){if(/userinfopopup\.action/.test(h.url)){d.each(d(".vcard"),function(n,p){var m=d(p);var k=m.closest(".contents");var l=k.find(".profile-macro").first();var o=k.find(".actions").first();if(l.hasClass("hipchat-status-applied")||!o.length){return}l.addClass("hipchat-status-applied");if(f){o.addClass("hipchat-chatbar-support");o.append(Confluence.Templates.HipChat.Presence.chatBar());o.find(".ajs-menu-bar").addClass("aui-buttons");o.find(".ajs-button > a").addClass("aui-button");o.find(".user-popup-more").addClass("aui-button");o.find(".user-popup-more > span > span").addClass("aui-icon aui-icon-small aui-iconfont-more").text("")}var q=d(".userLogoLink",m).attr("data-username");var j=c+encodeURIComponent(q);d.getJSON(j,e(k)).fail(function(t){if(t.status===404){try{var r=JSON.parse(t.responseText);if(r.userId){AJS.trigger("analyticsEvent",{name:"hipchat.presence.user.unknown",data:{userId:r.userId}})}}catch(s){}}})})}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscoveryData.js' */
define("confluence/hipchat/spacetoroom/hipchat/discovery",[],function(){var a="com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin";return{isSpaceAdmin:function(){return AJS.Meta.get("is-space-admin")===true},hasSpaceConfiguration:function(){return AJS.Meta.get("has-space-config")===true},pluginKey:function(){return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscovery.js' */
require(["jquery","confluence/hipchat/integration/hipchat/discovery","confluence/hipchat/spacetoroom/hipchat/discovery","confluence/hipchat/integration/hipchat/discovery/popup"],function(c,d,b,a){c(function(){var f=AJS.contextPath()+"/spaces/hipchat2.action?key="+encodeURIComponent(AJS.Meta.get("space-key"));var e=c("#space-tools-menu-trigger");if(e.length){a.show({featureKey:"hipChatSpaceIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.space.discovery",template:Confluence.Templates.HipChat.Discovery.spaceIntegrationDialog,name:"hipchat-space-integration-dialog",target:e,shouldShow:function(){return d.isLinked()&&b.isSpaceAdmin()&&!b.hasSpaceConfiguration()},onAccept:function(){window.location.assign(f)},fixed:true});a.show({featureKey:"hipChatServerIntegration",pluginKey:b.pluginKey(),analytics:"notifications.hipchat.space.link",template:Confluence.Templates.HipChat.Discovery.spaceLinkDialog,name:"hipchat-space-link-dialog",target:e,shouldShow:function(){return !d.isLinked()&&d.isConditionsMet()&&!d.isAdmin()&&b.isSpaceAdmin()},onAccept:function(){window.location.assign(f)},fixed:true})}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:hipChatSpaceDiscovery', location = 'discovery/spacetoroom/spaceDiscovery.soy' */
// This file was automatically generated from spaceDiscovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.HipChat.Discovery.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.HipChat == 'undefined') { Confluence.Templates.HipChat = {}; }
if (typeof Confluence.Templates.HipChat.Discovery == 'undefined') { Confluence.Templates.HipChat.Discovery = {}; }


Confluence.Templates.HipChat.Discovery.spaceIntegrationDialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Send messages to a Hipchat room') + '</h2><p>' + soy.$$escapeHtml('Send notifications for new pages, blog posts or space changes directly to a room in Hipchat.') + '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">' + soy.$$escapeHtml('Add Hipchat notifications') + '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">' + soy.$$escapeHtml('Not now') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.HipChat.Discovery.spaceIntegrationDialog.soyTemplateName = 'Confluence.Templates.HipChat.Discovery.spaceIntegrationDialog';
}


Confluence.Templates.HipChat.Discovery.spaceLinkDialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Connect your Confluence site to Hipchat') + '</h2><p>' + soy.$$escapeHtml('Set up and send notifications to Hipchat rooms.') + '</p><br/><button class="aui-button" id="hipchat-integration-discovery-open">' + soy.$$escapeHtml('Integrate with Hipchat') + '</button><a href="#" style="padding-left: 20px" id="hipchat-integration-discovery-dismiss">' + soy.$$escapeHtml('Not now') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.HipChat.Discovery.spaceLinkDialog.soyTemplateName = 'Confluence.Templates.HipChat.Discovery.spaceLinkDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:initialise-metrics-collection', location = '/js/initialise-metrics.js' */
define("collaborative-editing-initialise-metrics-collection",["confluence/legacy"],function(b){var a=function(){var c="confluence.editor.quickedit.loading.times";var d={"confluence.editor":true,"confluence.editor.preload":true,"confluence.editor.quick.fetchContent":true,"confluence.editor.tinymce":true,"confluence.editor.synchrony":true,"confluence.editor.synchrony.CR":true,"confluence.editor.synchrony.connect":true,"confluence.editor.synchrony.deps":true,"confluence.editor.synchrony.init":true,"confluence.editor.synchrony.jsLoad":true,"confluence.editor.synchrony.snapshot":true,"confluence.editor.synchrony.unmarshal":true};var e={"confluence.editor.synchrony.connect":true,};if(b.registerPerformanceSession){b.registerPerformanceSession(c,d,e)}};return a});require("confluence/module-exporter").safeRequire("collaborative-editing-initialise-metrics-collection",function(a){a()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:blueprint-first-time-tooltip-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/first-time-tooptip.js' */
AJS.bind("sidebar.finished-loading",function(){var a=AJS.Meta.get("blueprint-index-popup-key");AJS.debug("Index key for "+a);if(a){Confluence.Blueprint.showIndexPagePopup(a)}});Confluence.Blueprint=AJS.$.extend(Confluence.Blueprint,{showIndexPagePopup:function(b){var d=function(i){return function(l,j,k){l.html(Confluence.Templates.Blueprints.sidebarIndexPagePopup({indexPageTitle:i.toLowerCase()}));k()}};var a=AJS.$(AJS.$("li.blueprint."+b)[0]);var h=a.text();var g=AJS.$(".icon",a);var f="blueprintIndexSidebarPopup";var c=AJS.InlineDialog(g.is(":visible")?g:AJS.$(".acs-nav-sections .quick-links-section"),f,d(h),{addActiveClass:false,hideDelay:null,noBind:true});AJS.$(document).bind("showLayer",function(i){var j=f+".inline-dialog-check";AJS.$("body").unbind("click."+j)});c.show();var e=function(i){AJS.$(document).on("click","#dismiss-index-popup",function(){i.hide();return false})}(c);AJS.bind("quickedit.success",function(){c.hide()})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:blueprint-first-time-tooltip-resources', location = 'com/atlassian/confluence/plugins/createcontent/soy/sidebar-index-page-popup.soy' */
// This file was automatically generated from sidebar-index-page-popup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Blueprints.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Blueprints == 'undefined') { Confluence.Templates.Blueprints = {}; }


Confluence.Templates.Blueprints.sidebarIndexPagePopup = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(AJS.format('Find your {0} here',opt_data.indexPageTitle)) + '</h2><p>' + soy.$$escapeHtml(AJS.format('You\x27\x27ve created a {0} page. A shortcut in your sidebar has been added where you can find other {0} in this space.',opt_data.indexPageTitle)) + '</p><br/><form>' + aui.buttons.button({text: 'Dismiss', id: 'dismiss-index-popup'}) + '</form>';
};
if (goog.DEBUG) {
  Confluence.Templates.Blueprints.sidebarIndexPagePopup.soyTemplateName = 'Confluence.Templates.Blueprints.sidebarIndexPagePopup';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/create-from-template-macro.js' */
AJS.toInit(function(b){var a=b(".create-from-template-button");a.each(function(){var d=b(this);if(d.attr("aria-disabled")=="true"){var c={live:true,gravity:"n",title:"data-tooltip",delayIn:250,delayOut:0};d.tooltip(c)}else{d.click(function(){d.addClass("launching-dialog");Confluence.Blueprint.loadDialogAndOpenTemplate(d.data());return false})}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/soy/create-from-template-macro.soy' */
// This file was automatically generated from create-from-template-macro.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Blueprints.CreateFromTemplate.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Blueprints == 'undefined') { Confluence.Templates.Blueprints = {}; }
if (typeof Confluence.Templates.Blueprints.CreateFromTemplate == 'undefined') { Confluence.Templates.Blueprints.CreateFromTemplate = {}; }


Confluence.Templates.Blueprints.CreateFromTemplate.macroTemplate = function(opt_data, opt_ignored) {
  return '<a class=\'aui-button create-from-template-button\'' + ((! opt_data.hasCreatePermission) ? 'aria-disabled=\'true\' data-tooltip="' + soy.$$escapeHtml('Sorry, you don\x27t have permission to create content. Contact your space administrator to request access.') + '"' : '') + 'data-space-key=\'' + soy.$$escapeHtml(opt_data.spaceKey) + '\' href=\'' + soy.$$escapeHtml(opt_data.createContentUrl) + '\'' + ((opt_data.title) ? 'data-title=\'' + soy.$$escapeHtml(opt_data.title) + '\'' : '') + ((opt_data.templateId) ? 'data-template-id=\'' + soy.$$escapeHtml(opt_data.templateId) + '\'' : '') + ((opt_data.contentBlueprintId) ? 'data-content-blueprint-id=\'' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '\'' : '') + '>' + soy.$$escapeHtml(opt_data.buttonLabel) + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.Blueprints.CreateFromTemplate.macroTemplate.soyTemplateName = 'Confluence.Templates.Blueprints.CreateFromTemplate.macroTemplate';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.contributors:contributors-web-resources', location = 'com/atlassian/confluence/contributors/scripts/contributors.js' */
require(["ajs","underscore"],function(a,b){a.toInit(function(c){c("div.contributors-macro-ajax-container").each(function(){var e=c(this);var d=c.parseJSON(b.unescape(e.find(".contributors-macro-parameters")[0].innerHTML));e.text("Generating contributors information...");c.ajax({dataType:"json",url:Confluence.getContextPath()+"/rest/com.atlassian.confluence.contributors/1.0/contributors",data:d,success:function(f){if(f.errorMessage){e.text(f.errorMessage)}else{e.html(Confluence.ContributorsMacro.renderContent(f));e.find(".show-hidden-contributors").click(function(){e.find(".hidden-contributor").removeClass("hidden");c(this).parent().remove();return false})}},error:function(h,f,g){e.text("Failed to retrieve contributors information"+": "+g)}})})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.contributors:contributors-web-resources', location = 'com/atlassian/confluence/contributors/templates/contributors-macro.soy' */
// This file was automatically generated from contributors-macro.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.ContributorsMacro.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.ContributorsMacro == 'undefined') { Confluence.ContributorsMacro = {}; }


Confluence.ContributorsMacro.ajaxContainer = function(opt_data, opt_ignored) {
  return '<div class="contributors-macro-ajax-container"><div style="display; none;" class="contributors-macro-parameters">' + soy.$$escapeHtml(opt_data.macroParameters) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.ajaxContainer.soyTemplateName = 'Confluence.ContributorsMacro.ajaxContainer';
}


Confluence.ContributorsMacro.renderContent = function(opt_data, opt_ignored) {
  return '<div class="plugin-contributors">' + ((opt_data.layoutStyle == 'FLAT') ? Confluence.ContributorsMacro.flatLayout(opt_data) : (opt_data.layoutStyle == 'LIST') ? Confluence.ContributorsMacro.listLayout(opt_data) : '<span>Unknown layout style</span>') + '</div>';
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.renderContent.soyTemplateName = 'Confluence.ContributorsMacro.renderContent';
}


Confluence.ContributorsMacro.flatLayout = function(opt_data, opt_ignored) {
  return '<div class="plugin-contributors"><span><span>' + Confluence.ContributorsMacro.flatContributorsList({contributors: opt_data.visibleContributors, showCount: opt_data.showCount, showTime: opt_data.showTime}) + ((opt_data.hiddenContributors.length > 0) ? ',' : '') + '</span>' + ((opt_data.hiddenContributors.length > 0) ? '<span class="hidden hidden-contributor">' + Confluence.ContributorsMacro.flatContributorsList({contributors: opt_data.hiddenContributors, showCount: opt_data.showCount, showTime: opt_data.showTime}) + '</span><span><a href="#" class="show-hidden-contributors" title="' + soy.$$escapeHtml(AJS.format('{0} more...',opt_data.hiddenContributors.length)) + '">...</a></span>' : '') + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.flatLayout.soyTemplateName = 'Confluence.ContributorsMacro.flatLayout';
}


Confluence.ContributorsMacro.listLayout = function(opt_data, opt_ignored) {
  var output = '<div class="plugin-contributors"><ul class="contributors-list">';
  var contributorList39 = opt_data.visibleContributors;
  var contributorListLen39 = contributorList39.length;
  for (var contributorIndex39 = 0; contributorIndex39 < contributorListLen39; contributorIndex39++) {
    var contributorData39 = contributorList39[contributorIndex39];
    output += '<li>' + Confluence.ContributorsMacro.contributor({contributor: contributorData39, showCount: opt_data.showCount, showTime: opt_data.showTime}) + '</li>';
  }
  if (opt_data.hiddenContributors.length > 0) {
    output += '<li><a href="#" class="show-hidden-contributors" title="' + soy.$$escapeHtml(AJS.format('{0} more...',opt_data.hiddenContributors.length)) + '">...</a></li>';
    var contributorList52 = opt_data.hiddenContributors;
    var contributorListLen52 = contributorList52.length;
    for (var contributorIndex52 = 0; contributorIndex52 < contributorListLen52; contributorIndex52++) {
      var contributorData52 = contributorList52[contributorIndex52];
      output += '<li class="hidden hidden-contributor">' + Confluence.ContributorsMacro.contributor({contributor: contributorData52, showCount: opt_data.showCount, showTime: opt_data.showTime}) + '</li>';
    }
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.listLayout.soyTemplateName = 'Confluence.ContributorsMacro.listLayout';
}


Confluence.ContributorsMacro.flatContributorsList = function(opt_data, opt_ignored) {
  var output = '';
  var contributorList62 = opt_data.contributors;
  var contributorListLen62 = contributorList62.length;
  for (var contributorIndex62 = 0; contributorIndex62 < contributorListLen62; contributorIndex62++) {
    var contributorData62 = contributorList62[contributorIndex62];
    output += ((! (contributorIndex62 == 0)) ? ',' : '') + Confluence.ContributorsMacro.contributor({contributor: contributorData62, showCount: opt_data.showCount, showTime: opt_data.showTime});
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.flatContributorsList.soyTemplateName = 'Confluence.ContributorsMacro.flatContributorsList';
}


Confluence.ContributorsMacro.contributor = function(opt_data, opt_ignored) {
  return Confluence.Templates.User.usernameLink({username: opt_data.contributor.idString, fullName: opt_data.contributor.fullNameString, canView: false}) + ' ' + ((opt_data.showCount) ? soy.$$escapeHtml(opt_data.contributor.totalCount) : '') + ' ' + ((opt_data.showTime) ? '(' + soy.$$escapeHtml(opt_data.contributor.relativeLastActiveTimeStr) + ')' : '');
};
if (goog.DEBUG) {
  Confluence.ContributorsMacro.contributor.soyTemplateName = 'Confluence.ContributorsMacro.contributor';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Template.Util.Issue.Status.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issueStatus) ? '<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="' + soy.$$escapeHtml('No issue status information was provided') + '"></span>' : (opt_data.issueStatus.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatus(opt_data) : JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}));
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatusResolver.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatusResolver';
}


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" width="16" height="16" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + ((opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '') + '" class="jira-issue-status-icon">' + ((! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.iconStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.iconStatus';
}


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth});
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatus';
}


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = '<span class="jira-issue-status-tooltip-title">' + soy.$$escapeHtml(opt_data.name) + '</span>' + ((opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  output += '<span class=" jira-issue-status-lozenge aui-lozenge ' + JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data) + ((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '') + ((opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '') + ' jira-issue-status-lozenge-max-width-' + soy.$$escapeHtml(maxWidth__soy46) + '" data-tooltip="' + soy.$$escapeHtml(tooltipContent__soy47) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozenge.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozenge';
}


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_ignored) {
  return 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray') + ' ' + ((opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozengeClasses.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozengeClasses';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = 'soy/jira-metadata.soy' */
// This file was automatically generated from jira-metadata.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Metadata.Jira.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Metadata == 'undefined') { Confluence.Templates.Metadata = {}; }
if (typeof Confluence.Templates.Metadata.Jira == 'undefined') { Confluence.Templates.Metadata.Jira = {}; }


Confluence.Templates.Metadata.Jira.metadata = function(opt_data, opt_ignored) {
  var output = '<div id="jira-metadata-dialog" class="rendered-content"><h2 class="title">' + soy.$$escapeHtml('Jira links') + '</h2><div class="items-section">';
  var groupList6 = opt_data.groups;
  var groupListLen6 = groupList6.length;
  for (var groupIndex6 = 0; groupIndex6 < groupListLen6; groupIndex6++) {
    var groupData6 = groupList6[groupIndex6];
    if (groupData6.items.length) {
      switch (groupData6.type) {
        case 'ISSUES':
          output += Confluence.Templates.Metadata.Jira.renderGroup({items: groupData6.items, headingText: 'Issues', type: groupData6.type, links: groupData6.links});
          break;
        case 'SPRINTS':
          output += Confluence.Templates.Metadata.Jira.renderGroup({items: groupData6.items, headingText: 'Sprints', type: groupData6.type, links: groupData6.links});
          break;
        case 'VERSIONS':
          output += Confluence.Templates.Metadata.Jira.renderGroup({items: groupData6.items, headingText: 'Versions', type: groupData6.type, links: groupData6.links});
          break;
        case 'EPICS':
          output += Confluence.Templates.Metadata.Jira.renderGroup({items: groupData6.items, headingText: 'Epics', type: groupData6.type, links: groupData6.links});
          break;
      }
    }
  }
  output += '</div>' + Confluence.Templates.Metadata.Jira.renderAuthPrompts({appLinks: opt_data.unauthorisedAppLinks}) + Confluence.Templates.Metadata.Jira.renderJiraErrors(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.metadata.soyTemplateName = 'Confluence.Templates.Metadata.Jira.metadata';
}


Confluence.Templates.Metadata.Jira.featureDiscovery = function(opt_data, opt_ignored) {
  return '<div id="jira-metadata-feature-discovery"><h2>' + soy.$$escapeHtml('View related Jira items here') + '</h2><p>' + soy.$$escapeHtml('Now you can see which epics, sprints, versions and issues relate to this page.') + '</p><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner">' + aui.buttons.button({text: 'Show me', extraClasses: 'showme'}) + aui.buttons.button({text: 'Don\x27t show again', type: 'link', extraClasses: 'close'}) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.featureDiscovery.soyTemplateName = 'Confluence.Templates.Metadata.Jira.featureDiscovery';
}


Confluence.Templates.Metadata.Jira.nometadata = function(opt_data, opt_ignored) {
  return '<div id="jira-metadata-dialog" class="rendered-content">' + aui.message.warning({content: '<p>' + soy.$$escapeHtml('Jira links cannot be displayed. Either you do not have correct Jira permissions or the links have been removed.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.nometadata.soyTemplateName = 'Confluence.Templates.Metadata.Jira.nometadata';
}


Confluence.Templates.Metadata.Jira.renderAuthPrompts = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.appLinks.length) {
    var param66 = '';
    if (opt_data.appLinks.length == 1) {
      var appLink__soy69 = opt_data.appLinks[0];
      param66 += '<p>' + soy.$$filterNoAutoescape(AJS.format('{0}Login \x26amp; Approve{1} to retrieve data from {2}','<a class="jira-metadata-auth-link" href="#" data-href="' + appLink__soy69.authorisationUrl + '">','</a>',appLink__soy69.htmlSafeName)) + '</p>';
    } else {
      param66 += '<p>' + soy.$$escapeHtml('Authenticate to retrieve data from the following instances:') + '</p>';
      var appLinkList78 = opt_data.appLinks;
      var appLinkListLen78 = appLinkList78.length;
      for (var appLinkIndex78 = 0; appLinkIndex78 < appLinkListLen78; appLinkIndex78++) {
        var appLinkData78 = appLinkList78[appLinkIndex78];
        param66 += '<div><a class="jira-metadata-auth-link" href="#" data-href="' + soy.$$escapeHtml(appLinkData78.authorisationUrl) + '">' + soy.$$escapeHtml(appLinkData78.name) + '</a></div>';
      }
    }
    output += aui.message.hint({content: param66});
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.renderAuthPrompts.soyTemplateName = 'Confluence.Templates.Metadata.Jira.renderAuthPrompts';
}


Confluence.Templates.Metadata.Jira.renderGroup = function(opt_data, opt_ignored) {
  var output = '<div class="jira-metadata-section ' + soy.$$escapeHtml(opt_data.type) + '-section"><div class="section-label"><span class="icon"></span><span>' + soy.$$escapeHtml(opt_data.headingText) + '</span></div><ul class="jira-metadata-list jira-' + soy.$$escapeHtml(opt_data.type) + '-list">';
  var itemList94 = opt_data.items;
  var itemListLen94 = itemList94.length;
  for (var itemIndex94 = 0; itemIndex94 < itemListLen94; itemIndex94++) {
    var itemData94 = itemList94[itemIndex94];
    output += '<li class="jira-metadata-item"><span class="item-label"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/jira-metadata/redirect?u=' + soy.$$escapeUri(itemData94.url) + '&t=' + soy.$$escapeHtml(opt_data.type) + '" title="' + soy.$$escapeHtml(itemData94.name) + '">' + soy.$$escapeHtml(itemData94.name) + '</a>' + ((itemData94.status) ? '&nbsp;' + ((itemData94.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: itemData94.status, isSubtle: true}) : '<span class="item-status">(' + soy.$$escapeHtml(itemData94.status.name) + ')</span>') : '') + '</span>' + ((itemData94.description != '') ? '<span class="item-subtext">' + soy.$$escapeHtml(itemData94.description) + '</span>' : '') + '</li>';
  }
  output += '</ul><ul class="jira-metadata-list ' + soy.$$escapeHtml(opt_data.type) + '-more-link">';
  var linkList130 = opt_data.links;
  var linkListLen130 = linkList130.length;
  for (var linkIndex130 = 0; linkIndex130 < linkListLen130; linkIndex130++) {
    var linkData130 = linkList130[linkIndex130];
    output += '<li class="jira-metadata-item"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/jira-metadata/redirect?u=' + soy.$$escapeUri(linkData130.url) + '&t=' + soy.$$escapeHtml(opt_data.type) + '&more">' + soy.$$escapeHtml(AJS.format('View {0} more in {1}',linkData130.numItems,linkData130.appName)) + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.renderGroup.soyTemplateName = 'Confluence.Templates.Metadata.Jira.renderGroup';
}


Confluence.Templates.Metadata.Jira.loadingMetadata = function(opt_data, opt_ignored) {
  return '<div id="jira-metadata-dialog"><h2 class="title">' + soy.$$escapeHtml('Jira links') + '</h2><div class="spinner-container"><div class="spinner"></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.loadingMetadata.soyTemplateName = 'Confluence.Templates.Metadata.Jira.loadingMetadata';
}


Confluence.Templates.Metadata.Jira.renderJiraErrors = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length == 1) {
    var error__soy150 = opt_data.errors[0];
    output += aui.message.warning({content: '<p>' + soy.$$escapeHtml('Unable to retrieve Jira metadata.') + ' ' + soy.$$escapeHtml(error__soy150.errorMessage) + '</p>'});
  } else if (opt_data.errors.length > 1) {
    var param159 = '<p>' + soy.$$escapeHtml('Unable to retrieve Jira metadata. The following errors occurred:') + '</p><ul>';
    var errorList163 = opt_data.errors;
    var errorListLen163 = errorList163.length;
    for (var errorIndex163 = 0; errorIndex163 < errorListLen163; errorIndex163++) {
      var errorData163 = errorList163[errorIndex163];
      param159 += '<li>' + soy.$$escapeHtml(errorData163.errorMessage) + '</li>';
    }
    param159 += '</ul>';
    output += aui.message.warning({content: param159});
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.renderJiraErrors.soyTemplateName = 'Confluence.Templates.Metadata.Jira.renderJiraErrors';
}


Confluence.Templates.Metadata.Jira.unknownError = function(opt_data, opt_ignored) {
  return '<div id="jira-metadata-dialog" class="rendered-content">' + aui.message.warning({content: '<p>' + soy.$$escapeHtml('Unable to retrieve Jira metadata. Could not connect to Confluence') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Metadata.Jira.unknownError.soyTemplateName = 'Confluence.Templates.Metadata.Jira.unknownError';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = '/js/jira-metadata.js' */
AJS.toInit(function(h){var i="com.atlassian.confluence.plugins.confluence-jira-metadata";var s=false;var o;var l;var q="jira-metadata-dialog";var g=h("#content-metadata-jira");var t;var e="jira-metadata-discovery";var r=AJS.Meta.get("jira-metadata-count");var k="linked-issues-dropdown";if(r>0){p(r,AJS.Meta.get("jira-metadata-count-incomplete"))}else{if(r==-1){h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata/aggregate?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",cache:false,success:function(u){if(u.count>0){p(u.count,u.incomplete)}}})}}function p(v,u){f(v,u);g.removeClass("hidden");if(b()){o=AJS.InlineDialog(g,q,function(x,w,y){AJS.trigger("analytics",{name:"confluence.jira.metadata.expanded"});if(!l||!s){l=x;y();a(x)}else{y()}return false},{hideDelay:null});g.click(function(){if(h("#"+q).is(":visible")){o.hide()}})}if(g&&j()){m();g.one("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k)})}}function f(w,v){if(!v){var u=h("<span/>").addClass("aui-icon aui-icon-small aui-iconfont-jira");h("#content-metadata-jira").text(w==1?"1 Jira link":AJS.format("{0} Jira links",w)).prepend(u)}}function b(){return !g.attr("href")}function m(){t=AJS.InlineDialog(g,e,function(v,u,w){v.html(Confluence.Templates.Metadata.Jira.featureDiscovery());v.find(".showme").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide();o.show()});v.find(".close").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide()});w()},{noBind:true,closeOthers:false,hideDelay:null});t.show();Confluence.FeatureDiscovery.forPlugin(i).addDiscoveryView(k)}function j(){return !AJS.Meta.get("blueprint-index-popup-key")&&Confluence.FeatureDiscovery.forPlugin(i).shouldShow(k)}function a(){d();l.html(Confluence.Templates.Metadata.Jira.loadingMetadata());l.find(".spinner").spin("medium");h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",error:function(u){c();l.html(Confluence.Templates.Metadata.Jira.unknownError())},success:function(u){c();s=true;f(u.count,false);var v;if(u.count===0&&!(u.unauthorisedAppLinks&&u.unauthorisedAppLinks.length>0)&&u.errors.length==0){AJS.trigger("analytics",{name:"confluence.jira.metadata.error.no-metadata"});v=Confluence.Templates.Metadata.Jira.nometadata()}else{v=Confluence.Templates.Metadata.Jira.metadata(u)}l.html(v);setTimeout(function(){l.find("#"+q).addClass("show")},0);n()},complete:function(){h("#"+q+" .icon-close").click(function(u){u.stopPropagation();h(this).closest(".closable").remove()})}})}function n(){h(".jira-metadata-auth-link").click(function(u){u.preventDefault();AppLinks.authenticateRemoteCredentials(h(this).data("href"),a,function(){})})}function d(){if(l&&l.height()>0){l.css("height",l.height())}}function c(){l&&l.css("height","")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-loader', location = 'com/atlassian/confluence/plugins/createjiracontent/js/page-helper.js' */
AJS.toInit(function(d){var c="com.atlassian.confluence.plugins.confluence-jira-content:create-Jira-issue-summary";var g="wr!com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources";var b="Loading\u2026";var e=false;var j=d("div.jira-issues-created");if(j.length>0){if(window.history&&window.history.replaceState){var h=window.location.href;var i=h.substr(0,h.indexOf("JIRAIssuesCreated")-1);window.history.replaceState({},document.title,i)}var a=j.find("#jira-content-message-panel-error-warning");var f=j.find("#jira-content-message-panel-view-more-link");f.click(function(k){k.preventDefault();f.hide();a.show()});if(j.hasClass("success")){setTimeout(function(){j.hide()},10000)}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(c,{onClick:function(l){var k;if(!e){var m=function(o,n,p){o.html('<span class="aui-icon aui-icon-wait"></span> '+b);p();return false};k=d("<div>");Confluence.CreateJiraContent.Dialogs.appendDialogTarget(l.area.average,k);dialog=Confluence.ScrollingInlineDialog(k,"create-issue-loading-dialog",m,{});dialog.show();e=true}WRM.require(g).done(function(){if(Confluence.CreateJiraContent.FeatureDiscovery.shouldShowFeatureDiscovery()){Confluence.CreateJiraContent.Dialogs.showFeatureDiscoveryDialog(l)}else{Confluence.CreateJiraContent.Dialogs.showCreateIssueDialog(l)}if(typeof k!=="undefined"){k.remove()}})},shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY});Confluence.CreateJiraContent={Dialogs:{}};Confluence.CreateJiraContent.Dialogs.appendDialogTarget=function(l,k){Confluence.DocThemeUtils.appendAbsolutePositionedElement(k);k.css({top:l.top,height:l.height,left:l.left,width:l.width,"z-index":-9999,position:"absolute"}).addClass("confluence-jira-content-dialog-target")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:soy-resources', location = 'soy/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Sidebar.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Sidebar == 'undefined') { Confluence.Templates.Sidebar = {}; }


Confluence.Templates.Sidebar.headerStyles = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.sidebarWidth) ? '<style>.ia-fixed-sidebar, .ia-splitter-left {width: ' + soy.$$escapeHtml(opt_data.sidebarWidth) + 'px;}.theme-default .ia-splitter #main {margin-left: ' + soy.$$escapeHtml(opt_data.sidebarWidth) + 'px;}.ia-fixed-sidebar {visibility: hidden;}</style>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.headerStyles.soyTemplateName = 'Confluence.Templates.Sidebar.headerStyles';
}


Confluence.Templates.Sidebar.sidebar = function(opt_data, opt_ignored) {
  return '<div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="' + soy.$$escapeHtml('Edit space details') + '"><div class="avatar"><div class="space-logo" data-key="' + soy.$$escapeHtml(opt_data.space.key) + '" data-name="' + soy.$$escapeHtml(opt_data.space.name) + '" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="' + soy.$$escapeHtml(opt_data.space.homeUrl) + '" title="' + soy.$$escapeHtml(opt_data.space.name) + '"><img class="avatar-img" src="' + soy.$$escapeHtml(opt_data.space.logoUrl) + '" alt="' + soy.$$escapeHtml(opt_data.space.name) + '"></a></div></div></div></div><div class="space-information-container"><div class="name"><a href="' + soy.$$escapeHtml(opt_data.space.homeUrl) + '" title="' + soy.$$escapeHtml(opt_data.space.name) + '">' + soy.$$escapeHtml(opt_data.space.name) + '</a></div><div class="flyout-handle icon aui-icon aui-icon-small aui-iconfont-edit"></div>' + ((opt_data.hasFavouriteSpacePermission || opt_data.accessMode == 'READ_ONLY') ? '<div class="favourite-space-icon ' + ((opt_data.accessMode == 'READ_ONLY') ? 'disabled' : '') + '">' + Confluence.Templates.Sidebar.renderFavouriteSpace(opt_data) + '</div>' : '') + '</div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="' + soy.$$escapeHtml(opt_data.hasCreatePermission) + '" data-quick-links-state="' + soy.$$escapeHtml(opt_data.quickLinksState) + '" data-page-tree-state="' + soy.$$escapeHtml(opt_data.pageTreeState) + '" data-nav-type="' + soy.$$escapeHtml(opt_data.navType) + '">' + Confluence.Templates.Sidebar.renderLinks(opt_data) + '</div></div>' + ((opt_data.contextualNav) ? Confluence.Templates.Sidebar.contextualNav(opt_data) : '') + '</div><div class="hidden"><a href="' + soy.$$escapeHtml(opt_data.space.browseSpaceUrl) + '" id="space-pages-link"></a><script type="text/x-template" title="logo-config-content"><h2>' + soy.$$escapeHtml('Space Details') + '</h2><div class="personal-space-logo-hint">' + soy.$$filterNoAutoescape(AJS.format('Your profile picture is used as the logo for your personal space. \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eChange your profile picture\x3c/a\x3e.',"" + '/users/profile/editmyprofilepicture.action')) + '</div><\/script></div></div>' + Confluence.Templates.Sidebar.renderSpaceToolsSection({advancedLinks: opt_data.advancedLinks, hasConfigurePermission: opt_data.hasConfigurePermission, currentlyViewed: opt_data.collectorToHighlight == 'spacebar-advanced', pageTreeState: opt_data.pageTreeState});
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.sidebar.soyTemplateName = 'Confluence.Templates.Sidebar.sidebar';
}


Confluence.Templates.Sidebar.renderFavouriteSpace = function(opt_data, opt_ignored) {
  return '<button title="' + soy.$$escapeHtml('Add to my spaces') + '" id="space-favourite-add" class="space-favourite aui-icon aui-icon-small aui-iconfont-unstar"></button><button class="' + ((! opt_data.isFavouriteSpace) ? ' space-favourite-hidden ' : '') + ' space-favourite aui-icon aui-icon-small aui-iconfont-star" id="space-favourite-remove" title="' + soy.$$escapeHtml('Remove from my spaces') + '"></button>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.renderFavouriteSpace.soyTemplateName = 'Confluence.Templates.Sidebar.renderFavouriteSpace';
}


Confluence.Templates.Sidebar.renderLinks = function(opt_data, opt_ignored) {
  return '<div class="acs-nav-sections">' + ((opt_data.mainLinks.length) ? Confluence.Templates.Sidebar.renderLinksSection({links: opt_data.mainLinks, sectionClass: 'main-links-section', collectorToHighlight: opt_data.collectorToHighlight}) : '') + ((opt_data.quickLinksState != 'hide') ? '<div class="quick-links-wrapper">' + ((opt_data.quickLinks.length) ? '<h5 class="ia-quick-links-header-title">' + soy.$$escapeHtml('Space shortcuts') + '</h5>' + Confluence.Templates.Sidebar.renderLinksSection({links: opt_data.quickLinks, sectionClass: 'quick-links-section tipsy-enabled', collectorToHighlight: null}) : (opt_data.hasConfigurePermission) ? '<h5 class="ia-quick-links-header-title">' + soy.$$escapeHtml('Space shortcuts') + '</h5><p class="tip">' + soy.$$filterNoAutoescape(AJS.format('Here you can add shortcut links to the most important content for your team or project. \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eConfigure sidebar\x3c/a\x3e.','','configure-sidebar')) + '</p>' : '') + '</div>' : '') + ((opt_data.hasSidebarCustomisation) ? Confluence.Templates.Sidebar.renderCustomContent(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.renderLinks.soyTemplateName = 'Confluence.Templates.Sidebar.renderLinks';
}


Confluence.Templates.Sidebar.renderCustomContent = function(opt_data, opt_ignored) {
  return '<div class="custom-sidebar"><div class="custom-sidebar-content"><div class="content">' + soy.$$filterNoAutoescape(opt_data.sidebarCustomisation) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.renderCustomContent.soyTemplateName = 'Confluence.Templates.Sidebar.renderCustomContent';
}


Confluence.Templates.Sidebar.renderLinksSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.links.length) {
    output += '<div class="' + soy.$$escapeHtml(opt_data.sectionClass) + ' ' + ((opt_data.highlightSection) ? ' current-section' : '') + '"><ul class="acs-nav-list">';
    var linkList134 = opt_data.links;
    var linkListLen134 = linkList134.length;
    for (var linkIndex134 = 0; linkIndex134 < linkListLen134; linkIndex134++) {
      var linkData134 = linkList134[linkIndex134];
      output += '<li class="acs-nav-item ' + soy.$$escapeHtml(linkData134.styleClass) + ((opt_data.collectorToHighlight && linkData134.collectorKey == opt_data.collectorToHighlight) ? ' current-item' : '') + '"' + ((linkData134.collectorKey) ? ' data-collector-key="' + soy.$$escapeHtml(linkData134.collectorKey) + '"' : '') + '><a class="acs-nav-item-link tipsy-enabled" href="' + soy.$$escapeHtml(linkData134.url) + '" data-collapsed-tooltip="' + soy.$$escapeHtml(linkData134.tooltip) + '">' + ((linkData134.styleClass == 'pinned_attachment') ? '<span class="aui-icon aui-icon-small aui-iconfont-attachment"></span>' : '<span class="icon"></span>') + '<span class="acs-nav-item-label">' + soy.$$escapeHtml(linkData134.title) + '</span></a></li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.renderLinksSection.soyTemplateName = 'Confluence.Templates.Sidebar.renderLinksSection';
}


Confluence.Templates.Sidebar.contextualNav = function(opt_data, opt_ignored) {
  return '<div class="ia-secondary-container tipsy-enabled" data-tree-type="' + ((opt_data.forBlogs) ? 'blogs' : (opt_data.forSettings) ? 'settings' : soy.$$escapeHtml(opt_data.navType)) + '">' + ((opt_data.pageTreeState != 'hide') ? (opt_data.forBlogs) ? '<div class="ia-secondary-header"><h5 class="ia-secondary-header-title blog"><span class="icon"></span><span class="label">' + soy.$$escapeHtml('Blog') + '</span></h5></div><div class="ia-secondary-content">' + Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.contextualNav}) + '</div>' : (opt_data.forSettings) ? '<div class="ia-secondary-header"><h5 class="ia-secondary-header-title settings"><span class="label">' + soy.$$escapeHtml('Advanced') + '</span></h5></div><div class="ia-secondary-content">' + Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.contextualNav}) + '</div>' : (opt_data.navType == 'page-tree') ? '<div class="ia-secondary-header"><h5 class="ia-secondary-header-title page-tree"><span class="icon"></span><span class="label">' + soy.$$escapeHtml('Page tree') + '</span></h5></div>' + ((opt_data.pageTreeEmpty) ? '<p class="tip">' + soy.$$filterNoAutoescape(AJS.format('Get started by adding some pages to this space. \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eCreate page\x3c/a\x3e.',"" + '/pages/createpage.action?spaceKey=' + opt_data.space.key,'page-tree-create-child-page-link')) + '</p>' : '<div class="ia-secondary-content">' + soy.$$filterNoAutoescape(opt_data.contextualNav) + '</div>') : Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav: opt_data.contextualNav, hasCreatePermission: opt_data.hasCreatePermission}) : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.contextualNav.soyTemplateName = 'Confluence.Templates.Sidebar.contextualNav';
}


Confluence.Templates.Sidebar.pagetreeList = function(opt_data, opt_ignored) {
  var output = '<ul class="' + ((opt_data.isSubtree) ? 'ia-subpagetree' : 'ia-pagetree') + '">';
  var itemList216 = opt_data.pagetree;
  var itemListLen216 = itemList216.length;
  for (var itemIndex216 = 0; itemIndex216 < itemListLen216; itemIndex216++) {
    var itemData216 = itemList216[itemIndex216];
    output += Confluence.Templates.Sidebar.pagetreeItem(itemData216);
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.pagetreeList.soyTemplateName = 'Confluence.Templates.Sidebar.pagetreeList';
}


Confluence.Templates.Sidebar.throbber = function(opt_data, opt_ignored) {
  return '<div class="content-container"><div class="throbber-container"><div class="throbber"><div class="spinner"></div><span>' + soy.$$escapeHtml('Loading...') + '</span></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.throbber.soyTemplateName = 'Confluence.Templates.Sidebar.throbber';
}


Confluence.Templates.Sidebar.treeThrobber = function(opt_data, opt_ignored) {
  return '<ul class="ia-subpagetree"><li class="acs-tree-item leaf"><span class="node-title">' + soy.$$escapeHtml('Loading...') + '</span></li></ul>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.treeThrobber.soyTemplateName = 'Confluence.Templates.Sidebar.treeThrobber';
}


Confluence.Templates.Sidebar.pagetreeItem = function(opt_data, opt_ignored) {
  return '<li class="acs-tree-item' + ((opt_data.hasChildren) ? (opt_data.children.length) ? ' opened' : ' closed' : ' leaf') + ((opt_data.groupType) ? ' grouping' : '') + ((opt_data.active) ? ' current-item' : '') + '"' + ((opt_data.pageId) ? ' data-page-id="' + soy.$$escapeHtml(opt_data.pageId) + '"' : '') + ((opt_data.groupType) ? ' data-group-type="' + soy.$$escapeHtml(opt_data.groupType) + '" data-group-value="' + soy.$$escapeHtml(opt_data.groupValue) + '"' : '') + '>' + ((! opt_data.groupType) ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<span class="icon aui-icon aui-icon-small ' + ((opt_data.hasChildren) ? (opt_data.children.length) ? 'aui-iconfont-expanded' : 'aui-iconfont-collapsed' : '') + '"></span><span class="node-title navigation-pseudo-link">' + soy.$$escapeHtml(opt_data.title) + '</span>' + ((! opt_data.groupType) ? '</a>' : '') + ((opt_data.children && opt_data.children.length > 0) ? Confluence.Templates.Sidebar.pagetreeList({pagetree: opt_data.children, isSubtree: true}) : '') + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.pagetreeItem.soyTemplateName = 'Confluence.Templates.Sidebar.pagetreeItem';
}


Confluence.Templates.Sidebar.renderSpaceToolsSection = function(opt_data, opt_ignored) {
  var output = '<div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden">';
  var linkList286 = opt_data.advancedLinks;
  var linkListLen286 = linkList286.length;
  for (var linkIndex286 = 0; linkIndex286 < linkListLen286; linkIndex286++) {
    var linkData286 = linkList286[linkIndex286];
    output += '<div data-label="' + soy.$$escapeHtml(linkData286.title) + '" data-class="' + soy.$$escapeHtml(linkData286.styleClass) + '" data-href="' + soy.$$escapeHtml(linkData286.url) + '">' + soy.$$escapeHtml(linkData286.title) + '</div>';
  }
  output += ((opt_data.hasConfigurePermission) ? '<div data-label="' + soy.$$escapeHtml('Configure sidebar') + '" data-class="configure-sidebar" data-href="">' + soy.$$escapeHtml('Configure sidebar') + '</div>' : '') + '</div>' + aui.dropdown2.trigger({menu: {id: 'space-tools-menu'}, id: 'space-tools-menu-trigger', tagName: 'button', extraClasses: 'aui-button aui-button-subtle tipsy-enabled aui-dropdown2-trigger-arrowless ' + ((opt_data.currentlyViewed) ? ' current-item' : ''), content: aui.icons.icon({useIconFont: true, icon: 'configure', accessibilityText: 'Configure'}) + '<span class="aui-button-label">' + soy.$$escapeHtml('Space tools') + '</span>'}) + aui.dropdown2.contents({id: 'space-tools-menu', extraClasses: 'aui-style-default space-tools-dropdown', extraAttributes: {'data-aui-alignment': 'top left'}}) + '<a class="expand-collapse-trigger aui-icon aui-icon-small ' + ((opt_data.pageTreeState == 'hide') ? 'aui-iconfont-chevron-double-right' : 'aui-iconfont-chevron-double-left') + '"></a></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.renderSpaceToolsSection.soyTemplateName = 'Confluence.Templates.Sidebar.renderSpaceToolsSection';
}


Confluence.Templates.Sidebar.spaceToolsMenu = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.isAuiFiveSeven) {
    output += '<div class="space-tools-menu"><div class="aui-dropdown2-section"><ul class="space-tools-navigation">';
    var linkList337 = opt_data.spaceToolLinks;
    var linkListLen337 = linkList337.length;
    for (var linkIndex337 = 0; linkIndex337 < linkListLen337; linkIndex337++) {
      var linkData337 = linkList337[linkIndex337];
      output += '<li><a href="' + soy.$$escapeHtml(linkData337.href) + '" title="' + soy.$$escapeHtml(linkData337.label) + '">' + soy.$$escapeHtml(linkData337.label) + '</a></li>';
    }
    output += '</ul></div>';
    if (opt_data.spaceLinks.length > 0) {
      output += '<div class="aui-dropdown2-section"><ul class="space-operations">';
      var linkList350 = opt_data.spaceLinks;
      var linkListLen350 = linkList350.length;
      for (var linkIndex350 = 0; linkIndex350 < linkListLen350; linkIndex350++) {
        var linkData350 = linkList350[linkIndex350];
        output += '<li><a class="' + soy.$$escapeHtml(linkData350.className) + '" href="' + soy.$$escapeHtml(linkData350.href) + '" title="' + soy.$$escapeHtml(linkData350.label) + '">' + soy.$$escapeHtml(linkData350.label) + '</a></li>';
      }
      output += '</ul></div>';
    }
    output += '</div>';
  } else {
    output += aui.dropdown2.itemGroup({isTruncated: true, items: opt_data.spaceToolLinks, extraClasses: 'space-tools-navigation'}) + ((opt_data.spaceLinks.length > 0) ? aui.dropdown2.itemGroup({isTruncated: true, items: opt_data.spaceLinks, extraClasses: 'space-operations'}) : '');
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.spaceToolsMenu.soyTemplateName = 'Confluence.Templates.Sidebar.spaceToolsMenu';
}


Confluence.Templates.Sidebar.configure = function(opt_data, opt_ignored) {
  return '<div class="acs-nav-sections"><table id="acs-nav-list-main" class="acs-nav-list"></table><div class="acs-nav-list-quick-section' + ((opt_data.quickLinksState == 'hide') ? ' hidden-section' : '') + '"><div class="quick-links-header"><h5>' + soy.$$escapeHtml('Space shortcuts') + '</h5><a href="#" class="aui-icon aui-icon-small toggle-link ' + ((opt_data.quickLinksState == 'hide') ? 'aui-iconfont-add-circle' : 'aui-iconfont-plan-disabled') + '" data-tooltip="' + soy.$$escapeHtml('Hide/Show space shortcuts') + '"/></div><table id="acs-nav-list-quick" class="acs-nav-list"></table><p class="tip">' + soy.$$escapeHtml('Click \x22Add link\x22 to add links to the sidebar.') + '</p><a class="acs-add-link" href="#"><span class="aui-icon aui-icon-small aui-iconfont-add-small"></span><span class="label">' + soy.$$escapeHtml('Add link') + '</span></a></div>' + ((opt_data.hasSidebarCustomisation) ? '<p class="tip">' + soy.$$filterNoAutoescape(AJS.format('You can continue editing your customized sidebar in the space admin. \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eGo to space admin\x3c/a\x3e.',opt_data.customContentAdminLink,'custom-sidebar-tip')) + '</p>' + Confluence.Templates.Sidebar.renderCustomContent(opt_data) : '') + '<div class="acs-nav-list-page-tree-section' + ((opt_data.pageTreeState == 'hide') ? ' hidden-section' : '') + '"><div class="page-tree-header"><h5>' + soy.$$escapeHtml('Navigation display options') + '</h5><a href="#" class="aui-icon aui-icon-small ' + ((opt_data.pageTreeState == 'hide') ? 'aui-iconfont-add-circle' : 'aui-iconfont-plan-disabled') + '" data-tooltip="' + soy.$$escapeHtml('Hide/Show navigation display options') + '"/></div><form class="aui page-tree-options"><div class="radio"><input ' + ((opt_data.pageTreeState == 'hide') ? 'disabled ' : '') + ' class="radio acs-nav-type" type="radio" name="nav-type" value="pages" id="nav-type-pages" ' + ((! opt_data.pageTree) ? 'checked' : '') + '><label for="nav-type-pages">' + soy.$$escapeHtml('Child pages') + '</label></div><div class="radio"><input ' + ((opt_data.pageTreeState == 'hide') ? 'disabled ' : '') + ' class="radio acs-nav-type" type="radio" name="nav-type" value="page-tree" id="nav-type-tree" ' + ((opt_data.pageTree) ? 'checked' : '') + '><label for="nav-type-tree">' + soy.$$escapeHtml('Page tree') + '</label></div></form></div><button class="aui-style aui-button acs-done-link">' + soy.$$escapeHtml('Done') + '</button></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.configure.soyTemplateName = 'Confluence.Templates.Sidebar.configure';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:soy-resources', location = 'soy/sidebar-pages.soy' */
// This file was automatically generated from sidebar-pages.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Sidebar.Pages.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Sidebar == 'undefined') { Confluence.Templates.Sidebar = {}; }
if (typeof Confluence.Templates.Sidebar.Pages == 'undefined') { Confluence.Templates.Sidebar.Pages = {}; }


Confluence.Templates.Sidebar.Pages.renderPageContextualNav = function(opt_data, opt_ignored) {
  return '<div class="ia-secondary-header"><h5 class="ia-secondary-header-title pages"><span class="label">' + soy.$$escapeHtml('Child pages') + '</span></h5></div><div class="ia-secondary-parent-content">' + Confluence.Templates.Sidebar.Pages.parentPage({parentPage: opt_data.pageContextualNav.parentPage}) + '</div><div class="ia-secondary-current-content">' + Confluence.Templates.Sidebar.Pages.currentPage({currentPage: opt_data.pageContextualNav.currentPage}) + '</div><div class="ia-secondary-content">' + Confluence.Templates.Sidebar.Pages.childPages({children: opt_data.pageContextualNav, createPermission: opt_data.hasCreatePermission}) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.Pages.renderPageContextualNav.soyTemplateName = 'Confluence.Templates.Sidebar.Pages.renderPageContextualNav';
}


Confluence.Templates.Sidebar.Pages.childPages = function(opt_data, opt_ignored) {
  return '<div class="contextual-nav-child-pages">' + ((opt_data.children.initialChildPages.length) ? '<ul class="children">' + Confluence.Templates.Sidebar.Pages.renderChildren({children: opt_data.children.initialChildPages}) + '</ul>' + ((opt_data.children.remainingChildPages.length) ? '<ul class="more-children">' + Confluence.Templates.Sidebar.Pages.renderChildren({children: opt_data.children.remainingChildPages}) + '</ul><a class="more-children-link" href=""><span class="icon"></span><span class="label">' + soy.$$escapeHtml(AJS.format('{0} more child pages',opt_data.children.remainingChildPages.length)) + '</span></a>' : '') : '') + ((opt_data.createPermission && opt_data.children.createLink) ? '<a class="create-child-page-link" href="' + soy.$$escapeHtml(opt_data.children.createLink) + '"><span class="aui-icon aui-icon-small aui-iconfont-add-small"></span><span class="label">' + soy.$$escapeHtml('Create child page') + '</span></a>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.Pages.childPages.soyTemplateName = 'Confluence.Templates.Sidebar.Pages.childPages';
}


Confluence.Templates.Sidebar.Pages.currentPage = function(opt_data, opt_ignored) {
  return '' + ((opt_data.currentPage) ? '<ul class="ia-secondary-currentPage-title wiki' + ((opt_data.currentPage.active) ? ' current-item' : '') + '"><li><span class="icon"></span><span class="label">' + soy.$$escapeHtml(opt_data.currentPage.title) + '</span></li></ul>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.Pages.currentPage.soyTemplateName = 'Confluence.Templates.Sidebar.Pages.currentPage';
}


Confluence.Templates.Sidebar.Pages.parentPage = function(opt_data, opt_ignored) {
  return '' + ((opt_data.parentPage) ? '<ul class="parent ia-secondary-header-title wiki' + ((opt_data.parentPage.active) ? ' current-item' : '') + '"><li class="parent-item"><a class="parent-item-link" href="' + soy.$$escapeHtml(opt_data.parentPage.url) + '" title="' + soy.$$escapeHtml(opt_data.parentPage.title) + '"><span class="icon"></span><span class="label">' + soy.$$escapeHtml(opt_data.parentPage.title) + '</span></a></li></ul>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.Pages.parentPage.soyTemplateName = 'Confluence.Templates.Sidebar.Pages.parentPage';
}


Confluence.Templates.Sidebar.Pages.renderChildren = function(opt_data, opt_ignored) {
  var output = '';
  var childList65 = opt_data.children;
  var childListLen65 = childList65.length;
  for (var childIndex65 = 0; childIndex65 < childListLen65; childIndex65++) {
    var childData65 = childList65[childIndex65];
    output += '<li class="child-item" data-page-id="' + soy.$$escapeHtml(childData65.pageId) + '"><span class="icon"></span><a href="' + soy.$$escapeHtml(childData65.url) + '" title="' + soy.$$escapeHtml(childData65.title) + '"><span class="label">' + soy.$$escapeHtml(childData65.title) + '</span></a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Sidebar.Pages.renderChildren.soyTemplateName = 'Confluence.Templates.Sidebar.Pages.renderChildren';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/editor-loader.js' */
define("confluence-editor-loader/editor-loader","jquery confluence/legacy confluence/meta confluence/aui-overrides ajs wrm window".split(" "),function(e,g,h,m,d,n,o){var b,c={_listening:false,_queuedHandlers:[],_watchHandler:function(){g.Editor.UI.toggleWatchPage(false)},_unwatchHandler:function(){g.Editor.UI.toggleWatchPage(true)},_createQueueAdder:function(a){return function(){c._listening&&c._queuedHandlers.push(a)}},bind:function(){d.bind("watchpage.pageoperation",this._createQueueAdder(this._watchHandler));
d.bind("unwatchpage.pageoperation",this._createQueueAdder(this._unwatchHandler))},setListening:function(a){this._listening=a},applyHandlers:function(){for(var a=this._queuedHandlers.pop();a;){a();a=this._queuedHandlers.pop()}}};c.setListening(true);c.bind();var k=function(){var a=e("#editor-preload-container");a.length||(a=e('<div id="editor-preload-container" style="display: none;"></div>'));return a},f;return{getPreloadContainer:k,getEditorPreloadMarkup:function(){if(f)return f;g.debugTime("confluence.editor.preload");
var a=d.contextPath()+"/plugins/editor-loader/editor.action";return f=e.get(a,{parentPageId:h.get("parent-page-id"),pageId:h.get("page-id"),spaceKey:h.get("space-key"),atl_after_login_redirect:o.location.pathname,timeout:d.Confluence.EditorLoader.loadingTimeout})},resourcesLoaded:function(){return b&&b.isResolved()},loadingTimeout:12E3,isEditorActive:function(){var a=e("#editor-preload-container");return a.length&&a.is(":visible")},load:function(a,c){function f(){var a=[d.DarkFeatures.isEnabled("frontend.editor.v4")?
"wrc!editor-v4":"wrc!editor-v3","wrc!editor","wrc!macro-browser","wrc!fullpage-editor"];return n.require(a).fail(function(a){d.logError("Failed to load editor resources",a)})}var j;if(b){b.fail(function(){c?c.call(this,arguments):d.log("EditorLoader: loadGuard - previous load failed.")});b.done(function(){a?b.done(function(){setTimeout(a,0)}):d.log("EditorLoader: loadGuard - editor is already loaded.")});j=true}else j=void 0;if(!j){b=new e.Deferred;a&&b.done(a);c&&b.fail(c);var l=k();e("body").append(l);
var i=new e.Deferred;h.get("page-id")?this.getEditorPreloadMarkup().always(function(a,b,c){if(b==="success"||b==="notmodified"){l.append(a);a=d.renderTemplate("dynamic-editor-metadata");e("head").append(a);m.metaToParams();d.debug("EditorLoader: Finished loading the editor template.");i.resolve();g.debugTimeEnd("confluence.editor.preload")}else i.reject("Error loading the Editor template: "+c.status+" - "+c.statusText)}):i.resolve();i.pipe(f).done(function(){d.debug("EditorLoader: Finished loading the editor.");
b.resolve()}).fail(function(){b.reject(arguments)})}},getEditorForm:function(){if(this.isEditorActive()){var a=require("tinymce");return e(a.activeEditor.getContainer()).closest("form")}return null}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor-loader/editor-loader","AJS.Confluence.EditorLoader");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/block-and-buffer-keys.js' */
define("confluence-editor-loader/block-and-buffer-keys",[],function(){return{block:function(e){var d=[],f=function(a){a.preventDefault();a.stopPropagation();var c=a.which;c||(c=a.charCode?a.charCode:a.keyCode);13!==c&&48>c||d.push(c);a.preventDefault()};e.keypress(f);return function(){e.unbind("keypress",f);for(var a="",c=0;c<d.length;c++){var b;b=d[c];65535<b?(b-=65536,b=String.fromCharCode(55296+(b>>10),56320+(b&1023))):b=String.fromCharCode(b);a+=b}return a}}}});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor-loader/block-and-buffer-keys","AJS.Confluence.BlockAndBuffer");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/linkbrowser-editor-adapter.js' */
AJS.$(function(){if(!$("body").hasClass("with-space-sidebar")){return}Confluence=Confluence||{};Confluence.Editor=Confluence.Editor||{};AJS.Rte=AJS.Rte||{};AJS.Rte.BookmarkManager=AJS.Rte.BookmarkManager||{};AJS.Rte.BookmarkManager.storeBookmark=AJS.$.noop;AJS.Rte.BookmarkManager.restoreBookmark=AJS.$.noop});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-ia.js' */
(function(a){Confluence.Sidebar={};AJS.toInit(function(C){var I=C(window);var o=C(document);var v=Math.min(285,I.width()/3);var z=285;var c=150;var n=55;var q=640;var E=AJS.storageManager("confluence","sidebar");var p="width";var l=AJS.contextPath();var G=AJS.Meta.get("space-key");var i=AJS.Meta.get("use-keyboard-shortcuts")?" "+"(\u2009[\u2009)":"";Confluence.Sidebar.collapseTooltip="Collapse sidebar"+i;Confluence.Sidebar.expandTooltip="Expand sidebar"+i;var H=C(".ia-splitter").children();var D=C(".ia-splitter-left");if(D.length<1){return}var h=C(".acs-side-bar");var d=D.find(".ia-fixed-sidebar");var b=C("<div>",{"class":"ia-splitter-handle tipsy-enabled","data-tooltip":Confluence.Sidebar.collapseTooltip}).appendTo(d);C("<div>",{"class":"ia-splitter-handle-highlight confluence-icon-grab-handle"}).appendTo(b);var u=C(".ia-secondary-container");var m=C("#footer, #studio-footer");Confluence.Sidebar.throbberDiv=e;u.length&&k(u.attr("data-tree-type"));I.scroll(y);I.resize(y);I.on("touchend",y);o.ready(y);AJS.bind("confluence.header-resized",y);C("#header-precursor img").load(y);Confluence.Sidebar.applyTooltip=r;t();AJS.bind("sidebar.exit-configure-mode",t);var g=E.getItem(p)||v;var A=g>c?g:n;x(A);K();d.css("visibility","visible");y();J();setTimeout(function(){Confluence.Sidebar.createFlyouts(h)},0);AJS.trigger("sidebar.finished-loading");I.one("pagetree-children-loaded",function(){var L=C(".plugin_pagetree_current");if(L.length){var M=L.offset();if(M.top>h.height()/2){h.scrollTop(M.top-h.height()/3)}if(M.left>h.width()/2){h.scrollLeft(M.left-h.width()/2)}}});AJS.bind("sidebar.enter-configure-mode",function(){s();w();d.addClass("configure-mode")});AJS.bind("sidebar.exit-configure-mode",function(){s();B();d.removeClass("configure-mode")});function s(){AJS.trigger("sidebar.hide-overlays")}function r(L,N){var M={live:true,gravity:"w",title:"data-tooltip",delayIn:500,delayOut:0,offset:5};C(L).tooltip(N?C.extend(M,N):M)}function t(){C(".acs-side-bar .quick-links-section").attr("data-collapsed-tooltip","Space shortcuts");C("#space-tools-menu-trigger").attr("data-collapsed-tooltip","Space tools");if(u.attr("data-tree-type")=="pages"){C(".acs-side-bar .ia-secondary-container").attr("data-collapsed-tooltip","Child pages");r(".collapsed .ia-secondary-container.tipsy-enabled",{title:"data-collapsed-tooltip"})}r(".expand-collapse-trigger");r(".ia-splitter-handle.tipsy-enabled");r(".collapsed .quick-links-section.tipsy-enabled, .collapsed .acs-nav-item > a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled",{title:"data-collapsed-tooltip"});r(".configure-mode .acs-side-bar-space-info.tipsy-enabled",{title:"data-configure-tooltip"});h.on("mousedown click scroll",s);C(window).on("scroll resize",s);AJS.bind("sidebar.hide-overlays",M);AJS.bind("sidebar.disable-tooltip",N);AJS.bind("sidebar.enable-all-tooltips",L);function N(R,Q){var O=C(Q).closest(".tipsy-enabled");if(O.size()!=1){return}O.removeClass("tipsy-enabled").addClass("tipsy-disabled").attr("title","");var P=O.data("tipsy");if(P){P.hoverState="out"}M()}function L(){C(".tipsy-disabled").removeClass("tipsy-disabled").addClass("tipsy-enabled")}function M(){C(".tipsy").remove()}}function K(){o.on("mousewheel",".ia-scrollable-section",function(O,P){var N=C(this).scrollTop();var M=C(this).get(0).scrollHeight-C(this).innerHeight()-1;if((P>0&&N<=0)||(P<0&&N>=M)){O.preventDefault()}else{if(C.browser.msie){O.preventDefault();var L=30;C(this).scrollTop(N+(-1*P*L))}}O.stopPropagation()})}function e(){var M=C(Confluence.Templates.Sidebar.throbber()),N=M.find(".spinner"),L=Raphael.spinner(N[0],10,"#666");M.find(".throbber").bind("remove",function(){L()});return M}function k(L){if(L==="blogs"){j(h,f)}else{if(L==="pages"){Confluence.Sidebar.Pages.installHandlers(h)}}}function f(O,P){var N=O.attr("data-group-type");var L=O.attr("data-group-value");var M=l+"/rest/ia/1.0/pagetree/blog/subtree";C.get(M,{spaceKey:G,groupType:N,groupValue:L}).done(P)}function j(L,M){L.delegate(".acs-tree-item > .icon, .acs-tree-item > .node-title","click",function(){var R=C(this);var Q=R.parent();var N=Q.find("> .icon");if(Q.hasClass("opened")){Q.children("ul").hide();Q.removeClass("opened").addClass("closed");N.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed")}else{if(Q.hasClass("closed")){var O=Q.children("ul");if(O.length){O.show()}else{var P=C(Confluence.Templates.Sidebar.treeThrobber());Q.append(P);M(Q,function(T){var S=C(Confluence.Templates.Sidebar.pagetreeList({pagetree:T,isSubtree:true}));P.remove();S.appendTo(Q)})}Q.removeClass("closed").addClass("opened");N.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded")}}})}function y(){var L=D.offset().top,M=I.scrollTop(),N=I.scrollLeft();if(M<0){return}if(M>(o.height()-I.height())){return}if(N<0){return}if(N>(o.width()-I.width())){return}if(C("#header").css("position")!=="fixed"){d.css({top:Math.max(L-M,0)+"px",left:Math.min(N*-1,0)+"px"})}else{d.css({left:Math.min(N*-1,0)+"px"})}}function F(){m.css("margin-left",d.outerWidth()+"px")}function J(){var O=C("body");var M=false;var N=false;var P=function(Q){N=true;Q.preventDefault();H.one("selectstart",function(S){S.preventDefault()});var R=function(){if(d.width()<=c){x(n)}else{v=d.width()}N=false;O.off("mousemove.ia-splitter")};M=false;O.on("mousemove.ia-splitter",function(S){if(Confluence.Sidebar.Configure.mode&&S.pageX<z){return}x(S.pageX);M=true});O.one("mouseup mouseleave",R)};b.on("mousedown.ia-splitter",function(Q){P(Q);s()}).click(function(){if(!M){L()}else{M=false}});Confluence.Sidebar.toggle=L;function L(){if(Confluence.Sidebar.Configure.mode){return}var Q=d.width();if(Q>n){if(Q<=c){v=z;x(v)}else{v=Q;x(n)}}else{x(v)}}}function x(L){L=Math.max(L,n);L=Math.min(L,q);E.setItemQuietly(p,L);if(L<=c){d.addClass("collapsed");C(".expand-collapse-trigger").removeClass("aui-iconfont-chevron-double-left").addClass("aui-iconfont-chevron-double-right");b.attr("data-tooltip",Confluence.Sidebar.expandTooltip);AJS.trigger("sidebar.collapsed")}else{if(d.hasClass("collapsed")){d.removeClass("collapsed");b.attr("data-tooltip",Confluence.Sidebar.collapseTooltip);C(".expand-collapse-trigger").removeClass("aui-iconfont-chevron-double-right").addClass("aui-iconfont-chevron-double-left");AJS.trigger("sidebar.expanded")}}d.width(L);H.eq(1).css("margin-left",L+"px");F()}function w(){if(d.width()<z){Confluence.Sidebar.widthBeforeConfiguring=d.width();x(z)}}function B(){if(Confluence.Sidebar.widthBeforeConfiguring){x(Confluence.Sidebar.widthBeforeConfiguring);Confluence.Sidebar.widthBeforeConfiguring=undefined}}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/configurable-nav.js' */
(function(a){AJS.Confluence.ConfigurableNav=AJS.RestfulTable.extend({initialize:function(c){var b=this;b.options=a.extend(true,c,{model:AJS.RestfulTable.EntryModel,Collection:Backbone.Collection.extend({url:c.resources.self,model:AJS.RestfulTable.EntryModel}),columns:[{id:"title"}]});b._events=b._events||AJS.RestfulTable.Events;b._event=b._event||AJS.RestfulTable.Events;b.classNames=AJS.RestfulTable.ClassNames;b.dataKeys=AJS.RestfulTable.DataKeys;b.$table=c.$el.addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);b.$table.prepend('<colgroup><col span="1" class="aui-restfultable-order"><col span="1"><col span="1" class="aui-restfultable-operations"></colgroup>');b.$tbody=a("<tbody/>");b._models=this._createCollection();b._rowClass=AJS.Confluence.ConfigurableNav.Row;b.editRows=[];b.enableReordering();b._models.bind("remove",function(d){a.each(b.getRows(),function(e,f){if(f.model===d){if(f.hasFocus()&&b._createRow){b._createRow.trigger(b._event.FOCUS)}b.removeRow(f)}})});a.get(b.options.resources.all,function(d){b.populate(d)});Confluence.Sidebar.applyTooltip(".aui-iconfont-add-circle, .aui-iconfont-cross-circle, .aui-iconfont-plan-disabled",{gravity:"ne"})},enableReordering:function(){var b=this;this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(f,c){var d=c.clone(true).addClass(b.classNames.MOVEABLE);d.children().each(function(e){a(this).width(c.children().eq(e).width())});return d},start:function(c,d){var e=d.placeholder.find("td");d.item.addClass(b.classNames.MOVEABLE).children().each(function(f){a(this).width(e.eq(f).width())});d.placeholder.html('<td colspan="'+b.getColumnCount()+'">&nbsp;</td>').css("visibility","visible");b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(c,d){if(jQuery(d.item[0]).is(":visible")){d.item.removeClass(b.classNames.MOVEABLE).children().attr("style","");d.placeholder.removeClass(b.classNames.ROW);b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)}},update:function(e,g){var c,d,f={},h=b.getRowFromElement(g.item[0]);if(h){if(b.options.reverseOrder){d=g.item.next();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}else{d=g.item.prev();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}f.spaceKey=AJS.Meta.get("space-key");a.ajax({url:h.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(f),complete:function(){h.hideLoading()},success:function(i){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[i])},error:function(j){var i=a.parseJSON(j.responseText||j.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[i,j])}});h.showLoading()}},axis:"y",delay:0,containment:"document",cursor:"move",scroll:true,zIndex:8000});this.$tbody.bind("selectstart mousedown",function(c){return !a(c.target).is("."+b.classNames.DRAG_HANDLE)})}});AJS.Confluence.ConfigurableNav.ReadView=AJS.RestfulTable.CustomReadView.extend({render:function(c){var b=c.styleClass=="pinned_attachment"?"aui-icon aui-icon-small aui-iconfont-attachment":"icon";return _.template('<span class="acs-nav-item-link" title="<%=title%>"><span class="'+b+'"></span><span class="acs-nav-item-label"><%=title%></span></span>',{title:AJS.escapeHtml(c.title)})}});AJS.Confluence.ConfigurableNav.Row=AJS.RestfulTable.Row.extend({render:function(){var b=this,d=this.model.toJSON(),e=a("<td class='aui-restfultable-operations' />").append(this.renderOperations(d.canHide,d.hidden)),c=a('<td class="'+this.classNames.ORDER+'"/>').append(this.renderDragHandle());b._event=b._event||b._events;b.$el.attr("data-id",this.model.id);b.$el.append(c);a.each(b.columns,function(f,g){var h,k=a("<td />"),j=d[g.id];if(j){b.$el.attr("data-"+g.id,j)}h=new AJS.Confluence.ConfigurableNav.ReadView().render(d);k.append(h);b.$el.append(k)});b.$el.append(e);d.canHide&&d.hidden&&b.$el.addClass("hidden-link");b.$el.addClass(this.classNames.ROW+" "+b.classNames.READ_ONLY+" acs-nav-item "+d.styleClass);b.trigger(this._event.RENDER,this.$el,d);b.$el.trigger(this._event.CONTENT_REFRESHED,[b.$el]);return b},renderOperations:function(f,e){var c=this,b=a('<a href="#" class="aui-icon aui-icon-small"/>');if(f){function d(g){if(g.hasClass("aui-iconfont-plan-disabled")){g.attr("data-tooltip","Hide link")}else{g.attr("data-tooltip","Show link")}}b.addClass(e?"aui-iconfont-add-circle show-link":"aui-iconfont-plan-disabled hide-link").click(function(g){g.preventDefault();a.ajax({url:c.model.url()+(e?"/show":"/hide"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key")})}).done(function(){b.closest(".acs-nav-item").toggleClass("hidden-link");b.toggleClass("aui-iconfont-plan-disabled").toggleClass("aui-iconfont-add-circle");b.toggleClass("hide-link").toggleClass("show-link");d(b)})});d(b)}else{b.addClass("aui-iconfont-cross-circle delete-link tipsy-enabled").click(function(g){g.preventDefault();if(a(".acs-nav").data("quick-links-state")!="hide"){AJS.trigger("sidebar.disable-tooltip",this);c.destroy()}}).attr("data-tooltip","Remove link")}return b},destroy:function(){this.model.destroy({data:{spaceKey:AJS.Meta.get("space-key")}})}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-pages.js' */
(function(b){var a=AJS.Meta.get("context-path");Confluence.Sidebar.Pages={installHandlers:function(d){d.find(".more-children-link").click(function(f){f.preventDefault();d.find("ul.more-children").show();b(this).hide()})},quickLinksContent:function(){return new b.Deferred().resolve(b(".acs-side-bar .quick-links-wrapper").html())},childPageCollapsedContent:function(){var e=b(".acs-side-bar .ia-secondary-header");var d=b(".acs-side-bar .ia-secondary-parent-content");var g=b(".acs-side-bar .ia-secondary-current-content");var f=b(".acs-side-bar .ia-secondary-content");return new b.Deferred().resolve(b("<div>").append(b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(e.clone()).append(d.clone()).append(g.clone()).append(f.clone())).html())},pageTreeCollapsedContent:function(){var d=b(".page-tree-flyout-content");if(d.length==0){return c().pipe(function(e){var f=b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav:e,hasCreatePermission:b(".acs-nav").data("has-create-permission")}));b("body").append(b("<div>").addClass("page-tree-flyout-content hidden").append(f.clone()));return f})}else{return new b.Deferred().resolve(d.html())}}};function c(){return b.ajax({url:a+"/rest/ia/1.0/space/childPagesContextualNav",data:{pageId:AJS.Meta.get("page-id")}})}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-links.js' */
AJS.$(function(){Confluence.Sidebar.Configure={mode:false};var d=AJS.$,n=AJS.Meta.get("context-path"),l=AJS.Meta.get("space-key"),j=d(".acs-side-bar"),r=j.find(".ia-secondary-container"),e,p,k,m,h=d(".acs-nav"),t=false;d.ajaxSetup({cache:false});d("body").on("click","#acs-configure-link, a.configure-sidebar",function(w){w.preventDefault();v()});d("#space-favourite-remove").on("click",function(){c("remove")});d("#space-favourite-add").on("click",function(){c("add")});function c(y){var z;var x;var w=d(".space-information-container .favourite-space-icon");w.addClass("disabled");if(y==="add"){z="PUT";x="confluence.space-sidebar.favourite.click"}else{z="DELETE";x="confluence.space-sidebar.favourite-remove.click"}d.ajax({url:n+"/rest/experimental/relation/user/current/favourite/toSpace/"+l,type:z,dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:l})}).done(function(){var A=d("#space-favourite-add");var B=d("#space-favourite-remove");if(y==="add"){A.prop("data-favourited","true");B.show();A.hide()}else{A.prop("data-favourited","false");A.show();B.hide()}}).fail(function(A){var B=require("confluence/message-controller");B.showError(B.parseError(A),B.Location.FLAG)}).always(function(){w.removeClass("disabled")});AJS.trigger("analyticsEvent",{name:x})}function v(){AJS.trigger("sidebar-before-enter-configure-mode");var w=d(".custom-sidebar-content");var z=w.length;var D;var B;if(z){B=n+"/spaces/custompagecontent.action?key="+l;D=w.children().html()}m=h.data("nav-type");Confluence.Sidebar.Configure.mode=true;k=d(".acs-nav-sections .acs-nav-item.current-item").data("collector-key");e=Confluence.Sidebar.throbberDiv();var C=d(".acs-nav-sections");e.height(C.height());r.hide();C.replaceWith(e);var y=Confluence.Templates.Sidebar.configure({pageTree:m==="page-tree",quickLinksState:h.data("quick-links-state"),pageTreeState:h.data("page-tree-state"),hasSidebarCustomisation:z,customContentAdminLink:B,sidebarCustomisation:D,accessMode:AJS.Meta.get("access-mode")});p=d(y).hide();e.after(p);i();g();s();var A={};var x=function(){e.replaceWith(p);p.show()};d("#acs-nav-list-main").one(AJS.RestfulTable.Events.INITIALIZED,function(){A.main=true;A.quick&&x()});d("#acs-nav-list-quick").one(AJS.RestfulTable.Events.INITIALIZED,function(){A.quick=true;A.main&&x()});d(".acs-nav-type").change(function(E){u("nav-type",d(this).val(),function(F){r.data("tree-type",F);h.data("nav-type",F)})});d(".acs-done-link").click(function(E){E.preventDefault();d(".acs-done-link").attr("aria-disabled",true).prop("disabled",true);o()});d(".quick-links-header a").click(function(F){F.preventDefault();var E=h.data("quick-links-state")==="hide"?"show":"hide";u("quick-links-state",E,a)});d(".page-tree-header a").click(function(G){G.preventDefault();var F=h.data("page-tree-state")==="hide"?"show":"hide";var E=d(".acs-nav-type");if(F==="show"){E.attr("disabled",false)}else{E.attr("disabled",true)}u("page-tree-state",F,b)});AJS.$(".acs-side-bar-space-info").on("click.configurelogo",q);AJS.trigger("sidebar.enter-configure-mode")}function q(y){var x=AJS.$(".acs-side-bar-space-info > .flyout-handle");x.addClass("loading").spin();var w=WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:avatar-picker",function(){AJS.trigger("deferred.spaceia.open.configure.space")});w.always(function(){x.removeClass("loading").spinStop()});y.preventDefault()}function u(w,x,y){d.ajax({url:n+"/rest/ia/1.0/space/option",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:l,option:w,value:x}),success:function(z){y(x)}})}function o(){if(m!==h.data("nav-type")||t===true){location.reload();t=false;return}var w=d(".custom-sidebar-content");var y=w.length;var A;if(y){A=w.children().html()}e=Confluence.Sidebar.throbberDiv();e.height(p.height());p.replaceWith(e);f();r.show().css("display","");var x=function(){var B=d(Confluence.Templates.Sidebar.renderLinks({mainLinks:z.main,quickLinks:z.quick.reverse(),advancedLinks:z.advanced,hasConfigurePermission:true,collectorToHighlight:k,quickLinksState:h.data("quick-links-state"),hasSidebarCustomisation:y,sidebarCustomisation:A}));e.replaceWith(B);Confluence.Sidebar.Configure.mode=false;AJS.trigger("sidebar.exit-configure-mode")};var z={};d.get(n+"/rest/ia/1.0/link/main",{spaceKey:l,includeHidden:false}).done(function(B){z.main=B;z.quick&&z.advanced&&x()});d.get(n+"/rest/ia/1.0/link/quick",{spaceKey:l}).done(function(B){z.quick=B;z.main&&z.advanced&&x()});d.get(n+"/rest/ia/1.0/link/advanced",{spaceKey:l}).done(function(B){z.advanced=B;z.main&&z.quick&&x()});Confluence.Sidebar.Configure.Logo&&Confluence.Sidebar.Configure.Logo.unbind()}function i(){WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:link-dialog",function(){var w=new d.Deferred();d(".acs-add-link").click(function(x){w.done(function(){x.preventDefault();if(h.data("quick-links-state")!=="hide"){Confluence.Sidebar.LinkAdapter.hijackLinkBrowser();Confluence.Editor.LinkBrowser.open();d("#recentlyviewed-panel-id").click()}})}).addClass("acs-add-link-ready");if(AJS.Meta.get("space-key")){AJS.Confluence.EditorLoader.load(function(){w.resolve()},function(){AJS.log("Attempted to load editor for space ia side bar. Loading the editor failed.");w.reject()})}else{w.resolve()}})}function g(){var w=d("#acs-nav-list-quick");var y=d(".acs-nav-sections .tip").hide();var x=function(){if(Confluence.Sidebar.Configure.QuickLinks.isEmpty()){w.hide();y.show()}else{y.hide();w.show()}};AJS.bindEvt(AJS.RestfulTable.Events.INITIALIZED,x);AJS.bindEvt(AJS.RestfulTable.Events.ROW_ADDED,x);AJS.bindEvt(AJS.RestfulTable.Events.ROW_REMOVED,x)}function s(){Confluence.Sidebar.Configure.MainLinks=new AJS.Confluence.ConfigurableNav({$el:d("#acs-nav-list-main"),resources:{all:n+"/rest/ia/1.0/link/main?spaceKey="+l+"&includeHidden=true",self:n+"/rest/ia/1.0/link"}});Confluence.Sidebar.Configure.QuickLinks=new AJS.Confluence.ConfigurableNav({$el:d("#acs-nav-list-quick"),resources:{all:n+"/rest/ia/1.0/link/quick?spaceKey="+l,self:n+"/rest/ia/1.0/link"},reverseOrder:true})}function f(){Confluence.Sidebar.Configure.MainLinks.remove();Confluence.Sidebar.Configure.MainLinks.unbind();Confluence.Sidebar.Configure.QuickLinks.remove();Confluence.Sidebar.Configure.QuickLinks.unbind();d(AJS).unbind(AJS.RestfulTable.Events.INITIALIZED);d(AJS).unbind(AJS.RestfulTable.Events.ROW_ADDED);d(AJS).unbind(AJS.RestfulTable.Events.ROW_REMOVED)}function a(w){h.data("quick-links-state",w);if(w==="hide"){d(".acs-nav-list-quick-section").addClass("hidden-section");d(".quick-links-header a").removeClass("aui-iconfont-plan-disabled").addClass("aui-iconfont-add-circle")}else{d(".acs-nav-list-quick-section").removeClass("hidden-section");d(".quick-links-header a").removeClass("aui-iconfont-add-circle").addClass("aui-iconfont-plan-disabled")}}function b(w){h.data("page-tree-state",w);t=true;if(w==="hide"){d(".acs-nav-list-page-tree-section").addClass("hidden-section");d(".page-tree-header a").removeClass("aui-iconfont-plan-disabled").addClass("aui-iconfont-add-circle")}else{d(".acs-nav-list-page-tree-section").removeClass("hidden-section");d(".page-tree-header a").removeClass("aui-iconfont-add-circle").addClass("aui-iconfont-plan-disabled")}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools.js' */
define("confluence-space-ia/sidebar-space-tools",["ajs","jquery","confluence/legacy"],function(b,c,d){function a(){var e=[];var h=[];var k=b.version.indexOf("5.7")===0;var i;var l;var f,j;if(!k){f=c("#space-tools-menu-trigger");j=c("#space-tools-menu")}var g;if(k){c("#space-tools-web-items").children("div").each(function(){e.push({label:c(this).data("label"),href:c(this).data("href")})})}else{b.warn("Remove legacy sidebar code when upgrade to AUI 5.8+");j.on({"aui-dropdown2-show":function(){b.trigger("sidebar.disable-tooltip",f)},"aui-dropdown2-hide":function(){b.trigger("sidebar.enable-all-tooltips")}});c("#space-tools-web-items").children("div").each(function(){e.push({text:c(this).data("label"),href:c(this).data("href")})})}if(k){c("#space-tools-menu-additional-items").children("div").each(function(){h.push({className:c(this).data("class"),label:c(this).data("label"),href:c(this).data("href")})})}else{c("#space-tools-menu-additional-items").children("div").each(function(){h.push({extraClasses:c(this).data("class"),text:c(this).data("label"),href:c(this).data("href")})})}if(k){l={hideDelay:null,width:170,displayShadow:false,calculatePositions:function(m,n){var o=n.target.offset();return{popupCss:{top:o.top-m.height(),left:o.left},arrowCss:{display:"none"}}},hideCallback:function(){b.trigger("sidebar.enable-all-tooltips")}};i=b.InlineDialog(c("#space-tools-menu-trigger"),"space-tools",function(n,m,o){n.html(d.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:e,spaceLinks:h,isAuiFiveSeven:k}));c(m).one("click",function(p){if(c("#inline-dialog-space-tools").is(":visible")){setTimeout(function(){i.hide()},0)}});b.trigger("sidebar.disable-tooltip",m);b.trigger("sidebar.spacetools-loaded");o();return false},l);i.addClass("aui-dropdown2 aui-style-default space-tools-dropdown");b.bind("sidebar.hide-overlays",i.hide)}else{j.html(d.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:e,spaceLinks:h}));if(b&&b.Confluence&&b.Confluence.Analytics&&b.Confluence.Analytics.setAnalyticsSource){b.Confluence.Analytics.setAnalyticsSource(j.find("a:not(.configure-sidebar)"),"spacetools")}b.bind("sidebar.hide-overlays",function(){if(j.filter('[aria-hidden="false"]').length){c("#space-tools-menu-trigger").trigger("aui-button-invoke")}})}g=c(".expand-collapse-trigger");g.click(function(m){m.preventDefault();d.Sidebar.toggle()});g.attr("data-tooltip",c(".ia-fixed-sidebar").hasClass("collapsed")?d.Sidebar.expandTooltip:d.Sidebar.collapseTooltip);b.bind("sidebar.collapsed",function(){g.attr("data-tooltip",d.Sidebar.expandTooltip)});b.bind("sidebar.expanded",function(){g.attr("data-tooltip",d.Sidebar.collapseTooltip)})}return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools-require.js' */
require(["confluence-space-ia/sidebar-space-tools"],function(a){AJS.toInit(function(){a()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-flyouts.js' */
(function(d){var b,c,a;Confluence.Sidebar.createFlyouts=function(g){b=f(d(".collapsed .quick-links-section"),Confluence.Sidebar.Pages.quickLinksContent,"sidebar-quick-links-flyout",{flyout:"quick-links"});var h=g.find(".ia-secondary-container");if(h.length&&h.attr("data-tree-type")=="pages"){c=f(d(".collapsed .ia-secondary-header-title.wiki"),Confluence.Sidebar.Pages.childPageCollapsedContent,"sidebar-children-flyout",{flyout:"children"})}if(h.length&&h.attr("data-tree-type")=="page-tree"){a=f(d(".collapsed .ia-secondary-header-title.page-tree"),Confluence.Sidebar.Pages.pageTreeCollapsedContent,"sidebar-page-tree-flyout",{flyout:"pagetree"})}};function f(g,j,i,l){var k=function(n,m,o){d(n).addClass("acs-side-bar-flyout ia-scrollable-section");d(n).empty().append(Confluence.Sidebar.throbberDiv());j().done(function(p){d(n).html(p)});AJS.trigger("sidebar.flyout-triggered",l);o();d(m).one("click",function(p){if(d("#inline-dialog-"+i).is(":visible")){setTimeout(function(){h.hide()},0)}});AJS.trigger("sidebar.disable-tooltip",m)};var h=AJS.InlineDialog(g,i,k,{gravity:"w",calculatePositions:e,useLiveEvents:true,hideDelay:null,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}});AJS.bind("sidebar.hide-overlays",h.hide);return h}function e(h,k,p,g){var q=k.target.offset();var o=k.target.width();var l=k.target.height();var n={top:q.top+l/2-15,left:q.left+o+5,right:"auto"};var i=d(window);var m=20;n.maxHeight=i.height()+i.scrollTop()-n.top-m;if(d.browser.msie&&parseInt(d.browser.version,10)<=8){n.maxHeight-=40}var j={top:9};return{popupCss:n,arrowCss:j,gravity:"w"}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/external/jquery.mousewheel.min.js' */
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-logo.js' */
AJS.toInit(function(f){Confluence.Sidebar.Configure.Logo={};var b=f(".acs-side-bar-space-info div.name a");var h;var a;var e=function(i){f(".space-logo .avatar-img").attr("src",AJS.Meta.get("context-path")+i)};var d=function(i){b.attr("title",i).text(i)};var g=function(i){if(!h){h=new i({onCrop:function(k,j){f.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key"),spaceName:j,logoDataURI:k}),url:AJS.Meta.get("context-path")+"/rest/ia/1.0/space/setLogo",success:function(l){e(l.logoDownloadPath);d(l.name);h.hide()},error:function(l){h.setMessage("An error occurred while updating space details");h._removeSaveImageLoadingIcon()}})}})}h.show(f(".acs-side-bar-space-info div.name a").text());return false};var c=function(){var i=function(l,k,m){f(l).addClass("acs-side-bar-flyout");f(l).empty();l.html(AJS.template.load("logo-config-content"));l.unbind("mouseover mouseout");AJS.trigger("sidebar.disable-tooltip",k);m()};if(!a){a=AJS.InlineDialog(f(".acs-side-bar-space-info"),"space-logo-config",i,{gravity:"w",calculatePositions:j,useLiveEvents:true,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")},hideDelay:null,noBind:true,width:635})}function j(l,n,r,k){var s=n.target.offset();var q=n.target.width();var o=n.target.height();var p={top:s.top+o/2-15,left:s.left+q+5,right:"auto"};var m={top:9};return{popupCss:p,arrowCss:m,gravity:"w"}}a.show()};AJS.bind("sidebar-before-enter-configure-mode",function(){AJS.bind("deferred.spaceia.open.configure.space",function(i){if(AJS.Meta.get("space-key")=="~"+AJS.Meta.get("remote-user")){c()}else{require(["confluence-space-ia/avatar-picker/avatar-picker-dialog",],g)}i.preventDefault();return false})});Confluence.Sidebar.Configure.Logo.unbind=function(){f("#inline-dialog-space-logo-config .cancel").click();f(".acs-side-bar-space-info").off("click.configurelogo");AJS.unbind("deferred.spaceia.open.configure.space")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-fixed-headers:utils', location = '/js/utils/dom.js' */
define("confluence/fh/utils/dom",["jquery","ajs","exports"],function(j,p,i){var q,d,a,n;function k(r){if(k.done&&!r){return}var s="#main .aui-page-panel-outer-content";d=j(s).length!==0?j(s):j("#main");a=j("#header");n=j("#main-header");k.done=true}function f(){var s=p.Meta.get("content-type");if(s==="page"||s==="blogpost"){var r=function(){j(tinymce.activeEditor.getWin().document).find("body#tinymce").addClass("page-edit")};if(tinymce&&tinymce.activeEditor&&j(tinymce.activeEditor.getWin().document).length>0){r()}else{p.bind("init.rte",r)}}}function o(){k();n.css({width:d.outerWidth()-(parseInt(d.css("padding-left"))+parseInt(d.css("padding-right")))})}function c(){k();var r=parseInt(n.css("top"))+n.outerHeight();if(isNaN(r)||r===c.lastValue){return}c.lastValue=r;p.trigger("sticky-table-headers.change.options",{fixedOffset:r,cacheHeaderHeight:true})}function e(t,r,s){if(s){e[s]=e[s]||{};if(r===e[s].lastValue){return}e[s].lastValue=r}t.css({transform:"translateY("+r+"px)","-webkit-transform":"translateY("+r+"px)","-ms-transform":"translateY("+r+"px)"})}function m(u,r,s){var t={};s.forEach(function(v){t[v]=u.css(v)});r.css(t)}var l={mt:"margin-top",mr:"margin-right",ml:"margin-left",mb:"margin-bottom",pt:"padding-top",pr:"padding-right",pl:"padding-left",pb:"padding-bottom",ff:"font-family",fsi:"font-size",fst:"font-style",fw:"font-weight",td:"text-decoration",ls:"letter-spacing",ta:"text-align",c:"color"};l.margin=[l.mt,l.mr,l.ml,l.mb];l.padding=[l.pt,l.pr,l.pl,l.pb];l.font=[l.ff,l.fsi,l.fst,l.fw];function b(){k();if(q){return q}q=j('<div id="main-header-placeholder"></div>');var t=j("#title-text"),s=t.find("a"),r=t.clone().removeAttr("id"),u=r.find("a");m(n,q,l.margin.concat(l.padding));q.css({height:n.outerHeight()});m(t,r,l.font.concat(l.td,l.ls,l.ta,l.pr,l.pb,l.pl,l.mr,l.mb,l.ml));r.css({paddingTop:parseInt(t.css("padding-top"))+Math.round(t.offset().top-n.offset().top)});m(s,u,l.font.concat(l.margin,l.padding,l.font,l.c,l.td,l.ls,l.ta));q.append(r);return q}function g(){q&&q.remove()}function h(t){t=typeof(t)==="string"?t:j(this).attr("href");if(!t){return}k();var s=a.outerHeight();var r=j(t.replace(/(!|\"|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|\:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1"));if(r.length){window.scrollTo(0,r.offset().top-s);if(history&&"pushState" in history){history.pushState({},document.title,window.location.pathname+window.location.search+t);return false}}}i.forceInitialize=function(){k(true)};i.addClassToPage=f;i.adjustMainHeaderSize=o;i.updateTableStickyHeaderOption=c;i.translateVertical=e;i.createMainHeaderPlaceHolder=b;i.removeMainHeaderPlaceHolder=g;i.scrollIfAnchor=h});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-fixed-headers:handlers', location = '/js/handlers/page-view-handler.js' */
define("confluence/fh/handlers/page-view-handler",["confluence/fh/utils/dom","jquery","ajs","exports"],function(z,i,m,G){var E,s,D,n,v,d,C,h,e,w,F,r=false,l=false,f=false,j=0,u=0,g=0,y=50,b=100,q="by-hover",t="by-scroll",B="by-other",a=B,o=false;function c(H){if(c.done&&!H){return}E=i("#header");s=i("#main .aui-page-panel-outer-content");s.length===0&&(s=i("#main"));D=i("#main-header");n=i("#action-menu-link");v=z.createMainHeaderPlaceHolder();d=i(".ia-splitter-left .ia-fixed-sidebar");C=D.prop("style");h=s.prop("style");e=Math.round(E.offset().top);w=E.height();F=Math.round(D.offset().top)-w-(parseInt(s.css("padding-top"))+parseInt(D.css("margin-top")));c.done=true}var x=function(){c();var I=i(window).scrollTop();var K=I>e;if(K&&parseInt(d.css("top"))<w){d.css({top:w+"px"})}if(!r&&K){r=true;E.addClass("fixed-header");s.css({marginTop:w+"px"})}else{if(!K){E.removeClass("fixed-header");h.removeProperty("margin-top");r=false}}var O=I>F;if(!l&&O){l=true;D.find("#title-text").hide();D.css({position:"fixed",width:s.outerWidth()-(parseInt(s.css("padding-left"))+parseInt(s.css("padding-right"))),right:0,top:w+"px",marginTop:0,paddingTop:parseInt(s.css("padding-top"))+parseInt(D.css("margin-top")),paddingBottom:parseInt(s.css("padding-top"))+parseInt(D.css("margin-top")),paddingLeft:s.css("padding-left"),paddingRight:s.css("padding-right"),zIndex:b});D.before(z.createMainHeaderPlaceHolder())}else{if(!O){["position","width","right","top","margin-top","padding-top","padding-bottom","padding-left","padding-right","z-index"].forEach(function(P){C.removeProperty(P)});D.removeClass("overlay-header");D.find("#title-text").show();l=false;f=false;z.removeMainHeaderPlaceHolder()}}var M,L,J=D.outerHeight(),H=j-I,N=parseInt(D.css("top"))+H;if(I<=0){g=0;u=0;M=w}else{if(l&&H>0){if(N>w){g=w;u=0;M=w;L=b}else{g+=Math.abs(H);if(g>=y||I<=J){u-=Math.abs(H);M=N;L=b}}if(I>J+y&&!f){D.addClass("overlay-header");f=true}a=t}else{if(l&&H<0){if(N<w-J){g=0;u=J;M=w-J;L=0}else{u+=Math.abs(H);M=N}}}}if(L!==undefined&&M!==undefined){D.css({top:M+"px",zIndex:L})}else{if(M!==undefined){D.css({top:M+"px"})}}if(o){z.translateVertical(n,u,n.attr("id"))}z.updateTableStickyHeaderOption();j=I};function A(){if(!l||u===0){return}u=0;D.addClass("overlay-header");D.css({top:w+"px",zIndex:b});if(o){z.translateVertical(n,u,n.attr("id"))}z.updateTableStickyHeaderOption()}function p(){c();A();a=q}function k(){c();A();m.bind("quick-edit.viewport.saved",function(){E.removeAttr("style");z.removeMainHeaderPlaceHolder()});i(window).off("scroll",x).off("resize.confluence-fixed-headers-responsive");m.trigger("analyticsEvent",{name:"view.edit.transition.edit.button.clicked",data:{method:a}})}G.forceInitialize=function(){c(true)};G.onScrollHandler=x;G.onHoverActionMenuLinkHandler=p;G.onClickEditPageLinkHandler=k;G.isKeepDotDotDotButton=o;G.__getShowMainHeaderBy=function(){return a};G.__getFixedHeader=function(){return r};G.__getFixedMainHeader=function(){return l};G.__setFixedHeader=function(H){r=H};G.__setFixedMainHeader=function(H){l=H};G.__setMainHeaderOverlay=function(H){f=H};G.__setScrollPosition=function(H){j=H};G.__setMovingDistance=function(H){u=H}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-fixed-headers:confluence-fixed-headers-view-content-resources', location = '/js/confluence-fixed-headers.js' */
require(["confluence/fh/utils/dom","confluence/fh/handlers/page-view-handler","ajs","jquery"],function(d,b,a,c){a.toInit(function(){if(!a.Meta.get("content-type")){return}if(c("#main-content").find("style").length>0){return}if(c("body").hasClass("theme-documentation")){return}var e=c("#header"),l=c("#main-header"),i=c("#main"),g=c("#content"),k=c("#editPageLink"),m=c("#action-menu-link");var n=["inline-dialog-notifications-miniview","inline-dialog-confluence-watch","inline-dialog-shareContentPopup","inline-dialog-ap-inline-dialog-content-confstats-connect-dev__confstats-live-watcher","inline-dialog-jira-metadata-dialog"];var j=function(){var p=c('.aui-dropdown2[aria-hidden="false"]');p.length&&c('.aui-dropdown2-trigger[aria-owns="'+p.attr("id")+'"]').trigger("aui-button-invoke");var o=c(".aui-inline-dialog:visible");if(o.length){o=o.filter(function(){var s=c(this);var r=s.attr("id");return s.hasClass("non-persistence-dialog")||n.indexOf(r)!==-1});o.css({display:"none"});var q=".aui-button.active, .aui-nav-imagelink.active";e.find(q).removeClass("active");l.find(q).removeClass("active");document.activeElement.blur()}};var h=new MutationObserver(function(o){d.adjustMainHeaderSize()});h.observe(i[0],{attributes:true,attributeFilter:["style"]});var f=new MutationObserver(function(o){g.css("padding-right")==="0px"&&g.css({paddingRight:"28px"})});f.observe(g[0],{attributes:true,attributeFilter:["style"]});c(window).on("resize.confluence-fixed-headers-responsive",a.debounce(d.adjustMainHeaderSize,100)).on("scroll",b.onScrollHandler).scroll(a.debounceImmediate(j,250));if(b.isKeepDotDotDotButton){i.addClass("floating-action-menu");m.on("hover",b.onHoverActionMenuLinkHandler)}k.click(function(){f&&f.disconnect();b.onClickEditPageLinkHandler()});setTimeout(function(){d.scrollIfAnchor(window.location.hash)});c("body").on("click",'a[href^="#"]',d.scrollIfAnchor)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-namespace.js' */
define("confluence-like/like-namespace",["confluence/legacy"],function(a){return a.Likes||{}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-like/like-namespace","Confluence.Likes");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like.js' */
define("confluence-like/like",["ajs","confluence/legacy","jquery","confluence/meta","confluence/message-controller"],function(d,h,c,g,p){function q(a){return d.contextPath()+"/rest/likes/1.0/content/"+a+"/likes"}function s(){return 0<(g.get("remote-user")||"").length&&!1!==g.get("remote-user-has-licensed-access")}function r(a,b,e){var c=g.get("remote-user")||"",b=h.Likes.LikeSummaryFactory.getLikeSummary(a.likes,b,c);if(!b.key&&j&&("page"===a.content_type||"blogpost"===a.content_type))b.text="Be the first to like this";
a=[];a.push(b.text);a=a.concat(b.args);(a=d.format.apply(d,a))&&0<a.length?(j&&e.addClass("like-summary-margin-left"),e.html(a)):(e.removeClass("like-summary-margin-left"),e.empty());a&&(e.find(".likes").click(n.showLikeUsers),h.Binder.userHover())}function l(a,b,e){var m=g.get("remote-user")||"";if(void 0===a)throw Error("type is required");if(void 0===b)throw Error("contentId is required");if(void 0===e)throw Error("contentType is required");return function(){if("object"!==typeof this||!this.nodeType||
1!==this.nodeType||"A"!==this.nodeName)throw Error("this handler should be bound to a DOM anchor element");var f=c(this),h=arguments.callee,j=f.next(".like-summary");c.ajax({type:a===i?"POST":"DELETE",url:q(b),contentType:"application/json",data:{"atlassian-token":g.get("atlassian-token")},dataType:"json",timeout:1E4}).fail(function(c){var m;405===c.status?p.showError(p.parseError(c),p.Location.FLAG):m=a===i?"Like failed":"Unlike failed";c=j.siblings(".like-error");
0===c.length&&void 0!==m?j.after('<span class="like-error" title="'+m+'"></span>'):c.attr("title",m);f.off("click").on("click",null,a===i?l(i,b,e):l(o,b,e)).find(".like-button-text").html(a===i?"Like":"Unlike")}).success(function(){j.attr("data-liked",a===i);j.parent().find(".like-error").remove();r(k[b],b,j)});f.off("click",null,h).on("click",null,a===i?l(o,b,e):l(i,b,e)).find(".like-button-text").html(a===i?"Unlike":"Like");
k[b]=k[b]||{content_type:e,likes:[]};a===i?k[b].likes.push({user:{name:m}}):k[b].likes=c.grep(k[b].likes,function(a){return a.user.name!==m});a===i&&d.trigger("analytics",{name:"confluence."+e+".like.create",data:{pageID:g.get("page-id")}});return!1}}var i=0,o=1,f,k={},j=s()&&"READ_ONLY"!==g.get("access-mode"),t=c.Deferred(),n={getLikesCache:function(){return t.promise()},showLikeUsers:function(a){a&&a.preventDefault();var a=c(this),b=a.data("content-id");a.blur();f&&(f.remove(),f=void 0);f=new d.Dialog(400,
365,"likes-dialog");f.addHeader("People who like this");f.addPanel("Panel 1","<div class='spinner-container'></div>");f.addCancel("Close",function(a){a.remove();f=void 0});f.getCurrentPanel().setPadding(0);f.show();c.ajax({type:"GET",url:q(b),data:{expand:"user",max:50},dataType:"json"}).done(function(a){if(f.popup.element.is(":visible")){a.showFollowActions=s();f.getCurrentPanel().html(h.Templates.Likes.likesDialog(a));c("#likes-dialog").find(".likes-dialog-follow-button").click(function(){var a=
c(this);c.ajax({type:"PUT",url:d.contextPath()+"/rest/likes/1.0/user/"+g.get("remote-user")+"/following?username="+a.data("username"),contentType:"application/json",dataType:"json"}).done(function(){a.replaceWith("Following")})})}})},appendAction:function(a){var a=a.find(".comment-actions-primary"),b=a.find("li[class~='comment-date']"),e=c(h.Templates.Likes.commentLikeSection({showLikeButton:j}));0===b.length?a.find("li:last-child").after(e):b.before(e)},reload:function(a){c.each(a,
function(a,b){var d=c("#comment-"+a).find(".like-summary");r(b,a,d);k[a]=b});var b=c("#page-comments");!j&&b.find(".like-summary:empty").each(function(){c(this).closest(".comment-action-like").hide()});b.find(".comment").each(function(){n.updateComment(c(this),a)});t.resolve(k)},updateComment:function(a,b){var e=a.attr("id");if(!e)return!0;var f=(/^comment-(\d+)$/.exec(e)||[])[1];if(!f)throw Error('Expecting ID attribute of comment to be in format "comment-XXX", found: '+e);e=b[f]&&g.get("remote-user")&&
0<c.grep(b[f].likes,function(a){return a.user.name===g.get("remote-user")}).length;a.find(".like-button").click(e?l(o,f,"comment"):l(i,f,"comment")).find(".like-button-text").html(e?"Unlike":"Like")},init:function(){var a=c(h.Templates.Likes.likeSection({showLikeButton:j}));g.get("page-id")&&c.ajax({type:"GET",url:q(g.get("page-id")),data:{commentLikes:!0},dataType:"json"}).done(function(b){if(g.get("remote-user")){var e=0<c.grep(b.likes,function(a){return a.user.name===
g.get("remote-user")}).length,f=b.content_type;a.find(".like-button").click(e?l(o,g.get("page-id"),f):l(i,g.get("page-id"),f)).find(".like-button-text").html(e?"Unlike":"Like")}e=a.find(".like-summary");r(b,b.content_id,e);""===e.html()&&!j&&a.hide();c("<div id='likes-and-labels-container' />").insertBefore("#labels-section").append(a).append(c("#labels-section"));k[b.content_id]=b;n.reload(b.commentLikes)});n.appendAction(c("#page-comments"))}};return n});
require("confluence/module-exporter").safeRequire("confluence-like/like",function(d){var h=require("confluence/legacy"),c=require("ajs");h.Likes.getLikesCache=d.getLikesCache;c.PageGadget||window.parent.AJS&&window.parent.AJS.PageGadget||(c.toInit(d.init),h.Likes.showLikeUsers=d.showLikeUsers,h.Likes.appendAction=d.appendAction,h.Likes.reload=d.reload,h.Likes.updateComment=d.updateComment)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-summary-factory.js' */
define("confluence-like/like-summary-factory",["ajs","confluence/templates","jquery"],function(a,g,h){var i={"likes.summary.you":"You like this","likes.summary.1.promoted":"{0} likes this","likes.summary.2.promoted":"{0} and {1} like this","likes.summary.3.promoted":"{0}, {1} and {2} like this","likes.summary.1.non-promoted":"{0} likes this","likes.summary.x.non-promoted":"\u003ca href=\u0022\u0022 {1}\u003e{0} people\u003c/a\u003e like this",
"likes.summary.you.1.promoted":"You and {0} like this","likes.summary.you.2.promoted":"You, {0} and {1} like this","likes.summary.you.3.promoted":"You, {0}, {1} and {2} like this","likes.summary.you.1.non-promoted":"You and {0} like this","likes.summary.you.x.non-promoted":"You and \u003ca href=\u0022\u0022 {1}\u003e{0} others\u003c/a\u003e like this","likes.summary.1.promoted.1.non-promoted":"{0} and {1} like this",
"likes.summary.1.promoted.x.non-promoted":"{0} and \u003ca href=\u0022\u0022 {2}\u003e{1} others\u003c/a\u003e like this","likes.summary.2.promoted.1.non-promoted":"{0}, {1} and {2} like this","likes.summary.2.promoted.x.non-promoted":"{0}, {1} and \u003ca href=\u0022\u0022 {3}\u003e{2} others\u003c/a\u003e like this","likes.summary.3.promoted.1.non-promoted":"{0}, {1}, {2} and {3} like this","likes.summary.3.promoted.x.non-promoted":"{0}, {1}, {2} and \u003ca href=\u0022\u0022 {4}\u003e{3} others\u003c/a\u003e like this","likes.summary.you.1.promoted.1.non-promoted":"You, {0} and {1} like this",
"likes.summary.you.1.promoted.x.non-promoted":"You, {0} and \u003ca href=\u0022\u0022 {2}\u003e{1} others\u003c/a\u003e like this","likes.summary.you.2.promoted.1.non-promoted":"You, {0}, {1} and {2} like this","likes.summary.you.2.promoted.x.non-promoted":"You, {0}, {1} and \u003ca href=\u0022\u0022 {3}\u003e{2} others\u003c/a\u003e like this","likes.summary.you.3.promoted.1.non-promoted":"You, {0}, {1}, {2} and {3} like this","likes.summary.you.3.promoted.x.non-promoted":"You, {0}, {1}, {2} and \u003ca href=\u0022\u0022 {4}\u003e{3} others\u003c/a\u003e like this"};
return{getLikeSummary:function(a,c,k){if(!a||0===a.length)return{key:"",text:""};if(!c)throw Error("contentId is required.");var j,e=[],f=[];h.each(a,function(a,b){b.user&&b.user.name==k?j=b:3>e.length&&b.user.followedByRemoteUser?e.push(b):f.push(b)});var a=["likes.summary"],d=[];null!=j&&a.push(".you");0<e.length&&(a.push("."),a.push(e.length),a.push(".promoted"),h.each(e,function(a,b){d.push(g.Likes.userLink(b))}));1===f.length?(a.push(".1.non-promoted"),d.push(g.Likes.userLink(f[0]))):1<f.length&&
(a.push(".x.non-promoted"),d.push(f.length),d.push('class="likes" data-content-id="'+c+'"'));c=a.join("");return{key:c,args:0===d.length?void 0:d,text:c in i?i[c]:""}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-like/like-summary-factory","Confluence.Likes.LikeSummaryFactory");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/templates/com/atlassian/confluence/plugins/like/soy/like.soy' */
// This file was automatically generated from like.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Likes.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Likes == 'undefined') { Confluence.Templates.Likes = {}; }


Confluence.Templates.Likes.likeButton = function(opt_data, opt_ignored) {
  return '<a href="" class="like-button">' + ((opt_data.useIcon) ? '<span class="aui-icon aui-icon-small aui-iconfont-like"></span>' : '') + '<span class="like-button-text">' + soy.$$escapeHtml('Like') + '</span></a>';
};
if (goog.DEBUG) {
  Confluence.Templates.Likes.likeButton.soyTemplateName = 'Confluence.Templates.Likes.likeButton';
}


Confluence.Templates.Likes.likeSection = function(opt_data, opt_ignored) {
  return '<div id="likes-section" class="no-print">' + ((opt_data.showLikeButton) ? Confluence.Templates.Likes.likeButton({useIcon: true}) : '') + '<span class="like-summary"></span></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Likes.likeSection.soyTemplateName = 'Confluence.Templates.Likes.likeSection';
}


Confluence.Templates.Likes.commentLikeSection = function(opt_data, opt_ignored) {
  return '<li class="comment-action-like">' + ((opt_data.showLikeButton) ? Confluence.Templates.Likes.likeButton({useIcon: false}) : '') + '<span class="like-summary"></span></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.Likes.commentLikeSection.soyTemplateName = 'Confluence.Templates.Likes.commentLikeSection';
}


Confluence.Templates.Likes.likesDialog = function(opt_data, opt_ignored) {
  var output = '<div id="likes-dialog-body"><ol>';
  var likeList26 = opt_data.likes;
  var likeListLen26 = likeList26.length;
  for (var likeIndex26 = 0; likeIndex26 < likeListLen26; likeIndex26++) {
    var likeData26 = likeList26[likeIndex26];
    output += '<li><div class="avatar-container"><a href="' + soy.$$escapeHtml(likeData26.user.url) + '"><img class="like-user-avatar" src="' + soy.$$escapeHtml(likeData26.user.avatarUrl) + '"></a></div><div class="like-user"><a class="like-user-link" href="' + soy.$$escapeHtml(likeData26.user.url) + '">' + soy.$$escapeHtml(likeData26.user.fullName) + '</a></div>' + ((opt_data.showFollowActions) ? '<div class="follow-button-container aui-toolbar"><ul class="toolbar-group"><li class="toolbar-item">' + ((likeData26.user.followedByRemoteUser) ? soy.$$escapeHtml('Following') : '<button data-username="' + soy.$$escapeHtml(likeData26.user.name) + '" class="likes-dialog-follow-button toolbar-trigger">' + soy.$$escapeHtml('Follow') + '</button>') + '</li></ul></div>' : '') + '</li>';
  }
  output += '</ol></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Likes.likesDialog.soyTemplateName = 'Confluence.Templates.Likes.likesDialog';
}


Confluence.Templates.Likes.userLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.user.url) + '" class="confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.fullName) + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.Likes.userLink.soyTemplateName = 'Confluence.Templates.Likes.userLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/user.soy' */
// This file was automatically generated from user.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.User.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.User == 'undefined') { Confluence.Templates.User = {}; }


Confluence.Templates.User.userLinkUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/display/~' + soy.$$escapeUri(opt_data.username);
};
if (goog.DEBUG) {
  Confluence.Templates.User.userLinkUrl.soyTemplateName = 'Confluence.Templates.User.userLinkUrl';
}


Confluence.Templates.User.logo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.profilePictureInfo['default'] && opt_data.username == opt_data.currentUsername) ? '<a ' + ((opt_data.canView) ? ' ' + ((! opt_data.disableUserHover) ? 'class="userLogoLink"' : '') + ' data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : '') + ' href="' + soy.$$escapeHtml("") + '/users/profile/editmyprofilepicture.action" title="' + soy.$$escapeHtml('Add a picture of yourself') + '"><img class="userLogo logo defaultLogo" src="' + soy.$$escapeHtml("/s/en_US/7901/af536c7c6dffcc1d697b914b797aa7f2f306b4f8/_") + '/images/icons/profilepics/add_profile_pic.svg" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml('Add a picture of yourself') + '"></a>' : (opt_data.profilePictureInfo.anonymous) ? '<img class="userLogo logo anonymous" src="' + soy.$$escapeHtml("/s/en_US/7901/af536c7c6dffcc1d697b914b797aa7f2f306b4f8/_") + '/images/icons/profilepics/anonymous.svg" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml('Anonymous') + '" title="' + soy.$$escapeHtml('Anonymous') + '">' : (opt_data.canView) ? '<a ' + ((! opt_data.disableUserHover) ? 'class="userLogoLink"' : '') + ' data-username="' + soy.$$escapeHtml(opt_data.username) + '" href="' + Confluence.Templates.User.userLinkUrl(opt_data) + '"><img class="userLogo logo" src="' + soy.$$escapeHtml(opt_data.profilePictureInfo.uriReference) + '" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml(opt_data.username) + '" title="' + soy.$$escapeHtml(opt_data.username) + '"></a>' : '<img class="userLogo logo anonymous" src="' + soy.$$escapeHtml("/s/en_US/7901/af536c7c6dffcc1d697b914b797aa7f2f306b4f8/_") + '/images/icons/profilepics/anonymous.svg" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml(opt_data.username) + '" title="' + soy.$$escapeHtml(opt_data.username) + '">');
};
if (goog.DEBUG) {
  Confluence.Templates.User.logo.soyTemplateName = 'Confluence.Templates.User.logo';
}


Confluence.Templates.User.usernameLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.username && opt_data.username != '') ? '<a href="' + Confluence.Templates.User.userLinkUrl(opt_data) + '"' + ((opt_data.canView) ? 'class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : 'class="url fn"') + '>' + ((opt_data.fullName && opt_data.fullName != '') ? soy.$$escapeHtml(opt_data.fullName) : soy.$$escapeHtml(opt_data.username)) + '</a>' : soy.$$escapeHtml('Anonymous'));
};
if (goog.DEBUG) {
  Confluence.Templates.User.usernameLink.soyTemplateName = 'Confluence.Templates.User.usernameLink';
}


Confluence.Templates.User.fullNameOrAnonymous = function(opt_data, opt_ignored) {
  return '' + ((opt_data.user && opt_data.user.fullName) ? soy.$$escapeHtml(opt_data.user.fullName) : soy.$$escapeHtml('Anonymous'));
};
if (goog.DEBUG) {
  Confluence.Templates.User.fullNameOrAnonymous.soyTemplateName = 'Confluence.Templates.User.fullNameOrAnonymous';
}


Confluence.Templates.User.usernameOrAnonymous = function(opt_data, opt_ignored) {
  return '' + ((opt_data.user && opt_data.user.name) ? soy.$$escapeHtml(opt_data.user.name) : soy.$$escapeHtml('Anonymous'));
};
if (goog.DEBUG) {
  Confluence.Templates.User.usernameOrAnonymous.soyTemplateName = 'Confluence.Templates.User.usernameOrAnonymous';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Icons.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Icons == 'undefined') { Confluence.Templates.Icons = {}; }


Confluence.Templates.Icons.contentIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.content.type == 'trackback') ? '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon icon-trackback" title="' + soy.$$escapeHtml('Track back') + '">' + soy.$$escapeHtml('Track back') + ':</a>' : '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon ' + soy.$$escapeHtml(opt_data.iconCss) + '" title="' + soy.$$escapeHtml(opt_data.iconTitle) + '">' + soy.$$escapeHtml(opt_data.iconTitle) + '</a>');
};
if (goog.DEBUG) {
  Confluence.Templates.Icons.contentIcon.soyTemplateName = 'Confluence.Templates.Icons.contentIcon';
}


Confluence.Templates.Icons.contentIconFont = function(opt_data, opt_ignored) {
  return '' + ((opt_data.content.type == 'trackback') ? '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon icon-trackback" title="' + soy.$$escapeHtml('Track back') + '">' + soy.$$escapeHtml('Track back') + ':</a>' : '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" title="' + soy.$$escapeHtml(opt_data.iconTitle) + '"><span class="aui-icon ' + soy.$$escapeHtml(opt_data.iconCss) + '">' + soy.$$escapeHtml(opt_data.iconTitle) + '</span></a>');
};
if (goog.DEBUG) {
  Confluence.Templates.Icons.contentIconFont.soyTemplateName = 'Confluence.Templates.Icons.contentIconFont';
}


Confluence.Templates.Icons.iconSpan = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="icon' + ((opt_data.type) ? ' aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.type) : '') + ' ' + ((opt_data.additionalClasses) ? soy.$$escapeHtml(opt_data.additionalClasses) : '') + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</span>';
};
if (goog.DEBUG) {
  Confluence.Templates.Icons.iconSpan.soyTemplateName = 'Confluence.Templates.Icons.iconSpan';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/captcha.soy' */
// This file was automatically generated from captcha.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Captcha.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Captcha == 'undefined') { Confluence.Templates.Captcha = {}; }


Confluence.Templates.Captcha.form = function(opt_data, opt_ignored) {
  var output = '<div class="captcha field-group"><label id="captcha-response-label" for="captcha-response"><span class="assistive">' + soy.$$escapeHtml('If you are unable to use this CAPTCHA please \x3ca href\x3d\x22administrators.action\x22 tabindex\x3d\x225\x22\x3econtact your administrator\x3c/a\x3e for assistance.') + '</span></label>' + Confluence.Templates.Captcha.image(opt_data) + '<input type="text" id="captcha-response" name="captchaResponse" value="" class="text" placeholder="' + soy.$$escapeHtml('Type the word above') + '">';
  if (opt_data.captchaErrors && opt_data.captchaErrors.length) {
    var errorList13 = opt_data.captchaErrors;
    var errorListLen13 = errorList13.length;
    for (var errorIndex13 = 0; errorIndex13 < errorListLen13; errorIndex13++) {
      var errorData13 = errorList13[errorIndex13];
      output += aui.message.warning({content: errorData13});
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Captcha.form.soyTemplateName = 'Confluence.Templates.Captcha.form';
}


Confluence.Templates.Captcha.image = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml("") + '/jcaptcha?id=' + soy.$$escapeHtml(opt_data.captchaId) + '" class="captcha-image" alt="' + soy.$$escapeHtml('CAPTCHA image') + '"><input type="hidden" name="captchaId" value="' + soy.$$escapeHtml(opt_data.captchaId) + '" placeholder="' + soy.$$escapeHtml('Type the word above') + '">';
};
if (goog.DEBUG) {
  Confluence.Templates.Captcha.image.soyTemplateName = 'Confluence.Templates.Captcha.image';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/notifications.soy' */
// This file was automatically generated from notifications.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Notifications.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Notifications == 'undefined') { Confluence.Templates.Notifications = {}; }


Confluence.Templates.Notifications.notLoggedIn = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.isUserAuthenticated) ? '<div id="anonymous-warning" class="aui-message aui-message-warning closeable">' + soy.$$filterNoAutoescape('You are not logged in. Any changes you make will be marked as \x3cspan class\x3d\x22smalltext\x22\x3eanonymous\x3c/span\x3e.') + ((! opt_data.isExternalUserManagementEnabled) ? ' ' + soy.$$filterNoAutoescape(AJS.format('You may want to \x3ca href\x3d\x22{0}\x22\x3eLog In\x3c/a\x3e if you already have an account.',opt_data.loginURL)) : '') + '</div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Notifications.notLoggedIn.soyTemplateName = 'Confluence.Templates.Notifications.notLoggedIn';
}


Confluence.Templates.Notifications.actionErrors = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.actionErrors.length > 0) {
    output += '<div class="aui-message aui-message-error ' + ((opt_data.closeable) ? 'closeable' : '') + '"><p class="title">' + soy.$$escapeHtml('The following error(s) occurred:') + '</p><span class="aui-icon icon-error"></span><ul>';
    var errorHtmlList24 = opt_data.actionErrors;
    var errorHtmlListLen24 = errorHtmlList24.length;
    for (var errorHtmlIndex24 = 0; errorHtmlIndex24 < errorHtmlListLen24; errorHtmlIndex24++) {
      var errorHtmlData24 = errorHtmlList24[errorHtmlIndex24];
      output += '<li>' + soy.$$filterNoAutoescape(errorHtmlData24) + '</li>';
    }
    output += '</ul></div>';
  }
  output += '<div id="action-messages"></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Notifications.actionErrors.soyTemplateName = 'Confluence.Templates.Notifications.actionErrors';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:viewcontent', location = '/js/viewcontent.js' */
require(["confluence/api/event","internal/browser-metrics","ajs","jquery"],function(f,e,c,g){function b(i){if(!g(i.target).hasClass("full-load")){var h=i.data.type;if(c.Meta.getBoolean("collaborative-content")){var j="confluence."+h+".edit.collaborative.quick-view";e.start({key:j});c.bind("rte-collab-ready",function(){e.end({key:j});e.start({key:j+".connected"})});c.bind("synchrony.connected",function(){e.end({key:j+".connected"})})}else{if(!c.Meta.getBoolean("shared-drafts")){e.start({key:"confluence."+h+".edit.quick-view",ready:".active-richtext"})}}}}function a(){e.start({key:"confluence.file.preview.firstpage"});f.bind("confluence-previews.fileviewer.completed",function(){e.end({key:"confluence.file.preview.firstpage"})})}function d(){var j=c.Meta.get("content-type");var i=g("#confluence-ui.confluence-dashboard").length;var h=window.location.href.indexOf("/content-only/")>-1;if(j){if(!i&&!h){e.start({key:"confluence."+j+".view",ready:".wiki-content",isInitial:true})}g("#editPageLink").on("click",{type:j},b);g(".confluence-embedded-file-wrapper").on("click",a)}}c.toInit(d)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-init', location = 'sh/asyncLoader.js' */
/**
 * Load the Code Macro resources via WRM.require(). This avoids any extra blocking resources being added to the <head>
 */
define('confluence/code-macro/async-loader', [
    'jquery',
    'wrm',
    'underscore'
], function(
    $,
    WRM,
    _
) {
    return function() {
        _.defer(function() {
            var $controlButtons = $(".codeHeader .collapse-source");
            _showSpinner($controlButtons);
            var $codeBlocks = $('#content').find("pre.syntaxhighlighter-pre");

            if ($codeBlocks.length > 0) {

                var codeMacroThemeResourcePrefix = 'wr!com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-';
                var codeMacroResources = ['wrc!code-macro'];

                $codeBlocks.each(function() {
                    codeMacroResources.push(codeMacroThemeResourcePrefix + $(this).data('theme').toLowerCase());

                    // If the macro is using a custom language, we need to download it
                    var customLanguageResource = $(this).data('custom-language-resource');
                    if (typeof customLanguageResource !== "undefined" && codeMacroResources.indexOf(customLanguageResource) === -1) {
                        codeMacroResources.push("wr!" + customLanguageResource);
                    }
                });

                WRM.require(codeMacroResources).done(function () {
                    window.SyntaxHighlighter.highlight();
                    _hideSpinner($controlButtons);
                });

            }
        });

        /**
         * Hide the expand/collapse buttons until the highlighter is finished, and show a spinner instead
         * @param $controlButtons The expand/collapse buttons
         * @private
         */
        function _showSpinner($controlButtons) {
            $controlButtons.hide();
            // Avoiding searching the entire dom again
            _.forEach($controlButtons, function (button) {
                $(button).next('.collapse-spinner-wrapper').spin();
            });

        }

        /**
         * Show the expand/collapse buttons and hide the spinner once the highlighter is ready.
         * @param $controlButtons The expand/collapse buttons
         * @private
         */
        function _hideSpinner($controlButtons) {
            $controlButtons.show();
            $controlButtons.next('.collapse-spinner-wrapper').remove();
        }
    }
});

require('confluence/module-exporter').safeRequire('confluence/code-macro/async-loader', function(CodeMacroLoader) {
    AJS.toInit(CodeMacroLoader);
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:skate-0.12.6', location = 'libs/skate/0.12.6/skate-0.12.6.js' */
(function e(g,c,j){function h(a,k){if(!c[a]){if(!g[a]){var d="function"==typeof require&&require;if(!k&&d)return d(a,!0);if(f)return f(a,!0);d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d;}d=c[a]={exports:{}};g[a][0].call(d.exports,function(c){var f=g[a][1][c];return h(f?f:c)},d,d.exports,e,g,c,j)}return c[a].exports}for(var f="function"==typeof require&&require,d=0;d<j.length;d++)h(j[d]);return h})({1:[function(b,g,c){Object.defineProperty(c,"__esModule",{value:!0});"use strict";
c.ATTR_IGNORE="data-skate-ignore";c.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"}},{}],2:[function(b,g){g.exports={get:function(c,b){if(c.__SKATE_DATA)return c.__SKATE_DATA[b]},set:function(c,b,h){c.__SKATE_DATA||(c.__SKATE_DATA={});c.__SKATE_DATA[b]=h;return c}}},{}],3:[function(b,g){function c(c){for(var f=c.length,b=0;b<f;b++){var i=c[b],o=i.addedNodes,i=i.removedNodes;o&&(o.length&&!p(o[0].parentNode))&&d(o);i&&i.length&&a(i)}}var j=function(c){return c&&c.__esModule?
c["default"]:c},h=j(b("./globals")),f=b("./lifecycle"),d=f.initElements,a=f.removeElements,k=j(b("./mutation-observer")),p=b("./utils").getClosestIgnoredElement;g.exports={register:function(a){a&&(k.fixIe(),this.unregister());h.observer||(a=new k(c),a.observe(document,{childList:!0,subtree:!0}),h.observer=a);return this},unregister:function(){h.observer&&(h.observer.disconnect(),h.observer=void 0);return this}}},{"./globals":4,"./lifecycle":5,"./mutation-observer":6,"./utils":9}],4:[function(b,g){window.__skate||
(window.__skate={observer:void 0,registry:{}});g.exports=window.__skate},{}],5:[function(b,g,c){function j(o,c,a){if(k.get(o,c.id+":lifecycle:"+a))return!0;k.set(o,c.id+":lifecycle:"+a,!0);return!1}function h(c,a){if(!j(c,a,"created")){m(c,a.prototype,!0);a.template&&a.template(c);var b=function(a,b){return function(f){if(!b)return a(c,f,c);for(var d=f.target;d&&d!==document&&d!==c.parentNode;){if(i.call(d,b))return a(c,f,d);d=d.parentNode}}};"object"===typeof a.events&&l(a.events,function(a,d){var f,
i;i=d.split(" ");f=i.shift();i=i.join(" ");c.addEventListener(f,b(a,i),!!i&&("blur"===f||"focus"===f))});var f=function(i,f,d,b){var k;a.attributes&&a.attributes[f]&&"function"===typeof a.attributes[f][i]?k=a.attributes[f][i]:a.attributes&&"function"===typeof a.attributes[f]?k=a.attributes[f]:"function"===typeof a.attributes&&(k=a.attributes);k&&k(c,{type:i,name:f,newValue:d,oldValue:b})},d,k=c.attributes,h=[],g=k.length;(new p(function(a){a.forEach(function(a){var c,i=a.attributeName,d=k[i];d&&null===
a.oldValue?c="created":d&&null!==a.oldValue?c="updated":d||(c="removed");f(c,i,d?d.value||d.nodeValue:void 0,a.oldValue)})})).observe(c,{attributes:!0,attributeOldValue:!0});for(d=0;d<g;d++)h.push(k[d]);for(d=0;d<g;d++){var n=h[d];f("created",n.nodeName,n.value||n.nodeValue)}a.created&&a.created(c)}}function f(c){for(var i=c.length,d=0;d<i;d++){var b=c[d];if(!(1!==b.nodeType||b.attributes[a])){for(var k=n.getForElement(b),g=k.length,m=0;m<g;m++){var l=b,p=k[m];h(l,p);j(l,p,"attached")||(l.removeAttribute(p.unresolvedAttribute),
l.setAttribute(p.resolvedAttribute,""),p.attached&&p.attached(l))}b=b.childNodes;b.length&&f(b)}}}function d(a){for(var c=a.length,i=0;i<c;i++){var f=a[i];if(1===f.nodeType){d(f.childNodes);for(var b=n.getForElement(f),g=b.length,j=0;j<g;j++){var h=f,m=b[j];m.detached&&m.detached(h);k.set(h,m.id+":lifecycle:attached",!1)}}}}g=function(a){return a&&a.__esModule?a["default"]:a};Object.defineProperty(c,"__esModule",{value:!0});"use strict";var a=b("./constants").ATTR_IGNORE,k=g(b("./data")),p=g(b("./mutation-observer")),
n=g(b("./registry")),b=b("./utils"),m=b.inherit,l=b.objEach,b=window.HTMLElement.prototype,i=b.matches||b.msMatchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector;c.triggerCreated=h;c.initElements=f;c.removeElements=d},{"./constants":1,"./data":2,"./mutation-observer":6,"./registry":7,"./utils":9}],6:[function(b,g){function c(a,c){return{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:a,
type:c||"childList"}}function j(a,c){var f=a.childNodes;if(f)for(var d=f.length,b=0;b<d;b++){var k=f[b];c(k);j(k,c)}}function h(a){if(n&&!m)return new n(a);this.callback=a;this.elements=[]}var f=b("./utils"),d=f.debounce,a=f.objEach,k=window.HTMLElement.prototype,p=window.HTMLElement.prototype.contains,n=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver,m=!1,l=-1<window.navigator.userAgent.indexOf("Trident");h.fixIe=function(){if(l&&!m){var a=Object.getOwnPropertyDescriptor(k,
"innerHTML");Object.defineProperty(k,"innerHTML",{get:function(){return a.get.call(this)},set:function(c){j(this,function(a){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",!0,!1,null,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,c)}});m=!0}};Object.defineProperty(h,"isFixingIe",{get:function(){return m}});h.prototype={observe:function(a,f){function b(a){h.push(a);n()}var k=this,j,g,h=[],l=[],n=d(function(){for(var b=h.length,d=0;d<b;d++){var n=h[d],r=
n.target;if(r){var n=n.type,q=r.parentNode;if(f.childList&&(f.subtree||q===a)){var s=m&&"DOMNodeRemoved"===n,t=j&&(1!==j.nodeType?!1:j.contains?j.contains(r):p.call(j,r));if(s||!t){if(!g||g.target!==q)l.push(g=c(q));"DOMNodeInserted"===n?(g.addedNodes||(g.addedNodes=[]),g.addedNodes.push(r)):(g.removedNodes||(g.removedNodes=[]),g.removedNodes.push(r));j=r}}}}k.callback(l);h=[];l=[];g=j=void 0}),t={},q=[],u=d(function(){var a=q.length;k.callback(q);q.splice(0,a)}),s={target:a,options:f,insertHandler:b,
removeHandler:b,attributeHandler:function(d){var b=d.target;if(f.attributes&&(f.subtree||b===a)){var k=d.attrName,g=d.prevValue,d=d.newValue,b=c(b,"attributes");b.attributeName=k;f.attributeOldValue&&(b.oldValue=t[k]||g||null);q.push(b);f.attributeOldValue&&(t[k]=d);u()}}};this.elements.push(s);f.childList&&(a.addEventListener("DOMNodeInserted",s.insertHandler),a.addEventListener("DOMNodeRemoved",s.removeHandler));f.attributes&&a.addEventListener("DOMAttrModified",s.attributeHandler);return this},
disconnect:function(){a(this.elements,function(a){a.target.removeEventListener("DOMNodeInserted",a.insertHandler);a.target.removeEventListener("DOMNodeRemoved",a.removeHandler);a.target.removeEventListener("DOMAttrModified",a.attributeHandler)});this.elements=[];return this}};g.exports=h},{"./utils":9}],7:[function(b,g){function c(a,c){return d(j.registry,a)&&-1<j.registry[a].type.indexOf(c)}var j,h=b("./globals");j=h&&h.__esModule?h["default"]:h;var f=b("./constants.js").types,d=b("./utils").hasOwn;
g.exports={clear:function(){j.registry={};return this},getForElement:function(a){var d=a.attributes,b=d.length,g=[],h=d.is,l=h&&(h.value||h.nodeValue),h=a.tagName.toLowerCase(),i=l||h,o;c(i,f.TAG)&&(i=j.registry[i],o=i["extends"],l?h===o&&g.push(i):o||g.push(i));for(l=0;l<b;l++)i=d[l].nodeName,c(i,f.ATTR)&&(i=j.registry[i],o=i["extends"],(!o||h===o)&&g.push(i));(d=a.classList)?a=d:(a=a.attributes,a=a["class"]&&a["class"].nodeValue.split(/\s+/)||[]);d=a.length;for(b=0;b<d;b++)i=a[b],c(i,f.CLASS)&&
(i=j.registry[i],o=i["extends"],(!o||h===o)&&g.push(i));return g},has:function(a){return d(j.registry,a)},set:function(a,c){if(this.has(a))throw Error('A definition of type "'+c.type+'" with the ID of "'+a+'" already exists.');j.registry[a]=c;return this},remove:function(a){this.has(a)&&delete j.registry[a];return this}}},{"./constants.js":1,"./globals":4,"./utils":9}],8:[function(b,g){function c(a,b){b=n(b||{},c.defaults);b.id=a;if(k.has(b.id))throw Error('A definition of type "'+b.type+'" with the ID of "'+
a+'" already exists.');k.set(b.id,b);i();h.register(b.remove);if(-1<b.type.indexOf(m.TAG)){var f=b,g=function(){var a;a=f["extends"];var b=f.id;a?(a=document.createElement(a),a.setAttribute("is",b)):a=document.createElement(b);f.prototype=g.prototype;d(a,f);return a};g.prototype=f.prototype;return g}}var j=function(a){return a&&a.__esModule?a["default"]:a},h=j(b("./document-observer")),f=b("./lifecycle"),d=f.triggerCreated,a=f.initElements,k=j(b("./registry")),p=b("./utils"),f=p.debounce,n=p.inherit,
j=j(b("./version")),m=b("./constants").types,l=!!document.attachEvent,i=f(function(){var b=function(){a(document.getElementsByTagName("html"))},c;c=l?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;c?b():l?window.addEventListener("load",b):document.addEventListener("DOMContentLoaded",b)});c.init=function(b){if(b)return"string"===typeof b&&(b=document.querySelectorAll(b)),a("undefined"===typeof b.length?[b]:b),b};c.types=m;c.version=j;c.defaults=
{attributes:void 0,events:void 0,"extends":"",id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:m.ANY,unresolvedAttribute:"unresolved"};var o=window.skate;c.noConflict=function(){window.skate=o;return this};window.skate=c;g.exports=c},{"./constants":1,"./document-observer":3,"./lifecycle":5,"./registry":7,"./utils":9,"./version":10}],9:[function(b,g,c){function j(b,c){return Object.prototype.hasOwnProperty.call(b,c)}c.hasOwn=j;c.debounce=function(b){var c=!1;return function(){c||
(c=!0,setTimeout(function(){c=!1;b()},1))}};c.getClosestIgnoredElement=function(b){for(;b&&b!==document&&!(b instanceof DocumentFragment);){if(b.hasAttribute(h))return b;b=b.parentNode}};c.inherit=function(b,c,a){for(var g=Object.getOwnPropertyNames(c),h=g.length,j=0;j<h;j++){var m=g[j];if(a||void 0===b[m]){var l=Object.getOwnPropertyDescriptor(c,m);l.get||l.set||!l.writable||!l.enumerable||!l.configurable?Object.defineProperty(b,m,l):b[m]=c[m]}}return b};c.objEach=function(b,c){for(var a in b)j(b,
a)&&c(b[a],a)};Object.defineProperty(c,"__esModule",{value:!0});"use strict";var h=b("./constants").ATTR_IGNORE},{"./constants":1}],10:[function(b,g){g.exports="0.12.6"},{}]},{},[8]);(function(b){var g=b.skate.noConflict();define("atlassian/libs/skate-0.12.6",[],function(){return g})})(window);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.aui.staging:skate', location = '/includes/js/amd/shim/skate-amd.js' */
define("skate",["atlassian/libs/skate-0.12.6"],function(a){return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:soy-resources', location = 'soy/page-banner.soy' */
// This file was automatically generated from page-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.PageBanner.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.PageBanner == 'undefined') { Confluence.Templates.PageBanner = {}; }


Confluence.Templates.PageBanner.banner = function(opt_data, opt_ignored) {
  var output = '<div id="page-metadata-banner"><ul class="banner">' + Confluence.Templates.PageBanner.renderSystemContentItems(opt_data);
  var itemList6 = opt_data.pageBannerItems;
  var itemListLen6 = itemList6.length;
  for (var itemIndex6 = 0; itemIndex6 < itemListLen6; itemIndex6++) {
    var itemData6 = itemList6[itemIndex6];
    output += Confluence.Templates.PageBanner.renderPageBannerItem(itemData6);
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.banner.soyTemplateName = 'Confluence.Templates.PageBanner.banner';
}


Confluence.Templates.PageBanner.renderSystemContentItems = function(opt_data, opt_ignored) {
  var output = '<li id="system-content-items" class="noprint">';
  var itemList12 = opt_data.systemContentItems;
  var itemListLen12 = itemList12.length;
  for (var itemIndex12 = 0; itemIndex12 < itemListLen12; itemIndex12++) {
    var itemData12 = itemList12[itemIndex12];
    output += Confluence.Templates.PageBanner.itemAnchor(soy.$$augmentMap(itemData12, {isSystemContentItem: true}));
  }
  output += '</li>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.renderSystemContentItems.soyTemplateName = 'Confluence.Templates.PageBanner.renderSystemContentItems';
}


Confluence.Templates.PageBanner.renderPageBannerItem = function(opt_data, opt_ignored) {
  return '<li class="' + ((! opt_data.suppressDefaultStyle) ? 'page-metadata-item noprint' : '') + ((opt_data.isAuiButton) ? 'has-button' : '') + '" ' + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '-wrapper"' : '') + '>' + Confluence.Templates.PageBanner.itemAnchor(soy.$$augmentMap(opt_data, {isSystemContentItem: false})) + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.renderPageBannerItem.soyTemplateName = 'Confluence.Templates.PageBanner.renderPageBannerItem';
}


Confluence.Templates.PageBanner.itemAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '" title="' + soy.$$escapeHtml(opt_data.tooltip) + '" ' + ((opt_data.linkId) ? 'id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ' ' + ((opt_data.styleClasses) ? 'class="' + soy.$$escapeHtml(opt_data.styleClasses) + '"' : '') + '>' + Confluence.Templates.PageBanner.itemIcon(opt_data) + ((! opt_data.isSystemContentItem) ? '<span>' + soy.$$escapeHtml(opt_data.label) + '</span>' : '') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.itemAnchor.soyTemplateName = 'Confluence.Templates.PageBanner.itemAnchor';
}


Confluence.Templates.PageBanner.itemIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.icon) ? '<img class="page-banner-item-icon" src="' + soy.$$escapeHtml(opt_data.icon.url) + '" style="height: ' + soy.$$escapeHtml(opt_data.icon.height) + 'px; width: ' + soy.$$escapeHtml(opt_data.icon.width) + 'px;"/>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.itemIcon.soyTemplateName = 'Confluence.Templates.PageBanner.itemIcon';
}


Confluence.Templates.PageBanner.draftStatusDiscovery = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.elementId) + '" alignment="bottom left" open><p><strong>' + soy.$$escapeHtml('Didn\x27t publish?') + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format('All good, we\x27\x27ve saved your changes! Find them any time under \x3ca href\x3d\x22{0}\x22\x3eRecently worked on\x3c/a\x3e. Just keep editing, and publish when you\x27\x27re ready.',opt_data.linkToMyWork)) + '</p><p><a class="aui-button">' + soy.$$escapeHtml('Okay, got it!') + '</a></p></aui-inline-dialog>';
};
if (goog.DEBUG) {
  Confluence.Templates.PageBanner.draftStatusDiscovery.soyTemplateName = 'Confluence.Templates.PageBanner.draftStatusDiscovery';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner.js' */
define("confluence-page-banner/page-banner",["ajs","jquery","confluence/templates","confluence/legacy","skate"],function(i,c,n,j,d){function l(){var o=c("#system-content-items");if(o.children(":not(.hidden)").length==0){o.addClass("hidden")}else{o.removeClass("hidden")}}function e(){c("#page-metadata-banner").hide()}function k(){var o=c("#system-content-items a:not(.tipsy-disabled),.page-metadata-item a:not(.tipsy-disabled),.page-metadata-modification-info a.last-modified:not(tipsy-disabled),#draft-status-lozenge");a(o);o.click(function(p){g(c(p.target).closest("a"))});c(window).on("click scroll resize",g)}function a(o){c(o).tooltip({live:true,gravity:"n",title:"title",delayIn:500})}function g(o){c(".tipsy").remove();if(o){var p=c(o).data("tipsy");if(p){p.hoverState="out"}}}var f=function(q,s){var r=c("#content-metadata-page-restrictions");var o="";r.removeClass("aui-iconfont-locked aui-iconfont-unlocked restricted");var p=s.hasRestrictions&&!(s.hasExplicitRestrictions||s.hasInheritedRestrictions);if(s.hasExplicitRestrictions||p){r.addClass("aui-icon aui-icon-small aui-iconfont-locked restricted");o="Restrictions apply"}else{if(s.hasInheritedRestrictions){r.addClass("aui-icon aui-icon-small aui-iconfont-unlocked restricted");o="Restrictions apply"}else{r.addClass("aui-icon aui-icon-small aui-iconfont-unlocked");o=s.hasAnyExplicitRestrictions?"Restrictions apply":"Unrestricted"}}r.attr("title",o);a(r);l()};var b=function(){l();i.bind("system-content-metadata.toggled-restrictions",f);i.bind("breadcrumbs.expanded",e);c("#page-metadata-banner").css("visibility","visible");k()};var h=function(){i.unbind("system-content-metadata.toggled-restrictions",f);i.unbind("breadcrumbs.expanded",e)};var m=function(){d("system-metadata-restrictions",{type:d.types.CLASS,events:{click:function(p,o){o.preventDefault();i.trigger("system-content-metadata.open-restrictions-dialog")}},attached:b,detached:h})};m()});require("confluence/module-exporter").safeRequire("confluence-page-banner/page-banner");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner-analytics.js' */
AJS.toInit(function(c){function b(){if(!AJS.Confluence.Analytics||!AJS.Confluence.Analytics.setAnalyticsSource){AJS.log("WARNING: Could not initialise analytics for the page banner: AJS.Confluence.Analytics.setAnalyticsSource is not defined.");return}var e=AJS.Confluence.Analytics.setAnalyticsSource;var f=c("#breadcrumbs > li");e(f.filter(":not(#ellipsis)").find("a"),"breadcrumbs");e(f.filter(".hidden-crumb").find("a"),"breadcrumbs-expanded");e(f.filter(":last").find("a"),"breadcrumbs-parent");var d=c("#com-atlassian-confluence").hasClass("theme-documentation")?"breadcrumbs-homepage":"breadcrumbs-collector";e(f.filter(".first").find("a"),d)}function a(e,d,g){var f=null;e.mouseover(function(){f=setTimeout(g,d)});e.mouseout(function(){clearTimeout(f)})}AJS.bind("breadcrumbs.expanded",function(){AJS.trigger("analyticsEvent",{name:"breadcrumbs-expanded"})});b()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources', location = '/js/confluence-feature-discovery-plugin.js' */
(function(f){Confluence.FeatureDiscovery={};var c,e=false,i=3;var d="com.atlassian.confluence.plugins.confluence-feature-discovery-plugin";var g=d+":confluence-feature-discovery-plugin-resources.test-mode";var a=WRM.data.claim(g);function j(k){if(c===undefined){c=JSON.parse(AJS.Meta.get("discovered-plugin-features")||"{}")}if(k){return c[k]||[]}return c}function b(m,o){var n=j(m);for(var l=0,k=n.length;l<k;l++){if(n[l]==o){return true}}return false}function h(n,p){var l="com.atlassian.webdriver.discovery="+n+":"+p;var k=document.cookie.split(";");for(var m=0;m<k.length;m++){var o=k[m];while(o.charAt(0)==" "){o=o.substring(1)}if(o.indexOf(l)!=-1){return true}}return false}Confluence.FeatureDiscovery.forPlugin=function(m,l){var p=Confluence.storageManager("feature-discovery."+m);l=l||i;function o(r){var q=parseInt(p.getItem(r),10);return isNaN(q)?0:q}function n(r,q){return p.setItem(r,q)}function k(q){return p.removeItem(q)}return{addDiscoveryView:function(q){n(q,o(q)+1)},shouldShow:function(r,q){if(q===true&&a&&!h(m,r)){return false}if(e||b(m,r)){return false}if(o(r)>=l){this.markDiscovered(r);return false}e=true;return true},markDiscovered:function(r,q){if(b(m,r)){return}AJS.safeAjax({url:AJS.contextPath()+"/rest/feature-discovery/1.0/discovered/"+m+"/"+r,type:"POST",data:{},success:function(){j(m).unshift(r);k(r);AJS.trigger("feature-discovered",{pluginKey:m,featureKey:r});if(q&&f.isFunction(q)){q()}}})},listDiscovered:function(){return j(m).slice(0)}}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:status-lozenge-onboarding', location = 'js/status-lozenge-onboarding.js' */
define("confluence-page-banner/status-lozenge-onboarding",["ajs","jquery","confluence/templates","confluence/legacy"],function(f,d,h,g){var i={pluginKey:"com.atlassian.confluence.plugins.confluence-page-banner",featureKey:"recently-work-on-contributor-lozenge"};var c="#draft-status-lozenge";var e=function(){g.FeatureDiscovery.forPlugin(i.pluginKey).markDiscovered(i.featureKey)};var b=function(){if(!g.FeatureDiscovery||!g.FeatureDiscovery.forPlugin){return false}if(d(c).length===0){return false}if(document.referrer.indexOf("resumedraft.action")<0&&document.referrer.indexOf("editpage.action")<0){return false}return g.FeatureDiscovery.forPlugin(i.pluginKey).shouldShow(i.featureKey)};var a=function(){if(!b()){return}var j="dope-draft-discovery";var k=d(h.PageBanner.draftStatusDiscovery({elementId:j,linkToMyWork:f.contextPath()+"/#recently-worked"}));d(c).attr("aria-controls",j).append(k);k.find(".aui-button").click(function(){k.removeAttr("open");e()})};f.toInit(a)});require("confluence/module-exporter").safeRequire("confluence-page-banner/status-lozenge-onboarding");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:view-comment', location = '/includes/js/comments.js' */
define("confluence/comments",["ajs","jquery","confluence/storage-manager","confluence/message-controller"],function(b,f,h,c){function g(a){confirm("Are you sure you want to delete the comment?")&&f.ajax({type:"DELETE",url:b.contextPath()+"/rest/api/content/"+a,contentType:"application/json",dataType:"json"}).done(function(){var a=document.location.href;-1===a.indexOf("showComments")&&(a+=-1!==a.indexOf("?")?"&showComments=true":"?showComments=true");document.location=a}).fail(function(a){c.showError(c.parseError(a),
c.Location.FLAG)})}return{binder:{bindRemoveConfirmation:function(a){f("#comment-"+a+" .comment-action-remove a").click(function(b){b.preventDefault();g(a);return!1})}},initialiser:function(a){var c=h("confluence","comments");if(a("#comments-section").length){a("#comments-section").find(".comment:odd").addClass("odd");a(".comment-action-remove a").click(function(){var b=a(this).attr("id").replace(/remove-comment-/g,"");g(b);return!1});var e=a("#addcomment.comment-text"),d=a("#comments-text-editor").find("textarea");
d.focus(function(){e.addClass("active")}).blur(function(){a.trim(d.val()).length||e.removeClass("active")}).bind("reset.default-text",function(){e.removeClass("active")});a("form[name='textcommentform']").submit(function(){var c=d.val();return!a.trim(c)?(alert("Comment text is empty. Cannot create empty comments."),!1):!0});a("#add-comment-rte").click(function(){d.hasClass("placeholded")||c.setItem("text-comment",a.trim(d.val()))});a("#addcomment #rte").length&&b.bind("init.rte",function(a,b){var d=c.getItem("text-comment");
d&&(b.editor.setContent(d),c.setItem("text-comment",""))})}}}});require("confluence/module-exporter").safeRequire("confluence/comments",function(b){require("confluence/legacy").Comments=b.binder;require("ajs").toInit(b.initialiser)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:browser', location = '/includes/js/api/browser.js' */
define("confluence/api/browser",[],function(){return function(a){function c(){return-1!==a.indexOf("Firefox/")}function b(){return-1!==a.indexOf("Edge/")}function d(){return-1!==a.indexOf("MSIE")||-1!==a.indexOf("Trident/")||b()}function e(){return-1!==a.indexOf("Chrome/")}function f(){return-1!==a.indexOf("Safari/")&&-1===a.indexOf("Chrome/")}function g(){return-1!==a.indexOf("PhantomJS")}return{isFirefox:c,notFirefox:function(){return!c()},isMSEdge:b,notMSEdge:function(){return!b()},isIE:d,notIE:function(){return!d()},
isChrome:e,notChrome:function(){return!e()},isSafari:f,notSafari:function(){return!f()},isPhantom:g,notPhantom:function(){return!g()},version:function(){if(d()){var b=a.match(/MSIE\s([\d.]+)/)||a.match(/rv:([\d.]+)/)||a.match(/Edge\/([\d.]+)/);return parseInt(b[1])}if(e())return parseInt(a.match(/Chrome\/([\d.]+)/)[1]);if(f())return parseInt(a.match(/Version\/([\d.]+)/)[1]);if(c())return parseInt(a.match(/Firefox\/([\d.]+)/)[1])},friendlyName:function(){if(b())return"MSEdge";if(d())return"IE";if(e())return"Chrome";
if(f())return"Safari";if(c())return"Firefox"}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-message', location = 'editor/page-editor-message.js' */
define("confluence-editor/editor/page-editor-message",["jquery","ajs","aui/flag","document","underscore"],function(f,i,g,h,d){var b=Object.create(null),e=Object.create(null);h.addEventListener("aui-flag-close",function(a){a&&a.target&&(b=d.filter(Object.keys(b),function(c){return!f(a.target).find("span").hasClass(c)}))});return{handleMessage:function(a,c,d){b[a]||(e[a]?delete e[a]:c&&(b[a]=g({title:c.title?c.title:"",type:c.type,close:c.close?c.close:"manual",persistent:!1,body:"<span class='"+a+
"'>"+c.message+"</span>"}),d&&d()))},closeMessages:function(a){d.each(a,function(a){b[a]&&(b[a].close(),delete b[a])})},isDisplayed:function(a){return a in b},displayedErrors:function(){return Object.keys(b)},suppressMessage:function(a){e[a]={}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-message', location = '/includes/js/page-message.js' */
define("confluence/page-message","ajs jquery confluence/meta window confluence/api/browser confluence-editor/editor/page-editor-message".split(" "),function(a,h,d,f,i,j){var e={},g=new i(f.navigator.userAgent);e._getQueryString=function(){return f.location.search};e.displayPageMessage=function(){var c=e._getQueryString(),b=d.get("editing-user");if(c.indexOf("editingLocked")!==-1&&b)a.MessageHandler.flag({type:"info",title:"Unable to edit",body:a.format("Collaborative editing is offline right now, and {0} is editing this page. Try again in a few minutes.",
a.escapeHtml(b)),close:"manual"});else if(c.indexOf("editingFailed")!==-1)a.MessageHandler.flag({type:"info",title:"Unable to edit",body:"Editing is unavailable right now. Try again in a few minutes.",close:"manual"});else if(c.indexOf("userLimitReached")!==-1){j.handleMessage("collab.edit.user.limit.reached",{type:"warning",title:"You can\u0027t edit this page right now",message:"\u003cp\u003eThis page is so popular, you\u0027ve reached the maximum number of simultaneous editors.\u003c/p\u003e\u003cp\u003eTry again when it\u0027s not so busy.\u003c/p\u003e",close:"manual"});a.Confluence.Analytics.publish("collab.edit.user.limit.reached",
{browserName:g.friendlyName(),browserVersion:g.version(),pageId:d.get("page-id"),editMode:"slow",numEditors:d.get("max-number-editors")})}else if(c.indexOf("spaceEditingRestriction")!==-1){b=d.get("space-key");c=d.get("content-type")==="blogpost"?"You can\u0027t edit blog posts in this space":"You can\u0027t edit pages in this space";b=d.get("context-path")+"/spaces/viewspacesummary.action?key="+encodeURIComponent(b);b=d.get("content-type")==="blogpost"?a.format("Ask a {0}space admin{1}, or the person who invited you, to give you \u0027\u0027add blog\u0027\u0027 permission in this space.",
'<a href="'+b+'">',"</a>"):a.format("Ask a {0}space admin{1}, or the person who invited you, to give you \u0027\u0027add page\u0027\u0027 permission in this space.",'<a href="'+b+'">',"</a>");c=a.MessageHandler.flag({type:"info",title:c,body:b,close:"manual"});h(c).addClass("spaceEditingRestriction")}};return e});require("confluence/module-exporter").safeRequire("confluence/page-message",function(a){require("ajs").toInit(a.displayPageMessage)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'soy/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Comments.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Comments == 'undefined') { Confluence.Templates.Comments = {}; }


Confluence.Templates.Comments.displayReplyEditorLoadingContainer = function(opt_data, opt_ignored) {
  return '<ol class="comment-threads"><li class="comment-thread">' + Confluence.Templates.Comments.displayCommentEditorCommon({comment: {ownerId: opt_data.contentId, parentId: opt_data.parentCommentId}, commenter: opt_data.commenter, state: 'loading', mode: 'reply'}) + '</li></ol>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayReplyEditorLoadingContainer.soyTemplateName = 'Confluence.Templates.Comments.displayReplyEditorLoadingContainer';
}


Confluence.Templates.Comments.displayTopLevelCommentEditorPlaceholder = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Comments.displayCommentEditorCommon({comment: {ownerId: opt_data.contentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'add'});
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayTopLevelCommentEditorPlaceholder.soyTemplateName = 'Confluence.Templates.Comments.displayTopLevelCommentEditorPlaceholder';
}


Confluence.Templates.Comments.displayEditEditorContainer = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Comments.displayCommentEditorCommon({comment: {ownerId: opt_data.contentId, id: opt_data.commentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'edit'});
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayEditEditorContainer.soyTemplateName = 'Confluence.Templates.Comments.displayEditEditorContainer';
}


Confluence.Templates.Comments.editorLoadErrorMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(opt_data.message) + '</p><p><a href="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' + soy.$$escapeHtml('Try again') + '</a></p>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.editorLoadErrorMessage.soyTemplateName = 'Confluence.Templates.Comments.editorLoadErrorMessage';
}


Confluence.Templates.Comments.displayCommentEditorCommon = function(opt_data, opt_ignored) {
  var output = '<div class="quick-comment-container comment ' + soy.$$escapeHtml(opt_data.mode) + '">' + Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}) + '<div class="quick-comment-body"><div class="quick-comment-loading-container" style="display:' + ((opt_data.state == 'loading') ? 'block' : 'none') + ';"></div><div id="editor-messages"></div><div id="all-messages"></div><form style="display:' + ((opt_data.state == 'loading') ? 'none' : 'block') + ';" class="quick-comment-form aui" method="post" ';
  switch (opt_data.mode) {
    case 'add':
      output += 'name="inlinecommentform" action="' + soy.$$escapeHtml("") + '/pages/doaddcomment.action?pageId=' + soy.$$escapeHtml(opt_data.comment.ownerId) + '"';
      break;
    case 'edit':
      output += 'name="editcommentform" action="' + soy.$$escapeHtml("") + '/pages/doeditcomment.action?pageId=' + soy.$$escapeHtml(opt_data.comment.ownerId) + '&commentId=' + soy.$$escapeHtml(opt_data.comment.id) + '"';
      break;
    case 'reply':
      output += 'name="threadedcommentform"  action="' + soy.$$escapeHtml("") + '/pages/doaddcomment.action?pageId=' + soy.$$escapeHtml(opt_data.comment.ownerId) + '&parentId=' + soy.$$escapeHtml(opt_data.comment.parentId) + '"';
      break;
  }
  output += ' >' + ((opt_data.mode == 'add') ? '<div title="' + soy.$$escapeHtml('Add a Comment') + '" class="quick-comment-prompt"><span>' + soy.$$escapeHtml('Write a comment\u2026') + '</span></div>' : '') + '</form></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayCommentEditorCommon.soyTemplateName = 'Confluence.Templates.Comments.displayCommentEditorCommon';
}


Confluence.Templates.Comments.userLogo = function(opt_data, opt_ignored) {
  return '<p class="comment-user-logo">' + ((opt_data.userInfo.userName == null) ? '<img class="userLogo logo anonymous" src="' + soy.$$escapeHtml("/s/en_US/7901/af536c7c6dffcc1d697b914b797aa7f2f306b4f8/_") + '/images/icons/profilepics/anonymous.svg" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml('Anonymous') + '" title="' + soy.$$escapeHtml('Anonymous') + '">' : (opt_data.userInfo.profilePicture.isDefault) ? '<a class="userLogoLink" data-username="' + soy.$$escapeHtml(opt_data.userInfo.userName) + '" href="' + soy.$$escapeHtml("") + '/users/profile/editmyprofilepicture.action" title="' + soy.$$escapeHtml('Add a picture of yourself') + '"><img class="userLogo logo defaultLogo" src="' + soy.$$escapeHtml("/s/en_US/7901/af536c7c6dffcc1d697b914b797aa7f2f306b4f8/_") + '/images/icons/profilepics/add_profile_pic.svg" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml('Add a picture of yourself') + '"></a>' : '<a class="userLogoLink" data-username="' + soy.$$escapeHtml(opt_data.userInfo.userName) + '" href="' + Confluence.Templates.User.userLinkUrl({username: opt_data.userInfo.userName}) + '"><img class="userLogo logo" src="' + soy.$$escapeHtml(opt_data.userInfo.profilePicture.path) + '" alt="' + soy.$$escapeHtml('User icon') + ': ' + soy.$$escapeHtml(opt_data.userInfo.userName) + '" title="' + soy.$$escapeHtml(opt_data.userInfo.userName) + '"></a>') + '</p>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.userLogo.soyTemplateName = 'Confluence.Templates.Comments.userLogo';
}


Confluence.Templates.Comments.displayComment = function(opt_data, opt_ignored) {
  return '' + ((opt_data.comment.parentId == 0 && opt_data.firstReply) ? '<div id="comments-section" class="pageSection group"><div class="section-header"><h2 id="comments-section-title" class="section-title">' + soy.$$escapeHtml('1 Comment') + '</h2>' + Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: true}) + '</div></div>' : (opt_data.firstReply) ? Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: false}) : Confluence.Templates.Comments.commentThreadItem({comment: opt_data.comment, commenter: opt_data.commenter, highlight: true}));
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayComment.soyTemplateName = 'Confluence.Templates.Comments.displayComment';
}


Confluence.Templates.Comments.commentThread = function(opt_data, opt_ignored) {
  return '<ol class="comment-threads' + ((opt_data.topLevel) ? ' top-level" id="page-comments' : '') + '">' + Confluence.Templates.Comments.commentThreadItem(opt_data) + '</ol>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.commentThread.soyTemplateName = 'Confluence.Templates.Comments.commentThread';
}


Confluence.Templates.Comments.commentThreadItem = function(opt_data, opt_ignored) {
  return '<li id="comment-thread-' + soy.$$escapeHtml(opt_data.comment.id) + '" class="comment-thread">' + Confluence.Templates.Comments.commentView(opt_data) + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.commentThreadItem.soyTemplateName = 'Confluence.Templates.Comments.commentThreadItem';
}


Confluence.Templates.Comments.commentView = function(opt_data, opt_ignored) {
  return '<div class="comment' + ((opt_data.highlight == true) ? ' focused' : '') + '" id="comment-' + soy.$$escapeHtml(opt_data.comment.id) + '">' + Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}) + '<div class="comment-header"><h4 class="author">' + ((opt_data.commenter.userName == null) ? soy.$$escapeHtml('Anonymous') : '<a href="' + soy.$$escapeHtml("") + '/display/~' + soy.$$escapeUri(opt_data.commenter.userName) + '" class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.commenter.userName) + '">' + soy.$$escapeHtml(opt_data.commenter.displayName) + '</a>') + '</h4></div><div class="comment-body"><div class="comment-content wiki-content">' + soy.$$filterNoAutoescape(opt_data.comment.html) + '</div><div class="comment-actions">' + Confluence.Templates.Comments.displayCommentActions({section: 'secondary', actions: opt_data.comment.secondaryActions, commentId: opt_data.comment.id}) + Confluence.Templates.Comments.displayCommentActions({section: 'primary', actions: opt_data.comment.primaryActions, commentId: opt_data.comment.id}) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.commentView.soyTemplateName = 'Confluence.Templates.Comments.commentView';
}


Confluence.Templates.Comments.displayCommentActions = function(opt_data, opt_ignored) {
  var output = '<ul class="comment-actions-' + soy.$$escapeHtml(opt_data.section) + '">';
  if (opt_data.actions != null) {
    var itemList211 = opt_data.actions;
    var itemListLen211 = itemList211.length;
    for (var itemIndex211 = 0; itemIndex211 < itemListLen211; itemIndex211++) {
      var itemData211 = itemList211[itemIndex211];
      output += '<li ' + ((itemData211.style != null) ? ' class="' + soy.$$escapeHtml(itemData211.style) + '"' : '') + '><a ' + ((itemData211.tooltip != null) ? ' title="' + soy.$$escapeHtml(itemData211.tooltip) + '"' : '') + ' href="' + soy.$$escapeHtml(itemData211.url) + '" ' + ((itemData211.id) ? ' id="' + soy.$$escapeHtml(itemData211.id) + '-' + soy.$$escapeHtml(opt_data.commentId) + '"' : '') + '><span>' + soy.$$escapeHtml(itemData211.label) + '</span></a></li>\n';
    }
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Comments.displayCommentActions.soyTemplateName = 'Confluence.Templates.Comments.displayCommentActions';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/comment-display-manager.js' */
define("confluence-quick-edit/comment-display-manager",["ajs","confluence/legacy","confluence/templates","jquery"],function(g,j,h,c){var i={_updateCommentSectionTitle:function(){var a=c("#comments-section-title");if(0!==a.length){var b=this.commentCount();1===b?a.text("1 Comment"):a.text(g.format("{0} Comments",b))}},addComment:function(a,b,f,d){a={comment:b,commenter:a,highlight:f,context:{contextPath:g.Meta.get("context-path"),staticResourceUrlPrefix:g.Meta.get("static-resource-url-prefix")}};
if(this.hasComments()){if(0===b.parentId)a.firstReply=!1,f=c("#comments-section").find(".comment-threads.top-level");else{var f=c("#comment-thread-"+b.parentId),e=f.children(".commentThreads");e.length?(a.firstReply=!1,f=e):a.firstReply=!0}d||this.clearFocus();d=c(h.Comments.displayComment(a));d.addClass("fadeInComment");f.append(d);this._updateCommentSectionTitle()}else a.firstReply=!0,d=c(h.Comments.displayComment(a)),d.addClass("fadeInComment"),c("#comments-section").prepend(d);j.Comments.bindRemoveConfirmation(b.id);
b=this.getCommentNode(b.id);b.scrollToElement();return b},addOrUpdateComment:function(a,b,c,d){var e=this.getCommentNode(b.id);return e?(e.find(".comment-content").html(b.html),d||this.clearFocus(),c&&e.addClass("focused"),e.addClass("fadeInComment"),e.scrollToElement(),e):this.addComment.apply(this,arguments)},isVisible:function(){return!c("#page-comments").hasClass("hidden")},hasComments:function(){return 0<this.commentCount()},commentCount:function(){return c("#comments-section .comment").not(".quick-comment-container").length},
clearFocus:function(){c(".comment").removeClass("focused")},getCommentNode:function(a){a=c("#comment-"+a);return a.length?a:null},getParentId:function(a){a=i.getCommentNode(a);return null!=a&&(a=a.closest("div.comment"),a.length)?(a=a.attr("id"),a=/\d+/.exec(a),parseInt(a)):0}};return i});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/comment-display-manager","Confluence.CommentDisplayManager");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/scroll-util.js' */
define("confluence-quick-edit/scroll-util",["window","document","jquery"],function(a,c,e){return{scrollToElement:function(){this.scrollWindowToElement()||this.scrollOverflowContainerToElement();return this},scrollWindowToElement:function(){function b(){return"pageYOffset"in a?a.pageYOffset:c.documentElement.scrollTop}var f=b(),d;if("number"===typeof a.innerWidth)d=a.innerHeight;else if(c.documentElement&&c.documentElement.clientWidth)d=c.documentElement.clientHeight;else return this[0].scrollIntoView(!1),
!0;var g=this.offset().top,h=this.height();return g+h+40>f+d?(this[0].scrollIntoView(!1),a.scrollBy(0,40),f!=b()):!0},scrollOverflowContainerToElement:function(){var b=null;this.parents().each(function(){var a=e(this).css("overflow");if("auto"==a||"scroll"==a)return b=e(this),!1});if(!b)return!1;var a=b.height(),d=this.offset().top,c=this.height(),a=a-(d+c+40);0>a&&(b[0].scrollTop-=a);return!0}}});require("confluence/module-exporter").safeRequire("confluence-quick-edit/scroll-util",function(a){require("jquery").fn.extend(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-core', location = 'utils/quick-reload-timer.js' */
define("confluence-quick-reload/utils/quick-reload-timer",["jquery","underscore"],function(c,d){function a(b,a){this.options=c.extend({min:3E4,max:36E5,inactivity:12E4},a);d.bindAll(this,"start","stop","_now","_timeSinceLastSeen","_setActive","_setActivityTrigger","_clamp","_intervalMultiplier");this.callback=b;this._timer=null;this._setActivityTrigger(this._setActive)}a.prototype.start=function(b){this.lastSeenTimestamp=this._now();this.stop();b&&this.callback();var a=function(){this.callback();
c.call(this)},c=function(){this.stop();this._timer=setTimeout(d.bind(a,this),this.options.min*this._intervalMultiplier())};c.call(this)};a.prototype.stop=function(){null!==this._timer&&(clearTimeout(this._timer),this._timer=null)};a.prototype._setActive=function(){if(null!==this._timer){var b=this._timeSinceLastSeen()>this.options.inactivity;this.lastSeenTimestamp=this._now();b&&this.start(!0)}};a.prototype._setActivityTrigger=function(b){document.addEventListener("visibilitychange",function(){document.hidden||
b()},!1);c(window).focus(b);c("body").click(b);c(window).scroll(b)};a.prototype._now=function(){return(new Date).getTime()};a.prototype._timeSinceLastSeen=function(){return this._now()+1-this.lastSeenTimestamp};a.prototype._clamp=function(b,a,c){a=Math.max(Math.min(a,c),b);return isNaN(a)?b:a};a.prototype._intervalMultiplier=function(){var a=(document.hidden?3:1)*Math.ceil(this._timeSinceLastSeen()/this.options.inactivity);return this._clamp(1,this.options.max/this.options.min,a)};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-core', location = 'main/quick-reload-manager.js' */
define("confluence-quick-reload/main/quick-reload-manager","underscore jquery ajs confluence/api/constants confluence-quick-reload/utils/quick-reload-timer confluence/meta confluence/api/logger".split(" "),function(f,e,k,h,i,g,j){function a(){this.enabled=false;this.handlers=[];this.lastFetchTime=e('meta[name="confluence-request-time"]').attr("content")||(new Date).getTime();this.timer=null;f.bindAll(this,"addHandler","removeHandler","update","enable","disable","onUpdateSuccess","onUpdateError")}
a.prototype.addHandler=function(d){var a=false,b;for(b=0;b<this.handlers.length;b++)this.handlers[b]===d&&(a=true);a!==true&&this.handlers.push(d)};a.prototype.removeHandler=function(d){var a;if(d)for(a=0;a<this.handlers.length;a++)if(this.handlers[a]===d){this.handlers.splice(a,1);break}};a.prototype.update=function(){var a=g.get("page-id")!==void 0?g.get("page-id"):"0";e("body").hasClass("contenteditor")?this.disable():e.ajax({type:"GET",url:h.CONTEXT_PATH+"/rest/quickreload/latest/"+a+"?since="+
encodeURIComponent(this.lastFetchTime),dataType:"json"}).done(this.onUpdateSuccess).fail(this.onUpdateError)};a.prototype.enable=function(){if(!this.enabled){if(this.timer===null)this.timer=new i(this.update);this.timer.start();this.enabled=true}};a.prototype.disable=function(){this.timer!==null&&this.timer.stop();this.enabled=false};a.prototype.isEnabled=function(){return this.enabled};a.prototype.onUpdateSuccess=function(a,e,b){if(b.status!==204){this.lastFetchTime=a.time;f.map(this.handlers,function(b){var c=
a[b.property];Array.isArray(c)||(c=[c]);c=b.filterNewResults(b.results,c);if(c.length>0){b.results=b.results.concat(c);b.render(c)}},this)}};a.prototype.onUpdateError=function(a){if(a={404:"not found - the plugin has been probably been removed or disabled from Confluence",500:"generic server error",503:"service unavailable",504:"gateway timeout"}[(a||{}).status]){this.disable();j.error('Quick comment reload plugin has been disabled in this page due to a server error: "'+a+'". Please refresh the page to get it back.')}};
return new a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-read-only-mode-handler', location = 'handlers/quick-reload-read-only-mode.js' */
define("confluence-quick-reload/handlers/quick-reload-read-only-mode",["ajs","jquery","confluence/message-controller","confluence/meta","confluence/api/event"],function(f,i,a,e,g){return{results:[],property:"readOnlyMode",filterNewResults:function(a,c){return 0<c.length&&"string"!==typeof c[0]?c:[]},render:function(b){var b=b[0],c=e.get("access-mode"),d=b.isEnabled?"READ_ONLY":"READ_WRITE",h="READ_ONLY"===e.get("render-mode")?"We\u0027re back! \u003ca onclick=\u0022location.reload()\u0022\u003eRefresh\u003c/a\u003e the page to edit and make changes.":"We\u0027re back! You can now edit and make changes.";
if(!a.hasSuccess(a.Location.BANNER)||b.isEnabled)e.set("access-mode",d),d!==c&&g.trigger("qr:access-mode",{accessMode:d}),this.shouldDisplayError(b)?a.hasErrors(a.Location.BANNER)||this.showError(b.bannerMessage):"READ_ONLY"===c&&"READ_WRITE"===d?this.showSuccess(h):this.clearAll()},clearAll:function(){a.clearErrors(a.Location.ALL);a.clearSuccess(a.Location.ALL)},showError:function(b){a.clearSuccess(a.Location.ALL);a.showError(b,a.Location.BANNER)},showSuccess:function(b){a.clearErrors(a.Location.ALL);
a.showSuccess(b,a.Location.BANNER,{closeable:!0})},shouldDisplayError:function(a){return a.isBannerMessageOn||a.isEnabled}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'main/quick-reload.soy' */
// This file was automatically generated from quick-reload.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace QuickReload.Templates.
 */

if (typeof QuickReload == 'undefined') { var QuickReload = {}; }
if (typeof QuickReload.Templates == 'undefined') { QuickReload.Templates = {}; }


QuickReload.Templates.pageEdit = function(opt_data, opt_ignored) {
  return '' + QuickReload.Templates.container({content: '<div class="qr-notice-authors">' + QuickReload.Templates.noticeHeader({users: opt_data.pageEditors}) + '</div><div class="qr-notice-summary">' + aui.buttons.button({text: 'Reload page', type: 'text', extraClasses: 'qr-notice-show aui-button-text'}) + QuickReload.Templates.summaryText({users: opt_data.pageEditors}) + '</div>'});
};
if (goog.DEBUG) {
  QuickReload.Templates.pageEdit.soyTemplateName = 'QuickReload.Templates.pageEdit';
}


QuickReload.Templates.pageComment = function(opt_data, opt_ignored) {
  return '' + QuickReload.Templates.container({content: '<div class="qr-notice-authors">' + QuickReload.Templates.noticeHeader({users: opt_data.commentUsers}) + ((opt_data.commentUsers.length == 1) ? '<span class="qr-notice-text">"' + soy.$$escapeHtml(opt_data.noticeText) + '"</span>' : '') + '</div><div class="qr-notice-summary">' + aui.buttons.button({text: '' + ((opt_data.commentUsers.length > 1) ? soy.$$escapeHtml('Show all') : soy.$$escapeHtml('Show')), type: 'text', extraClasses: 'qr-notice-show aui-button-text'}) + QuickReload.Templates.summaryText({users: opt_data.commentUsers}) + '</div>'});
};
if (goog.DEBUG) {
  QuickReload.Templates.pageComment.soyTemplateName = 'QuickReload.Templates.pageComment';
}


QuickReload.Templates.inlineComment = function(opt_data, opt_ignored) {
  return '' + QuickReload.Templates.container({content: '<div class="qr-notice-authors">' + QuickReload.Templates.noticeHeader({users: opt_data.user}) + '<span class="qr-notice-text">"' + soy.$$escapeHtml(opt_data.noticeText) + '"</span></div><div class="qr-notice-summary">' + aui.buttons.button({text: '' + ((opt_data.reloadRequired) ? soy.$$escapeHtml('Reload page') : soy.$$escapeHtml('Show')), type: 'text', extraClasses: 'qr-notice-show aui-button-text', extraAttributes: ['data-reload-required', opt_data.reloadRequired]}) + QuickReload.Templates.summaryText({users: opt_data.user}) + '</div>'});
};
if (goog.DEBUG) {
  QuickReload.Templates.inlineComment.soyTemplateName = 'QuickReload.Templates.inlineComment';
}


QuickReload.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="qr-container">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  QuickReload.Templates.container.soyTemplateName = 'QuickReload.Templates.container';
}


QuickReload.Templates.noticeHeader = function(opt_data, opt_ignored) {
  var output = '';
  var userList68 = opt_data.users;
  var userListLen68 = userList68.length;
  for (var userIndex68 = 0; userIndex68 < userListLen68; userIndex68++) {
    var userData68 = userList68[userIndex68];
    output += (userIndex68 < 8) ? aui.avatar.avatar({size: 'small', avatarImageUrl: userData68.profilePicture.path, title: userData68.displayName != '' ? userData68.displayName : 'Anonymous', extraClasses: 'qr-author-avatar'}) : '';
  }
  return output;
};
if (goog.DEBUG) {
  QuickReload.Templates.noticeHeader.soyTemplateName = 'QuickReload.Templates.noticeHeader';
}


QuickReload.Templates.summaryText = function(opt_data, opt_ignored) {
  var output = '';
  var lastModifier__soy78 = opt_data.users[0];
  var others__soy79 = opt_data.users.length - 1;
  output += '<span class="qr-notice-summary-text">' + soy.$$escapeHtml('by') + ' ' + Confluence.Templates.User.usernameLink({canView: false, username: lastModifier__soy78.userName, fullName: lastModifier__soy78.displayName != '' ? lastModifier__soy78.displayName : 'Anonymous'}) + ((others__soy79 == 1) ? ' ' + soy.$$escapeHtml('and 1 other') : '') + ((others__soy79 > 1) ? ' ' + soy.$$escapeHtml(AJS.format('and {0} others',others__soy79)) : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  QuickReload.Templates.summaryText.soyTemplateName = 'QuickReload.Templates.summaryText';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'utils/quick-reload-count.js' */
define("confluence-quick-reload/utils/quick-reload-count",[],function(){function a(){this.count=0}var b=document.title;a.prototype.getCount=function(){return this.count};a.prototype.setCount=function(a){this.count=a;this._displayCount()};a.prototype._displayCount=function(){document.title=(0<this.count?"("+this.count+") ":"")+b};return new a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-comments.js' */
define("confluence-quick-reload/handlers/quick-reload-comments","ajs underscore jquery confluence/flag confluence/api/event confluence-quick-reload/utils/quick-reload-count confluence/legacy".split(" "),function(j,c,e,l,m,g,d){function h(c){return c.comment.id}var a,f=[];return{results:[],property:"comments",ignoreOnce:function(c){f.push(c)},filterNewResults:function(d,a){if(a.length===0)return a;var b=c.map(d,h);return c.filter(a,function(a){if(a.comment.isInlineComment)return false;a=h(a);if(c.contains(b,
a))return false;a=e.inArray(a,f);if(a>=0){f.splice(a,1);return false}return true})},render:function(f){g.setCount(g.getCount()+f.length);var f={close:"manual",type:"info",extraClasses:"qr-flag",fifo:true,stack:"quickreload"},k=this.results.length>1?j.format("{0} New comments",this.results.length):"New comment",b;b=c.clone(this.results);b.reverse();b=c.uniq(b,function(a){return a.commenter.userName});b=c.map(b,function(a){return a.commenter});var n=
e("<div>").html(this.results[this.results.length-1].comment.html).text();b=QuickReload.Templates.pageComment({commentUsers:b,noticeText:n});var i=this;if(a===void 0||a.getAttribute("aria-hidden")==="true"){a=new l(e.extend({},{body:b,title:k},f));e(a).on("click",".qr-notice-show",c.bind(function(){var b=i.results;if(d&&d.CommentDisplayManager){d.CommentDisplayManager.clearFocus();c.map(b,function(a){var b=d.CommentDisplayManager.getCommentNode(h(a))!==null,a=d.CommentDisplayManager.addOrUpdateComment(a.commenter,
a.comment,true,true);if(d.Likes&&!b){d.Likes.appendAction(e(a));d.Likes.updateComment(e(a),{})}});d.CommentDisplayManager._updateCommentSectionTitle();m.trigger("ic-jim-async-supported")}a.close()},this));e(a).on("aui-flag-close",c.bind(function(){g.setCount(g.getCount()-i.results.length);i.results=[]},this))}else{e(a).find(".qr-container").replaceWith(b);e(a).find(".title").text(k)}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-inline-comments.js' */
define("confluence-quick-reload/handlers/quick-reload-inline-comments","underscore jquery ajs confluence/flag confluence/meta confluence/api/event confluence-quick-reload/utils/quick-reload-count".split(" "),function(c,g,m,r,p,q,i){function o(a,d,c,e,b){a=QuickReload.Templates.inlineComment({user:[a.commenter],noticeText:a&&a.comment&&g("<div>").text(a.comment.html).text(),reloadRequired:d});b=b>1?"New inline comments":"New inline comment";b=new r(g.extend({},
{title:b,body:a},{close:"manual",type:"info",extraClasses:"qr-flag",fifo:true,stack:"quickreload"}));g(b).find(".qr-notice-show").click(c);d||g(b).find(".qr-notice-show").click(b.close);g(b).on("aui-flag-close",e)}function n(a){return a.comment.parentId===0}function j(a){return n(a)?a.comment.id:a.comment.parentId}return{results:[],property:"comments",filterNewResults:function(a,d){d=c.clone(d);d=c.filter(d,function(f){return f.comment.isInlineComment&&f.commenter.userName!==p.get("remote-user")});
if(d.length>0)var g=c.map(a,j),e=c.filter(d,n),b=c.filter(d,function(f){return!n(f)}),i=c.map(e,j),h=c.map(b,j),l=c.difference(h,i),k=[],b=c.filter(b,function(f){if(l.indexOf(f.comment.parentId)!==-1&&k.indexOf(f.comment.parentId)===-1){k.push(f.comment.parentId);return true}return false}),e=e.concat(b),d=c.filter(e,function(f){return g.indexOf(j(f))===-1});return d},render:function(a){i.setCount(i.getCount()+a.length);var d=this;c.each(a,function(a){var e=j(a),b=function(){q.trigger("qr:show-new-thread",
e)},m=function(){var a=p.Links.canonical(),b=a.indexOf("?")===-1?"?":"&";window.location=a+b+"focusedCommentId="+e+"#comment-"+e},h=function(){d.results=c.filter(d.results,function(a){return j(a)!==e});i.setCount(i.getCount()-1)},h=c.bind(h,this),l=this.results.length;if(n(a)){var k=new g.Deferred;k.fail(function(a){o(a,true,m,h,l)});k.done(function(a){o(a,false,b,h,l)});q.trigger("qr:add-new-highlight",[a,k])}else o(a,false,b,h,l)},this)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-resources', location = 'handlers/quick-reload-page.js' */
define("confluence-quick-reload/handlers/quick-reload-page",["underscore","jquery","ajs","confluence/flag","confluence-quick-reload/utils/quick-reload-count"],function(d,a,g,j,e){var c;return{results:[],property:"page",filterNewResults:function(c,a){return 0<a.length&&"string"!==typeof a[0]?a:[]},render:function(f){e.setCount(e.getCount()+f.length);var f={close:"manual",type:"info",extraClasses:"qr-flag",fifo:!0,stack:"quickreload"},h=1<this.results.length?g.format("{0} new edits",this.results.length):
"New page edits",b;b=d.clone(this.results);b.reverse();b=d.uniq(b,function(a){return a.editor.userName});b=d.map(b,function(a){return a.editor});b=QuickReload.Templates.pageEdit({pageEditors:b});var i=this;void 0===c||"true"===c.getAttribute("aria-hidden")?(c=new j(a.extend({},{body:b,title:h},f)),a(c).on("click",".qr-notice-show",function(){a(this).prop("disabled",!0).prepend('<span class="aui-icon aui-icon-wait"></span>&nbsp;');window.location.reload()}),a(c).on("aui-flag-close",
d.bind(function(){e.setCount(e.getCount()-i.results.length);i.results=[]},this))):(a(c).find(".qr-container").replaceWith(b),a(c).find(".title").text(h))}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-bootstrap', location = 'main/quick-reload-main.js' */
require("ajs confluence/dark-features confluence-quick-reload/main/quick-reload-manager confluence-quick-reload/handlers/quick-reload-comments confluence-quick-reload/handlers/quick-reload-inline-comments confluence-quick-reload/handlers/quick-reload-page confluence-quick-reload/handlers/quick-reload-read-only-mode confluence/legacy".split(" "),function(b,d,a,c,e,f,g,h){b.toInit(function(){if(d.isEnabled("quickreload.disabled")||!h.CommentDisplayManager?0:b.Meta.get("page-id")!==void 0){a.addHandler(c);
a.addHandler(e);a.addHandler(f);a.addHandler(g);a.enable();b.bind("page.commentAddedOrUpdated",function(a,b){c.ignoreOnce(b.commentId)})}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:js-namespaces', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/namespaces.js' */
define("bitvoodoo/viewtracker/namespaces",function(){window.Bitvoodoo=window.Bitvoodoo||{};window.Bitvoodoo.Viewtracker=window.Bitvoodoo.Viewtracker||{};window.Bitvoodoo.Viewtracker.Configuration=window.Bitvoodoo.Viewtracker.Configuration||{};window.Bitvoodoo.Viewtracker.Info=window.Bitvoodoo.Viewtracker.Info||{};window.Bitvoodoo.Viewtracker.Reporting=window.Bitvoodoo.Viewtracker.Reporting||{};window.Bitvoodoo.Viewtracker.Reporting.Events=window.Bitvoodoo.Viewtracker.Reporting.Events||{};window.Bitvoodoo.Viewtracker.Reporting.Widgets=window.Bitvoodoo.Viewtracker.Reporting.Widgets||{};window.Bitvoodoo.Viewtracker.Reporting.Charts=window.Bitvoodoo.Viewtracker.Reporting.Charts||{};window.Bitvoodoo.Viewtracker.Reporting.Rest=window.Bitvoodoo.Viewtracker.Reporting.Rest||{};window.Bitvoodoo.Viewtracker.Reporting.Constants=window.Bitvoodoo.Viewtracker.Reporting.Constants||{};var a={};if(Confluence.Templates.Bitvoodoo&&Confluence.Templates.Bitvoodoo.hasOwnProperty("viewtracker")){a=Confluence.Templates.Bitvoodoo.viewtracker.Reporting}window.Bitvoodoo.Viewtracker.Reporting.Templates=window.Bitvoodoo.Viewtracker.Reporting.Templates||a;return window.Bitvoodoo.Viewtracker});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-visits-service', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/viewtracker-visits-service.js' */
require(["ajs","jquery","bitvoodoo/viewtracker/namespaces"],function(a,b){Bitvoodoo.Viewtracker.VisitsService=(function(){var f=a.Confluence.getContextPath()+"/rest/viewtracker/1.0/visits";var h;var g={};var d={};function e(n,l){var k=l.pageId;var j=l.sinceParam;var m=k+""+j;function i(){var p=d[m];if(p){if(p.readyState===4){n(g[m])}else{p.done(i)}}else{var o=f+"/contents/"+k+"/total";if(j){o+="?"+j}d[m]=a.safe.ajax({type:"GET",dataType:"json",data:{},url:o,success:function(q){g[m]=q},complete:function(){n(g[m])}})}}if(g[m]){n(g[m])}else{i()}}function c(m,l,k){var j=k.pageId;function i(){if(h){if(!m){return}if(h.readyState===4){m(l,k)}else{h.done(i)}}else{var p=false;var q=b("meta[name=generator]");if(q&&q.length){var n=q.attr("content");if(n){p=n.toLowerCase().indexOf("k15t")!==-1}}var o={type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({contentId:j,atl_token:b("#atlassian-token").attr("content")}),url:f,callback:m,complete:function(){if(m){m(l,k)}if(!b.isEmptyObject(g)){g={};d={}}}};if(p){o=b.extend(o,{headers:{"X-Atlassian-Token":"no-check"}})}h=a.$.ajax(o)}}i()}return{getVisitsTotal:e,trackVisit:c}}())});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-hooks', location = 'js/hooks.js' */
define("confluence-sortable-tables/hooks",[],function(){var a=[];return{onBeforeInit:function(b){a.push(b)},beforeInitHooks:function(){return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-jquery-tablesorter', location = 'src/js-vendor/jquery/jquery.tablesorter.js' */
("undefined"===typeof window?global:window).__bcb3bf48343222097ceddcaac01ec182=function(){var h=jQuery;h.extend({tablesorter:new function(){function e(){var a=arguments[0],b=1<arguments.length?Array.prototype.slice.call(arguments):a;if("undefined"!==typeof console&&"undefined"!==typeof console.log)console[/error/i.test(a)?"error":/warn/i.test(a)?"warn":"log"](b);else alert(b)}function o(a,b){e(a+" ("+((new Date).getTime()-b.getTime())+"ms)")}function p(a){for(var b in a)return!1;return!0}function m(a,
b,c){if(!b)return"";var g,d=a.config,j=d.textExtraction||"",e="",e="basic"===j?h(b).attr(d.textAttribute)||b.textContent||b.innerText||h(b).text()||"":"function"===typeof j?j(b,a,c):"function"===typeof(g=f.getColumnData(a,j,c))?g(b,a,c):b.textContent||b.innerText||h(b).text()||"";return h.trim(e)}function t(a){var b,c,g=a.config,d=g.$tbodies=g.$table.children("tbody:not(."+g.cssInfoBlock+")"),j,u,i,l,k,h,r,n,q,p=0,B="",t=d.length;if(0===t)return g.debug?e("Warning: *Empty table!* Not building a parser cache"):
"";g.debug&&(q=new Date,e("Detecting parsers for each column"));b=[];for(c=[];p<t;){j=d[p].rows;if(j[p]){u=g.columns;for(i=0;i<u;i++){l=g.$headers.filter('[data-column="'+i+'"]:last');k=f.getColumnData(a,g.headers,i);n=f.getParserById(f.getData(l,k,"extractor"));r=f.getParserById(f.getData(l,k,"sorter"));h="false"===f.getData(l,k,"parser");g.empties[i]=f.getData(l,k,"empty")||g.emptyTo||(g.emptyToBottom?"bottom":"top");g.strings[i]=f.getData(l,k,"string")||g.stringTo||"max";h&&(r=f.getParserById("no-parser"));
n||(n=!1);if(!r)a:{l=a;k=j;h=-1;r=i;for(var s=void 0,F=f.parsers.length,C=!1,w="",s=!0;""===w&&s;)h++,k[h]?(C=k[h].cells[r],w=m(l,C,r),l.config.debug&&e("Checking if value was empty on row "+h+", column: "+r+': "'+w+'"')):s=!1;for(;0<=--F;)if((s=f.parsers[F])&&"text"!==s.id&&s.is&&s.is(w,l,C)){r=s;break a}r=f.getParserById("text")}g.debug&&(B+="column:"+i+"; extractor:"+n.id+"; parser:"+r.id+"; string:"+g.strings[i]+"; empty: "+g.empties[i]+"\n");c[i]=r;b[i]=n}}p+=c.length?t:1}g.debug&&(e(B?B:"No parsers detected"),
o("Completed detecting parsers",q));g.parsers=c;g.extractors=b}function s(a){var b,c,g,d,j,u,i,l,k,p,r,n=a.config,q=n.$table.children("tbody"),t=n.extractors,s=n.parsers;n.cache={};n.totalRows=0;if(!s)return n.debug?e("Warning: *Empty table!* Not building a cache"):"";n.debug&&(l=new Date);n.showProcessing&&f.isProcessing(a,!0);for(j=0;j<q.length;j++)if(r=[],b=n.cache[j]={normalized:[]},!q.eq(j).hasClass(n.cssInfoBlock)){k=q[j]&&q[j].rows.length||0;for(g=0;g<k;++g)if(p={child:[]},u=h(q[j].rows[g]),
i=[],u.hasClass(n.cssChildRow)&&0!==g)c=b.normalized.length-1,b.normalized[c][n.columns].$row=b.normalized[c][n.columns].$row.add(u),u.prev().hasClass(n.cssChildRow)||u.prev().addClass(f.css.cssHasChild),p.child[c]=h.trim(u[0].textContent||u[0].innerText||u.text()||"");else{p.$row=u;p.order=g;for(d=0;d<n.columns;++d)if("undefined"===typeof s[d])n.debug&&e("No parser found for cell:",u[0].cells[d],"does it have a header?");else if(c=m(a,u[0].cells[d],d),c="undefined"===typeof t[d].id?c:t[d].format(c,
a,u[0].cells[d],d),c="no-parser"===s[d].id?"":s[d].format(c,a,u[0].cells[d],d),i.push(n.ignoreCase&&"string"===typeof c?c.toLowerCase():c),"numeric"===(s[d].type||"").toLowerCase())r[d]=Math.max(Math.abs(c)||0,r[d]||0);i[n.columns]=p;b.normalized.push(i)}b.colMax=r;n.totalRows+=b.normalized.length}n.showProcessing&&f.isProcessing(a);n.debug&&o("Building cache for "+k+" rows",l)}function w(a,b){var c=a.config,g=c.widgetOptions,d=a.tBodies,j=[],e=c.cache,i,l,k,m,r,n;if(p(e))return c.appender?c.appender(a,
j):a.isUpdating?c.$table.trigger("updateComplete",a):"";c.debug&&(n=new Date);for(r=0;r<d.length;r++)if(i=h(d[r]),i.length&&!i.hasClass(c.cssInfoBlock)){k=f.processTbody(a,i,!0);i=e[r].normalized;l=i.length;for(m=0;m<l;m++)j.push(i[m][c.columns].$row),(!c.appender||c.pager&&(!c.pager.removeRows||!g.pager_removeRows)&&!c.pager.ajax)&&k.append(i[m][c.columns].$row);f.processTbody(a,k,!1)}c.appender&&c.appender(a,j);c.debug&&o("Rebuilt table",n);!b&&!c.appender&&f.applyWidget(a);a.isUpdating&&c.$table.trigger("updateComplete",
a)}function z(a){var b,c,g,d,j,u,i,l=a.config;l.headerList=[];l.headerContent=[];l.debug&&(i=new Date);l.columns=f.computeColumnIndex(l.$table.children("thead, tfoot").children("tr"));d=l.cssIcon?'<i class="'+(l.cssIcon===f.css.icon?f.css.icon:l.cssIcon+" "+f.css.icon)+'"></i>':"";l.$headers=h(a).find(l.selectorHeaders).each(function(i){c=h(this);b=f.getColumnData(a,l.headers,i,!0);l.headerContent[i]=h(this).html();j=l.headerTemplate.replace(/\{content\}/g,h(this).html()).replace(/\{icon\}/g,d);l.onRenderTemplate&&
(g=l.onRenderTemplate.apply(c,[i,j]))&&"string"===typeof g&&(j=g);h(this).html('<div class="'+f.css.headerIn+'">'+j+"</div>");l.onRenderHeader&&l.onRenderHeader.apply(c,[i]);this.column=parseInt(h(this).attr("data-column"),10);var e=f.getData(c,b,"sortInitialOrder")||l.sortInitialOrder;this.order=/^d/i.test(e)||1===e?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;u=f.getData(c,b,"lockedOrder")||!1;"undefined"!==typeof u&&!1!==u&&(this.order=this.lockedOrder=/^d/i.test(u)||1===u?[1,1,1]:[0,0,0]);
c.addClass(f.css.header+" "+l.cssHeader);l.headerList[i]=this;c.parent().addClass(f.css.headerRow+" "+l.cssHeaderRow).attr("role","row");l.tabIndex&&c.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"});A(a);l.debug&&(o("Built headers:",i),e(l.$headers))}function y(a,b,c){var g=a.config;g.$table.find(g.selectorRemove).remove();t(a);s(a);D(g.$table,b,c)}function A(a){var b,c,g,d=a.config;d.$headers.each(function(j,e){c=h(e);g=f.getColumnData(a,d.headers,j,!0);b="false"===f.getData(e,g,"sorter")||
"false"===f.getData(e,g,"parser");e.sortDisabled=b;c[b?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+b);a.id&&(b?c.removeAttr("aria-controls"):c.attr("aria-controls",a.id))})}function x(a){var b,c,g=a.config,d=g.sortList,j=d.length,e=f.css.sortNone+" "+g.cssNone,i=[f.css.sortAsc+" "+g.cssAsc,f.css.sortDesc+" "+g.cssDesc],l=["ascending","descending"],k=h(a).find("tfoot tr").children().add(g.$extraHeaders).removeClass(i.join(" "));g.$headers.removeClass(i.join(" ")).addClass(e).attr("aria-sort",
"none");for(b=0;b<j;b++)if(2!==d[b][1]&&(a=g.$headers.not(".sorter-false").filter('[data-column="'+d[b][0]+'"]'+(1===j?":last":"")),a.length)){for(c=0;c<a.length;c++)a[c].sortDisabled||a.eq(c).removeClass(e).addClass(i[d[b][1]]).attr("aria-sort",l[d[b][1]]);k.length&&k.filter('[data-column="'+d[b][0]+'"]').removeClass(e).addClass(i[d[b][1]])}g.$headers.not(".sorter-false").each(function(){var a=h(this),b=this.order[(this.count+1)%(g.sortReset?3:2)],b=a.text()+": "+f.language[a.hasClass(f.css.sortAsc)?
"sortAsc":a.hasClass(f.css.sortDesc)?"sortDesc":"sortNone"]+f.language[0===b?"nextAsc":1===b?"nextDesc":"nextNone"];a.attr("aria-label",b)})}function G(a,b,c){if(a.isUpdating)return setTimeout(function(){G(a,b,c)},50);var g,d,j,e,i=a.config,l=!c[i.sortMultiSortKey],k=i.$table;k.trigger("sortStart",a);b.count=c[i.sortResetKey]?2:(b.count+1)%(i.sortReset?3:2);i.sortRestart&&(d=b,i.$headers.each(function(){if(this!==d&&(l||!h(this).is("."+f.css.sortDesc+",."+f.css.sortAsc)))this.count=-1}));d=b.column;
if(l){i.sortList=[];if(null!==i.sortForce){g=i.sortForce;for(j=0;j<g.length;j++)g[j][0]!==d&&i.sortList.push(g[j])}g=b.order[b.count];if(2>g&&(i.sortList.push([d,g]),1<b.colSpan))for(j=1;j<b.colSpan;j++)i.sortList.push([d+j,g])}else{if(i.sortAppend&&1<i.sortList.length)for(j=0;j<i.sortAppend.length;j++)e=f.isValueInArray(i.sortAppend[j][0],i.sortList),0<=e&&i.sortList.splice(e,1);if(0<=f.isValueInArray(d,i.sortList))for(j=0;j<i.sortList.length;j++)e=i.sortList[j],g=i.$headers.filter('[data-column="'+
e[0]+'"]:last')[0],e[0]===d&&(e[1]=g.order[b.count],2===e[1]&&(i.sortList.splice(j,1),g.count=-1));else if(g=b.order[b.count],2>g&&(i.sortList.push([d,g]),1<b.colSpan))for(j=1;j<b.colSpan;j++)i.sortList.push([d+j,g])}if(null!==i.sortAppend){g=i.sortAppend;for(j=0;j<g.length;j++)g[j][0]!==d&&i.sortList.push(g[j])}k.trigger("sortBegin",a);setTimeout(function(){x(a);E(a);w(a);k.trigger("sortEnd",a)},1)}function E(a){var b,c,g,d,j,e,i,h,k,m,r,n=0,q=a.config,s=q.textSorter||"",t=q.sortList,v=t.length,
w=a.tBodies.length;if(!q.serverSideSorting&&!p(q.cache)){q.debug&&(j=new Date);for(c=0;c<w;c++)e=q.cache[c].colMax,i=q.cache[c].normalized,i.sort(function(c,j){for(b=0;b<v;b++){d=t[b][0];h=t[b][1];n=0===h;if(q.sortStable&&c[d]===j[d]&&1===v)break;(g=/n/i.test(q.parsers&&q.parsers[d]?q.parsers[d].type||"":""))&&q.strings[d]?(g="boolean"===typeof q.string[q.strings[d]]?(n?1:-1)*(q.string[q.strings[d]]?-1:1):q.strings[d]?q.string[q.strings[d]]||0:0,k=q.numberSorter?q.numberSorter(c[d],j[d],n,e[d],a):
f["sortNumeric"+(n?"Asc":"Desc")](c[d],j[d],g,e[d],d,a)):(m=n?c:j,r=n?j:c,k="function"===typeof s?s(m[d],r[d],n,d,a):"object"===typeof s&&s.hasOwnProperty(d)?s[d](m[d],r[d],n,d,a):f["sortNatural"+(n?"Asc":"Desc")](c[d],j[d],d,a,q));if(k)return k}return c[q.columns].order-j[q.columns].order});q.debug&&o("Sorting on "+t.toString()+" and dir "+h+" time",j)}}function H(a,b){a[0].isUpdating&&a.trigger("updateComplete");h.isFunction(b)&&b(a[0])}function D(a,b,c){var g=a[0].config.sortList;!1!==b&&!a[0].isProcessing&&
g.length?a.trigger("sorton",[g,function(){H(a,c)},!0]):(H(a,c),f.applyWidget(a[0],!1))}function I(a){var b=a.config,c=b.$table;c.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave".split(" ").join(b.namespace+" ")).bind("sortReset"+b.namespace,function(g,d){g.stopPropagation();b.sortList=[];x(a);E(a);w(a);h.isFunction(d)&&d(a)}).bind("updateAll"+b.namespace,function(g,d,
c){g.stopPropagation();a.isUpdating=!0;f.refreshWidgets(a,!0,!0);f.restoreHeaders(a);z(a);f.bindEvents(a,b.$headers,!0);I(a);y(a,d,c)}).bind("update"+b.namespace+" updateRows"+b.namespace,function(b,d,c){b.stopPropagation();a.isUpdating=!0;A(a);y(a,d,c)}).bind("updateCell"+b.namespace,function(g,d,j,f){g.stopPropagation();a.isUpdating=!0;c.find(b.selectorRemove).remove();var e,l,k;l=c.find("tbody");k=h(d);g=l.index(h.fn.closest?k.closest("tbody"):k.parents("tbody").filter(":first"));e=h.fn.closest?
k.closest("tr"):k.parents("tr").filter(":first");d=k[0];if(l.length&&0<=g){l=l.eq(g).find("tr").index(e);k=k.index();b.cache[g].normalized[l][b.columns].$row=e;e="undefined"===typeof b.extractors[k].id?m(a,d,k):b.extractors[k].format(m(a,d,k),a,d,k);d="no-parser"===b.parsers[k].id?"":b.parsers[k].format(e,a,d,k);b.cache[g].normalized[l][k]=b.ignoreCase&&"string"===typeof d?d.toLowerCase():d;if("numeric"===(b.parsers[k].type||"").toLowerCase())b.cache[g].colMax[k]=Math.max(Math.abs(d)||0,b.cache[g].colMax[k]||
0);D(c,j,f)}}).bind("addRows"+b.namespace,function(g,d,j,e){g.stopPropagation();a.isUpdating=!0;if(p(b.cache))A(a),y(a,j,e);else{var d=h(d).attr("role","row"),f,l,k,o,r,n=d.filter("tr").length,q=c.find("tbody").index(d.parents("tbody").filter(":first"));(!b.parsers||!b.parsers.length)&&t(a);for(g=0;g<n;g++){l=d[g].cells.length;r=[];o={child:[],$row:d.eq(g),order:b.cache[q].normalized.length};for(f=0;f<l;f++)if(k="undefined"===typeof b.extractors[f].id?m(a,d[g].cells[f],f):b.extractors[f].format(m(a,
d[g].cells[f],f),a,d[g].cells[f],f),k="no-parser"===b.parsers[f].id?"":b.parsers[f].format(k,a,d[g].cells[f],f),r[f]=b.ignoreCase&&"string"===typeof k?k.toLowerCase():k,"numeric"===(b.parsers[f].type||"").toLowerCase())b.cache[q].colMax[f]=Math.max(Math.abs(r[f])||0,b.cache[q].colMax[f]||0);r.push(o);b.cache[q].normalized.push(r)}D(c,j,e)}}).bind("updateComplete"+b.namespace,function(){a.isUpdating=!1}).bind("sorton"+b.namespace,function(b,d,j,e){var i=a.config;b.stopPropagation();c.trigger("sortStart",
this);var l,k,o,m,n,q=a.config,b=d||q.sortList;q.sortList=[];h.each(b,function(a,b){m=parseInt(b[0],10);if(o=q.$headers.filter('[data-column="'+m+'"]:last')[0]){k=(k=(""+b[1]).match(/^(1|d|s|o|n)/))?k[0]:"";switch(k){case "1":case "d":k=1;break;case "s":k=n||0;break;case "o":l=o.order[(n||0)%(q.sortReset?3:2)];k=0===l?1:1===l?0:2;break;case "n":o.count+=1;k=o.order[o.count%(q.sortReset?3:2)];break;default:k=0}n=0===a?k:n;l=[m,parseInt(k,10)||0];q.sortList.push(l);k=h.inArray(l[1],o.order);o.count=
0<=k?k:l[1]%(q.sortReset?3:2)}});x(a);i.delayInit&&p(i.cache)&&s(a);c.trigger("sortBegin",this);E(a);w(a,e);c.trigger("sortEnd",this);f.applyWidget(a);h.isFunction(j)&&j(a)}).bind("appendCache"+b.namespace,function(b,d,c){b.stopPropagation();w(a,c);h.isFunction(d)&&d(a)}).bind("updateCache"+b.namespace,function(c,d){(!b.parsers||!b.parsers.length)&&t(a);s(a);h.isFunction(d)&&d(a)}).bind("applyWidgetId"+b.namespace,function(c,d){c.stopPropagation();f.getWidgetById(d).format(a,b,b.widgetOptions)}).bind("applyWidgets"+
b.namespace,function(b,d){b.stopPropagation();f.applyWidget(a,d)}).bind("refreshWidgets"+b.namespace,function(b,d,c){b.stopPropagation();f.refreshWidgets(a,d,c)}).bind("destroy"+b.namespace,function(b,d,c){b.stopPropagation();f.destroy(a,d,c)}).bind("resetToLoadState"+b.namespace,function(){f.refreshWidgets(a,!0,!0);b=h.extend(!0,f.defaults,b.originalSettings);a.hasInitialized=!1;f.setup(a,b)})}var f=this;f.version="2.17.7";f.parsers=[];f.widgets=[];f.defaults={theme:"default",widthFixed:!1,showProcessing:!1,
headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],
widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]};f.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",
header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"};f.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"};
f.log=e;f.benchmark=o;f.construct=function(a){return this.each(function(){var b=h.extend(!0,{},f.defaults,a);b.originalSettings=a;!this.hasInitialized&&f.buildTable&&"TABLE"!==this.tagName?f.buildTable(this,b):f.setup(this,b)})};f.setup=function(a,b){if(!a||!a.tHead||0===a.tBodies.length||!0===a.hasInitialized)return b.debug?e("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var c="",g=h(a),d=h.metadata;a.hasInitialized=!1;a.isProcessing=!0;
a.config=b;h.data(a,"tablesorter",b);b.debug&&h.data(a,"startoveralltimer",new Date);var j;j=h.fn.jquery.split(".");j[0]=parseInt(j[0],10);j=1<j[0]||1===j[0]&&4<=parseInt(j[1],10);b.supportsDataObject=j;b.string={max:1,min:-1,emptyMin:1,emptyMax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1};/tablesorter\-/.test(g.attr("class"))||(c=""!==b.theme?" tablesorter-"+b.theme:"");b.table=a;b.$table=g.addClass(f.css.table+" "+b.tableClass+c).attr("role","grid");b.$headers=g.find(b.selectorHeaders);b.namespace=
b.namespace?"."+b.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2);b.$table.children().children("tr").attr("role","row");b.$tbodies=g.children("tbody:not(."+b.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"});b.$table.find("caption").length&&b.$table.attr("aria-labelledby","theCaption");b.widgetInit={};b.textExtraction=b.$table.attr("data-text-extraction")||b.textExtraction||"basic";z(a);if(a.config.widthFixed&&0===h(a).find("colgroup").length){var u=
h("<colgroup>"),i=h(a).width();h(a.tBodies[0]).find("tr:first").children(":visible").each(function(){u.append(h("<col>").css("width",parseInt(1E3*(h(this).width()/i),10)/10+"%"))});h(a).prepend(u)}t(a);b.totalRows=0;b.delayInit||s(a);f.bindEvents(a,b.$headers,!0);I(a);b.supportsDataObject&&"undefined"!==typeof g.data().sortlist?b.sortList=g.data().sortlist:d&&(g.metadata()&&g.metadata().sortlist)&&(b.sortList=g.metadata().sortlist);f.applyWidget(a,!0);0<b.sortList.length?g.trigger("sorton",[b.sortList,
{},!b.initWidgets,!0]):(x(a),b.initWidgets&&f.applyWidget(a,!1));b.showProcessing&&g.unbind("sortBegin"+b.namespace+" sortEnd"+b.namespace).bind("sortBegin"+b.namespace+" sortEnd"+b.namespace,function(d){clearTimeout(b.processTimer);f.isProcessing(a);if(d.type==="sortBegin")b.processTimer=setTimeout(function(){f.isProcessing(a,true)},500)});a.hasInitialized=!0;a.isProcessing=!1;b.debug&&f.benchmark("Overall initialization time",h.data(a,"startoveralltimer"));g.trigger("tablesorter-initialized",a);
"function"===typeof b.initialized&&b.initialized(a)};f.getColumnData=function(a,b,c,g){if(!("undefined"===typeof b||null===b)){var a=h(a)[0],d,f=a.config;if(b[c])return g?b[c]:b[f.$headers.index(f.$headers.filter('[data-column="'+c+'"]:last'))];for(d in b)if("string"===typeof d&&(a=g?f.$headers.eq(c).filter(d):f.$headers.filter('[data-column="'+c+'"]:last').filter(d),a.length))return b[d]}};f.computeColumnIndex=function(a){var b=[],c=0,g,d,f,e,i,l,k,o,m,n;for(g=0;g<a.length;g++){i=a[g].cells;for(d=
0;d<i.length;d++){f=i[d];e=h(f);l=f.parentNode.rowIndex;e.index();k=f.rowSpan||1;o=f.colSpan||1;"undefined"===typeof b[l]&&(b[l]=[]);for(f=0;f<b[l].length+1;f++)if("undefined"===typeof b[l][f]){m=f;break}c=Math.max(m,c);e.attr({"data-column":m});for(f=l;f<l+k;f++){"undefined"===typeof b[f]&&(b[f]=[]);n=b[f];for(e=m;e<m+o;e++)n[e]="x"}}}return c+1};f.isProcessing=function(a,b,c){var a=h(a),g=a[0].config,d=c||a.find("."+f.css.header);b?("undefined"!==typeof c&&0<g.sortList.length&&(d=d.filter(function(){return this.sortDisabled?
!1:0<=f.isValueInArray(parseFloat(h(this).attr("data-column")),g.sortList)})),a.add(d).addClass(f.css.processing+" "+g.cssProcessing)):a.add(d).removeClass(f.css.processing+" "+g.cssProcessing)};f.processTbody=function(a,b,c){a=h(a)[0];if(c)return a.isProcessing=!0,b.before('<span class="tablesorter-savemyplace"/>'),c=h.fn.detach?b.detach():b.remove();c=h(a).find("span.tablesorter-savemyplace");b.insertAfter(c);c.remove();a.isProcessing=!1};f.clearTableBody=function(a){h(a)[0].config.$tbodies.children().detach()};
f.bindEvents=function(a,b,c){var a=h(a)[0],g,d=a.config;!0!==c&&(d.$extraHeaders=d.$extraHeaders?d.$extraHeaders.add(b):b);b.find(d.selectorSort).add(b.filter(d.selectorSort)).unbind(["mousedown","mouseup","sort","keyup"].join(d.namespace+" ")).bind(["mousedown","mouseup","sort","keyup"].join(d.namespace+" "),function(c,f){var e;e=c.type;if(!((c.which||c.button)!==1&&!/sort|keyup/.test(e)||e==="keyup"&&c.which!==13)&&!(e==="mouseup"&&f!==true&&(new Date).getTime()-g>250)){if(e==="mousedown"){g=(new Date).getTime();
return/(input|select|button|textarea)/i.test(c.target.tagName)?"":!d.cancelSelection}d.delayInit&&p(d.cache)&&s(a);e=h.fn.closest?h(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:h(this).parents("th, td")[0];e=d.$headers[b.index(e)];e.sortDisabled||G(a,e,c)}});d.cancelSelection&&b.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})};f.restoreHeaders=function(a){var b=h(a)[0].config;b.$table.find(b.selectorHeaders).each(function(a){h(this).find("."+
f.css.headerIn).length&&h(this).html(b.headerContent[a])})};f.destroy=function(a,b,c){a=h(a)[0];if(a.hasInitialized){f.refreshWidgets(a,!0,!0);var g=h(a),d=a.config,e=g.find("thead:first"),o=e.find("tr."+f.css.headerRow).removeClass(f.css.headerRow+" "+d.cssHeaderRow),i=g.find("tfoot:first > tr").children("th, td");!1===b&&0<=h.inArray("uitheme",d.widgets)&&(g.trigger("applyWidgetId",["uitheme"]),g.trigger("applyWidgetId",["zebra"]));e.find("tr").not(o).remove();g.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState".split(" ").join(d.namespace+
" "));d.$headers.add(i).removeClass([f.css.header,d.cssHeader,d.cssAsc,d.cssDesc,f.css.sortAsc,f.css.sortDesc,f.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true");o.find(d.selectorSort).unbind(["mousedown","mouseup","keypress"].join(d.namespace+" "));f.restoreHeaders(a);g.toggleClass(f.css.table+" "+d.tableClass+" tablesorter-"+d.theme,!1===b);a.hasInitialized=!1;delete a.config.cache;"function"===typeof c&&c(a)}};f.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,
chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i};f.sortNatural=function(a,b){if(a===b)return 0;var c,g,d,e,h,i;g=f.regex;if(g.hex.test(b)){c=parseInt(a.match(g.hex),16);d=parseInt(b.match(g.hex),16);if(c<d)return-1;if(c>d)return 1}c=a.replace(g.chunk,"\\0$1\\0").replace(g.chunks,"").split("\\0");g=b.replace(g.chunk,"\\0$1\\0").replace(g.chunks,"").split("\\0");i=Math.max(c.length,g.length);for(h=0;h<i;h++){d=isNaN(c[h])?c[h]||0:parseFloat(c[h])||0;e=isNaN(g[h])?g[h]||0:parseFloat(g[h])||0;if(isNaN(d)!==
isNaN(e))return isNaN(d)?1:-1;typeof d!==typeof e&&(d+="",e+="");if(d<e)return-1;if(d>e)return 1}return 0};f.sortNaturalAsc=function(a,b,c,g,d){if(a===b)return 0;c=d.string[d.empties[c]||d.emptyTo];return""===a&&0!==c?"boolean"===typeof c?c?-1:1:-c||-1:""===b&&0!==c?"boolean"===typeof c?c?1:-1:c||1:f.sortNatural(a,b)};f.sortNaturalDesc=function(a,b,c,g,d){if(a===b)return 0;c=d.string[d.empties[c]||d.emptyTo];return""===a&&0!==c?"boolean"===typeof c?c?-1:1:c||1:""===b&&0!==c?"boolean"===typeof c?c?
1:-1:-c||-1:f.sortNatural(b,a)};f.sortText=function(a,b){return a>b?1:a<b?-1:0};f.getTextValue=function(a,b,c){if(c){for(var g=a?a.length:0,d=c+b,c=0;c<g;c++)d+=a.charCodeAt(c);return b*d}return 0};f.sortNumericAsc=function(a,b,c,g,d,e){if(a===b)return 0;e=e.config;d=e.string[e.empties[d]||e.emptyTo];if(""===a&&0!==d)return"boolean"===typeof d?d?-1:1:-d||-1;if(""===b&&0!==d)return"boolean"===typeof d?d?1:-1:d||1;isNaN(a)&&(a=f.getTextValue(a,c,g));isNaN(b)&&(b=f.getTextValue(b,c,g));return a-b};f.sortNumericDesc=
function(a,b,c,g,d,e){if(a===b)return 0;e=e.config;d=e.string[e.empties[d]||e.emptyTo];if(""===a&&0!==d)return"boolean"===typeof d?d?-1:1:d||1;if(""===b&&0!==d)return"boolean"===typeof d?d?1:-1:-d||-1;isNaN(a)&&(a=f.getTextValue(a,c,g));isNaN(b)&&(b=f.getTextValue(b,c,g));return b-a};f.sortNumeric=function(a,b){return a-b};f.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d",C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119",
E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};f.replaceAccents=function(a){var b,c="[",g=f.characterEquivalents;if(!f.characterRegex){f.characterRegexArray={};for(b in g)"string"===typeof b&&(c+=g[b],f.characterRegexArray[b]=RegExp("["+g[b]+"]","g"));f.characterRegex=
RegExp(c+"]")}if(f.characterRegex.test(a))for(b in g)"string"===typeof b&&(a=a.replace(f.characterRegexArray[b],b));return a};f.isValueInArray=function(a,b){var c,g=b.length;for(c=0;c<g;c++)if(b[c][0]===a)return c;return-1};f.addParser=function(a){var b,c=f.parsers.length,g=!0;for(b=0;b<c;b++)f.parsers[b].id.toLowerCase()===a.id.toLowerCase()&&(g=!1);g&&f.parsers.push(a)};f.getParserById=function(a){if("false"==a)return!1;var b,c=f.parsers.length;for(b=0;b<c;b++)if(f.parsers[b].id.toLowerCase()===
a.toString().toLowerCase())return f.parsers[b];return!1};f.addWidget=function(a){f.widgets.push(a)};f.hasWidget=function(a,b){a=h(a);return a.length&&a[0].config&&a[0].config.widgetInit[b]||!1};f.getWidgetById=function(a){var b,c,g=f.widgets.length;for(b=0;b<g;b++)if((c=f.widgets[b])&&c.hasOwnProperty("id")&&c.id.toLowerCase()===a.toLowerCase())return c};f.applyWidget=function(a,b){var a=h(a)[0],c=a.config,g=c.widgetOptions,d=[],e,m,i;if(!(!1!==b&&a.hasInitialized&&(a.isApplyingWidgets||a.isUpdating)))if(c.debug&&
(e=new Date),c.widgets.length&&(a.isApplyingWidgets=!0,c.widgets=h.grep(c.widgets,function(a,b){return h.inArray(a,c.widgets)===b}),h.each(c.widgets||[],function(a,b){if((i=f.getWidgetById(b))&&i.id)i.priority||(i.priority=10),d[a]=i}),d.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),h.each(d,function(d,e){if(e){if(b||!c.widgetInit[e.id])c.widgetInit[e.id]=!0,e.hasOwnProperty("options")&&(g=a.config.widgetOptions=h.extend(!0,{},e.options,g)),e.hasOwnProperty("init")&&
e.init(a,e,c,g);!b&&e.hasOwnProperty("format")&&e.format(a,c,g,!1)}})),setTimeout(function(){a.isApplyingWidgets=false},0),c.debug)m=c.widgets.length,o("Completed "+(!0===b?"initializing ":"applying ")+m+" widget"+(1!==m?"s":""),e)};f.refreshWidgets=function(a,b,c){var a=h(a)[0],g,d=a.config,j=d.widgets,o=f.widgets,i=o.length;for(g=0;g<i;g++)if(o[g]&&o[g].id&&(b||0>h.inArray(o[g].id,j)))d.debug&&e('Refeshing widgets: Removing "'+o[g].id+'"'),o[g].hasOwnProperty("remove")&&d.widgetInit[o[g].id]&&(o[g].remove(a,
d,d.widgetOptions),d.widgetInit[o[g].id]=!1);!0!==c&&f.applyWidget(a,b)};f.getData=function(a,b,c){var e="",a=h(a),d,f;if(!a.length)return"";d=h.metadata?a.metadata():!1;f=" "+(a.attr("class")||"");"undefined"!==typeof a.data(c)||"undefined"!==typeof a.data(c.toLowerCase())?e+=a.data(c)||a.data(c.toLowerCase()):d&&"undefined"!==typeof d[c]?e+=d[c]:b&&"undefined"!==typeof b[c]?e+=b[c]:" "!==f&&f.match(" "+c+"-")&&(e=f.match(RegExp("\\s"+c+"-([\\w-]+)"))[1]||"");return h.trim(e)};f.formatFloat=function(a,
b){if("string"!==typeof a||""===a)return a;var c,a=(b&&b.config?!1!==b.config.usNumberFormat:"undefined"!==typeof b?b:1)?a.replace(/,/g,""):a.replace(/[\s|\.]/g,"").replace(/,/g,".");/^\s*\([.\d]+\)/.test(a)&&(a=a.replace(/^\s*\(([.\d]+)\)/,"-$1"));c=parseFloat(a);return isNaN(c)?h.trim(a):c};f.isDigit=function(a){return isNaN(a)?/^[\-+(]?\d+[)]?$/.test(a.toString().replace(/[,.'"\s]/g,"")):!0}}});var m=h.tablesorter;h.fn.extend({tablesorter:m.construct});m.addParser({id:"no-parser",is:function(){return!1},
format:function(){return""},type:"text"});m.addParser({id:"text",is:function(){return!0},format:function(e,o){var p=o.config;e&&(e=h.trim(p.ignoreCase?e.toLocaleLowerCase():e),e=p.sortLocaleCompare?m.replaceAccents(e):e);return e},type:"text"});m.addParser({id:"digit",is:function(e){return m.isDigit(e)},format:function(e,o){var p=m.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),o);return e&&"number"===typeof p?p:e?h.trim(e&&o.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"});m.addParser({id:"currency",
is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[+\-,. ]/g,""))},format:function(e,o){var p=m.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),o);return e&&"number"===typeof p?p:e?h.trim(e&&o.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"});m.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,h){var p,v=e?e.split("."):"",t="",s=v.length;
for(p=0;p<s;p++)t+=("00"+v[p]).slice(-3);return e?m.formatFloat(t,h):e},type:"numeric"});m.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(e){return e?h.trim(e.replace(/(https?|ftp|file):\/\//,"")):e},type:"text"});m.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,h){return e?m.formatFloat(""!==e?(new Date(e.replace(/-/g,"/"))).getTime()||e:"",h):e},type:"numeric"});m.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&
15>e.length},format:function(e,h){return e?m.formatFloat(e.replace(/%/g,""),h):e},type:"numeric"});m.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,h){return e?m.formatFloat((new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||e,h):e},type:"numeric"});m.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||
"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,h,p,v){if(e){var p=h.config,t=p.$headers.filter("[data-column="+v+"]:last"),v=t.length&&t[0].dateFormat||m.getData(t,m.getColumnData(h,p.headers,v),"dateFormat")||p.dateFormat,e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/");"mmddyyyy"===v?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===v?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===v&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,
"$1/$2/$3"))}return e?m.formatFloat((new Date(e)).getTime()||e,h):e},type:"numeric"});m.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,h){return e?m.formatFloat((new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||e,h):e},type:"numeric"});m.addParser({id:"metadata",is:function(){return!1},format:function(e,m,p){e=m.config;e=!e.parserMetadataName?"sortValue":e.parserMetadataName;return h(p).metadata()[e]},
type:"numeric"});m.addWidget({id:"zebra",priority:90,format:function(e,o,p){var v,t,s,w,z,y,A=RegExp(o.cssChildRow,"i"),x=o.$tbodies;o.debug&&(z=new Date);for(e=0;e<x.length;e++)v=x.eq(e),y=v.children("tr").length,1<y&&(s=0,v=v.children("tr:visible").not(o.selectorRemove),v.each(function(){t=h(this);A.test(this.className)||s++;w=0===s%2;t.removeClass(p.zebra[w?1:0]).addClass(p.zebra[w?0:1])}));o.debug&&m.benchmark("Applying Zebra widget",z)},remove:function(e,m,p){for(var v,m=m.$tbodies,t=(p.zebra||
["even","odd"]).join(" "),p=0;p<m.length;p++)v=h.tablesorter.processTbody(e,m.eq(p),!0),v.children().removeClass(t),h.tablesorter.processTbody(e,v,!1)}});!0;return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tables-sortable', location = 'src/js/aui/tables-sortable.js' */
("undefined"===typeof window?global:window).__b4d73a0bb8c261fa890c4807671fd8d1=function(){function h(e){var b=i;e.find("th").each(function(c,e){var a=(0,d.default)(e);b.headers[c]={};a.hasClass("aui-table-column-unsortable")?b.headers[c].sorter=!1:(a.attr("tabindex","0"),a.wrapInner("<span class='aui-table-header-content'/>"),a.hasClass("aui-table-column-issue-key")&&(b.headers[c].sorter="issue-key"))});e.tablesorter(b)}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var a=
__700a145ba3db9966cc95664c892049f8,d=a&&a.__esModule?a:{"default":a};__bcb3bf48343222097ceddcaac01ec182;var a=(a=__28c84e7bb75f6c3b0ba124d57bd69571)&&a.__esModule?a:{"default":a},i={sortMultiSortKey:"",headers:{},debug:!1,tabIndex:!1},g={setup:function(){d.default.tablesorter.addParser({id:"issue-key",is:function(){return!1},format:function(a){var b=a.split("-"),a=b[1],b=(b[0]+"..........").slice(0,10);return b+=("000000"+a).slice(-6)},type:"text"});d.default.tablesorter.addParser({id:"textSortAttributeParser",
is:function(a,b,c){return c.hasAttribute("data-sort-value")&&(!c.hasAttribute("data-sort-type")||"text"===c.getAttribute("data-sort-type"))},format:function(a,b,c){return c.getAttribute("data-sort-value")},type:"text"});d.default.tablesorter.addParser({id:"numericSortAttributeParser",is:function(a,b,c){return"numeric"===c.getAttribute("data-sort-type")&&c.hasAttribute("data-sort-value")},format:function(a,b,c){return c.getAttribute("data-sort-value")},type:"numeric"});(0,d.default)(".aui-table-sortable").each(function(){h((0,
d.default)(this))})},setTableSortable:function(a){h(a)}};(0,d.default)(g.setup);(0,a.default)("tablessortable",g);f.default=g;return f=f["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-resources', location = 'js/SortableTables.js' */
define("confluence-sortable-tables/sortable-tables",["jquery","ajs","document","confluence-sortable-tables/hooks"],function(c,f,h,i){function j(){var a=f.Meta.get("date.format"),b;a&&0!==a.length&&(a=a.toLowerCase()[0],"m"===a?b="mmddyyyy":"d"===a?b="ddmmyyyy":"y"===a&&(b="yyyymmdd"));return b}var g;return{init:function(){g=c("table").filter(function(){var a=c(this),b=a.find("td, th"),e=this.rows.length&&c(this.rows[0].cells),d;if("false"===a.attr("data-sortable")||-1<this.className.indexOf("tablesorter"))return!1;
d=c.Event("makeSortable.SortableTables");a.trigger(d);if(d.isDefaultPrevented()||!e||0===e.length)return!1;d=0;for(var f=b.length;d<f;d++)if(a=b[d],1!=a.rowSpan||1!=a.colSpan)return!1;return c(this.rows[0]).find("table").length||e.filter("th").length!==e.length||e.hasClass("nohighlight")?!1:this.rows[1]})},enable:function(){g.each(function(){if(-1<this.className.indexOf("tablesorter")||c(this).find("> thead:first").is(":visible"))return!0;var a=this.removeChild(this.tBodies[0]),b=c(a.children),b=
Array.prototype.shift.call(b),e=h.createDocumentFragment(),d=h.createElement("thead");e.appendChild(d);d.appendChild(b);e.appendChild(a);this.appendChild(e)});i.beforeInitHooks().forEach(function(a){if(a&&"function"===typeof a)try{a(c.tablesorter)}catch(b){f.info("Failed to run tablesorter beforeInit hook.",b)}});g.tablesorter({cssHeader:"sortableHeader",delayInit:!0,textExtraction:function(a){return f.trim(c(a).text())},dateFormat:j()})},refresh:function(){this.init();this.enable()}}});
require("confluence/module-exporter").safeRequire("confluence-sortable-tables/sortable-tables",function(c){require("ajs").toInit(function(){c.init();setTimeout(c.enable,100)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-report-macro-users-statistic-webresources', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/viewtracker-report-macro-users-statistic.js' */
define("bitvoodoo/viewtracker/users-statistic",["ajs","jquery","bitvoodoo/viewtracker/namespaces"],function(b,d,a){function e(f){if(f.privacyMode){return f.isPrivacyModeShowUsersReportFeatureEnabled}else{return !f.hiddenUserStatistic}}var c=function(g,i,h,j,f,k){if(f.attr("report-loaded")||!e(a.Configuration)){return}f.attr("data-report-loaded",true);var l=d(Confluence.Templates.Bitvoodoo.viewtracker.Reporting.userStatisticLoadingInfoBox({}));l.insertAfter(k);b.safe.ajax({cache:false,url:b.contextPath()+"/viewtracker/users.action",type:"GET",data:{contentEntityId:g,renderUserNames:i,sort:h,startTimeStamp:j},success:function(m){k.html(m);b.tablessortable.setTableSortable(d(".bv_viewtracker_table"));try{b.Confluence.Binder.userHover()}catch(n){}},error:function(m,o,n){k.html(aui.message.error({content:n}))},complete:function(){l.remove()}})};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-report-macro-users-statistic-webresources', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/templates/soy/reporting/viewtracker-report-macro-users-statistic.soy' */
// This file was automatically generated from viewtracker-report-macro-users-statistic.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Bitvoodoo.viewtracker.Reporting.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Bitvoodoo == 'undefined') { Confluence.Templates.Bitvoodoo = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting = {}; }


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.userStatisticLoadingInfoBox = function(opt_data, opt_ignored) {
  return '' + aui.message.info({closeable: 'true', content: '<p><span class=\'viewtracker-loading\'>' + soy.$$escapeHtml('Please wait while the Viewtracker data is loading.') + '</span></p>'});
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.userStatisticLoadingInfoBox.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.userStatisticLoadingInfoBox';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-webresources', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/viewtracker.js' */
require(["ajs","jquery","bitvoodoo/viewtracker/users-statistic","bitvoodoo/viewtracker/namespaces"],function(c,d,e,a){function b(j){if(!j){return}var i=new Date(Number.parseInt(j)),g=i.getFullYear(),h=i.getMonth()<9?"0"+(i.getMonth()+1):i.getMonth()+1,f=i.getDate()<10?"0"+i.getDate():i.getDate();return"since="+g+"-"+h+"-"+f}if(!window.ConfluenceMobile){c.toInit(function(j){var f=j("body").hasClass("content-preview");var k=a.Configuration.desktopTrackingEnabled;var h=j(".bv_viewtracker");var i=j(".bv_viewtracker.macro-tracking").length>0;var g=!f&&(k||i);h.each(function(){var l=j(this);var m=l.data("contententityid");var n=l.data("hidden");if(n&&g){Bitvoodoo.Viewtracker.VisitsService.trackVisit(undefined,undefined,{pageId:m});return true}var u=l.find(".bv_viewtracker_visits");var r=l.find(".bv_viewracker_span");if(!m){return true}if(u.length===1){r.click(function(){e(m,l.data("renderusernames"),l.data("sort"),l.data("starttimestamp"),r,u);if(r.hasClass("bv_viewtracker_closed")){r.removeClass("bv_viewtracker_closed").addClass("bv_viewtracker_expanded");u.show()}else{r.addClass("bv_viewtracker_closed").removeClass("bv_viewtracker_expanded");u.hide()}})}l.find(".bv_viewtracker_excluded_info").tooltip();if(l.data("load-init")&&!g){e(m,l.data("renderusernames"),l.data("sort"),l.data("starttimestamp"),r,u)}var q=l.data("starttimestamp");var p=b(q);var o=l.find(".visitsCount");o.addClass("spinner");function t(v){o.text(v.count);o.removeClass("spinner");if(l.data("load-init")&&g){e(m,l.data("renderusernames"),l.data("sort"),l.data("starttimestamp"),r,u)}}var s={pageId:m,sinceParam:p};if(g){Bitvoodoo.Viewtracker.VisitsService.trackVisit(Bitvoodoo.Viewtracker.VisitsService.getVisitsTotal,t,s)}else{Bitvoodoo.Viewtracker.VisitsService.getVisitsTotal(t,s)}})})}else{ConfluenceMobile.contentEventAggregator.on("displayed",function(){var h=window.location.hash.match(/#content\/view\/(\d+)/);if(h){var f=h[1],g=Zepto("meta[name=confluence-context-path]").attr("content"),i=g+"/rest/viewtracker/1.0/visits";if(Zepto.ajaxSettings){Zepto.ajaxSettings.timeout=100000}Zepto(".bv_viewtracker").each(function(l,o){var p=o.getAttribute("data-starttimestamp"),k=i+"/contents/"+f+"/total";var j=b(p);if(j){k+="?"+j}var n=Zepto(o).find(".visitsCount"),m=n.html();n.html("").addClass("spinner");Zepto.ajax({type:"GET",dataType:"json",data:{},url:k,success:function(q){n.html(q.count)},error:function(){n.html(m)},complete:function(){n.removeClass("spinner")}})})}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-modes', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/viewtracker-modes.js' */
define("bitvoodoo/viewtracker/modes",["jquery","ajs"],function(c,b){var a=function(){};a.prototype.initPrivacyModeTooltip=function(){var d=c(".viewtracker-icon-privacy-mode");d.tooltip({title:function(){return "The Extended Privacy mode is activated. No user-specific data is stored and all reports based on users\u0027 information are deactivated."}})};a.prototype.inithiddenUserStatisticTooltip=function(){var d=c(".viewtracker-icon-hidden-statistic");d.tooltip({title:function(){return "Access to the user-specific reports is restricted. Please contact your Confluence Administrator for more information."}})};return a});require(["ajs","jquery","bitvoodoo/viewtracker/modes"],function(b,c,a){b.toInit(function(){var d=new a();d.initPrivacyModeTooltip();d.inithiddenUserStatisticTooltip()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-modes', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/templates/soy/viewtracker-mode-icons.soy' */
// This file was automatically generated from viewtracker-mode-icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Bitvoodoo == 'undefined') { Confluence.Templates.Bitvoodoo = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Privacy == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Privacy = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode = {}; }


Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode.privacyModeIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showLabel) ? '<a href="https://wiki.bitvoodoo.ch/x/Gg31B" target="_blank">' + soy.$$escapeHtml('Data Privacy') + '&nbsp;</a>' : '') + ((opt_data.isPrivacyModeEnabled) ? ((! opt_data.isDataSecurityLinkFeatureEnabled) ? '<a href="https://wiki.bitvoodoo.ch/x/_hD1B" target="_blank">' : '') + aui.icons.icon({useIconFont: true, size: 'small', icon: 'locked', extraClasses: 'viewtracker-icon-privacy-mode'}) + ((! opt_data.isDataSecurityLinkFeatureEnabled) ? '</a>' : '') : (opt_data.isHiddenUserStatistic) ? ((! opt_data.isDataSecurityLinkFeatureEnabled) ? '<a href="https://wiki.bitvoodoo.ch/x/ZhT1B" target="_blank">' : '') + aui.icons.icon({useIconFont: true, size: 'small', icon: 'locked', extraClasses: 'viewtracker-icon-hidden-statistic'}) + ((! opt_data.isDataSecurityLinkFeatureEnabled) ? '</a>' : '') : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode.privacyModeIcon.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode.privacyModeIcon';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-own', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/charts/own.js' */
define("bitvoodoo/viewtracker/reporting/charts/own",["jquery"],function(b){var c=function(){this.template=Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.list};c.prototype.SORTING_ASC_CLASS="aui-iconfont-arrow-up";c.prototype.SORTING_DESC_CLASS="aui-iconfont-arrow-down";c.prototype.init=function(d){this.opt=b.extend(this.opt,d)};c.prototype.getSortingClass=function(d){if(d==="asc"){return this.SORTING_ASC_CLASS}else{return this.SORTING_DESC_CLASS}};c.prototype.render=function(g,f,e){var d=this.opt.$element;if(!d){return}d.empty();d.append(this.template({widgetType:this.opt.widgetType,selectable:this.opt.selectable,title:this.opt.title,dataList:g,showLoadMore:e,sortClass:this.getSortingClass(f)}));this.bindSorting();this.bindLoadMore()};c.prototype.bindSorting=function(){var e=this;var d=this.opt.$element;var f=d.find(".vw-title , .sorting-arrow");f.click(function(){e.toggleSorting();e.opt.onSortingChanged(e.getSorting())})};c.prototype.bindLoadMore=function(){var f=this;var e=this.opt.$element;var d=e.find("a.load-more-link");d.click(function(g){g.preventDefault();f.opt.onLoadMore()})};c.prototype.getSortingElement=function(){var d=this.opt.$element;return d.find(".sorting-arrow")};c.prototype.toggleSorting=function(){var d=this.getSortingElement();if(d.hasClass(this.SORTING_DESC_CLASS)){d.removeClass(this.SORTING_DESC_CLASS);d.addClass(this.SORTING_ASC_CLASS)}else{d.removeClass(this.SORTING_ASC_CLASS);d.addClass(this.SORTING_DESC_CLASS)}};c.prototype.getSorting=function(){var d=this.getSortingElement();if(d.hasClass(this.SORTING_ASC_CLASS)){return"asc"}else{return"desc"}};c.prototype.bindRows=function(e){var d=this.opt.$element;d.find("li").each(function(){var f=b(this);f.click(e)})};c.prototype.bindReset=function(f){if(typeof f==="function"){var d=this.opt.$element;var e=d.find(".reset-selection");e.click(function(g){g.preventDefault();f()})}};var a=function(d){this.opt=b.extend(this.opt,d)};a.prototype.showChart=function(){var d=this.opt.$element;if(!d){return}d.removeClass("hidden");if(this.isInPagePanel()){d.parent().removeClass("hidden")}};a.prototype.isInPagePanel=function(){return this.opt.$element&&this.opt.$element.parent(".aui-page-panel-item").size()>0};a.prototype.hideChart=function(){var d=this.opt.$element;if(!d){return}d.addClass("hidden");if(this.isInPagePanel()){d.parent().addClass("hidden")}};a.prototype.render=function(e){var d=this.opt.$element;if(!d){return}d.find(".number-display").text(e.toLocaleString());this.showChart()};return{ListChart:c,CounterChart:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-own', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/charts/listbase.js' */
define("bitvoodoo/viewtracker/reporting/charts/own/listbase",["jquery","bitvoodoo/viewtracker/reporting/rest/connector","bitvoodoo/viewtracker/reporting/charts/own","bitvoodoo/viewtracker/reporting/events/strings","bitvoodoo/viewtracker/reporting/events/queue"],function(e,b,d,a,c){var f=function(){};f.prototype.FILTER_CREATE_MODE=1;f.prototype.FILTER_UPDATE_MODE=2;f.prototype.DEFAULT_LIMIT=10;f.prototype._init=function(g){this.listTitle=g.title;this.listTitle=g.title;this.selectable=g.selectable?true:false;this.$element=g.element;this.chart=new d.ListChart();this.callbacks=g.callbacks||{};this.connector=new b(this.$element);this.queue=new c();this.results=[];this.filteringData={sort:"desc",limit:g.limit||this.DEFAULT_LIMIT,spaceKeys:g.spaceKeys||undefined};this.loadMoreData={start:g.start||0,limit:this.filteringData.limit}};f.prototype.onRowClick=function(){};f.prototype.toggleClass=function(g,h){if(g.hasClass(h)){g.removeClass(h)}else{g.addClass(h)}};f.prototype._updateItem=function(j,i){if(j.length===0){return[]}for(var g=0;g<j.length;g++){var h=j[g];h.percentage=h.views*100/i;h.viewsFormatted=h.views.toLocaleString()}return j};f.prototype.bindToOtherEvents=function(){};f.prototype.onSpacesUpdated=function(g){if(g.length===0){delete this.filteringData.spaceKeys}else{this.filteringData=e.extend(this.filteringData,g)}this.updateChart()};f.prototype.bindEventListeners=function(){var g=this;var h=[a.GLOBAL_DATES_UPDATED,a.GLOBAL_DEVICE_TYPE_UPDATED,a.GLOBAL_CONTENT_TYPE_UPDATED];this.queue.subscribe(h,function(i){g.filteringData=e.extend(g.filteringData,i);g.updateChart()});this.queue.subscribe(a.GLOBAL_SPACES_UPDATED,function(i){g.onSpacesUpdated(i);if(g.callbacks.hasOwnProperty("onSpacesUpdated")){g.callbacks.onSpacesUpdated(i)}});this.bindToOtherEvents()};f.prototype.updateResults=function(h,i){if(i===this.FILTER_CREATE_MODE){this.results=h}else{var g=this;e.each(h,function(j,k){g.results.push(k)})}};f.prototype.updateChart=function(i,g){var h=this;i=i||this.FILTER_CREATE_MODE;var j=this.filteringData;if(g!==undefined){j=e.extend({},j,g)}if(i===this.FILTER_CREATE_MODE){this.loadMoreData.start=0}this.connector.get(this.widgetTypeUrl,j,function(k){h.updateResults(k.results,i);var l=(k.totalSize-h.results.length)>0;h.chart.render(h._updateItem(h.results,k.maxViews),h.filteringData.sort,l);h.chart.bindRows(function(){var m=e(this);var n=h.$element.find(".viewtracker-widget");h.toggleClass(m,"selected");if(n.find(".selected").size()){n.addClass("show-reset")}else{n.removeClass("show-reset")}h.onRowClick(m,h)});h.chart.bindReset(function(){var m=h.$element.find(".viewtracker-widget");m.removeClass("show-reset");h.onWidgetReset(h.$element,h)})})};f.prototype.onSortingChanged=function(g){return function(h){g.filteringData.sort=h;g.updateChart()}};f.prototype.onLoadMore=function(g){return function(){var h=g.loadMoreData.start;g.loadMoreData.start=h+g.filteringData.limit;g.loadMoreData.limit=g.filteringData.limit;g.updateChart(g.FILTER_UPDATE_MODE,g.loadMoreData)}};f.prototype.onWidgetReset=function(g){AJS.log("Please override the onWidgetReset function.")};f.prototype.show=function(){this.bindEventListeners();this.chart.init({widgetType:this.widgetType,selectable:this.selectable,"$element":this.$element,onSortingChanged:this.onSortingChanged(this),onLoadMore:this.onLoadMore(this),title:this.listTitle})};return f});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-own', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/templates/soy/reporting/charts/own.soy' */
// This file was automatically generated from own.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Bitvoodoo == 'undefined') { Confluence.Templates.Bitvoodoo = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own = {}; }


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.list = function(opt_data, opt_ignored) {
  return '<div class="viewtracker-widget ' + soy.$$escapeHtml(opt_data.widgetType) + '  ' + ((opt_data.selectable) ? ' selectable ' : '') + ' " data-widget-type="' + soy.$$escapeHtml(opt_data.widgetType) + '"><h3 class="list-header"><span class="vw-title"> ' + soy.$$escapeHtml(opt_data.title) + '</span><span class="sorting-arrow aui-icon aui-icon-small ' + soy.$$escapeHtml(opt_data.sortClass) + '"></span>' + ((opt_data.selectable) ? '<a class="reset-selection" href="#">' + soy.$$escapeHtml('reset') + '</a>' : '') + '</h3><ul>' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.widgetProgessList(opt_data) + '</ul>' + ((opt_data.showLoadMore) ? '<div class="load-more-link-wrapper"><a href="#" class="load-more-link aui-button">' + soy.$$escapeHtml('More') + '</a></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.list.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.list';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.widgetProgessList = function(opt_data, opt_ignored) {
  var output = '';
  var dataList31 = opt_data.dataList;
  var dataListLen31 = dataList31.length;
  for (var dataIndex31 = 0; dataIndex31 < dataListLen31; dataIndex31++) {
    var dataData31 = dataList31[dataIndex31];
    output += (opt_data.widgetType == 'space') ? Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.spaceListMember({data: dataData31, widgetType: opt_data.widgetType}) : (opt_data.widgetType == 'content') ? Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentListMember({data: dataData31, widgetType: opt_data.widgetType}) : (opt_data.widgetType == 'user') ? Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.userListMember({data: dataData31, widgetType: opt_data.widgetType}) : '';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.widgetProgessList.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.widgetProgessList';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.counter = function(opt_data, opt_ignored) {
  return '<div class="counter"><span class="value">' + soy.$$escapeHtml(opt_data.data) + '</span><span class="description">' + soy.$$escapeHtml(opt_data.description) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.counter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.counter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.userListMember = function(opt_data, opt_ignored) {
  return '<li data-id="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].username) + '"><div class="vw-list-item">' + ((opt_data.data[opt_data.widgetType].username) ? '<a class="userLogoLink" data-username="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].username) + '" href="' + soy.$$escapeHtml("") + '/display/~' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].username) + '"><img class="userLogo logo" src="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].profilePicture.path) + '" /></a><div><a class="userLogoLink" data-username="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].username) + '" href="' + soy.$$escapeHtml("") + '/display/~' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].username) + '">' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].displayName) + '</a>' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart(opt_data) + '</div>' : '<span class="userLogoLink"><img class="userLogo logo" src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].profilePicture.path) + '" /></span><div><span class="userLogoLink">' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].displayName) + '</span>' + ((opt_data.data[opt_data.widgetType].type == 'protectedUser') ? '<a id="protected-user-tooltip" href="https://wiki.bitvoodoo.ch/x/caPPBQ" target="_blank" title="' + soy.$$escapeHtml('All users tracked in privacy mode.') + '">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'info', extraClasses: 'protected-user'}) + '</a>' : '') + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart(opt_data) + '</div>') + '</div></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.userListMember.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.userListMember';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentListMember = function(opt_data, opt_ignored) {
  return '' + ((opt_data.data[opt_data.widgetType]) ? '<li data-id="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].id) + '"><div class="vw-list-item"><a class="contenLogo" data-content-type="' + soy.$$escapeHtml(opt_data.data.content.type) + '" href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data[opt_data.widgetType]._links.webui) + '">' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentIcon({contentType: opt_data.data.content.type}) + '</a><div><a class="userLogoLink" href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data[opt_data.widgetType]._links.webui) + '">' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].title) + '</a>' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart(opt_data) + '</div></div></li>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentListMember.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentListMember';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.spaceListMember = function(opt_data, opt_ignored) {
  return '<li data-id="' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].key) + '"><div class="vw-list-item"><a class="spaceLogoLink" data-spaceKey="' + soy.$$escapeHtml(opt_data.data.key) + '" href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data[opt_data.widgetType]._links.webui) + '"><img class="space logo" src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data.space.icon.path) + '" /></a><div><a href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.data[opt_data.widgetType]._links.webui) + '">' + soy.$$escapeHtml(opt_data.data[opt_data.widgetType].name) + '</a>' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart(opt_data) + '</div></div></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.spaceListMember.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.spaceListMember';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart = function(opt_data, opt_ignored) {
  return '<div class="text">' + ((opt_data.widgetType == 'user') ? soy.$$escapeHtml(AJS.format('generated {0} views',opt_data.data.viewsFormatted)) : soy.$$escapeHtml(AJS.format('viewed {0} times',opt_data.data.viewsFormatted))) + '<div class="bar"><div class="progress" style="width: ' + soy.$$escapeHtml(opt_data.data.percentage) + '%"></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.memberViewsPart';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentIcon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon content-type-' + soy.$$escapeHtml(opt_data.contentType) + '"></span>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentIcon.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Charts.Own.contentIcon';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-rest', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/rest/settings.js' */
define("bitvoodoo/viewtracker/reporting/rest/settings",["ajs","bitvoodoo/viewtracker/namespaces"],function(b,a){a.Reporting.Rest.Settings={BASE_URL:b.Meta.get("base-url")};a.Reporting.Rest.Settings.REST_URL=a.Reporting.Rest.Settings.BASE_URL+"/rest/viewtracker/1.0";a.Reporting.Rest.Settings.REPORTING_URL=a.Reporting.Rest.Settings.BASE_URL+"/rest/viewtracker/1.0/report";return a.Reporting.Rest.Settings});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-rest', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/rest/connector.js' */
define("bitvoodoo/viewtracker/reporting/rest/connector",["ajs","jquery","bitvoodoo/viewtracker/reporting/rest/settings"],function(d,b,a){var e=function(f){this.$container=f.parent()};e.prototype.show=function(){this.$container.append(b('<div class="overlay"><div class="button-spinner"></div></div>'));var g=this.$container.width();this.$container.find(".overlay").width(g);var f=this.$container.find(".button-spinner");if(g<250){f.css("margin-top","25px")}else{f.css("margin-top","175px")}f.spin()};e.prototype.hide=function(){var f=this.$container.find(".overlay");f.fadeOut({complete:function(){f.remove()}})};var c=function(f){if(f){this.indicator=new e(f)}else{this.indicator=null}};c.prototype.getSuccessCallback=function(h,g){var f=this;return function(){if(f.indicator){f.indicator.hide(g)}h.apply(this,arguments)}};c.prototype.getFailureCallback=function(){var f=this;return function(){if(f.indicator){f.indicator.hide()}}};c.prototype.get=function(f,g,h){if(this.indicator){this.indicator.show()}return d.safe.getJSON(f,g,this.getSuccessCallback(h)).error(this.getFailureCallback())};c.prototype.getConfluenceAPI=function(g,f,h){if(this.indicator){this.indicator.show()}return d.safe.getJSON(a.BASE_URL+g,f,this.getSuccessCallback(h)).error(this.getFailureCallback())};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-events', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/events/strings.js' */
define("bitvoodoo/viewtracker/reporting/events/strings",["bitvoodoo/viewtracker/namespaces"],function(a){a.Reporting.Events.Strings={GLOBAL_CONFIG_UPDATED:"bitvoodoo/viewtracker/reporting/global-config-updated",GLOBAL_DATES_UPDATED:"bitvoodoo/viewtracker/reporting/global-date-range-updated",GLOBAL_SPACES_UPDATED:"bitvoodoo/viewtracker/reporting/global-spaces-updated",GLOBAL_DEVICE_TYPE_UPDATED:"bitvoodoo/viewtracker/reporting/global-device-type-updated",GLOBAL_CONTENT_TYPE_UPDATED:"bitvoodoo/viewtracker/reporting/global-content-type-updated",LOCAL_SPACES_UPDATED:"bitvoodoo/viewtracker/reporting/local-spaces-updated",LOCAL_WIDGET_RESET_SELECTION:"bitvoodoo/viewtracker/reporting/local-widget-reset-selection",WIDGET_INIT:"bitvoodoo/viewtracker/reporting/widget-init",CONTENT_REPORT_INIT:"bitvoodoo/viewtracker/reporting/content-report-init"};return a.Reporting.Events.Strings});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-events', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/events/queue.js' */
define("bitvoodoo/viewtracker/reporting/events/queue",["ajs"],function(a){var b=function(){};b.prototype.subscribe=function(c,f){if(Array.isArray(c)){var e=c;for(var d=0;d<e.length;d++){var c=e[d];this._addSubscription(c,f)}}else{this._addSubscription(c,f)}};b.prototype._addSubscription=function(c,d){a.bind(c,function(e,f){d(JSON.parse(JSON.stringify(f)))})};b.prototype.publish=function(c,d){a.trigger(c,d)};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-widgets-counter', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/widgets/counter.js' */
define("bitvoodoo/viewtracker/reporting/widgets/counter",["jquery","bitvoodoo/viewtracker/reporting/rest/connector","bitvoodoo/viewtracker/reporting/charts/own","bitvoodoo/viewtracker/reporting/events/queue","bitvoodoo/viewtracker/reporting/events/strings"],function(b,d,f,e,a){var c=function(g){this.$element=g.element;this.connector=new d(this.$element);this.queue=new e();this.queryParameters=g.queryParameters||{anonymous:"true"};if(this.queryParameters&&!b.isEmptyObject(this.queryParameters)){this.url=g.url+"?"+this.buildQueryParametersString()}else{this.url=g.url}this.filterType=this.$element.data("filter-type");this.filterValue=this.$element.data("filter-value");this.mustHaveFilter={};if(this.hasFilter()){this.mustHaveFilter[this.filterType]=this.filterValue}this.filteringData=g.filteringData||{};this.chart=new f.CounterChart({"$element":this.$element})};c.prototype.buildQueryParametersString=function(){var h=this;var g=encodeURIComponent;return Object.keys(this.queryParameters).map(function(i){return g(i)+"="+g(h.queryParameters[i])}).join("&")};c.prototype.hasFilter=function(){return this.filterType!==undefined&&this.filterValue!==undefined};c.prototype.bindEventListeners=function(){var g=this;var h=[a.GLOBAL_DATES_UPDATED,a.GLOBAL_DEVICE_TYPE_UPDATED,a.GLOBAL_CONTENT_TYPE_UPDATED,a.GLOBAL_SPACES_UPDATED,a.CONTENT_REPORT_INIT];this.queue.subscribe(h,function(i){g.filteringData=b.extend(g.filteringData,i);g.updateChart()})};c.prototype.updateChart=function(){var g=this;if(this.hasFilter()){if(this.filterType in this.filteringData&&this.filteringData[this.filterType].length>0&&!this.isFilterUsed()){g.chart.hideChart();return}}var h=this.extendSearchWithLocalFilter(this.filteringData,this.mustHaveFilter);this.connector.get(this.url,h,function(i){g.chart.render(i.count)})};c.prototype.isFilterUsed=function(){var h=this.filterValue.split(",");var k=this.filteringData[this.filterType].split(",");for(var g=0;g<h.length;g++){var j=h[g];if(k.indexOf(j)>=0){return true}}return false};c.prototype.extendSearchWithLocalFilter=function(l,n){var g=n[this.filterType];if(!g||g.indexOf(",")===-1){return b.extend(l,n)}if(!l[this.filterType]){return b.extend(l,n)}var j=[];var k=this.filterValue.split(",");var o=l[this.filterType].split(",");for(var h=0;h<k.length;h++){var m=k[h];if(o.indexOf(m)>=0){j.push(m)}}l[this.filterType]=j.join(",");return l};c.prototype.show=function(){this.bindEventListeners()};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-widgets-counter', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/widgets/kpicounter.js' */
define("bitvoodoo/viewtracker/reporting/widgets/kpicounter",["jquery","bitvoodoo/viewtracker/reporting/rest/connector","bitvoodoo/viewtracker/reporting/charts/own","bitvoodoo/viewtracker/reporting/events/queue","bitvoodoo/viewtracker/reporting/events/strings"],function(c,d,f,e,b){var a=function(g){this.$element=g.element;this.connector=new d(this.$element);this.queue=new e();this.url=g.url;this.filteringData=g.filteringData||{};this.chart=new f.CounterChart({"$element":this.$element,})};a.prototype.bindEventListeners=function(){var g=this;var h=[b.GLOBAL_DATES_UPDATED,b.GLOBAL_CONTENT_TYPE_UPDATED,b.GLOBAL_SPACES_UPDATED];this.queue.subscribe(h,function(i){g.filteringData=c.extend(g.filteringData,i);g.updateChart()})};a.prototype.updateChart=function(){var g=this;var h=c.extend(this.filteringData,this.mustHaveFilter);this.connector.get(this.url,h,function(i){g.chart.render(i.total)})};a.prototype.show=function(){this.bindEventListeners()};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-widgets-counter', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/templates/soy/reporting/widgets/counter.soy' */
// This file was automatically generated from counter.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Bitvoodoo == 'undefined') { Confluence.Templates.Bitvoodoo = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter = {}; }


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter = function(opt_data, opt_ignored) {
  return '<div class="viewtracker-counter hidden ' + ((opt_data.filterType) ? soy.$$escapeHtml(opt_data.filterType) : '') + ' ' + ((opt_data.filterValue) ? soy.$$escapeHtml(opt_data.filterValue) : '') + '"' + ((opt_data.filterType) ? ' data-filter-type="' + soy.$$escapeHtml(opt_data.filterType) + '" ' : '') + ((opt_data.filterValue) ? ' data-filter-value="' + soy.$$escapeHtml(opt_data.filterValue) + '" ' : '') + ' ><div class="number-display">' + soy.$$escapeHtml(opt_data.data) + '</div><div class="counter-title">' + soy.$$escapeHtml(opt_data.description) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.kpicounter = function(opt_data, opt_ignored) {
  return '<div class="viewtracker-kpicounter ' + soy.$$escapeHtml(opt_data.kpiType) + ' hidden"><div class="number-display">' + soy.$$escapeHtml(opt_data.data) + '</div><div class="counter-title">' + soy.$$escapeHtml(opt_data.description) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.kpicounter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.kpicounter';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-report-counters-web-resource', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/widgets/webpanels/global/counters-init.js' */
define("bitvoodoo/viewtracker/reporting/widgets/webpanels/global/counters-init",["jquery","bitvoodoo/viewtracker/reporting/widgets/webpanels/global/widget-initbase","bitvoodoo/viewtracker/reporting/widgets/counter","bitvoodoo/viewtracker/reporting/rest/settings"],function(b,d,c,a){var e=function(){this._init()};e.prototype=b.extend(e.prototype,d.prototype,{init:function(f){if(!f){return}if(f.report==="global"||f.report==="space"){b(".viewtracker-counter").each(function(i,g){var h=new c({element:b(g),url:a.REPORTING_URL+"/spaces/visits/total/",filteringData:{spaceKeys:f.spaceKey}});h.show()})}else{if(f.report==="content"){b(".viewtracker-counter.viewsTotal").each(function(i,g){var h=new c({element:b(g),url:a.REST_URL+"/visits/contents/"+f.contentId+"/total"});h.show()});b(".viewtracker-counter.uniqueUsers").each(function(i,g){var h=new c({element:b(g),url:a.REPORTING_URL+"/contents/"+f.contentId+"/unique-users/total"});h.show()});if(f.userKey){b(".viewtracker-counter.myViews").each(function(i,g){var h=new c({element:b(g),url:a.REST_URL+"/visits/contents/"+f.contentId+"/total",queryParameters:{anonymous:"true",userKey:f.userKey}});h.show()})}}}}});return e});require(["bitvoodoo/viewtracker/reporting/widgets/webpanels/global/counters-init"],function(a){new a()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-report-counters-web-resource', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/widgets/webpanels/global/widget-init-base.js' */
define("bitvoodoo/viewtracker/reporting/widgets/webpanels/global/widget-initbase",["jquery","bitvoodoo/viewtracker/reporting/events/queue","bitvoodoo/viewtracker/reporting/events/strings"],function(b,d,a){var c=function(){};c.prototype._init=function(){this.queue=new d();var e=[a.WIDGET_INIT];var f=this;this.queue.subscribe(e,function(g){if(g&&g.report){f.init(g)}})};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-content-report-templates', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/templates/soy/reporting/content/content-report.soy' */
// This file was automatically generated from content-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Bitvoodoo == 'undefined') { Confluence.Templates.Bitvoodoo = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content = {}; }
if (typeof Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report == 'undefined') { Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report = {}; }


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.content = function(opt_data, opt_ignored) {
  var output = '<div id="reporting-inline-dialog" class="builtin-report">';
  if (opt_data.data) {
    var showReportTab__soy6 = opt_data.data['viewtracker.report.timeline.group'] && opt_data.data['viewtracker.report.timeline.group'].length && opt_data.data['viewtracker.report.timeline'] && opt_data.data['viewtracker.report.timeline'].length;
    var showUsersStatisticTab__soy7 = opt_data.data['viewtracker.report.users.statistic'] && opt_data.data['viewtracker.report.users.statistic'].length;
    output += (showReportTab__soy6 && showUsersStatisticTab__soy7) ? aui.tabs({id: 'viewtracker-content-report-tabs', menuItems: [{id: 'single-content-report-tab', isActive: true, url: '#content-report', text: 'Report'}, {id: 'users-statistic-tab', isActive: false, url: '#users-statistic', text: 'Users statistic'}], paneContent: '' + aui.tabPane({isActive: true, id: 'content-report', content: '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.timelineReportContent(opt_data) + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.countersReportContent(opt_data)}) + aui.tabPane({isActive: false, id: 'users-statistic', content: '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.webPanelsForLocation(soy.$$augmentMap(opt_data, {location: 'viewtracker.report.users.statistic'}))})}) : (showReportTab__soy6) ? aui.tabs({id: 'viewtracker-content-report-tabs', menuItems: [{id: 'single-content-report-tab', isActive: true, url: '#content-report', text: 'Report'}], paneContent: '' + aui.tabPane({isActive: true, id: 'content-report', content: '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.timelineReportContent(opt_data) + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.countersReportContent(opt_data)})}) : (showUsersStatisticTab__soy7) ? aui.tabs({id: 'viewtracker-content-report-tabs', menuItems: [{id: 'users-statistic-tab', isActive: true, url: '#users-statistic', text: 'Users statistic'}], paneContent: '' + aui.tabPane({isActive: true, id: 'users-statistic', content: '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.usersStatisticContent(opt_data)})}) : '';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.content.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.content';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.timelineReportContent = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data['viewtracker.report.timeline.group'] && opt_data.data['viewtracker.report.timeline.group'].length) {
    var webPanelContentList51 = opt_data.data['viewtracker.report.timeline'];
    var webPanelContentListLen51 = webPanelContentList51.length;
    for (var webPanelContentIndex51 = 0; webPanelContentIndex51 < webPanelContentListLen51; webPanelContentIndex51++) {
      var webPanelContentData51 = webPanelContentList51[webPanelContentIndex51];
      output += aui.page.pagePanel({content: '' + aui.page.pagePanelItem({content: '' + soy.$$filterNoAutoescape(webPanelContentData51)})});
    }
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.timelineReportContent.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.timelineReportContent';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.countersReportContent = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data['viewtracker.report.content.counter'] && opt_data.data['viewtracker.report.content.counter'].length) {
    var param62 = '';
    var webPanelContentList63 = opt_data.data['viewtracker.report.content.counter'];
    var webPanelContentListLen63 = webPanelContentList63.length;
    for (var webPanelContentIndex63 = 0; webPanelContentIndex63 < webPanelContentListLen63; webPanelContentIndex63++) {
      var webPanelContentData63 = webPanelContentList63[webPanelContentIndex63];
      param62 += aui.page.pagePanelItem({content: '' + soy.$$filterNoAutoescape(webPanelContentData63)});
    }
    output += aui.page.pagePanel({content: param62});
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.countersReportContent.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.countersReportContent';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportAllViewsCounter = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter({data: '0', description: 'All views', filterType: 'viewsTotal'});
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportAllViewsCounter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportAllViewsCounter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportUniqueUsersCounter = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter({data: '0', description: 'Unique Confluence users', filterType: 'uniqueUsers'});
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportUniqueUsersCounter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentReportUniqueUsersCounter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.myViewsCounter = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Widgets.Counter.counter({data: '0', description: 'My views', filterType: 'myViews'});
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.myViewsCounter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.myViewsCounter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.webPanelsForLocation = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data[opt_data.location] && opt_data.data[opt_data.location].length) {
    var webPanelContentList88 = opt_data.data[opt_data.location];
    var webPanelContentListLen88 = webPanelContentList88.length;
    for (var webPanelContentIndex88 = 0; webPanelContentIndex88 < webPanelContentListLen88; webPanelContentIndex88++) {
      var webPanelContentData88 = webPanelContentList88[webPanelContentIndex88];
      output += aui.page.pagePanel({content: '' + aui.page.pagePanelItem({content: '' + soy.$$filterNoAutoescape(webPanelContentData88)})});
    }
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.webPanelsForLocation.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.webPanelsForLocation';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.footerHintContent = function(opt_data, opt_ignored) {
  return '<a href="https://wiki.bitvoodoo.ch/x/TAh0AQ" target="_blank">' + soy.$$escapeHtml('Documentation') + '</a>' + ((! opt_data.isDataSecurityInfoBoxFeatureEnabled && (opt_data.isPrivacyModeEnabled || opt_data.isHiddenUserStatistic)) ? '&nbsp;&middot;&nbsp;' + Confluence.Templates.Bitvoodoo.viewtracker.Privacy.Mode.privacyModeIcon(soy.$$augmentMap(opt_data, {showLabel: true})) : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.footerHintContent.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.footerHintContent';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentFooter = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({text: 'Close', type: 'link', id: 'cancel-button'});
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentFooter.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentFooter';
}


Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentTitle = function(opt_data, opt_ignored) {
  var output = '' + soy.$$escapeHtml('Viewtracker');
  if (opt_data.data['viewtracker.report.privacy.mode.message'] && opt_data.data['viewtracker.report.privacy.mode.message'].length) {
    var webPanelContentList114 = opt_data.data['viewtracker.report.privacy.mode.message'];
    var webPanelContentListLen114 = webPanelContentList114.length;
    for (var webPanelContentIndex114 = 0; webPanelContentIndex114 < webPanelContentListLen114; webPanelContentIndex114++) {
      var webPanelContentData114 = webPanelContentList114[webPanelContentIndex114];
      output += soy.$$filterNoAutoescape(webPanelContentData114);
    }
  } else if (! opt_data.data['viewtracker.report.users.statistic'] || ! opt_data.data['viewtracker.report.users.statistic'].length) {
    output += aui.icons.icon({useIconFont: true, size: 'large', icon: 'locked', extraClasses: 'viewtracker-icon-hidden-statistic'});
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentTitle.soyTemplateName = 'Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentTitle';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-highcharts', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/highcharts/highcharts.js' */
(function(a,b){"object"===typeof module&&module.exports?module.exports=a.document?b(a):b:a.Highcharts=b(a)})("undefined"!==typeof window?window:this,function(b){var c=function(){var f=b.document,d=b.navigator&&b.navigator.userAgent||"",i=f&&f.createElementNS&&!!f.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,g=/(edge|msie|trident)/i.test(d)&&!b.opera,h=/Firefox/.test(d),e=h&&4>parseInt(d.split("Firefox/")[1],10);return b.Highcharts?b.Highcharts.error(16,!0):{product:"Highcharts",version:"6.0.1",deg2rad:2*Math.PI/360,doc:f,hasBidiBug:e,hasTouch:f&&void 0!==f.documentElement.ontouchstart,isMS:g,isWebKit:/AppleWebKit/.test(d),isFirefox:h,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(d),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:i,win:b,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}();(function(e){var d=[],h=e.charts,f=e.doc,g=e.win;e.error=function(i,j){i=e.isNumber(i)?"Highcharts error #"+i+": www.highcharts.com/errors/"+i:i;if(j){throw Error(i)}g.console&&console.log(i)};e.Fx=function(i,k,j){this.options=k;this.elem=i;this.prop=j};e.Fx.prototype={dSetter:function(){var j=this.paths[0],o=this.paths[1],l=[],i=this.now,n=j.length,k;if(1===i){l=this.toD}else{if(n===o.length&&1>i){for(;n--;){k=parseFloat(j[n]),l[n]=isNaN(k)?j[n]:i*parseFloat(o[n]-k)+k}}else{l=o}}this.elem.attr("d",l,null,!0)},update:function(){var j=this.elem,l=this.prop,k=this.now,i=this.options.step;if(this[l+"Setter"]){this[l+"Setter"]()}else{j.attr?j.element&&j.attr(l,k,null,!0):j.style[l]=k+this.unit}i&&i.call(j,k,this)},run:function(k,p,o){var i=this,j=function(l){return j.stopped?!1:i.step(l)},n=g.requestAnimationFrame||function(l){setTimeout(l,13)},q=function(){var l;for(l=0;l<d.length;l++){d[l]()||d.splice(l--,1)}d.length&&n(q)};k===p?delete this.options.curAnim[this.prop]:(this.startTime=+new Date,this.start=k,this.end=p,this.unit=o,this.now=this.start,this.pos=0,j.elem=this.elem,j.prop=this.prop,j()&&1===d.push(j)&&n(q))},step:function(j){var p=+new Date,n,i=this.options,o=this.elem,k=i.complete,s=i.duration,q=i.curAnim;o.attr&&!o.element?j=!1:j||p>=s+this.startTime?(this.now=this.end,this.pos=1,this.update(),n=q[this.prop]=!0,e.objectEach(q,function(l){!0!==l&&(n=!1)}),n&&k&&k.call(o),j=!1):(this.pos=i.easing((p-this.startTime)/s),this.now=this.start+(this.end-this.start)*this.pos,this.update(),j=!0);return j},initPath:function(t,z,x){function s(l){var m,k;for(o=l.length;o--;){m="M"===l[o]||"L"===l[o],k=/[a-zA-Z]/.test(l[o+3]),m&&k&&l.splice(o+1,0,l[o+1],l[o+2],l[o+1],l[o+2])}}function i(m,l){for(;m.length<H;){m[0]=l[H-m.length];var n=m.slice(0,D);[].splice.apply(m,[0,0].concat(n));j&&(n=m.slice(m.length-D),[].splice.apply(m,[m.length,0].concat(n)),o--)}m[0]="M"}function J(k,m){for(var l=(H-k.length)/D;0<l&&l--;){u=k.slice().splice(k.length/G-D,D*G),u[0]=m[H-D-l*D],F&&(u[D-6]=u[D-2],u[D-5]=u[D-1]),[].splice.apply(k,[k.length/G,0].concat(u)),j&&l--}}z=z||"";var B,A=t.startX,q=t.endX,F=-1<z.indexOf("C"),D=F?7:3,H,u,o;z=z.split(" ");x=x.slice();var j=t.isArea,G=j?2:1,E;F&&(s(z),s(x));if(A&&q){for(o=0;o<A.length;o++){if(A[o]===q[0]){B=o;break}else{if(A[0]===q[q.length-A.length+o]){B=o;E=!0;break}}}void 0===B&&(z=[])}z.length&&e.isNumber(B)&&(H=x.length+B*G*D,E?(i(z,x),J(x,z)):(i(x,z),J(z,x)));return[z,x]}};e.Fx.prototype.fillSetter=e.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,e.color(this.start).tweenTo(e.color(this.end),this.pos),null,!0)};e.extend=function(j,k){var i;j||(j={});for(i in k){j[i]=k[i]}return j};e.merge=function(){var j,o=arguments,k,i={},n=function(l,m){"object"!==typeof l&&(l={});e.objectEach(m,function(p,q){!e.isObject(p,!0)||e.isClass(p)||e.isDOMElement(p)?l[q]=m[q]:l[q]=n(l[q]||{},p)});return l};!0===o[0]&&(i=o[1],o=Array.prototype.slice.call(o,2));k=o.length;for(j=0;j<k;j++){i=n(i,o[j])}return i};e.pInt=function(i,j){return parseInt(i,j||10)};e.isString=function(i){return"string"===typeof i};e.isArray=function(i){i=Object.prototype.toString.call(i);return"[object Array]"===i||"[object Array Iterator]"===i};e.isObject=function(i,j){return !!i&&"object"===typeof i&&(!j||!e.isArray(i))};e.isDOMElement=function(i){return e.isObject(i)&&"number"===typeof i.nodeType};e.isClass=function(i){var j=i&&i.constructor;return !(!e.isObject(i,!0)||e.isDOMElement(i)||!j||!j.name||"Object"===j.name)};e.isNumber=function(i){return"number"===typeof i&&!isNaN(i)};e.erase=function(j,k){for(var i=j.length;i--;){if(j[i]===k){j.splice(i,1);break}}};e.defined=function(i){return void 0!==i&&null!==i};e.attr=function(j,n,k){var i;e.isString(n)?e.defined(k)?j.setAttribute(n,k):j&&j.getAttribute&&(i=j.getAttribute(n)):e.defined(n)&&e.isObject(n)&&e.objectEach(n,function(l,m){j.setAttribute(m,l)});return i};e.splat=function(i){return e.isArray(i)?i:[i]};e.syncTimeout=function(i,k,j){if(k){return setTimeout(i,k,j)}i.call(0,j)};e.pick=function(){var j=arguments,l,k,i=j.length;for(l=0;l<i;l++){if(k=j[l],void 0!==k&&null!==k){return k}}};e.css=function(i,j){e.isMS&&!e.svg&&j&&void 0!==j.opacity&&(j.filter="alpha(opacity\x3d"+100*j.opacity+")");e.extend(i.style,j)};e.createElement=function(j,p,n,i,o){j=f.createElement(j);var k=e.css;p&&e.extend(j,p);o&&k(j,{padding:0,border:"none",margin:0});n&&k(j,n);i&&i.appendChild(j);return j};e.extendClass=function(i,k){var j=function(){};j.prototype=new i;e.extend(j.prototype,k);return j};e.pad=function(i,k,j){return Array((k||2)+1-String(i).length).join(j||0)+i};e.relativeLength=function(i,k,j){return/%$/.test(i)?k*parseFloat(i)/100+(j||0):parseFloat(i)};e.wrap=function(j,l,k){var i=j[l];j[l]=function(){var m=Array.prototype.slice.call(arguments),n=arguments,o=this;o.proceed=function(){i.apply(o,arguments.length?arguments:n)};m.unshift(i);m=k.apply(this,m);o.proceed=null;return m}};e.getTZOffset=function(i){var j=e.Date;return 60000*(j.hcGetTimezoneOffset&&j.hcGetTimezoneOffset(i)||j.hcTimezoneOffset||0)};e.dateFormat=function(s,x,u){if(!e.defined(x)||isNaN(x)){return e.defaultOptions.lang.invalidDate||""}s=e.pick(s,"%Y-%m-%d %H:%M:%S");var q=e.Date,i=new q(x-e.getTZOffset(x)),D=i[q.hcGetHours](),z=i[q.hcGetDay](),y=i[q.hcGetDate](),o=i[q.hcGetMonth](),B=i[q.hcGetFullYear](),A=e.defaultOptions.lang,C=A.weekdays,t=A.shortWeekdays,j=e.pad,q=e.extend({a:t?t[z]:C[z].substr(0,3),A:C[z],d:j(y),e:j(y,2," "),w:z,b:A.shortMonths[o],B:A.months[o],m:j(o+1),y:B.toString().substr(2,2),Y:B,H:j(D),k:D,I:j(D%12||12),l:D%12||12,M:j(i[q.hcGetMinutes]()),p:12>D?"AM":"PM",P:12>D?"am":"pm",S:j(i.getSeconds()),L:j(Math.round(x%1000),3)},e.dateFormats);e.objectEach(q,function(l,k){for(;-1!==s.indexOf("%"+k);){s=s.replace("%"+k,"function"===typeof l?l(x):l)}});return u?s.substr(0,1).toUpperCase()+s.substr(1):s};e.formatSingle=function(j,n){var k=/\.([0-9])/,i=e.defaultOptions.lang;/f$/.test(j)?(k=(k=j.match(k))?k[1]:-1,null!==n&&(n=e.numberFormat(n,k,i.decimalPoint,-1<j.indexOf(",")?i.thousandsSep:""))):n=e.dateFormat(j,n);return n};e.format=function(o,q){for(var p="{",k=!1,i,w,t,s,j=[],u;o;){p=o.indexOf(p);if(-1===p){break}i=o.slice(0,p);if(k){i=i.split(":");w=i.shift().split(".");s=w.length;u=q;for(t=0;t<s;t++){u&&(u=u[w[t]])}i.length&&(u=e.formatSingle(i.join(":"),u));j.push(u)}else{j.push(i)}o=o.slice(p+1);p=(k=!k)?"}":"{"}j.push(o);return j.join("")};e.getMagnitude=function(i){return Math.pow(10,Math.floor(Math.log(i)/Math.LN10))};e.normalizeTickInterval=function(j,p,n,i,o){var k,q=j;n=e.pick(n,1);k=j/n;p||(p=o?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===n?p=e.grep(p,function(l){return 0===l%1}):0.1>=n&&(p=[1/n])));for(i=0;i<p.length&&!(q=p[i],o&&q*n>=j||!o&&k<=(p[i]+(p[i+1]||p[i]))/2);i++){}return q=e.correctFloat(q*n,-Math.round(Math.log(0.001)/Math.LN10))};e.stableSort=function(k,o){var n=k.length,i,j;for(j=0;j<n;j++){k[j].safeI=j}k.sort(function(l,m){i=o(l,m);return 0===i?l.safeI-m.safeI:i});for(j=0;j<n;j++){delete k[j].safeI}};e.arrayMin=function(i){for(var k=i.length,j=i[0];k--;){i[k]<j&&(j=i[k])}return j};e.arrayMax=function(i){for(var k=i.length,j=i[0];k--;){i[k]>j&&(j=i[k])}return j};e.destroyObjectProperties=function(i,j){e.objectEach(i,function(l,k){l&&l!==j&&l.destroy&&l.destroy();delete i[k]})};e.discardElement=function(i){var j=e.garbageBin;j||(j=e.createElement("div"));i&&j.appendChild(i);j.innerHTML=""};e.correctFloat=function(i,j){return parseFloat(i.toPrecision(j||14))};e.setAnimation=function(i,j){j.renderer.globalAnimation=e.pick(i,j.options.chart.animation,!0)};e.animObject=function(i){return e.isObject(i)?e.merge(i):{duration:i?500:0}};e.timeUnits={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000,month:2419200000,year:31449600000};e.numberFormat=function(o,q,p,k){o=+o||0;q=+q;var i=e.defaultOptions.lang,u=(o.toString().split(".")[1]||"").split("e")[0].length,t,s,j=o.toString().split("e");-1===q?q=Math.min(u,20):e.isNumber(q)||(q=2);s=(Math.abs(j[1]?j[0]:o)+Math.pow(10,-Math.max(q,u)-1)).toFixed(q);u=String(e.pInt(s));t=3<u.length?u.length%3:0;p=e.pick(p,i.decimalPoint);k=e.pick(k,i.thousandsSep);o=(0>o?"-":"")+(t?u.substr(0,t)+k:"");o+=u.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+k);q&&(o+=p+s.slice(-q));j[1]&&(o+="e"+j[1]);return o};Math.easeInOutSine=function(i){return -0.5*(Math.cos(Math.PI*i)-1)};e.getStyle=function(i,k,j){if("width"===k){return Math.min(i.offsetWidth,i.scrollWidth)-e.getStyle(i,"padding-left")-e.getStyle(i,"padding-right")}if("height"===k){return Math.min(i.offsetHeight,i.scrollHeight)-e.getStyle(i,"padding-top")-e.getStyle(i,"padding-bottom")}g.getComputedStyle||e.error(27,!0);if(i=g.getComputedStyle(i,void 0)){i=i.getPropertyValue(k),e.pick(j,"opacity"!==k)&&(i=e.pInt(i))}return i};e.inArray=function(i,j){return(e.indexOfPolyfill||Array.prototype.indexOf).call(j,i)};e.grep=function(i,j){return(e.filterPolyfill||Array.prototype.filter).call(i,j)};e.find=Array.prototype.find?function(i,j){return i.find(j)}:function(j,l){var k,i=j.length;for(k=0;k<i;k++){if(l(j[k],k)){return j[k]}}};e.map=function(j,n){for(var k=[],i=0,l=j.length;i<l;i++){k[i]=n.call(j[i],j[i],i,j)}return k};e.reduce=function(i,k,j){return(e.reducePolyfill||Array.prototype.reduce).call(i,k,j)};e.offset=function(i){var j=f.documentElement;i=i.getBoundingClientRect();return{top:i.top+(g.pageYOffset||j.scrollTop)-(j.clientTop||0),left:i.left+(g.pageXOffset||j.scrollLeft)-(j.clientLeft||0)}};e.stop=function(i,k){for(var j=d.length;j--;){d[j].elem!==i||k&&k!==d[j].prop||(d[j].stopped=!0)}};e.each=function(i,k,j){return(e.forEachPolyfill||Array.prototype.forEach).call(i,k,j)};e.objectEach=function(j,l,k){for(var i in j){j.hasOwnProperty(i)&&l.call(k,j[i],i,j)}};e.addEvent=function(j,o,k){var i=j.hcEvents=j.hcEvents||{},n=j.addEventListener||e.addEventListenerPolyfill;n&&n.call(j,o,k,!1);i[o]||(i[o]=[]);i[o].push(k);return function(){e.removeEvent(j,o,k)}};e.removeEvent=function(j,p,n){function i(m,l){var r=j.removeEventListener||e.removeEventListenerPolyfill;r&&r.call(j,m,l,!1)}function o(){var m,l;j.nodeName&&(p?(m={},m[p]=!0):m=s,e.objectEach(m,function(r,t){if(s[t]){for(l=s[t].length;l--;){i(t,s[t][l])}}}))}var k,s=j.hcEvents,q;s&&(p?(k=s[p]||[],n?(q=e.inArray(n,k),-1<q&&(k.splice(q,1),s[p]=k),i(p,n)):(o(),s[p]=[])):(o(),j.hcEvents={}))};e.fireEvent=function(j,p,n,i){var o;o=j.hcEvents;var k,q;n=n||{};if(f.createEvent&&(j.dispatchEvent||j.fireEvent)){o=f.createEvent("Events"),o.initEvent(p,!0,!0),e.extend(o,n),j.dispatchEvent?j.dispatchEvent(o):j.fireEvent(p,o)}else{if(o){for(o=o[p]||[],k=o.length,n.target||e.extend(n,{preventDefault:function(){n.defaultPrevented=!0},target:j,type:p}),p=0;p<k;p++){(q=o[p])&&!1===q.call(j,n)&&n.preventDefault()}}}i&&!n.defaultPrevented&&i(n)};e.animate=function(j,p,n){var i,o="",k,s,q;e.isObject(n)||(q=arguments,n={duration:q[2],easing:q[3],complete:q[4]});e.isNumber(n.duration)||(n.duration=400);n.easing="function"===typeof n.easing?n.easing:Math[n.easing]||Math.easeInOutSine;n.curAnim=e.merge(p);e.objectEach(p,function(m,l){e.stop(j,l);s=new e.Fx(j,n,l);k=null;"d"===l?(s.paths=s.initPath(j,j.d,p.d),s.toD=p.d,i=0,k=1):j.attr?i=j.attr(l):(i=parseFloat(e.getStyle(j,l))||0,"opacity"!==l&&(o="px"));k||(k=m);k&&k.match&&k.match("px")&&(k=k.replace(/px/g,""));s.run(i,k,o)})};e.seriesType=function(j,p,n,i,o){var k=e.getOptions(),q=e.seriesTypes;k.plotOptions[j]=e.merge(k.plotOptions[p],n);q[j]=e.extendClass(q[p]||function(){},i);q[j].prototype.type=j;o&&(q[j].prototype.pointClass=e.extendClass(e.Point,o));return q[j]};e.uniqueKey=function(){var i=Math.random().toString(36).substring(2,9),j=0;return function(){return"highcharts-"+i+"-"+j++}}();g.jQuery&&(g.jQuery.fn.highcharts=function(){var i=[].slice.call(arguments);if(this[0]){return i[0]?(new (e[e.isString(i[0])?i.shift():"Chart"])(this[0],i[0],i[1]),this):h[e.attr(this[0],"data-highcharts-chart")]}})})(c);(function(f){var d=f.each,i=f.isNumber,g=f.map,h=f.merge,e=f.pInt;f.Color=function(j){if(!(this instanceof f.Color)){return new f.Color(j)}this.init(j)};f.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(j){return[e(j[1]),e(j[2]),e(j[3]),parseFloat(j[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(j){return[e(j[1]),e(j[2]),e(j[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(o){var l,j,n,k;if((this.input=o=this.names[o&&o.toLowerCase?o.toLowerCase():""]||o)&&o.stops){this.stops=g(o.stops,function(m){return new f.Color(m[1])})}else{if(o&&o.charAt&&"#"===o.charAt()&&(l=o.length,o=parseInt(o.substr(1),16),7===l?j=[(o&16711680)>>16,(o&65280)>>8,o&255,1]:4===l&&(j=[(o&3840)>>4|(o&3840)>>8,(o&240)>>4|o&240,(o&15)<<4|o&15,1])),!j){for(n=this.parsers.length;n--&&!j;){k=this.parsers[n],(l=k.regex.exec(o))&&(j=k.parse(l))}}}this.rgba=j||[]},get:function(k){var n=this.input,j=this.rgba,l;this.stops?(l=h(n),l.stops=[].concat(l.stops),d(this.stops,function(m,o){l.stops[o]=[l.stops[o][0],m.get(k)]})):l=j&&i(j[0])?"rgb"===k||!k&&1===j[3]?"rgb("+j[0]+","+j[1]+","+j[2]+")":"a"===k?j[3]:"rgba("+j.join(",")+")":n;return l},brighten:function(k){var l,j=this.rgba;if(this.stops){d(this.stops,function(m){m.brighten(k)})}else{if(i(k)&&0!==k){for(l=0;3>l;l++){j[l]+=e(255*k),0>j[l]&&(j[l]=0),255<j[l]&&(j[l]=255)}}}return this},setOpacity:function(j){this.rgba[3]=j;return this},tweenTo:function(j,k){var m=this.rgba,l=j.rgba;l.length&&m&&m.length?(j=1!==l[3]||1!==m[3],k=(j?"rgba(":"rgb(")+Math.round(l[0]+(m[0]-l[0])*(1-k))+","+Math.round(l[1]+(m[1]-l[1])*(1-k))+","+Math.round(l[2]+(m[2]-l[2])*(1-k))+(j?","+(l[3]+(m[3]-l[3])*(1-k)):"")+")"):k=j.input||"none";return k}};f.color=function(j){return new f.Color(j)}})(c);(function(aw){var aa,Z,U=aw.addEvent,V=aw.animate,am=aw.attr,aq=aw.charts,ao=aw.color,al=aw.css,ah=aw.createElement,ae=aw.defined,at=aw.deg2rad,ar=aw.destroyObjectProperties,ak=aw.doc,av=aw.each,au=aw.extend,ad=aw.erase,an=aw.grep,aj=aw.hasTouch,Y=aw.inArray,R=aw.isArray,ac=aw.isFirefox,N=aw.isMS,ai=aw.isObject,ab=aw.isString,Q=aw.isWebKit,ag=aw.merge,X=aw.noop,W=aw.objectEach,T=aw.pick,ap=aw.pInt,af=aw.removeEvent,j=aw.stop,s=aw.svg,o=aw.SVG_NS,x=aw.symbolSizes,i=aw.win;aa=aw.SVGElement=function(){return this};au(aa.prototype,{opacity:1,SVG_NS:o,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline".split(" "),init:function(d,e){this.element="span"===e?ah(e):ak.createElementNS(this.SVG_NS,e);this.renderer=d},animate:function(d,f,e){f=aw.animObject(T(f,this.renderer.globalAnimation,!0));0!==f.duration?(e&&(f.complete=e),V(this,d,f)):(this.attr(d,null,e),f.step&&f.step.call(this));return this},colorGradient:function(G,v,I){var E=this.renderer,r,t,C,A,H,l,B,m,D,z,F=[],h;G.radialGradient?t="radialGradient":G.linearGradient&&(t="linearGradient");t&&(C=G[t],H=E.gradients,B=G.stops,z=I.radialReference,R(C)&&(G[t]=C={x1:C[0],y1:C[1],x2:C[2],y2:C[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===t&&z&&!ae(C.gradientUnits)&&(A=C,C=ag(C,E.getRadialAttr(z,A),{gradientUnits:"userSpaceOnUse"})),W(C,function(e,d){"id"!==d&&F.push(d,e)}),W(B,function(d){F.push(d)}),F=F.join(","),H[F]?z=H[F].attr("id"):(C.id=z=aw.uniqueKey(),H[F]=l=E.createElement(t).attr(C).add(E.defs),l.radAttr=A,l.stops=[],av(B,function(d){0===d[1].indexOf("rgba")?(r=aw.color(d[1]),m=r.get("rgb"),D=r.get("a")):(m=d[1],D=1);d=E.createElement("stop").attr({offset:d[0],"stop-color":m,"stop-opacity":D}).add(l);l.stops.push(d)})),h="url("+E.url+"#"+z+")",I.setAttribute(v,h),I.gradient=F,G.toString=function(){return h})},applyTextOutline:function(e){var m=this.element,h,p,f,n,l;-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(m.style.fill)));e=e.split(" ");p=e[e.length-1];if((f=e[0])&&"none"!==f&&aw.svg){this.fakeTS=!0;e=[].slice.call(m.getElementsByTagName("tspan"));this.ySetter=this.xSetter;f=f.replace(/(^[\d\.]+)(.*?)$/g,function(k,d,q){return 2*d+q});for(l=e.length;l--;){h=e[l],"highcharts-text-outline"===h.getAttribute("class")&&ad(e,m.removeChild(h))}n=m.firstChild;av(e,function(g,d){0===d&&(g.setAttribute("x",m.getAttribute("x")),d=m.getAttribute("y"),g.setAttribute("y",d||0),null===d&&m.setAttribute("y",0));g=g.cloneNode(1);am(g,{"class":"highcharts-text-outline",fill:p,stroke:p,"stroke-width":f,"stroke-linejoin":"round"});m.insertBefore(g,n)})}},attr:function(p,h,r,m){var q,e=this.element,n,l=this,f,v;"string"===typeof p&&void 0!==h&&(q=p,p={},p[q]=h);"string"===typeof p?l=(this[p+"Getter"]||this._defaultGetter).call(this,p,e):(W(p,function(d,k){f=!1;m||j(this,k);this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(k)&&(n||(this.symbolAttr(p),n=!0),f=!0);!this.rotation||"x"!==k&&"y"!==k||(this.doTransform=!0);f||(v=this[k+"Setter"]||this._defaultSetter,v.call(this,d,k,e),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(k)&&this.updateShadows(k,d,v))},this),this.afterSetters());r&&r();return l},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(e,h,f){for(var d=this.shadows,k=d.length;k--;){f.call(d[k],"height"===e?Math.max(h-(d[k].cutHeight||0),0):"d"===e?this.d:h,e,d[k])}},addClass:function(e,f){var d=this.attr("class")||"";-1===d.indexOf(e)&&(f||(e=(d+(d?" ":"")+e).replace("  "," ")),this.attr("class",e));return this},hasClass:function(d){return -1!==Y(d,(this.attr("class")||"").split(" "))},removeClass:function(d){return this.attr("class",(this.attr("class")||"").replace(d,""))},symbolAttr:function(e){var d=this;av("x y r start end width height innerR anchorX anchorY".split(" "),function(f){d[f]=T(e[f],d[f])});d.attr({d:d.renderer.symbols[d.symbolName](d.x,d.y,d.width,d.height,d)})},clip:function(d){return this.attr("clip-path",d?"url("+this.renderer.url+"#"+d.id+")":"none")},crisp:function(e,h){var d=this,f={},k;h=h||e.strokeWidth||0;k=Math.round(h)%2/2;e.x=Math.floor(e.x||d.x||0)+k;e.y=Math.floor(e.y||d.y||0)+k;e.width=Math.floor((e.width||d.width||0)-2*k);e.height=Math.floor((e.height||d.height||0)-2*k);ae(e.strokeWidth)&&(e.strokeWidth=h);W(e,function(l,m){d[m]!==l&&(d[m]=f[m]=l)});return f},css:function(n){var q=this.styles,r={},g=this.element,m,l="",v,h=!q,f=["textOutline","textOverflow","width"];n&&n.color&&(n.fill=n.color);q&&W(n,function(d,e){d!==q[e]&&(r[e]=d,h=!0)});h&&(q&&(n=au(q,r)),m=this.textWidth=n&&n.width&&"auto"!==n.width&&"text"===g.nodeName.toLowerCase()&&ap(n.width),this.styles=n,m&&!s&&this.renderer.forExport&&delete n.width,N&&!s?al(this.element,n):(v=function(e,d){return"-"+d.toLowerCase()},W(n,function(e,d){-1===Y(d,f)&&(l+=d.replace(/([A-Z])/g,v)+":"+e+";")}),l&&am(g,"style",l)),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),n&&n.textOutline&&this.applyTextOutline(n.textOutline)));return this},strokeWidth:function(){return this["stroke-width"]||0},on:function(e,h){var d=this,f=d.element;aj&&"click"===e?(f.ontouchstart=function(g){d.touchEventFired=Date.now();g.preventDefault();h.call(f,g)},f.onclick=function(g){(-1===i.navigator.userAgent.indexOf("Android")||1100<Date.now()-(d.touchEventFired||0))&&h.call(f,g)}):f["on"+e]=h;return this},setRadialReference:function(e){var d=this.renderer.gradients[this.element.gradient];this.element.radialReference=e;d&&d.radAttr&&d.animate(this.renderer.getRadialAttr(e,d.radAttr));return this},translate:function(d,e){return this.attr({translateX:d,translateY:e})},invert:function(d){this.inverted=d;this.updateTransform();return this},updateTransform:function(){var f=this.translateX||0,n=this.translateY||0,l=this.scaleX,q=this.scaleY,h=this.inverted,e=this.rotation,p=this.matrix,m=this.element;h&&(f+=this.width,n+=this.height);f=["translate("+f+","+n+")"];ae(p)&&f.push("matrix("+p.join(",")+")");h?f.push("rotate(90) scale(-1,1)"):e&&f.push("rotate("+e+" "+T(this.rotationOriginX,m.getAttribute("x"),0)+" "+T(this.rotationOriginY,m.getAttribute("y")||0)+")");(ae(l)||ae(q))&&f.push("scale("+T(l,1)+" "+T(q,1)+")");f.length&&m.setAttribute("transform",f.join(" "))},toFront:function(){var d=this.element;d.parentNode.appendChild(d);return this},align:function(q,h,v){var r,n,f,p,m={};n=this.renderer;f=n.alignedObjects;var w,l;if(q){if(this.alignOptions=q,this.alignByTranslate=h,!v||ab(v)){this.alignTo=r=v||"renderer",ad(f,this),f.push(this),v=null}}else{q=this.alignOptions,h=this.alignByTranslate,r=this.alignTo}v=T(v,n[r],n);r=q.align;n=q.verticalAlign;f=(v.x||0)+(q.x||0);p=(v.y||0)+(q.y||0);"right"===r?w=1:"center"===r&&(w=2);w&&(f+=(v.width-(q.width||0))/w);m[h?"translateX":"x"]=Math.round(f);"bottom"===n?l=1:"middle"===n&&(l=2);l&&(p+=(v.height-(q.height||0))/l);m[h?"translateY":"y"]=Math.round(p);this[this.placed?"animate":"attr"](m);this.placed=!0;this.alignAttr=m;return this},getBBox:function(z,q){var A,C=this.renderer,l,D=this.element,r=this.styles,m,d=this.textStr,B,v=C.cache,h=C.cacheKeys,y;q=T(q,this.rotation);l=q*at;m=r&&r.fontSize;void 0!==d&&(y=d.toString(),-1===y.indexOf("\x3c")&&(y=y.replace(/[0-9]/g,"0")),y+=["",q||0,m,r&&r.width,r&&r.textOverflow].join());y&&!z&&(A=v[y]);if(!A){if(D.namespaceURI===this.SVG_NS||C.forExport){try{(B=this.fakeTS&&function(e){av(D.querySelectorAll(".highcharts-text-outline"),function(g){g.style.display=e})})&&B("none"),A=D.getBBox?au({},D.getBBox()):{width:D.offsetWidth,height:D.offsetHeight},B&&B("")}catch(f){}if(!A||0>A.width){A={width:0,height:0}}}else{A=this.htmlGetBBox()}C.isSVG&&(z=A.width,C=A.height,r&&"11px"===r.fontSize&&17===Math.round(C)&&(A.height=C=14),q&&(A.width=Math.abs(C*Math.sin(l))+Math.abs(z*Math.cos(l)),A.height=Math.abs(C*Math.cos(l))+Math.abs(z*Math.sin(l))));if(y&&0<A.height){for(;250<h.length;){delete v[h.shift()]}v[y]||h.push(y);v[y]=A}}return A},show:function(d){return this.attr({visibility:d?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(d){var e=this;e.animate({opacity:0},{duration:d||150,complete:function(){e.attr({y:-9999})}})},add:function(e){var h=this.renderer,d=this.element,f;e&&(this.parentGroup=e);this.parentInverted=e&&e.inverted;void 0!==this.textStr&&h.buildText(this);this.added=!0;if(!e||e.handleZ||this.zIndex){f=this.zIndexSetter()}f||(e?e.element:h.box).appendChild(d);if(this.onAdd){this.onAdd()}return this},safeRemoveChild:function(d){var e=d.parentNode;e&&e.removeChild(d)},destroy:function(){var d=this,f=d.element||{},e=d.renderer.isSVG&&"SPAN"===f.nodeName&&d.parentGroup,h=f.ownerSVGElement;f.onclick=f.onmouseout=f.onmouseover=f.onmousemove=f.point=null;j(d);d.clipPath&&h&&(av(h.querySelectorAll("[clip-path]"),function(k){-1<k.getAttribute("clip-path").indexOf(d.clipPath.element.id+")")&&k.removeAttribute("clip-path")}),d.clipPath=d.clipPath.destroy());if(d.stops){for(h=0;h<d.stops.length;h++){d.stops[h]=d.stops[h].destroy()}d.stops=null}d.safeRemoveChild(f);for(d.destroyShadows();e&&e.div&&0===e.div.childNodes.length;){f=e.parentGroup,d.safeRemoveChild(e.div),delete e.div,e=f}d.alignTo&&ad(d.renderer.alignedObjects,d);W(d,function(l,k){delete d[k]});return null},shadow:function(v,l,y){var w=[],q,h,r=this.element,n,z,m,f;if(!v){this.destroyShadows()}else{if(!this.shadows){z=T(v.width,3);m=(v.opacity||0.15)/z;f=this.parentInverted?"(-1,-1)":"("+T(v.offsetX,1)+", "+T(v.offsetY,1)+")";for(q=1;q<=z;q++){h=r.cloneNode(0),n=2*z+1-2*q,am(h,{isShadow:"true",stroke:v.color||"#000000","stroke-opacity":m*q,"stroke-width":n,transform:"translate"+f,fill:"none"}),y&&(am(h,"height",Math.max(am(h,"height")-n,0)),h.cutHeight=n),l?l.element.appendChild(h):r.parentNode&&r.parentNode.insertBefore(h,r),w.push(h)}this.shadows=w}}return this},destroyShadows:function(){av(this.shadows||[],function(d){this.safeRemoveChild(d)},this);this.shadows=void 0},xGetter:function(d){"circle"===this.element.nodeName&&("x"===d?d="cx":"y"===d&&(d="cy"));return this._defaultGetter(d)},_defaultGetter:function(d){d=T(this[d],this.element?this.element.getAttribute(d):null,0);/^[\-0-9\.]+$/.test(d)&&(d=parseFloat(d));return d},dSetter:function(d,f,e){d&&d.join&&(d=d.join(" "));/(NaN| {2}|^$)/.test(d)&&(d="M 0 0");this[f]!==d&&(e.setAttribute(f,d),this[f]=d)},dashstyleSetter:function(e){var f,d=this["stroke-width"];"inherit"===d&&(d=1);if(e=e&&e.toLowerCase()){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(f=e.length;f--;){e[f]=ap(e[f])*d}e=e.join(",").replace(/NaN/g,"none");this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(d){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[d])},opacitySetter:function(d,f,e){this[f]=d;e.setAttribute(f,d)},titleSetter:function(d){var e=this.element.getElementsByTagName("title")[0];e||(e=ak.createElementNS(this.SVG_NS,"title"),this.element.appendChild(e));e.firstChild&&e.removeChild(e.firstChild);e.appendChild(ak.createTextNode(String(T(d),"").replace(/<[^>]*>/g,"")))},textSetter:function(d){d!==this.textStr&&(delete this.bBox,this.textStr=d,this.added&&this.renderer.buildText(this))},fillSetter:function(d,f,e){"string"===typeof d?e.setAttribute(f,d):d&&this.colorGradient(d,f,e)},visibilitySetter:function(d,f,e){"inherit"===d?e.removeAttribute(f):this[f]!==d&&e.setAttribute(f,d);this[f]=d},zIndexSetter:function(q,v){var m=this.renderer,g=this.parentGroup,r=(g||m).element||m.box,n,l=this.element,w,h,m=r===m.box;n=this.added;var f;ae(q)&&(l.zIndex=q,q=+q,this[v]===q&&(n=!1),this[v]=q);if(n){(q=this.zIndex)&&g&&(g.handleZ=!0);v=r.childNodes;for(f=v.length-1;0<=f&&!w;f--){if(g=v[f],n=g.zIndex,h=!ae(n),g!==l){if(0>q&&h&&!m&&!f){r.insertBefore(l,v[f]),w=!0}else{if(ap(n)<=q||h&&(!ae(q)||0<=q)){r.insertBefore(l,v[f+1]||null),w=!0}}}}w||(r.insertBefore(l,v[m?3:0]||null),w=!0)}return w},_defaultSetter:function(d,f,e){e.setAttribute(f,d)}});aa.prototype.yGetter=aa.prototype.xGetter;aa.prototype.translateXSetter=aa.prototype.translateYSetter=aa.prototype.rotationSetter=aa.prototype.verticalAlignSetter=aa.prototype.rotationOriginXSetter=aa.prototype.rotationOriginYSetter=aa.prototype.scaleXSetter=aa.prototype.scaleYSetter=aa.prototype.matrixSetter=function(d,e){this[e]=d;this.doTransform=!0};aa.prototype["stroke-widthSetter"]=aa.prototype.strokeSetter=function(d,f,e){this[f]=d;this.stroke&&this["stroke-width"]?(aa.prototype.fillSetter.call(this,this.stroke,"stroke",e),e.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===f&&0===d&&this.hasStroke&&(e.removeAttribute("stroke"),this.hasStroke=!1)};Z=aw.SVGRenderer=function(){this.init.apply(this,arguments)};au(Z.prototype,{Element:aa,SVG_NS:o,init:function(h,n,m,q,l,f){var e;q=this.createElement("svg").attr({version:"1.1","class":"highcharts-root"}).css(this.getStyle(q));e=q.element;h.appendChild(e);-1===h.innerHTML.indexOf("xmlns")&&am(e,"xmlns",this.SVG_NS);this.isSVG=!0;this.box=e;this.boxWrapper=q;this.alignedObjects=[];this.url=(ac||Q)&&ak.getElementsByTagName("base").length?i.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(ak.createTextNode("Created with Highcharts 6.0.1"));this.defs=this.createElement("defs").add();this.allowHTML=f;this.forExport=l;this.gradients={};this.cache={};this.cacheKeys=[];this.imgCount=0;this.setSize(n,m,!1);var p;ac&&h.getBoundingClientRect&&(n=function(){al(h,{left:0,top:0});p=h.getBoundingClientRect();al(h,{left:Math.ceil(p.left)-p.left+"px",top:Math.ceil(p.top)-p.top+"px"})},n(),this.unSubPixelFix=U(i,"resize",n))},getStyle:function(d){return this.style=au({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},d)},setStyle:function(d){this.boxWrapper.css(this.getStyle(d))},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var d=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();ar(this.gradients||{});this.gradients=null;d&&(this.defs=d.destroy());this.unSubPixelFix&&this.unSubPixelFix();return this.alignedObjects=null},createElement:function(d){var e=new this.Element;e.init(this,d);return e},draw:X,getRadialAttr:function(d,e){return{cx:d[0]-d[2]/2+e.cx*d[2],cy:d[1]-d[2]/2+e.cy*d[2],r:e.r*d[2]}},getSpanWidth:function(d,f){var e=d.getBBox(!0).width;!s&&this.forExport&&(e=this.measureSpanWidth(f.firstChild.data,d.styles));return e},applyEllipsis:function(v,l,y,q){var h=v.rotation,r=y,w,n=0,z=y.length,m=function(d){l.removeChild(l.firstChild);d&&l.appendChild(ak.createTextNode(d))},f;v.rotation=0;r=this.getSpanWidth(v,l);if(f=r>q){for(;n<=z;){w=Math.ceil((n+z)/2),r=y.substring(0,w)+"\u2026",m(r),r=this.getSpanWidth(v,l),n===z?n=z+1:r>q?z=w-1:n=w}0===z&&m("")}v.rotation=h;return f},escapes:{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;",'"':"\x26quot"},buildText:function(aH){var M=aH.element,aG=this,aF=aG.forExport,F=T(aH.textStr,"").toString(),O=-1!==F.indexOf("\x3c"),aE=M.childNodes,aB,G,l,aD,B=am(M,"x"),aA=aH.styles,ax=aH.textWidth,az=aA&&aA.lineHeight,n=aA&&aA.textOutline,aC=aA&&"ellipsis"===aA.textOverflow,E=aA&&"nowrap"===aA.whiteSpace,k=aA&&aA.fontSize,ay,H,m=aE.length,aA=ax&&!aH.added&&this.box,g=function(d){var e;e=/(px|em)$/.test(d&&d.style.fontSize)?d.style.fontSize:k||aG.style.fontSize||12;return az?ap(az):aG.fontMetrics(e,d.getAttribute("style")?d:M).h},A=function(d){W(aG.escapes,function(f,e){d=d.replace(new RegExp(f,"g"),e)});return d};ay=[F,aC,E,az,n,k,ax].join();if(ay!==aH.textCache){for(aH.textCache=ay;m--;){M.removeChild(aE[m])}O||n||aC||ax||-1!==F.indexOf(" ")?(aB=/<.*class="([^"]+)".*>/,G=/<.*style="([^"]+)".*>/,l=/<.*href="([^"]+)".*>/,aA&&aA.appendChild(M),F=O?F.replace(/<(b|strong)>/g,'\x3cspan style\x3d"font-weight:bold"\x3e').replace(/<(i|em)>/g,'\x3cspan style\x3d"font-style:italic"\x3e').replace(/<a/g,"\x3cspan").replace(/<\/(b|strong|i|em|a)>/g,"\x3c/span\x3e").split(/<br.*?>/g):[F],F=an(F,function(d){return""!==d}),av(F,function(h,e){var d,f=0;h=h.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||\x3cspan").replace(/<\/span>/g,"\x3c/span\x3e|||");d=h.split("|||");av(d,function(w){if(""!==w||1===d.length){var I={},y=ak.createElementNS(aG.SVG_NS,"tspan"),u,J;aB.test(w)&&(u=w.match(aB)[1],am(y,"class",u));G.test(w)&&(J=w.match(G)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),am(y,"style",J));l.test(w)&&!aF&&(am(y,"onclick",'location.href\x3d"'+w.match(l)[1]+'"'),am(y,"class","highcharts-anchor"),al(y,{cursor:"pointer"}));w=A(w.replace(/<[a-zA-Z\/](.|\n)*?>/g,"")||" ");if(" "!==w){y.appendChild(ak.createTextNode(w));f?I.dx=0:e&&null!==B&&(I.x=B);am(y,I);M.appendChild(y);!f&&H&&(!s&&aF&&al(y,{display:"block"}),am(y,"dy",g(y)));if(ax){I=w.replace(/([^\^])-/g,"$1- ").split(" ");u=1<d.length||e||1<I.length&&!E;var t=[],v,D=g(y),p=aH.rotation;for(aC&&(aD=aG.applyEllipsis(aH,y,w,ax));!aC&&u&&(I.length||t.length);){aH.rotation=0,v=aG.getSpanWidth(aH,y),w=v>ax,void 0===aD&&(aD=w),w&&1!==I.length?(y.removeChild(y.firstChild),t.unshift(I.pop())):(I=t,t=[],I.length&&!E&&(y=ak.createElementNS(o,"tspan"),am(y,{dy:D,x:B}),J&&am(y,"style",J),M.appendChild(y)),v>ax&&(ax=v)),I.length&&y.appendChild(ak.createTextNode(I.join(" ").replace(/- /g,"-")))}aH.rotation=p}f++}}});H=H||M.childNodes.length}),aD&&aH.attr("title",aH.textStr),aA&&aA.removeChild(M),n&&aH.applyTextOutline&&aH.applyTextOutline(n)):M.appendChild(ak.createTextNode(A(F)))}},getContrast:function(d){d=ao(d).rgba;return 510<d[0]+d[1]+d[2]?"#000000":"#FFFFFF"},button:function(E,t,G,r,C,A,y,l,F){var D=this.label(E,t,G,F,null,null,null,null,"button"),z=0;D.attr(ag({padding:8,r:2},C));var m,B,v,h;C=ag({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},C);m=C.style;delete C.style;A=ag(C,{fill:"#e6e6e6"},A);B=A.style;delete A.style;y=ag(C,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},y);v=y.style;delete y.style;l=ag(C,{style:{color:"#cccccc"}},l);h=l.style;delete l.style;U(D.element,N?"mouseover":"mouseenter",function(){3!==z&&D.setState(1)});U(D.element,N?"mouseout":"mouseleave",function(){3!==z&&D.setState(z)});D.setState=function(d){1!==d&&(D.state=z=d);D.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][d||0]);D.attr([C,A,y,l][d||0]).css([m,B,v,h][d||0])};D.attr(C).css(au({cursor:"default"},m));return D.on("click",function(d){3!==z&&r.call(D,d)})},crispLine:function(d,e){d[1]===d[4]&&(d[1]=d[4]=Math.round(d[1])-e%2/2);d[2]===d[5]&&(d[2]=d[5]=Math.round(d[2])+e%2/2);return d},path:function(d){var e={fill:"none"};R(d)?e.d=d:ai(d)&&au(e,d);return this.createElement("path").attr(e)},circle:function(d,f,e){d=ai(d)?d:{x:d,y:f,r:e};f=this.createElement("circle");f.xSetter=f.ySetter=function(h,l,k){k.setAttribute("c"+l,h)};return f.attr(d)},arc:function(e,l,h,m,d,f){ai(e)?(m=e,l=m.y,h=m.r,e=m.x):m={innerR:m,start:d,end:f};e=this.symbol("arc",e,l,h,h,m);e.r=h;return e},rect:function(f,m,l,p,e,h){e=ai(f)?f.r:e;var n=this.createElement("rect");f=ai(f)?f:void 0===f?{}:{x:f,y:m,width:Math.max(l,0),height:Math.max(p,0)};void 0!==h&&(f.strokeWidth=h,f=n.crisp(f));f.fill="none";e&&(f.r=e);n.rSetter=function(d,q,k){am(k,{rx:d,ry:d})};return n.attr(f)},setSize:function(e,h,f){var k=this.alignedObjects,d=k.length;this.width=e;this.height=h;for(this.boxWrapper.animate({width:e,height:h},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:T(f,!0)?void 0:0});d--;){k[d].align()}},g:function(d){var e=this.createElement("g");return d?e.attr({"class":"highcharts-"+d}):e},image:function(f,m,l,e,h){var n={preserveAspectRatio:"none"};1<arguments.length&&au(n,{x:m,y:l,width:e,height:h});n=this.createElement("image").attr(n);n.element.setAttributeNS?n.element.setAttributeNS("http://www.w3.org/1999/xlink","href",f):n.element.setAttribute("hc-svg-href",f);return n},symbol:function(B,n,G,m,z,H){var r=this,C,l=/^url\((.*?)\)$/,F=l.test(B),v=!F&&(this.symbols[B]?B:"circle"),h=v&&this.symbols[v],A=ae(n)&&h&&h.call(this.symbols,Math.round(n),Math.round(G),m,z,H),I,f;h?(C=this.path(A),C.attr("fill","none"),au(C,{symbolName:v,x:n,y:G,width:m,height:z}),H&&au(C,H)):F&&(I=B.match(l)[1],C=this.image(I),C.imgwidth=T(x[I]&&x[I].width,H&&H.width),C.imgheight=T(x[I]&&x[I].height,H&&H.height),f=function(){C.attr({width:C.width,height:C.height})},av(["width","height"],function(d){C[d+"Setter"]=function(k,q){var p={},t=this["img"+q],e="width"===q?"translateX":"translateY";this[q]=k;ae(t)&&(this.element&&this.element.setAttribute(q,t),this.alignByTranslate||(p[e]=((this[q]||0)-t)/2,this.attr(p)))}}),ae(n)&&C.attr({x:n,y:G}),C.isImg=!0,ae(C.imgwidth)&&ae(C.imgheight)?f():(C.attr({width:0,height:0}),ah("img",{onload:function(){var d=aq[r.chartIndex];0===this.width&&(al(this,{position:"absolute",top:"-999em"}),ak.body.appendChild(this));x[I]={width:this.width,height:this.height};C.imgwidth=this.width;C.imgheight=this.height;C.element&&f();this.parentNode&&this.parentNode.removeChild(this);r.imgCount--;if(!r.imgCount&&d&&d.onload){d.onload()}},src:I}),this.imgCount++));return C},symbols:{circle:function(d,f,e,h){return this.arc(d+e/2,f+h/2,e/2,h/2,{start:0,end:2*Math.PI,open:!1})},square:function(d,f,e,h){return["M",d,f,"L",d+e,f,d+e,f+h,d,f+h,"Z"]},triangle:function(d,f,e,h){return["M",d+e/2,f,"L",d+e,f+h,d,f+h,"Z"]},"triangle-down":function(d,f,e,h){return["M",d,f,"L",d+e,f,d+e/2,f+h,"Z"]},diamond:function(d,f,e,h){return["M",d+e/2,f,"L",d+e,f+h/2,d+e/2,f+h,d,f+h/2,"Z"]},arc:function(y,l,A,q,r){var h=r.start,n=r.r||A,B=r.r||q||A,m=r.end-0.001;A=r.innerR;q=T(r.open,0.001>Math.abs(r.end-r.start-2*Math.PI));var v=Math.cos(h),f=Math.sin(h),z=Math.cos(m),m=Math.sin(m);r=0.001>r.end-h-Math.PI?0:1;n=["M",y+n*v,l+B*f,"A",n,B,0,r,1,y+n*z,l+B*m];ae(A)&&n.push(q?"M":"L",y+A*z,l+A*m,"A",A,A,0,r,0,y+A*v,l+A*f);n.push(q?"":"Z");return n},callout:function(q,h,r,n,p){var f=Math.min(p&&p.r||0,r,n),m=f+6,v=p&&p.anchorX;p=p&&p.anchorY;var l;l=["M",q+f,h,"L",q+r-f,h,"C",q+r,h,q+r,h,q+r,h+f,"L",q+r,h+n-f,"C",q+r,h+n,q+r,h+n,q+r-f,h+n,"L",q+f,h+n,"C",q,h+n,q,h+n,q,h+n-f,"L",q,h+f,"C",q,h,q,h,q+f,h];v&&v>r?p>h+m&&p<h+n-m?l.splice(13,3,"L",q+r,p-6,q+r+6,p,q+r,p+6,q+r,h+n-f):l.splice(13,3,"L",q+r,n/2,v,p,q+r,n/2,q+r,h+n-f):v&&0>v?p>h+m&&p<h+n-m?l.splice(33,3,"L",q,p+6,q-6,p,q,p-6,q,h+f):l.splice(33,3,"L",q,n/2,v,p,q,n/2,q,h+f):p&&p>n&&v>q+m&&v<q+r-m?l.splice(23,3,"L",v+6,h+n,v,h+n+6,v-6,h+n,q+f,h+n):p&&0>p&&v>q+m&&v<q+r-m&&l.splice(3,3,"L",v-6,h,v,h-6,v+6,h,r-f,h);return l}},clipRect:function(l,h,n,e){var f=aw.uniqueKey(),m=this.createElement("clipPath").attr({id:f}).add(this.defs);l=this.rect(l,h,n,e,0).add(m);l.id=f;l.clipPath=m;l.count=0;return l},text:function(e,h,f,k){var d={};if(k&&(this.allowHTML||!this.forExport)){return this.html(e,h,f)}d.x=Math.round(h||0);f&&(d.y=Math.round(f));if(e||0===e){d.text=e}e=this.createElement("text").attr(d);k||(e.xSetter=function(m,q,p){var t=p.getElementsByTagName("tspan"),l,n=p.getAttribute(q),r;for(r=0;r<t.length;r++){l=t[r],l.getAttribute(q)===n&&l.setAttribute(q,m)}p.setAttribute(q,m)});return e},fontMetrics:function(d,e){d=d||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize;d=/px/.test(d)?ap(d):/em/.test(d)?parseFloat(d)*(e?this.fontMetrics(null,e.parentNode).f:16):12;e=24>d?d+3:Math.round(1.2*d);return{h:e,b:Math.round(0.8*e),f:d}},rotCorr:function(d,f,e){var h=d;f&&e&&(h=Math.max(h*Math.cos(f*at),4));return{x:-d/3*Math.sin(f*at),y:h}},label:function(aS,aQ,aV,aU,aM,aG,ax,aN,ay){var aE=this,aL=aE.g("button"!==ay&&"label"),aT=aL.text=aE.text("",0,0,ax).attr({zIndex:1}),aC,aH,aI=0,aO=3,aK=0,aA,aR,aJ,aD,F,aP={},az,A,aF=/^url\((.*?)\)$/.test(aU),G=aF,B,aB,u,v;ay&&aL.addClass("highcharts-"+ay);G=aF;B=function(){return(az||0)%2/2};aB=function(){var d=aT.element.style,e={};aH=(void 0===aA||void 0===aR||F)&&ae(aT.textStr)&&aT.getBBox();aL.width=(aA||aH.width||0)+2*aO+aK;aL.height=(aR||aH.height||0)+2*aO;A=aO+aE.fontMetrics(d&&d.fontSize,aT).b;G&&(aC||(aL.box=aC=aE.symbols[aU]||aF?aE.symbol(aU):aE.rect(),aC.addClass(("button"===ay?"":"highcharts-label-box")+(ay?" highcharts-"+ay+"-box":"")),aC.add(aL),d=B(),e.x=d,e.y=(aN?-A:0)+d),e.width=Math.round(aL.width),e.height=Math.round(aL.height),aC.attr(au(e,aP)),aP={})};u=function(){var d=aK+aO,e;e=aN?0:A;ae(aA)&&aH&&("center"===F||"right"===F)&&(d+={center:0.5,right:1}[F]*(aA-aH.width));if(d!==aT.x||e!==aT.y){aT.attr("x",d),void 0!==e&&aT.attr("y",e)}aT.x=d;aT.y=e};v=function(d,e){aC?aC.attr(d,e):aP[d]=e};aL.onAdd=function(){aT.add(aL);aL.attr({text:aS||0===aS?aS:"",x:aQ,y:aV});aC&&ae(aM)&&aL.attr({anchorX:aM,anchorY:aG})};aL.widthSetter=function(d){aA=aw.isNumber(d)?d:null};aL.heightSetter=function(d){aR=d};aL["text-alignSetter"]=function(d){F=d};aL.paddingSetter=function(d){ae(d)&&d!==aO&&(aO=aL.padding=d,u())};aL.paddingLeftSetter=function(d){ae(d)&&d!==aK&&(aK=d,u())};aL.alignSetter=function(d){d={left:0,center:0.5,right:1}[d];d!==aI&&(aI=d,aH&&aL.attr({x:aJ}))};aL.textSetter=function(d){void 0!==d&&aT.textSetter(d);aB();u()};aL["stroke-widthSetter"]=function(d,e){d&&(G=!0);az=this["stroke-width"]=d;v(e,d)};aL.strokeSetter=aL.fillSetter=aL.rSetter=function(d,e){"r"!==e&&("fill"===e&&d&&(G=!0),aL[e]=d);v(e,d)};aL.anchorXSetter=function(d,e){aM=aL.anchorX=d;v(e,Math.round(d)-B()-aJ)};aL.anchorYSetter=function(d,e){aG=aL.anchorY=d;v(e,d-aD)};aL.xSetter=function(d){aL.x=d;aI&&(d-=aI*((aA||aH.width)+2*aO));aJ=Math.round(d);aL.attr("translateX",aJ)};aL.ySetter=function(d){aD=aL.y=Math.round(d);aL.attr("translateY",aD)};var t=aL.css;return au(aL,{css:function(d){if(d){var e={};d=ag(d);av(aL.textProps,function(f){void 0!==d[f]&&(e[f]=d[f],delete d[f])});aT.css(e)}return t.call(aL,d)},getBBox:function(){return{width:aH.width+2*aO,height:aH.height+2*aO,x:aH.x-aO,y:aH.y-aO}},shadow:function(d){d&&(aB(),aC&&aC.shadow(d));return aL},destroy:function(){af(aL.element,"mouseenter");af(aL.element,"mouseleave");aT&&(aT=aT.destroy());aC&&(aC=aC.destroy());aa.prototype.destroy.call(aL);aL=aE=aB=u=v=null}})}});aw.Renderer=Z})(c);(function(w){var j=w.attr,i=w.createElement,y=w.css,z=w.defined,p=w.each,s=w.extend,q=w.isFirefox,o=w.isMS,g=w.isWebKit,x=w.pInt,u=w.SVGRenderer,t=w.win,k=w.wrap;s(w.SVGElement.prototype,{htmlCss:function(d){var e=this.element;if(e=d&&"SPAN"===e.tagName&&d.width){delete d.width,this.textWidth=e,this.updateTransform()}d&&"ellipsis"===d.textOverflow&&(d.whiteSpace="nowrap",d.overflow="hidden");this.styles=s(this.styles,d);y(this.element,d);return this},htmlGetBBox:function(){var d=this.element;return{x:d.offsetLeft,y:d.offsetTop,width:d.offsetWidth,height:d.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var I=this.renderer,G=this.element,E=this.translateX||0,A=this.translateY||0,D=this.x||0,r=this.y||0,C=this.textAlign||"left",H={left:0,center:0.5,right:1}[C],v=this.styles;y(G,{marginLeft:E,marginTop:A});this.shadows&&p(this.shadows,function(d){y(d,{marginLeft:E+1,marginTop:A+1})});this.inverted&&p(G.childNodes,function(d){I.invertChild(d,G)});if("SPAN"===G.tagName){var l=this.rotation,F=x(this.textWidth),B=v&&v.whiteSpace,J=[l,C,G.innerHTML,this.textWidth,this.textAlign].join();J!==this.cTT&&(v=I.fontMetrics(G.style.fontSize).b,z(l)&&this.setSpanRotation(l,H,v),y(G,{width:"",whiteSpace:B||"nowrap"}),G.offsetWidth>F&&/[ \-]/.test(G.textContent||G.innerText)&&y(G,{width:F+"px",display:"block",whiteSpace:B||"normal"}),this.getSpanCorrection(G.offsetWidth,v,H,l,C));y(G,{left:D+(this.xCorr||0)+"px",top:r+(this.yCorr||0)+"px"});g&&(v=G.offsetHeight);this.cTT=J}}else{this.alignOnAdd=!0}},setSpanRotation:function(h,n,m){var f={},l=this.renderer.getTransformKey();f[l]=f.transform="rotate("+h+"deg)";f[l+(q?"Origin":"-origin")]=f.transformOrigin=100*n+"% "+m+"px";y(this.element,f)},getSpanCorrection:function(e,h,f){this.xCorr=-e*f;this.yCorr=-h}});s(u.prototype,{getTransformKey:function(){return o&&!/Edge/.test(t.navigator.userAgent)?"-ms-transform":g?"-webkit-transform":q?"MozTransform":t.opera?"-o-transform":""},html:function(n,B,v){var h=this.createElement("span"),r=h.element,l=h.renderer,f=l.isSVG,A=function(d,e){p(["opacity","visibility"],function(m){k(d,m+"Setter",function(D,C,E,F){D.call(this,C,E,F);e[E]=C})})};h.textSetter=function(d){d!==r.innerHTML&&delete this.bBox;r.innerHTML=this.textStr=d;h.htmlUpdateTransform()};f&&A(h,h.element.style);h.xSetter=h.ySetter=h.alignSetter=h.rotationSetter=function(d,e){"align"===e&&(e="textAlign");h[e]=d;h.htmlUpdateTransform()};h.attr({text:n,x:Math.round(B),y:Math.round(v)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"});r.style.whiteSpace="nowrap";h.css=h.htmlCss;f&&(h.add=function(e){var D,m=l.box.parentNode,C=[];if(this.parentGroup=e){if(D=e.div,!D){for(;e;){C.push(e),e=e.parentGroup}p(C.reverse(),function(d){function E(I,H){d[H]=I;G[l.getTransformKey()]="translate("+d.x+"px,"+d.y+"px)";d.doTransform=!0}var G,F=j(d.element,"class");F&&(F={className:F});D=d.div=d.div||i("div",F,{position:"absolute",left:(d.translateX||0)+"px",top:(d.translateY||0)+"px",display:d.display,opacity:d.opacity,pointerEvents:d.styles&&d.styles.pointerEvents},D||m);G=D.style;s(d,{classSetter:function(H){this.element.setAttribute("class",H);D.className=H},on:function(){C[0].div&&h.on.apply({element:C[0].div},arguments);return d},translateXSetter:E,translateYSetter:E});A(d,G)})}}else{D=m}D.appendChild(r);h.added=!0;h.alignOnAdd&&h.htmlUpdateTransform();return h});return h}})})(c);(function(g){function d(){var l=g.defaultOptions.global,h=i.moment;if(l.timezone){if(h){return function(f){return -h.tz(f,l.timezone).utcOffset()}}g.error(25)}return l.useUTC&&l.getTimezoneOffset}function n(){var h=g.defaultOptions.global,o,l=h.useUTC,q=l?"getUTC":"get",p=l?"setUTC":"set",s="Minutes Hours Day Date Month FullYear".split(" "),f=s.concat(["Milliseconds","Seconds"]);g.Date=o=h.Date||i.Date;o.hcTimezoneOffset=l&&h.timezoneOffset;o.hcGetTimezoneOffset=d();o.hcMakeTime=function(t,r,u,w,v,y){var x;l?(x=o.UTC.apply(0,arguments),x+=k(x)):x=(new o(t,r,m(u,1),m(w,0),m(v,0),m(y,0))).getTime();return x};for(h=0;h<s.length;h++){o["hcGet"+s[h]]=q+s[h]}for(h=0;h<f.length;h++){o["hcSet"+f[h]]=p+f[h]}}var j=g.color,k=g.getTZOffset,e=g.merge,m=g.pick,i=g.win;g.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:g.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:g.isTouchDevice?25:10,backgroundColor:j("#f7f7f7").setOpacity(0.85).get(),borderWidth:1,headerFormat:'\x3cspan style\x3d"font-size: 10px"\x3e{point.key}\x3c/span\x3e\x3cbr/\x3e',pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e {series.name}: \x3cb\x3e{point.y}\x3c/b\x3e\x3cbr/\x3e',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}};g.setOptions=function(h){g.defaultOptions=e(!0,g.defaultOptions,h);n();return g.defaultOptions};g.getOptions=function(){return g.defaultOptions};g.defaultPlotOptions=g.defaultOptions.plotOptions;n()})(c);(function(g){var d=g.correctFloat,n=g.defined,j=g.destroyObjectProperties,k=g.isNumber,e=g.merge,m=g.pick,i=g.deg2rad;g.Tick=function(l,p,o,q){this.axis=l;this.pos=p;this.type=o||"";this.isNewLabel=this.isNew=!0;o||q||this.addLabel()};g.Tick.prototype={addLabel:function(){var x=this.axis,q=x.options,z=x.chart,s=x.categories,r=x.names,l=this.pos,u=q.labels,t=x.tickPositions,y=l===t[0],o=l===t[t.length-1],r=s?m(s[l],r[l],l):l,s=this.label,t=t.info,f;x.isDatetimeAxis&&t&&(f=q.dateTimeLabelFormats[t.higherRanks[l]||t.unitName]);this.isFirst=y;this.isLast=o;q=x.labelFormatter.call({axis:x,chart:z,isFirst:y,isLast:o,dateTimeLabelFormat:f,value:x.isLog?d(x.lin2log(r)):r,pos:l});n(s)?s&&s.attr({text:q}):(this.labelLength=(this.label=s=n(q)&&u.enabled?z.renderer.text(q,0,0,u.useHTML).css(e(u.style)).add(x.labelGroup):null)&&s.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(B){var q=this.axis,F=B.x,u=q.chart.chartWidth,t=q.chart.spacing,o=m(q.labelLeft,Math.min(q.pos,t[3])),t=m(q.labelRight,Math.max(q.pos+q.len,u-t[1])),A=this.label,x=this.rotation,E={left:0,center:0.5,right:1}[q.labelAlign],s=A.getBBox().width,h=q.getSlotWidth(),f=h,D=1,z,r={};if(x){0>x&&F-E*s<o?z=Math.round(F/Math.cos(x*i)-o):0<x&&F+E*s>t&&(z=Math.round((u-F)/Math.cos(x*i)))}else{if(u=F+(1-E)*s,F-E*s<o?f=B.x+f*(1-E)-o:u>t&&(f=t-B.x+f*E,D=-1),f=Math.min(h,f),f<h&&"center"===q.labelAlign&&(B.x+=D*(h-f-E*(h-Math.min(s,f)))),s>f||q.autoRotation&&(A.styles||{}).width){z=f}}z&&(r.width=z,(q.options.labels.style||{}).textOverflow||(r.textOverflow="ellipsis"),A.css(r))},getPosition:function(o,q,p,s){var r=this.axis,t=r.chart,l=s&&t.oldChartHeight||t.chartHeight;return{x:o?r.translate(q+p,null,null,s)+r.transB:r.left+r.offset+(r.opposite?(s&&t.oldChartWidth||t.chartWidth)-r.right-r.left:0),y:o?l-r.bottom+r.offset-(r.opposite?r.height:0):l-r.translate(q+p,null,null,s)-r.transB}},getLabelPosition:function(B,t,r,v,u,o,A,x){var D=this.axis,s=D.transA,h=D.reversed,q=D.staggerLines,C=D.tickRotCorr||{x:0,y:0},z=u.y;n(z)||(z=0===D.side?r.rotation?-8:-r.getBBox().height:2===D.side?C.y+8:Math.cos(r.rotation*i)*(C.y-r.getBBox(!1,0).height/2));B=B+u.x+C.x-(o&&v?o*s*(h?-1:1):0);t=t+z-(o&&!v?o*s*(h?1:-1):0);q&&(r=A/(x||1)%q,D.opposite&&(r=q-r-1),t+=D.labelOffset/q*r);return{x:B,y:Math.round(t)}},getMarkPath:function(l,p,o,r,q,s){return s.crispLine(["M",l,p,"L",l+(q?0:-o),p+(q?o:0)],r)},renderGridLine:function(D,v,u){var z=this.axis,x=z.options,q=this.gridLine,C={},A=this.pos,E=this.type,t=z.tickmarkOffset,o=z.chart.renderer,r=E?E+"Grid":"grid",s=x[r+"LineWidth"],B=x[r+"LineColor"],x=x[r+"LineDashStyle"];q||(C.stroke=B,C["stroke-width"]=s,x&&(C.dashstyle=x),E||(C.zIndex=1),D&&(C.opacity=0),this.gridLine=q=o.path().attr(C).addClass("highcharts-"+(E?E+"-":"")+"grid-line").add(z.gridGroup));if(!D&&q&&(D=z.getPlotLinePath(A+t,q.strokeWidth()*u,D,!0))){q[this.isNew?"attr":"animate"]({d:D,opacity:v})}},renderMark:function(z,t,r){var v=this.axis,u=v.options,o=v.chart.renderer,y=this.type,x=y?y+"Tick":"tick",B=v.tickSize(x),s=this.mark,f=!s,q=z.x;z=z.y;var A=m(u[x+"Width"],!y&&v.isXAxis?1:0),u=u[x+"Color"];B&&(v.opposite&&(B[0]=-B[0]),f&&(this.mark=s=o.path().addClass("highcharts-"+(y?y+"-":"")+"tick").add(v.axisGroup),s.attr({stroke:u,"stroke-width":A})),s[f?"attr":"animate"]({d:this.getMarkPath(q,z,B[0],s.strokeWidth()*r,v.horiz,o),opacity:t}))},renderLabel:function(z,t,r,v){var u=this.axis,o=u.horiz,y=u.options,x=this.label,B=y.labels,s=B.step,f=u.tickmarkOffset,q=!0,A=z.x;z=z.y;x&&k(A)&&(x.xy=z=this.getLabelPosition(A,z,x,o,B,f,v,s),this.isFirst&&!this.isLast&&!m(y.showFirstLabel,1)||this.isLast&&!this.isFirst&&!m(y.showLastLabel,1)?q=!1:!o||u.isRadial||B.step||B.rotation||t||0===r||this.handleOverflow(z),s&&v%s&&(q=!1),q&&k(z.y)?(z.opacity=r,x[this.isNewLabel?"attr":"animate"](z),this.isNewLabel=!1):(x.attr("y",-9999),this.isNewLabel=!0))},render:function(p,q,o){var s=this.axis,r=s.horiz,u=this.getPosition(r,this.pos,s.tickmarkOffset,q),f=u.x,t=u.y,s=r&&f===s.pos+s.len||!r&&t===s.pos?-1:1;o=m(o,1);this.isActive=!0;this.renderGridLine(q,o,s);this.renderMark(u,o,s);this.renderLabel(u,q,o,p);this.isNew=!1},destroy:function(){j(this,this.axis)}}})(c);var a=function(ah){var W=ah.addEvent,U=ah.animObject,L=ah.arrayMax,N=ah.arrayMin,Z=ah.color,ac=ah.correctFloat,ab=ah.defaultOptions,Y=ah.defined,S=ah.deg2rad,M=ah.destroyObjectProperties,ae=ah.each,ad=ah.extend,X=ah.fireEvent,ag=ah.format,af=ah.getMagnitude,x=ah.grep,aa=ah.inArray,V=ah.isArray,R=ah.isNumber,s=ah.isString,o=ah.merge,i=ah.normalizeTickInterval,T=ah.objectEach,g=ah.pick,j=ah.removeEvent,P=ah.splat,Q=ah.syncTimeout,O=ah.Tick,u=function(){this.init.apply(this,arguments)};ah.extend(u.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},minPadding:0.01,maxPadding:0.01,minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:0.05,minPadding:0.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,formatter:function(){return ah.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(f,h){var k=h.isX,m=this;m.chart=f;m.horiz=f.inverted&&!m.isZAxis?!k:k;m.isXAxis=k;m.coll=m.coll||(k?"xAxis":"yAxis");m.opposite=h.opposite;m.side=h.side||(m.horiz?m.opposite?0:2:m.opposite?1:3);m.setOptions(h);var e=this.options,l=e.type;m.labelFormatter=e.labels.formatter||m.defaultLabelFormatter;m.userOptions=h;m.minPixelPadding=0;m.reversed=e.reversed;m.visible=!1!==e.visible;m.zoomEnabled=!1!==e.zoomEnabled;m.hasNames="category"===l||!0===e.categories;m.categories=e.categories||m.hasNames;m.names=m.names||[];m.plotLinesAndBandsGroups={};m.isLog="logarithmic"===l;m.isDatetimeAxis="datetime"===l;m.positiveValuesOnly=m.isLog&&!m.allowNegativeLog;m.isLinked=Y(e.linkedTo);m.ticks={};m.labelEdge=[];m.minorTicks={};m.plotLinesAndBands=[];m.alternateBands={};m.len=0;m.minRange=m.userMinRange=e.minRange||e.maxZoom;m.range=e.range;m.offset=e.offset||0;m.stacks={};m.oldStacks={};m.stacksTouched=0;m.max=null;m.min=null;m.crosshair=g(e.crosshair,P(f.options.tooltip.crosshairs)[k?0:1],!1);h=m.options.events;-1===aa(m,f.axes)&&(k?f.axes.splice(f.xAxis.length,0,m):f.axes.push(m),f[m.coll].push(m));m.series=m.series||[];f.inverted&&!m.isZAxis&&k&&void 0===m.reversed&&(m.reversed=!0);T(h,function(d,n){W(m,n,d)});m.lin2log=e.linearToLogConverter||m.lin2log;m.isLog&&(m.val2lin=m.log2lin,m.lin2val=m.lin2log)},setOptions:function(d){this.options=o(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],o(ab[this.coll],d))},defaultLabelFormatter:function(){var m=this.axis,w=this.value,v=m.categories,r=this.dateTimeLabelFormat,l=ab.lang,q=l.numericSymbols,l=l.numericSymbolMagnitude||1000,y=q&&q.length,h,n=m.options.labels.format,m=m.isLog?Math.abs(w):m.tickInterval;if(n){h=ag(n,this)}else{if(v){h=w}else{if(r){h=ah.dateFormat(r,w)}else{if(y&&1000<=m){for(;y--&&void 0===h;){v=Math.pow(l,y+1),m>=v&&0===10*w%v&&null!==q[y]&&0!==w&&(h=ah.numberFormat(w/v,-1)+q[y])}}}}}void 0===h&&(h=10000<=Math.abs(w)?ah.numberFormat(w,-1):ah.numberFormat(w,-1,void 0,""));return h},getSeriesExtremes:function(){var d=this,e=d.chart;d.hasVisibleSeries=!1;d.dataMin=d.dataMax=d.threshold=null;d.softThreshold=!d.isXAxis;d.buildStacks&&d.buildStacks();ae(d.series,function(h){if(h.visible||!e.options.chart.ignoreHiddenSeries){var l=h.options,f=l.threshold,k;d.hasVisibleSeries=!0;d.positiveValuesOnly&&0>=f&&(f=null);if(d.isXAxis){l=h.xData,l.length&&(h=N(l),R(h)||h instanceof Date||(l=x(l,function(m){return R(m)}),h=N(l)),d.dataMin=Math.min(g(d.dataMin,l[0]),h),d.dataMax=Math.max(g(d.dataMax,l[0]),L(l)))}else{if(h.getExtremes(),k=h.dataMax,h=h.dataMin,Y(h)&&Y(k)&&(d.dataMin=Math.min(g(d.dataMin,h),h),d.dataMax=Math.max(g(d.dataMax,k),k)),Y(f)&&(d.threshold=f),!l.softThreshold||d.positiveValuesOnly){d.softThreshold=!1}}}})},translate:function(y,v,w,r,l,q){var m=this.linkedParent||this,z=1,A=0,h=r?m.oldTransA:m.transA;r=r?m.oldMin:m.min;var n=m.minPixelPadding;l=(m.isOrdinal||m.isBroken||m.isLog&&l)&&m.lin2val;h||(h=m.transA);w&&(z*=-1,A=m.len);m.reversed&&(z*=-1,A-=z*(m.sector||m.len));v?(y=(y*z+A-n)/h+r,l&&(y=m.lin2val(y))):(l&&(y=m.val2lin(y)),y=R(r)?z*(y-r)*h+A+z*n+(R(q)?h*q:0):void 0);return y},toPixels:function(d,e){return this.translate(d,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(d,e){return this.translate(d-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(D,B,C,A,r){var v=this.chart,F=this.left,G=this.top,z,l,y=C&&v.oldChartHeight||v.chartHeight,E=C&&v.oldChartWidth||v.chartWidth,h;z=this.transB;var m=function(d,e,f){if(d<e||d>f){A?d=Math.min(Math.max(e,d),f):h=!0}return d};r=g(r,this.translate(D,null,null,C));D=C=Math.round(r+z);z=l=Math.round(y-r-z);R(r)?this.horiz?(z=G,l=y-this.bottom,D=C=m(D,F,F+this.width)):(D=F,C=E-this.right,z=l=m(z,G,G+this.height)):(h=!0,A=!1);return h&&!A?null:v.renderer.crispLine(["M",D,z,"L",C,l],B||1)},getLinearTickPositions:function(f,m,e){var k,h=ac(Math.floor(m/f)*f);e=ac(Math.ceil(e/f)*f);var l=[];if(this.single){return[m]}for(m=h;m<=e;){l.push(m);m=ac(m+f);if(m===k){break}k=m}return l},getMinorTickInterval:function(){var d=this.options;return !0===d.minorTicks?g(d.minorTickInterval,"auto"):!1===d.minorTicks?null:d.minorTickInterval},getMinorTickPositions:function(){var h=this,v=h.options,d=h.tickPositions,l=h.minorTickInterval,r=[],m=h.pointRangePadding||0,q=h.min-m,m=h.max+m,n=m-q;if(n&&n/l<h.len/3){if(h.isLog){ae(this.paddedTicks,function(f,k,e){k&&r.push.apply(r,h.getLogTickPositions(l,e[k-1],e[k],!0))})}else{if(h.isDatetimeAxis&&"auto"===this.getMinorTickInterval()){r=r.concat(h.getTimeTicks(h.normalizeTimeTickInterval(l),q,m,v.startOfWeek))}else{for(v=q+(d[0]-q)%l;v<=m&&v!==r[0];v+=l){r.push(v)}}}}0!==r.length&&h.trimTicks(r);return r},adjustForMinRange:function(){var A=this.options,y=this.min,z=this.max,m,v,C,h,r,B,d,l;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(Y(A.min)||Y(A.max)?this.minRange=null:(ae(this.series,function(e){B=e.xData;for(h=d=e.xIncrement?1:B.length-1;0<h;h--){if(r=B[h]-B[h-1],void 0===C||r<C){C=r}}}),this.minRange=Math.min(5*C,this.dataMax-this.dataMin)));z-y<this.minRange&&(v=this.dataMax-this.dataMin>=this.minRange,l=this.minRange,m=(l-z+y)/2,m=[y-m,g(A.min,y-m)],v&&(m[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),y=L(m),z=[y+l,g(A.max,y+l)],v&&(z[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),z=N(z),z-y<l&&(m[0]=z-l,m[1]=g(A.min,z-l),y=L(m)));this.min=y;this.max=z},getClosest:function(){var d;this.categories?d=1:ae(this.series,function(f){var h=f.closestPointRange,e=f.visible||!f.chart.options.chart.ignoreHiddenSeries;!f.noSharedTooltip&&Y(h)&&e&&(d=Y(d)?Math.min(d,h):h)});return d},nameToX:function(f){var h=V(this.categories),l=h?this.categories:this.names,e=f.options.x,k;f.series.requireSorting=!1;Y(e)||(e=!1===this.options.uniqueNames?f.series.autoIncrement():aa(f.name,l));-1===e?h||(k=l.length):k=e;void 0!==k&&(this.names[k]=f.name);return k},updateNames:function(){var d=this;0<this.names.length&&(this.names.length=0,this.minRange=this.userMinRange,ae(this.series||[],function(e){e.xIncrement=null;if(!e.points||e.isDirtyData){e.processData(),e.generatePoints()}ae(e.points,function(k,h){var f;k.options&&(f=d.nameToX(k),void 0!==f&&f!==k.x&&(k.x=f,e.xData[h]=f))})}))},setAxisTranslation:function(z){var m=this,v=m.max-m.min,y=m.axisPointRange||0,l,r=0,B=0,d=m.linkedParent,q=!!m.categories,A=m.transA,h=m.isXAxis;if(h||q||y){l=m.getClosest(),d?(r=d.minPointOffset,B=d.pointRangePadding):ae(m.series,function(e){var f=q?1:h?g(e.options.pointRange,l,0):m.axisPointRange||0;e=e.options.pointPlacement;y=Math.max(y,f);m.single||(r=Math.max(r,s(e)?0:f/2),B=Math.max(B,"on"===e?0:f))}),d=m.ordinalSlope&&l?m.ordinalSlope/l:1,m.minPointOffset=r*=d,m.pointRangePadding=B*=d,m.pointRange=Math.min(y,v),h&&(m.closestPointRange=l)}z&&(m.oldTransA=A);m.translationSlope=m.transA=A=m.options.staticScale||m.len/(v+B||1);m.transB=m.horiz?m.left:m.bottom;m.minPixelPadding=A*r},minFromRange:function(){return this.max-this.range},setTickInterval:function(aq){var at=this,ao=at.chart,ar=at.options,G=at.isLog,am=at.log2lin,z=at.isDatetimeAxis,ak=at.isXAxis,f=at.isLinked,F=ar.maxPadding,K=ar.minPadding,ap=ar.tickInterval,an=ar.tickPixelInterval,m=at.categories,n=at.threshold,ai=at.softThreshold,C,d,al,aj;z||m||f||this.getTickAmount();al=g(at.userMin,ar.min);aj=g(at.userMax,ar.max);f?(at.linkedParent=ao[at.coll][ar.linkedTo],ao=at.linkedParent.getExtremes(),at.min=g(ao.min,ao.dataMin),at.max=g(ao.max,ao.dataMax),ar.type!==at.linkedParent.options.type&&ah.error(11,1)):(!ai&&Y(n)&&(at.dataMin>=n?(C=n,K=0):at.dataMax<=n&&(d=n,F=0)),at.min=g(al,C,at.dataMin),at.max=g(aj,d,at.dataMax));G&&(at.positiveValuesOnly&&!aq&&0>=Math.min(at.min,g(at.dataMin,at.min))&&ah.error(10,1),at.min=ac(am(at.min),15),at.max=ac(am(at.max),15));at.range&&Y(at.max)&&(at.userMin=at.min=al=Math.max(at.dataMin,at.minFromRange()),at.userMax=aj=at.max,at.range=null);X(at,"foundExtremes");at.beforePadding&&at.beforePadding();at.adjustForMinRange();!(m||at.axisPointRange||at.usePercentage||f)&&Y(at.min)&&Y(at.max)&&(am=at.max-at.min)&&(!Y(al)&&K&&(at.min-=am*K),!Y(aj)&&F&&(at.max+=am*F));R(ar.softMin)&&(at.min=Math.min(at.min,ar.softMin));R(ar.softMax)&&(at.max=Math.max(at.max,ar.softMax));R(ar.floor)&&(at.min=Math.max(at.min,ar.floor));R(ar.ceiling)&&(at.max=Math.min(at.max,ar.ceiling));ai&&Y(at.dataMin)&&(n=n||0,!Y(al)&&at.min<n&&at.dataMin>=n?at.min=n:!Y(aj)&&at.max>n&&at.dataMax<=n&&(at.max=n));at.tickInterval=at.min===at.max||void 0===at.min||void 0===at.max?1:f&&!ap&&an===at.linkedParent.options.tickPixelInterval?ap=at.linkedParent.tickInterval:g(ap,this.tickAmount?(at.max-at.min)/Math.max(this.tickAmount-1,1):void 0,m?1:(at.max-at.min)*an/Math.max(at.len,an));ak&&!aq&&ae(at.series,function(e){e.processData(at.min!==at.oldMin||at.max!==at.oldMax)});at.setAxisTranslation(!0);at.beforeSetTickPositions&&at.beforeSetTickPositions();at.postProcessTickInterval&&(at.tickInterval=at.postProcessTickInterval(at.tickInterval));at.pointRange&&!ap&&(at.tickInterval=Math.max(at.pointRange,at.tickInterval));aq=g(ar.minTickInterval,at.isDatetimeAxis&&at.closestPointRange);!ap&&at.tickInterval<aq&&(at.tickInterval=aq);z||G||ap||(at.tickInterval=i(at.tickInterval,null,af(at.tickInterval),g(ar.allowDecimals,!(0.5<at.tickInterval&&5>at.tickInterval&&1000<at.max&&9999>at.max)),!!this.tickAmount));this.tickAmount||(at.tickInterval=at.unsquish());this.setTickPositions()},setTickPositions:function(){var h=this.options,f,p=h.tickPositions;f=this.getMinorTickInterval();var l=h.tickPositioner,n=h.startOnTick,m=h.endOnTick;this.tickmarkOffset=this.categories&&"between"===h.tickmarkPlacement&&1===this.tickInterval?0.5:0;this.minorTickInterval="auto"===f&&this.tickInterval?this.tickInterval/5:f;this.single=this.min===this.max&&Y(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==h.allowDecimals);this.tickPositions=f=p&&p.slice();!f&&(f=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,h.units),this.min,this.max,h.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),f.length>this.len&&(f=[f[0],f.pop()]),this.tickPositions=f,l&&(l=l.apply(this,[this.min,this.max])))&&(this.tickPositions=f=l);this.paddedTicks=f.slice(0);this.trimTicks(f,n,m);this.isLinked||(this.single&&2>f.length&&(this.min-=0.5,this.max+=0.5),p||l||this.adjustTickAmount())},trimTicks:function(f,e,n){var l=f[0],h=f[f.length-1],m=this.minPointOffset||0;if(!this.isLinked){if(e&&-Infinity!==l){this.min=l}else{for(;this.min-m>f[0];){f.shift()}}if(n){this.max=h}else{for(;this.max+m<f[f.length-1];){f.pop()}}0===f.length&&Y(l)&&f.push((h+l)/2)}},alignToOthers:function(){var e={},d,f=this.options;!1===this.chart.options.chart.alignTicks||!1===f.alignTicks||this.isLog||ae(this.chart[this.coll],function(h){var k=h.options,k=[h.horiz?k.left:k.top,k.width,k.height,k.pane].join();h.series.length&&(e[k]?d=!0:e[k]=1)});return d},getTickAmount:function(){var e=this.options,d=e.tickAmount,f=e.tickPixelInterval;!Y(e.tickInterval)&&this.len<f&&!this.isRadial&&!this.isLog&&e.startOnTick&&e.endOnTick&&(d=2);!d&&this.alignToOthers()&&(d=Math.ceil(this.len/f)+1);4>d&&(this.finalTickAmt=d,d=5);this.tickAmount=d},adjustTickAmount:function(){var f=this.tickInterval,e=this.tickPositions,m=this.tickAmount,h=this.finalTickAmt,l=e&&e.length;if(l<m){for(;e.length<m;){e.push(ac(e[e.length-1]+f))}this.transA*=(l-1)/(m-1);this.max=e[e.length-1]}else{l>m&&(this.tickInterval*=2,this.setTickPositions())}if(Y(h)){for(f=m=e.length;f--;){(3===h&&1===f%2||2>=h&&0<f&&f<m-1)&&e.splice(f,1)}this.finalTickAmt=void 0}},setScale:function(){var e,d;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();d=this.len!==this.oldAxisLength;ae(this.series,function(f){if(f.isDirtyData||f.isDirty||f.xAxis.isDirty){e=!0}});d||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=d||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(e,d,n,f,l){var m=this,h=m.chart;n=g(n,!0);ae(m.series,function(k){delete k.kdTree});l=ad(l,{min:e,max:d});X(m,"setExtremes",l,function(){m.userMin=e;m.userMax=d;m.eventArgs=l;n&&h.redraw(f)})},zoom:function(f,e){var l=this.dataMin,n=this.dataMax,h=this.options,m=Math.min(l,g(h.min,l)),h=Math.max(n,g(h.max,n));if(f!==this.min||e!==this.max){this.allowZoomOutside||(Y(l)&&(f<m&&(f=m),f>h&&(f=h)),Y(n)&&(e<m&&(e=m),e>h&&(e=h))),this.displayBtn=void 0!==f||void 0!==e,this.setExtremes(f,e,!1,void 0,{trigger:"zoom"})}return !0},setAxisSize:function(){var f=this.chart,r=this.options,h=r.offsets||[0,0,0,0],q=this.horiz,n=this.width=Math.round(ah.relativeLength(g(r.width,f.plotWidth-h[3]+h[1]),f.plotWidth)),l=this.height=Math.round(ah.relativeLength(g(r.height,f.plotHeight-h[0]+h[2]),f.plotHeight)),m=this.top=Math.round(ah.relativeLength(g(r.top,f.plotTop+h[0]),f.plotHeight,f.plotTop)),r=this.left=Math.round(ah.relativeLength(g(r.left,f.plotLeft+h[3]),f.plotWidth,f.plotLeft));this.bottom=f.chartHeight-l-m;this.right=f.chartWidth-n-r;this.len=Math.max(q?n:l,0);this.pos=q?r:m},getExtremes:function(){var e=this.isLog,d=this.lin2log;return{min:e?ac(d(this.min)):this.min,max:e?ac(d(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var d=this.isLog,h=this.lin2log,f=d?h(this.min):this.min,d=d?h(this.max):this.max;null===e?e=f:f>e?e=f:d<e&&(e=d);return this.translate(e,0,1,0,1)},autoLabelAlign:function(d){d=(g(d,0)-90*this.side+720)%360;return 15<d&&165>d?"right":195<d&&345>d?"left":"center"},tickSize:function(e){var d=this.options,h=d[e+"Length"],f=g(d[e+"Width"],"tick"===e&&this.isXAxis?1:0);if(f&&h){return"inside"===d[e+"Position"]&&(h=-h),[h,f]}},labelMetrics:function(){var d=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[d]&&this.ticks[d].label)},unsquish:function(){var C=this.options.labels,B=this.horiz,z=this.tickInterval,m=z,v=this.len/(((this.categories?1:0)+this.max-this.min)/z),E,h=C.rotation,r=this.labelMetrics(),D,l=Number.MAX_VALUE,d,A=function(e){e/=v||1;e=1<e?Math.ceil(e):1;return e*z};B?(d=!C.staggerLines&&!C.step&&(Y(h)?[h]:v<g(C.autoRotationLimit,80)&&C.autoRotation))&&ae(d,function(f){var e;if(f===h||f&&-90<=f&&90>=f){D=A(Math.abs(r.h/Math.sin(S*f))),e=D+Math.abs(f/360),e<l&&(l=e,E=f,m=D)}}):C.step||(m=A(r.h));this.autoRotation=d;this.labelRotation=g(E,h);return m},getSlotWidth:function(){var f=this.chart,e=this.horiz,m=this.options.labels,h=Math.max(this.tickPositions.length-(this.categories?0:1),1),l=f.margin[3];return e&&2>(m.step||0)&&!m.rotation&&(this.staggerLines||1)*this.len/h||!e&&(m.style&&parseInt(m.style.width,10)||l&&l-f.spacing[3]||0.33*f.chartWidth)},renderUnsquish:function(){var H=this.chart,G=H.renderer,F=this.tickPositions,z=this.ticks,C=this.options.labels,J=this.horiz,r=this.getSlotWidth(),B=Math.max(1,Math.round(r-2*(C.padding||5))),I={},v=this.labelMetrics(),l=C.style&&C.style.textOverflow,K,d=0,A,y;s(C.rotation)||(I.rotation=C.rotation||0);ae(F,function(e){(e=z[e])&&e.labelLength>d&&(d=e.labelLength)});this.maxLabelLength=d;if(this.autoRotation){d>B&&d>v.h?I.rotation=this.labelRotation:this.labelRotation=0}else{if(r&&(K={width:B+"px"},!l)){for(K.textOverflow="clip",A=F.length;!J&&A--;){if(y=F[A],B=z[y].label){B.styles&&"ellipsis"===B.styles.textOverflow?B.css({textOverflow:"clip"}):z[y].labelLength>r&&B.css({width:r+"px"}),B.getBBox().height>this.len/F.length-(v.h-v.f)&&(B.specCss={textOverflow:"ellipsis"})}}}}I.rotation&&(K={width:(d>0.5*H.chartHeight?0.33*H.chartHeight:H.chartHeight)+"px"},l||(K.textOverflow="ellipsis"));if(this.labelAlign=C.align||this.autoLabelAlign(this.labelRotation)){I.align=this.labelAlign}ae(F,function(f){var e=(f=z[f])&&f.label;e&&(e.attr(I),K&&e.css(o(K,e.specCss)),delete e.specCss,f.rotation=I.rotation)});this.tickRotCorr=G.rotCorr(v.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||Y(this.min)&&Y(this.max)&&!!this.tickPositions},addTitle:function(f){var e=this.chart.renderer,n=this.horiz,l=this.opposite,h=this.options.title,m;this.axisTitle||((m=h.textAlign)||(m=(n?{low:"left",middle:"center",high:"right"}:{low:l?"right":"left",middle:"center",high:l?"left":"right"})[h.align]),this.axisTitle=e.text(h.text,0,0,h.useHTML).attr({zIndex:7,rotation:h.rotation||0,align:m}).addClass("highcharts-axis-title").css(h.style).add(this.axisGroup),this.axisTitle.isNew=!0);h.style.width||this.isRadial||this.axisTitle.css({width:this.len});this.axisTitle[f?"show":"hide"](!0)},generateTick:function(e){var d=this.ticks;d[e]?d[e].addLabel():d[e]=new O(this,e)},getOffset:function(){var aw=this,av=aw.chart,au=av.renderer,ap=aw.options,at=aw.tickPositions,ai=aw.ticks,am=aw.horiz,ar=aw.side,B=av.inverted&&!aw.isZAxis?[1,0,3,2][ar]:ar,an,q,G=0,aj,aq=0,al=ap.title,ao=ap.labels,z=0,A=av.axisOffset,av=av.clipOffset,ak=[-1,1,1,-1][ar],F=ap.className,d=aw.axisParent,m=this.tickSize("tick");an=aw.hasData();aw.showAxis=q=an||g(ap.showEmpty,!0);aw.staggerLines=aw.horiz&&ao.staggerLines;aw.axisGroup||(aw.gridGroup=au.g("grid").attr({zIndex:ap.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(F||"")).add(d),aw.axisGroup=au.g("axis").attr({zIndex:ap.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(F||"")).add(d),aw.labelGroup=au.g("axis-labels").attr({zIndex:ao.zIndex||7}).addClass("highcharts-"+aw.coll.toLowerCase()+"-labels "+(F||"")).add(d));an||aw.isLinked?(ae(at,function(e,f){aw.generateTick(e,f)}),aw.renderUnsquish(),!1===ao.reserveSpace||0!==ar&&2!==ar&&{1:"left",3:"right"}[ar]!==aw.labelAlign&&"center"!==aw.labelAlign||ae(at,function(e){z=Math.max(ai[e].getLabelSize(),z)}),aw.staggerLines&&(z*=aw.staggerLines,aw.labelOffset=z*(aw.opposite?-1:1))):T(ai,function(f,e){f.destroy();delete ai[e]});al&&al.text&&!1!==al.enabled&&(aw.addTitle(q),q&&!1!==al.reserveSpace&&(aw.titleOffset=G=aw.axisTitle.getBBox()[am?"height":"width"],aj=al.offset,aq=Y(aj)?0:g(al.margin,am?5:10)));aw.renderLine();aw.offset=ak*g(ap.offset,A[ar]);aw.tickRotCorr=aw.tickRotCorr||{x:0,y:0};au=0===ar?-aw.labelMetrics().h:2===ar?aw.tickRotCorr.y:0;aq=Math.abs(z)+aq;z&&(aq=aq-au+ak*(am?g(ao.y,aw.tickRotCorr.y+8*ak):ao.x));aw.axisTitleMargin=g(aj,aq);A[ar]=Math.max(A[ar],aw.axisTitleMargin+G+ak*aw.offset,aq,an&&at.length&&m?m[0]+ak*aw.offset:0);ap=ap.offset?0:2*Math.floor(aw.axisLine.strokeWidth()/2);av[B]=Math.max(av[B],ap)},getLinePath:function(f){var e=this.chart,n=this.opposite,l=this.offset,h=this.horiz,m=this.left+(n?this.width:0)+l,l=e.chartHeight-this.bottom-(n?this.height:0)+l;n&&(f*=-1);return e.renderer.crispLine(["M",h?this.left:m,h?l:this.top,"L",h?e.chartWidth-this.right:m,h?l:e.chartHeight-this.bottom],f)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var C=this.horiz,B=this.left,A=this.top,r=this.len,z=this.options.title,y=C?B:A,E=this.opposite,l=this.offset,v=z.x||0,D=z.y||0,m=this.axisTitle,h=this.chart.renderer.fontMetrics(z.style&&z.style.fontSize,m),m=Math.max(m.getBBox(null,0).height-h.h-1,0),r={low:y+(C?0:r),middle:y+r/2,high:y+(C?r:0)}[z.align],B=(C?A+this.height:B)+(C?1:-1)*(E?-1:1)*this.axisTitleMargin+[-m,m,h.f,-m][this.side];return{x:C?r+v:B+(E?this.width:0)+l+v,y:C?B+D-(E?this.height:0)+l:r+D}},renderMinorTick:function(e){var d=this.chart.hasRendered&&R(this.oldMin),f=this.minorTicks;f[e]||(f[e]=new O(this,e,"minor"));d&&f[e].isNew&&f[e].render(null,!0);f[e].render(null,!1,1)},renderTick:function(e,d){var l=this.isLinked,h=this.ticks,f=this.chart.hasRendered&&R(this.oldMin);if(!l||e>=this.min&&e<=this.max){h[e]||(h[e]=new O(this,e)),f&&h[e].isNew&&h[e].render(d,!0,0.1),h[e].render(d)}},render:function(){var aq=this,ap=aq.chart,al=aq.options,ao=aq.isLog,F=aq.lin2log,J=aq.isLinked,an=aq.tickPositions,D=aq.axisTitle,ai=aq.ticks,A=aq.minorTicks,am=aq.alternateBands,aj=al.stackLabels,ak=al.alternateGridColor,q=aq.tickmarkOffset,B=aq.axisLine,C=aq.showAxis,G=U(ap.renderer.globalAnimation),E,d;aq.labelEdge.length=0;aq.overlap=!1;ae([ai,A,am],function(e){T(e,function(f){f.isActive=!1})});if(aq.hasData()||J){aq.minorTickInterval&&!aq.categories&&ae(aq.getMinorTickPositions(),function(e){aq.renderMinorTick(e)}),an.length&&(ae(an,function(e,f){aq.renderTick(e,f)}),q&&(0===aq.min||aq.single)&&(ai[-1]||(ai[-1]=new O(aq,-1,null,!0)),ai[-1].render(-1))),ak&&ae(an,function(f,e){d=void 0!==an[e+1]?an[e+1]+q:aq.max-q;0===e%2&&f<aq.max&&d<=aq.max+(ap.polar?-q:q)&&(am[f]||(am[f]=new ah.PlotLineOrBand(aq)),E=f+q,am[f].options={from:ao?F(E):E,to:ao?F(d):d,color:ak},am[f].render(),am[f].isActive=!0)}),aq._addedPlotLB||(ae((al.plotLines||[]).concat(al.plotBands||[]),function(e){aq.addPlotBandOrLine(e)}),aq._addedPlotLB=!0)}ae([ai,A,am],function(f){var e,l=[],h=G.duration;T(f,function(m,k){m.isActive||(m.render(k,!1,0),m.isActive=!1,l.push(k))});Q(function(){for(e=l.length;e--;){f[l[e]]&&!f[l[e]].isActive&&(f[l[e]].destroy(),delete f[l[e]])}},f!==am&&ap.hasRendered&&h?h:0)});B&&(B[B.isPlaced?"animate":"attr"]({d:this.getLinePath(B.strokeWidth())}),B.isPlaced=!0,B[C?"show":"hide"](!0));D&&C&&(al=aq.getTitlePosition(),R(al.y)?(D[D.isNew?"attr":"animate"](al),D.isNew=!1):(D.attr("y",-9999),D.isNew=!0));aj&&aj.enabled&&aq.renderStackTotals();aq.isDirty=!1},redraw:function(){this.visible&&(this.render(),ae(this.plotLinesAndBands,function(d){d.render()}));ae(this.series,function(d){d.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(f){var d=this,l=d.stacks,h=d.plotLinesAndBands,k;f||j(d);T(l,function(m,e){M(m);l[e]=null});ae([d.ticks,d.minorTicks,d.alternateBands],function(e){M(e)});if(h){for(f=h.length;f--;){h[f].destroy()}}ae("stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross".split(" "),function(e){d[e]&&(d[e]=d[e].destroy())});for(k in d.plotLinesAndBandsGroups){d.plotLinesAndBandsGroups[k]=d.plotLinesAndBandsGroups[k].destroy()}T(d,function(e,m){-1===aa(m,d.keepProps)&&delete d[m]})},drawCrosshair:function(h,f){var q,m=this.crosshair,l=g(m.snap,!0),p,n=this.cross;h||(h=this.cross&&this.cross.e);this.crosshair&&!1!==(Y(f)||!l)?(l?Y(f)&&(p=this.isXAxis?f.plotX:this.len-f.plotY):p=h&&(this.horiz?h.chartX-this.pos:this.len-h.chartY+this.pos),Y(p)&&(q=this.getPlotLinePath(f&&(this.isXAxis?f.x:g(f.stackY,f.y)),null,null,null,p)||null),Y(q)?(f=this.categories&&!this.isRadial,n||(this.cross=n=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(f?"category ":"thin ")+m.className).attr({zIndex:g(m.zIndex,2)}).add(),n.attr({stroke:m.color||(f?Z("#ccd6eb").setOpacity(0.25).get():"#cccccc"),"stroke-width":g(m.width,1)}).css({"pointer-events":"none"}),m.dashStyle&&n.attr({dashstyle:m.dashStyle})),n.show().attr({d:q}),f&&!m.width&&n.attr({"stroke-width":this.transA}),this.cross.e=h):this.hideCrosshair()):this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}});return ah.Axis=u}(c);(function(t){var j=t.Axis,i=t.Date,w=t.dateFormat,x=t.defaultOptions,n=t.defined,p=t.each,o=t.extend,k=t.getMagnitude,g=t.getTZOffset,u=t.normalizeTickInterval,s=t.pick,q=t.timeUnits;j.prototype.getTimeTicks=function(H,F,B,I){var r=[],f={},h=x.global.useUTC,l,C=new i(F-Math.max(g(F),g(B))),K=i.hcMakeTime,e=H.unitRange,A=H.count,G,L;if(n(F)){C[i.hcSetMilliseconds](e>=q.second?0:A*Math.floor(C.getMilliseconds()/A));if(e>=q.second){C[i.hcSetSeconds](e>=q.minute?0:A*Math.floor(C.getSeconds()/A))}if(e>=q.minute){C[i.hcSetMinutes](e>=q.hour?0:A*Math.floor(C[i.hcGetMinutes]()/A))}if(e>=q.hour){C[i.hcSetHours](e>=q.day?0:A*Math.floor(C[i.hcGetHours]()/A))}if(e>=q.day){C[i.hcSetDate](e>=q.month?1:A*Math.floor(C[i.hcGetDate]()/A))}e>=q.month&&(C[i.hcSetMonth](e>=q.year?0:A*Math.floor(C[i.hcGetMonth]()/A)),l=C[i.hcGetFullYear]());if(e>=q.year){C[i.hcSetFullYear](l-l%A)}if(e===q.week){C[i.hcSetDate](C[i.hcGetDate]()-C[i.hcGetDay]()+s(I,1))}l=C[i.hcGetFullYear]();I=C[i.hcGetMonth]();var d=C[i.hcGetDate](),M=C[i.hcGetHours]();if(i.hcTimezoneOffset||i.hcGetTimezoneOffset){L=(!h||!!i.hcGetTimezoneOffset)&&(B-F>4*q.month||g(F)!==g(B)),C=C.getTime(),G=g(C),C=new i(C+G)}h=C.getTime();for(F=1;h<B;){r.push(h),h=e===q.year?K(l+F*A,0):e===q.month?K(l,I+F*A):!L||e!==q.day&&e!==q.week?L&&e===q.hour?K(l,I,d,M+F*A,0,0,G)-G:h+e*A:K(l,I,d+F*A*(e===q.day?1:7)),F++}r.push(h);e<=q.hour&&10000>r.length&&p(r,function(m){0===m%1800000&&"000000000"===w("%H%M%S%L",m)&&(f[m]="day")})}r.info=o(H,{higherRanks:f,totalRange:e*A});return r};j.prototype.normalizeTimeTickInterval=function(f,e){var r=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];e=r[r.length-1];var m=q[e[0]],h=e[1],l;for(l=0;l<r.length&&!(e=r[l],m=q[e[0]],h=e[1],r[l+1]&&f<=(m*h[h.length-1]+q[r[l+1][0]])/2);l++){}m===q.year&&f<5*m&&(h=[1,2,5]);f=u(f/m,h,"year"===e[0]?Math.max(k(f/m),1):1);return{unitRange:m,count:f,unitName:e[0]}}})(c);(function(f){var d=f.Axis,i=f.getMagnitude,g=f.map,h=f.normalizeTickInterval,e=f.pick;d.prototype.getLogTickPositions=function(B,u,s,j){var v=this.options,y=this.len,x=this.lin2log,q=this.log2lin,A=[];j||(this._minorAutoInterval=null);if(0.5<=B){B=Math.round(B),A=this.getLinearTickPositions(B,u,s)}else{if(0.08<=B){for(var y=Math.floor(u),z,D,t,o,l,v=0.3<B?[1,2,4]:0.15<B?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];y<s+1&&!l;y++){for(D=v.length,z=0;z<D&&!l;z++){t=q(x(y)*v[z]),t>u&&(!j||o<=s)&&void 0!==o&&A.push(o),o>s&&(l=!0),o=t}}}else{u=x(u),s=x(s),B=j?this.getMinorTickInterval():v.tickInterval,B=e("auto"===B?null:B,this._minorAutoInterval,v.tickPixelInterval/(j?5:1)*(s-u)/((j?y/this.tickPositions.length:y)||1)),B=h(B,null,i(B)),A=g(this.getLinearTickPositions(B,u,s),q),j||(this._minorAutoInterval=B/5)}}j||(this.tickInterval=B);return A};d.prototype.log2lin=function(j){return Math.log(j)/Math.LN10};d.prototype.lin2log=function(j){return Math.pow(10,j)}})(c);(function(o,g){var e=o.arrayMax,p=o.arrayMin,q=o.defined,j=o.destroyObjectProperties,n=o.each,k=o.erase,i=o.merge,d=o.pick;o.PlotLineOrBand=function(f,h){this.axis=f;h&&(this.options=h,this.id=h.id)};o.PlotLineOrBand.prototype={render:function(){var P=this,R=P.axis,Q=R.horiz,I=P.options,T=I.label,S=P.label,x=I.to,M=I.from,G=I.value,N=q(M)&&q(x),L=q(G),u=P.svgElem,m=!u,F=[],r=I.color,s=d(I.zIndex,0),B=I.events,F={"class":"highcharts-plot-"+(N?"band ":"line ")+(I.className||"")},C={},A=R.chart.renderer,v=N?"bands":"lines",O=R.log2lin;R.isLog&&(M=O(M),x=O(x),G=O(G));L?(F={stroke:r,"stroke-width":I.width},I.dashStyle&&(F.dashstyle=I.dashStyle)):N&&(r&&(F.fill=r),I.borderWidth&&(F.stroke=I.borderColor,F["stroke-width"]=I.borderWidth));C.zIndex=s;v+="-"+s;(r=R.plotLinesAndBandsGroups[v])||(R.plotLinesAndBandsGroups[v]=r=A.g("plot-"+v).attr(C).add());m&&(P.svgElem=u=A.path().attr(F).add(r));if(L){F=R.getPlotLinePath(G,u.strokeWidth())}else{if(N){F=R.getPlotBandPath(M,x,I)}else{return}}m&&F&&F.length?(u.attr({d:F}),B&&o.objectEach(B,function(h,f){u.on(f,function(l){B[f].apply(P,[l])})})):u&&(F?(u.show(),u.animate({d:F})):(u.hide(),S&&(P.label=S=S.destroy())));T&&q(T.text)&&F&&F.length&&0<R.width&&0<R.height&&!F.flat?(T=i({align:Q&&N&&"center",x:Q?!N&&4:10,verticalAlign:!Q&&N&&"middle",y:Q?N?16:10:N?6:-4,rotation:Q&&!N&&90},T),this.renderLabel(T,F,N,s)):S&&S.hide();return P},renderLabel:function(l,s,r,m){var h=this.label,t=this.axis.chart.renderer;h||(h={align:l.textAlign||l.align,rotation:l.rotation,"class":"highcharts-plot-"+(r?"band":"line")+"-label "+(l.className||"")},h.zIndex=m,this.label=h=t.text(l.text,0,0,l.useHTML).attr(h).add(),h.css(l.style));m=s.xBounds||[s[1],s[4],r?s[6]:s[1]];s=s.yBounds||[s[2],s[5],r?s[7]:s[2]];r=p(m);t=p(s);h.align(l,!1,{x:r,y:t,width:e(m)-r,height:e(s)-t});h.show()},destroy:function(){k(this.axis.plotLinesAndBands,this);delete this.axis;j(this)}};o.extend(g.prototype,{getPlotBandPath:function(l,s){var r=this.getPlotLinePath(s,null,null,!0),m=this.getPlotLinePath(l,null,null,!0),h=this.horiz,t=1;l=l<this.min&&s<this.min||l>this.max&&s>this.max;m&&r?(l&&(m.flat=m.toString()===r.toString(),t=0),m.push(h&&r[4]===m[4]?r[4]+t:r[4],h||r[5]!==m[5]?r[5]:r[5]+t,h&&r[1]===m[1]?r[1]+t:r[1],h||r[2]!==m[2]?r[2]:r[2]+t,"z")):m=null;return m},addPlotBand:function(f){return this.addPlotBandOrLine(f,"plotBands")},addPlotLine:function(f){return this.addPlotBandOrLine(f,"plotLines")},addPlotBandOrLine:function(h,m){var l=(new o.PlotLineOrBand(this,h)).render(),r=this.userOptions;l&&(m&&(r[m]=r[m]||[],r[m].push(h)),this.plotLinesAndBands.push(l));return l},removePlotBandOrLine:function(h){for(var m=this.plotLinesAndBands,l=this.options,r=this.userOptions,f=m.length;f--;){m[f].id===h&&m[f].destroy()}n([l.plotLines||[],r.plotLines||[],l.plotBands||[],r.plotBands||[]],function(s){for(f=s.length;f--;){s[f].id===h&&k(s,s[f])}})},removePlotBand:function(f){this.removePlotBandOrLine(f)},removePlotLine:function(f){this.removePlotBandOrLine(f)}})})(c,a);(function(q){var i=q.dateFormat,g=q.each,t=q.extend,u=q.format,k=q.isNumber,o=q.map,n=q.merge,j=q.pick,e=q.splat,s=q.syncTimeout,p=q.timeUnits;q.Tooltip=function(){this.init.apply(this,arguments)};q.Tooltip.prototype={init:function(f,h){this.chart=f;this.options=h;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.split=h.split&&!f.inverted;this.shared=h.shared||this.split},cleanSplit:function(d){g(this.chart.series,function(h){var f=h&&h.tt;f&&(!f.isActive||d?h.tt=f.destroy():f.isActive=!1)})},getLabel:function(){var f=this.chart.renderer,h=this.options;this.label||(this.split?this.label=f.g("tooltip"):(this.label=f.label("",0,0,h.shape||"callout",null,null,h.useHTML,null,"tooltip").attr({padding:h.padding,r:h.borderRadius}),this.label.attr({fill:h.backgroundColor,"stroke-width":h.borderWidth}).css(h.style).shadow(h.shadow)),this.label.attr({zIndex:8}).add());return this.label},update:function(d){this.destroy();n(!0,this.chart.options.tooltip.userOptions,d);this.init(this.chart,n(!0,this.options,d))},destroy:function(){this.label&&(this.label=this.label.destroy());this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(l,x,h,y){var w=this,m=w.now,v=!1!==w.options.animation&&!w.isHidden&&(1<Math.abs(l-m.x)||1<Math.abs(x-m.y)),r=w.followPointer||1<w.len;t(m,{x:v?(2*m.x+l)/3:l,y:v?(m.y+x)/2:x,anchorX:r?void 0:v?(2*m.anchorX+h)/3:h,anchorY:r?void 0:v?(m.anchorY+y)/2:y});w.getLabel().attr(m);v&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){w&&w.move(l,x,h,y)},32))},hide:function(f){var h=this;clearTimeout(this.hideTimer);f=j(f,this.options.hideDelay,500);this.isHidden||(this.hideTimer=s(function(){h.getLabel()[f?"fadeOut":"hide"]();h.isHidden=!0},f))},getAnchor:function(D,z){var C,A=this.chart,x=A.inverted,v=A.plotTop,f=A.plotLeft,l=0,w=0,B,r;D=e(D);C=D[0].tooltipPos;this.followPointer&&z&&(void 0===z.chartX&&(z=A.pointer.normalize(z)),C=[z.chartX-A.plotLeft,z.chartY-v]);C||(g(D,function(d){B=d.series.yAxis;r=d.series.xAxis;l+=d.plotX+(!x&&r?r.left-f:0);w+=(d.plotLow?(d.plotLow+d.plotHigh)/2:d.plotY)+(!x&&B?B.top-v:0)}),l/=D.length,w/=D.length,C=[x?A.plotWidth-w:l,this.shared&&!x&&1<D.length&&z?z.chartY-v:x?A.plotHeight-l:w]);return o(C,Math.round)},getPosition:function(I,E,H){var F=this.chart,D=this.distance,A={},w=H.h||0,C,x=["y",F.chartHeight,E,H.plotY+F.plotTop,F.plotTop,F.plotTop+F.plotHeight],G=["x",F.chartWidth,I,H.plotX+F.plotLeft,F.plotLeft,F.plotLeft+F.plotWidth],B=!this.followPointer&&j(H.ttBelow,!F.inverted===!!H.negative),v=function(L,K,y,h,r,O){var l=y<h-D,N=h+D+y<K,M=h-D-y;h+=D;if(B&&N){A[L]=h}else{if(!B&&l){A[L]=M}else{if(l){A[L]=Math.min(O-y,0>M-w?M:M-w)}else{if(N){A[L]=Math.max(r,h+w+y>K?h:h+w)}else{return !1}}}}},z=function(h,f,y,l){var r;l<D||l>f-D?r=!1:A[h]=l<y/2?1:l>f-y/2?f-y-2:l-y/2;return r},m=function(f){var d=x;x=G;G=d;C=f},J=function(){!1!==v.apply(0,x)?!1!==z.apply(0,G)||C||(m(!0),J()):C?A.x=A.y=0:(m(!0),J())};(F.inverted||1<this.len)&&m();J();return A},defaultFormatter:function(h){var l=this.points||e(this),f;f=[h.tooltipFooterHeaderFormatter(l[0])];f=f.concat(h.bodyFormatter(l));f.push(h.tooltipFooterHeaderFormatter(l[0],!0));return f},refresh:function(B,w){var A,x=this.options,v,m=B,h,r={},l=[];A=x.formatter||this.defaultFormatter;var r=this.shared,z;x.enabled&&(clearTimeout(this.hideTimer),this.followPointer=e(m)[0].series.tooltipOptions.followPointer,h=this.getAnchor(m,w),w=h[0],v=h[1],!r||m.series&&m.series.noSharedTooltip?r=m.getLabelConfig():(g(m,function(d){d.setState("hover");l.push(d.getLabelConfig())}),r={x:m[0].category,y:m[0].y},r.points=l,m=m[0]),this.len=l.length,r=A.call(r,this),z=m.series,this.distance=j(z.tooltipOptions.distance,16),!1===r?this.hide():(A=this.getLabel(),this.isHidden&&A.attr({opacity:1}).show(),this.split?this.renderSplit(r,B):(x.style.width||A.css({width:this.chart.spacingBox.width}),A.attr({text:r&&r.join?r.join(""):r}),A.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+j(m.colorIndex,z.colorIndex)),A.attr({stroke:x.borderColor||m.color||z.color||"#666666"}),this.updatePosition({plotX:w,plotY:v,negative:m.negative,ttBelow:m.ttBelow,h:h[2]||0})),this.isHidden=!1))},renderSplit:function(z,w){var C=this,A=[],x=this.chart,r=x.renderer,l=!0,m=this.options,v=0,B=this.getLabel();q.isString(z)&&(z=[!1,z]);g(z.slice(0,w.length+1),function(h,G){if(!1!==h){G=w[G-1]||{isHeader:!0,plotX:w[0].plotX};var f=G.series||C,E=f.tt,y=G.series||{},F="highcharts-color-"+j(G.colorIndex,y.colorIndex,"none");E||(f.tt=E=r.label(null,null,null,"callout").addClass("highcharts-tooltip-box "+F).attr({padding:m.padding,r:m.borderRadius,fill:m.backgroundColor,stroke:m.borderColor||G.color||y.color||"#333333","stroke-width":m.borderWidth}).add(B));E.isActive=!0;E.attr({text:h});E.css(m.style).shadow(m.shadow);h=E.getBBox();y=h.width+E.strokeWidth();G.isHeader?(v=h.height,y=Math.max(0,Math.min(G.plotX+x.plotLeft-y/2,x.chartWidth-y))):y=G.plotX+x.plotLeft-j(m.distance,16)-y;0>y&&(l=!1);h=(G.series&&G.series.yAxis&&G.series.yAxis.pos)+(G.plotY||0);h-=x.plotTop;A.push({target:G.isHeader?x.plotHeight+v:h,rank:G.isHeader?1:0,size:f.tt.getBBox().height+1,point:G,x:y,tt:E})}});this.cleanSplit();q.distribute(A,x.plotHeight+v);g(A,function(f){var d=f.point,h=d.series;f.tt.attr({visibility:void 0===f.pos?"hidden":"inherit",x:l||d.isHeader?f.x:d.plotX+x.plotLeft+j(m.distance,16),y:f.pos+x.plotTop,anchorX:d.isHeader?d.plotX+x.plotLeft:d.plotX+h.xAxis.pos,anchorY:d.isHeader?f.pos+x.plotTop-15:d.plotY+h.yAxis.pos})})},updatePosition:function(h){var l=this.chart,f=this.getLabel(),f=(this.options.positioner||this.getPosition).call(this,f.width,f.height,h);this.move(Math.round(f.x),Math.round(f.y||0),h.plotX+l.plotLeft,h.plotY+l.plotTop)},getDateFormat:function(z,v,y,x){var w=i("%m-%d %H:%M:%S.%L",v),m,d,l={millisecond:15,second:12,minute:9,hour:6,day:3},r="millisecond";for(d in p){if(z===p.week&&+i("%w",v)===y&&"00:00:00.000"===w.substr(6)){d="week";break}if(p[d]>z){d=r;break}if(l[d]&&w.substr(l[d])!=="01-01 00:00:00.000".substr(l[d])){break}"week"!==d&&(r=d)}d&&(m=x[d]);return m},getXDateFormat:function(h,l,f){l=l.dateTimeLabelFormats;var m=f&&f.closestPointRange;return(m?this.getDateFormat(m,h.x,f.options.startOfWeek,l):l.day)||l.year},tooltipFooterHeaderFormatter:function(l,w){w=w?"footer":"header";var h=l.series,y=h.tooltipOptions,v=y.xDateFormat,m=h.xAxis,r=m&&"datetime"===m.options.type&&k(l.key),x=y[w+"Format"];r&&!v&&(v=this.getXDateFormat(l,y,m));r&&v&&g(l.point&&l.point.tooltipDateKeys||["key"],function(d){x=x.replace("{point."+d+"}","{point."+d+":"+v+"}")});return u(x,{point:l,series:h})},bodyFormatter:function(d){return o(d,function(h){var f=h.series.tooltipOptions;return(f.pointFormatter||h.point.tooltipFormatter).call(h.point,f[(h.point.formatPrefix||"point")+"Format"])})}}})(c);(function(z){var j=z.addEvent,i=z.attr,E=z.charts,H=z.color,p=z.css,s=z.defined,q=z.each,o=z.extend,g=z.find,D=z.fireEvent,u=z.isObject,t=z.offset,k=z.pick,y=z.removeEvent,x=z.splat,C=z.Tooltip;z.Pointer=function(e,d){this.init(e,d)};z.Pointer.prototype={init:function(e,d){this.options=d;this.chart=e;this.runChartClick=d.chart.events&&!!d.chart.events.click;this.pinchDown=[];this.lastValidTouch={};C&&(e.tooltip=new C(e,d.tooltip),this.followTouchMove=k(d.tooltip.followTouchMove,!0));this.setDOMEvents()},zoomOption:function(f){var e=this.chart,l=e.options.chart,h=l.zoomType||"",e=e.inverted;/touch/.test(f.type)&&(h=k(l.pinchType,h));this.zoomX=f=/x/.test(h);this.zoomY=h=/y/.test(h);this.zoomHor=f&&!e||h&&e;this.zoomVert=h&&!e||f&&e;this.hasZoom=f||h},normalize:function(e,d){var f;f=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e;d||(this.chartPosition=d=t(this.chart.container));return o(e,{chartX:Math.round(f.pageX-d.left),chartY:Math.round(f.pageY-d.top)})},getCoordinates:function(e){var d={xAxis:[],yAxis:[]};q(this.chart.axes,function(f){d[f.isXAxis?"xAxis":"yAxis"].push({axis:f,value:f.toValue(e[f.horiz?"chartX":"chartY"])})});return d},findNearestKDPoint:function(e,d,h){var f;q(e,function(l){var r=!(l.noSharedTooltip&&d)&&0>l.options.findNearestPointBy.indexOf("y");l=l.searchPoint(h,r);if((r=u(l,!0))&&!(r=!u(f,!0))){var r=f.distX-l.distX,m=f.dist-l.dist,n=(l.series.group&&l.series.group.zIndex)-(f.series.group&&f.series.group.zIndex),r=0<(0!==r&&d?r:0!==m?m:0!==n?n:f.series.index>l.series.index?-1:1)}r&&(f=l)});return f},getPointFromEvent:function(e){e=e.target;for(var d;e&&!d;){d=e.point,e=e.parentNode}return d},getChartCoordinatesFromPoint:function(f,e){var l=f.series,h=l.xAxis,l=l.yAxis;if(h&&l){return e?{chartX:h.len+h.pos-f.clientX,chartY:l.len+l.pos-f.plotY}:{chartX:f.clientX+h.pos,chartY:f.plotY+l.pos}}},getHoverData:function(B,A,v,r,F,l,d){var n,h=[],G=d&&d.isBoosting;r=!(!r||!B);d=A&&!A.stickyTracking?[A]:z.grep(v,function(e){return e.visible&&!(!F&&e.directTouch)&&k(e.options.enableMouseTracking,!0)&&e.stickyTracking});A=(n=r?B:this.findNearestKDPoint(d,F,l))&&n.series;n&&(F&&!A.noSharedTooltip?(d=z.grep(v,function(e){return e.visible&&!(!F&&e.directTouch)&&k(e.options.enableMouseTracking,!0)&&!e.noSharedTooltip}),q(d,function(f){var e=g(f.points,function(m){return m.x===n.x&&!m.isNull});u(e)&&(G&&(e=f.getPoint(e)),h.push(e))})):h.push(n));return{hoverPoint:n,hoverSeries:A,hoverPoints:h}},runPointActions:function(h,B){var A=this.chart,m=A.tooltip&&A.tooltip.options.enabled?A.tooltip:void 0,v=m?m.shared:!1,n=B||A.hoverPoint,r=n&&n.series||A.hoverSeries,r=this.getHoverData(n,r,A.series,!!B||r&&r.directTouch&&this.isDirectTouch,v,h,{isBoosting:A.isBoosting}),l,n=r.hoverPoint;l=r.hoverPoints;B=(r=r.hoverSeries)&&r.tooltipOptions.followPointer;v=v&&r&&!r.noSharedTooltip;if(n&&(n!==A.hoverPoint||m&&m.isHidden)){q(A.hoverPoints||[],function(d){-1===z.inArray(d,l)&&d.setState()});q(l||[],function(d){d.setState("hover")});if(A.hoverSeries!==r){r.onMouseOver()}A.hoverPoint&&A.hoverPoint.firePointEvent("mouseOut");if(!n.series){return}n.firePointEvent("mouseOver");A.hoverPoints=l;A.hoverPoint=n;m&&m.refresh(v?l:n,h)}else{B&&m&&!m.isHidden&&(n=m.getAnchor([{}],h),m.updatePosition({plotX:n[0],plotY:n[1]}))}this.unDocMouseMove||(this.unDocMouseMove=j(A.container.ownerDocument,"mousemove",function(d){var e=E[z.hoverChartIndex];if(e){e.pointer.onDocumentMouseMove(d)}}));q(A.axes,function(w){var f=k(w.crosshair.snap,!0),e=f?z.find(l,function(d){return d.series[w.coll]===w}):void 0;e||!f?w.drawCrosshair(h,e):w.hideCrosshair()})},reset:function(m,h){var B=this.chart,n=B.hoverSeries,A=B.hoverPoint,r=B.hoverPoints,v=B.tooltip,l=v&&v.shared?r:A;m&&l&&q(x(l),function(d){d.series.isCartesian&&void 0===d.plotX&&(m=!1)});if(m){v&&l&&(v.refresh(l),A&&(A.setState(A.state,!0),q(B.axes,function(d){d.crosshair&&d.drawCrosshair(null,A)})))}else{if(A){A.onMouseOut()}r&&q(r,function(d){d.setState()});if(n){n.onMouseOut()}v&&v.hide(h);this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove());q(B.axes,function(d){d.hideCrosshair()});this.hoverX=B.hoverPoints=B.hoverPoint=null}},scaleGroups:function(f,e){var l=this.chart,h;q(l.series,function(d){h=f||d.getPlotBox();d.xAxis&&d.xAxis.zoomEnabled&&d.group&&(d.group.attr(h),d.markerGroup&&(d.markerGroup.attr(h),d.markerGroup.clip(e?l.clipRect:null)),d.dataLabelsGroup&&d.dataLabelsGroup.attr(h))});l.clipRect.attr(e||l.clipBox)},dragStart:function(e){var d=this.chart;d.mouseIsDown=e.type;d.cancelClick=!1;d.mouseDownX=this.mouseDownX=e.chartX;d.mouseDownY=this.mouseDownY=e.chartY},drag:function(N){var M=this.chart,L=M.options.chart,K=N.chartX,B=N.chartY,J=this.zoomHor,I=this.zoomVert,O=M.plotLeft,r=M.plotTop,Q=M.plotWidth,F=M.plotHeight,R,v=this.selectionMarker,G=this.mouseDownX,P=this.mouseDownY,A=L.panKey&&N[L.panKey+"Key"];v&&v.touch||(K<O?K=O:K>O+Q&&(K=O+Q),B<r?B=r:B>r+F&&(B=r+F),this.hasDragged=Math.sqrt(Math.pow(G-K,2)+Math.pow(P-B,2)),10<this.hasDragged&&(R=M.isInsidePlot(G-O,P-r),M.hasCartesianSeries&&(this.zoomX||this.zoomY)&&R&&!A&&!v&&(this.selectionMarker=v=M.renderer.rect(O,r,J?1:Q,I?1:F,0).attr({fill:L.selectionMarkerFill||H("#335cad").setOpacity(0.25).get(),"class":"highcharts-selection-marker",zIndex:7}).add()),v&&J&&(K-=G,v.attr({width:Math.abs(K),x:(0<K?0:K)+G})),v&&I&&(K=B-P,v.attr({height:Math.abs(K),y:(0<K?0:K)+P})),R&&!v&&L.panning&&M.pan(N,L.panning)))},drop:function(G){var F=this,B=this.chart,A=this.hasPinched;if(this.selectionMarker){var m={originalEvent:G,xAxis:[],yAxis:[]},v=this.selectionMarker,I=v.attr?v.attr("x"):v.x,l=v.attr?v.attr("y"):v.y,h=v.attr?v.attr("width"):v.width,J=v.attr?v.attr("height"):v.height,f;if(this.hasDragged||A){q(B.axes,function(w){if(w.zoomEnabled&&s(w.min)&&(A||F[{xAxis:"zoomX",yAxis:"zoomY"}[w.coll]])){var r=w.horiz,d="touchend"===G.type?w.minPixelPadding:0,n=w.toValue((r?I:l)+d),r=w.toValue((r?I+h:l+J)-d);m[w.coll].push({axis:w,min:Math.min(n,r),max:Math.max(n,r)});f=!0}}),f&&D(B,"selection",m,function(d){B.zoom(o(d,A?{animation:!1}:null))})}this.selectionMarker=this.selectionMarker.destroy();A&&this.scaleGroups()}B&&(p(B.container,{cursor:B._cursor}),B.cancelClick=10<this.hasDragged,B.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(d){d=this.normalize(d);this.zoomOption(d);d.preventDefault&&d.preventDefault();this.dragStart(d)},onDocumentMouseUp:function(d){E[z.hoverChartIndex]&&E[z.hoverChartIndex].pointer.drop(d)},onDocumentMouseMove:function(e){var d=this.chart,f=this.chartPosition;e=this.normalize(e,f);!f||this.inClass(e.target,"highcharts-tracker")||d.isInsidePlot(e.chartX-d.plotLeft,e.chartY-d.plotTop)||this.reset()},onContainerMouseLeave:function(d){var e=E[z.hoverChartIndex];e&&(d.relatedTarget||d.toElement)&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(d){var e=this.chart;s(z.hoverChartIndex)&&E[z.hoverChartIndex]&&E[z.hoverChartIndex].mouseIsDown||(z.hoverChartIndex=e.index);d=this.normalize(d);d.returnValue=!1;"mousedown"===e.mouseIsDown&&this.drag(d);!this.inClass(d.target,"highcharts-tracker")&&!e.isInsidePlot(d.chartX-e.plotLeft,d.chartY-e.plotTop)||e.openMenu||this.runPointActions(d)},inClass:function(e,d){for(var f;e;){if(f=i(e,"class")){if(-1!==f.indexOf(d)){return !0}if(-1!==f.indexOf("highcharts-container")){return !1}}e=e.parentNode}},onTrackerMouseOut:function(e){var d=this.chart.hoverSeries;e=e.relatedTarget||e.toElement;this.isDirectTouch=!1;if(!(!d||!e||d.stickyTracking||this.inClass(e,"highcharts-tooltip")||this.inClass(e,"highcharts-series-"+d.index)&&this.inClass(e,"highcharts-tracker"))){d.onMouseOut()}},onContainerClick:function(f){var e=this.chart,m=e.hoverPoint,l=e.plotLeft,h=e.plotTop;f=this.normalize(f);e.cancelClick||(m&&this.inClass(f.target,"highcharts-tracker")?(D(m.series,"click",o(f,{point:m})),e.hoverPoint&&m.firePointEvent("click",f)):(o(f,this.getCoordinates(f)),e.isInsidePlot(f.chartX-l,f.chartY-h)&&D(e,"click",f)))},setDOMEvents:function(){var e=this,h=e.chart.container,f=h.ownerDocument;h.onmousedown=function(d){e.onContainerMouseDown(d)};h.onmousemove=function(d){e.onContainerMouseMove(d)};h.onclick=function(d){e.onContainerClick(d)};j(h,"mouseleave",e.onContainerMouseLeave);1===z.chartCount&&j(f,"mouseup",e.onDocumentMouseUp);z.hasTouch&&(h.ontouchstart=function(d){e.onContainerTouchStart(d)},h.ontouchmove=function(d){e.onContainerTouchMove(d)},1===z.chartCount&&j(f,"touchend",e.onDocumentTouchEnd))},destroy:function(){var f=this,e=this.chart.container.ownerDocument;f.unDocMouseMove&&f.unDocMouseMove();y(f.chart.container,"mouseleave",f.onContainerMouseLeave);z.chartCount||(y(e,"mouseup",f.onDocumentMouseUp),z.hasTouch&&y(e,"touchend",f.onDocumentTouchEnd));clearInterval(f.tooltipTimeout);z.objectEach(f,function(h,d){f[d]=null})}}})(c);(function(g){var d=g.charts,k=g.each,h=g.extend,i=g.map,e=g.noop,j=g.pick;h(g.Pointer.prototype,{pinchTranslate:function(n,p,m,o,r,q){this.zoomHor&&this.pinchTranslateDirection(!0,n,p,m,o,r,q);this.zoomVert&&this.pinchTranslateDirection(!1,n,p,m,o,r,q)},pinchTranslateDirection:function(Z,U,Q,C,W,V,O,Y){var X=this.chart,B=Z?"x":"y",R=Z?"X":"Y",N="chart"+R,S=Z?"width":"height",P=X["plot"+(Z?"Left":"Top")],x,L,M=Y||1,o=X.inverted,s=X.bounds[Z?"h":"v"],I=1===U.length,K=U[0][N],G=Q[0][N],A=!I&&U[1][N],T=!I&&Q[1][N],F;Q=function(){!I&&20<Math.abs(K-A)&&(M=Y||Math.abs(G-T)/Math.abs(K-A));L=(P-G)/M+K;x=X["plot"+(Z?"Width":"Height")]/M};Q();U=L;U<s.min?(U=s.min,F=!0):U+x>s.max&&(U=s.max-x,F=!0);F?(G-=0.8*(G-O[B][0]),I||(T-=0.8*(T-O[B][1])),Q()):O[B]=[G,T];o||(V[B]=L-P,V[S]=x);V=o?1/M:M;W[S]=x;W[B]=U;C[o?Z?"scaleY":"scaleX":"scale"+R]=M;C["translate"+R]=V*P+(G-V*K)},pinch:function(y){var q=this,f=q.chart,A=q.pinchDown,t=y.touches,s=t.length,m=q.lastValidTouch,x=q.hasZoom,u=q.selectionMarker,z={},o=1===s&&(q.inClass(y.target,"highcharts-tracker")&&f.runTrackerClick||q.runChartClick),l={};1<s&&(q.initiated=!0);x&&q.initiated&&!o&&y.preventDefault();i(t,function(n){return q.normalize(n)});"touchstart"===y.type?(k(t,function(p,n){A[n]={chartX:p.chartX,chartY:p.chartY}}),m.x=[A[0].chartX,A[1]&&A[1].chartX],m.y=[A[0].chartY,A[1]&&A[1].chartY],k(f.axes,function(p){if(p.zoomEnabled){var n=f.bounds[p.horiz?"h":"v"],B=p.minPixelPadding,w=p.toPixels(j(p.options.min,p.dataMin)),v=p.toPixels(j(p.options.max,p.dataMax)),r=Math.max(w,v);n.min=Math.min(p.pos,Math.min(w,v)-B);n.max=Math.max(p.pos+p.len,r+B)}}),q.res=!0):q.followTouchMove&&1===s?this.runPointActions(q.normalize(y)):A.length&&(u||(q.selectionMarker=u=h({destroy:e,touch:!0},f.plotBox)),q.pinchTranslate(A,t,z,u,l,m),q.hasPinched=x,q.scaleGroups(z,l),q.res&&(q.res=!1,this.reset(!1,0)))},touch:function(p,f){var n=this.chart,o,q;if(n.index!==g.hoverChartIndex){this.onContainerMouseLeave({relatedTarget:!0})}g.hoverChartIndex=n.index;1===p.touches.length?(p=this.normalize(p),(q=n.isInsidePlot(p.chartX-n.plotLeft,p.chartY-n.plotTop))&&!n.openMenu?(f&&this.runPointActions(p),"touchmove"===p.type&&(f=this.pinchDown,o=f[0]?4<=Math.sqrt(Math.pow(f[0].chartX-p.chartX,2)+Math.pow(f[0].chartY-p.chartY,2)):!1),j(o,!0)&&this.pinch(p)):f&&this.reset()):2===p.touches.length&&this.pinch(p)},onContainerTouchStart:function(f){this.zoomOption(f);this.touch(f,!0)},onContainerTouchMove:function(f){this.touch(f)},onDocumentTouchEnd:function(l){d[g.hoverChartIndex]&&d[g.hoverChartIndex].pointer.drop(l)}})})(c);(function(x){var j=x.addEvent,i=x.charts,z=x.css,C=x.doc,p=x.extend,s=x.noop,q=x.Pointer,o=x.removeEvent,g=x.win,y=x.wrap;if(!x.hasTouch&&(g.PointerEvent||g.MSPointerEvent)){var u={},t=!!g.PointerEvent,k=function(){var d=[];d.item=function(e){return this[e]};x.objectEach(u,function(e){d.push({pageX:e.pageX,pageY:e.pageY,target:e.target})});return d},w=function(f,m,l,h){"touch"!==f.pointerType&&f.pointerType!==f.MSPOINTER_TYPE_TOUCH||!i[x.hoverChartIndex]||(h(f),h=i[x.hoverChartIndex].pointer,h[m]({type:l,target:f.currentTarget,preventDefault:s,touches:k()}))};p(q.prototype,{onContainerPointerDown:function(d){w(d,"onContainerTouchStart","touchstart",function(e){u[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(d){w(d,"onContainerTouchMove","touchmove",function(e){u[e.pointerId]={pageX:e.pageX,pageY:e.pageY};u[e.pointerId].target||(u[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(d){w(d,"onDocumentTouchEnd","touchend",function(e){delete u[e.pointerId]})},batchMSEvents:function(d){d(this.chart.container,t?"pointerdown":"MSPointerDown",this.onContainerPointerDown);d(this.chart.container,t?"pointermove":"MSPointerMove",this.onContainerPointerMove);d(C,t?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});y(q.prototype,"init",function(f,e,h){f.call(this,e,h);this.hasZoom&&z(e.container,{"-ms-touch-action":"none","touch-action":"none"})});y(q.prototype,"setDOMEvents",function(d){d.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(j)});y(q.prototype,"destroy",function(d){this.batchMSEvents(o);d.call(this)})}})(c);(function(w){var j=w.addEvent,i=w.css,y=w.discardElement,z=w.defined,p=w.each,s=w.isFirefox,q=w.marginNames,o=w.merge,g=w.pick,x=w.setAnimation,u=w.stableSort,t=w.win,k=w.wrap;w.Legend=function(d,e){this.init(d,e)};w.Legend.prototype={init:function(d,e){this.chart=d;this.setOptions(e);e.enabled&&(this.render(),j(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(e){var d=g(e.padding,8);this.options=e;this.itemStyle=e.itemStyle;this.itemHiddenStyle=o(this.itemStyle,e.itemHiddenStyle);this.itemMarginTop=e.itemMarginTop||0;this.padding=d;this.initialItemY=d-5;this.itemHeight=this.maxItemWidth=0;this.symbolWidth=g(e.symbolWidth,16);this.pages=[]},update:function(e,f){var d=this.chart;this.setOptions(o(!0,this.options,e));this.destroy();d.isDirtyLegend=d.isDirtyBox=!0;g(f,!0)&&d.redraw()},colorizeItem:function(G,E){G.legendGroup[E?"removeClass":"addClass"]("highcharts-legend-item-hidden");var F=this.options,D=G.legendItem,C=G.legendLine,B=G.legendSymbol,r=this.itemHiddenStyle.color,F=E?F.itemStyle.color:r,A=E?G.color||r:r,v=G.options&&G.options.marker,l={fill:A};D&&D.css({fill:F,color:F});C&&C.attr({stroke:A});B&&(v&&B.isMarker&&(l=G.pointAttribs(),E||(l.stroke=l.fill=r)),B.attr(l))},positionItem:function(l){var h=this.options,v=h.symbolPadding,h=!h.rtl,r=l._legendItemPos,m=r[0],r=r[1],A=l.checkbox;(l=l.legendGroup)&&l.element&&l.translate(h?m:this.legendWidth-m-2*v-4,r);A&&(A.x=m,A.y=r)},destroyItem:function(e){var d=e.checkbox;p(["legendItem","legendLine","legendSymbol","legendGroup"],function(f){e[f]&&(e[f]=e[f].destroy())});d&&y(e.checkbox)},destroy:function(){function d(e){this[e]&&(this[e]=this[e].destroy())}p(this.getAllItems(),function(e){p(["legendItem","legendGroup"],d,e)});p("clipRect up down pager nav box title group".split(" "),d,this);this.display=null},positionCheckboxes:function(l){var h=this.group&&this.group.alignAttr,r,n=this.clipHeight||this.legendHeight,m=this.titleHeight;h&&(r=h.translateY,p(this.allItems,function(f){var d=f.checkbox,e;d&&(e=r+m+d.y+(l||0)+3,i(d,{left:h.translateX+f.checkboxOffset+d.x-20+"px",top:e+"px",display:e>r-6&&e<r+n-6?"":"none"}))}))},renderTitle:function(){var f=this.options,m=this.padding,l=f.title,h=0;l.text&&(this.title||(this.title=this.chart.renderer.label(l.text,m-3,m-4,null,null,null,f.useHTML,null,"legend-title").attr({zIndex:1}).css(l.style).add(this.group)),f=this.title.getBBox(),h=f.height,this.offsetWidth=f.width,this.contentGroup.attr({translateY:h}));this.titleHeight=h},setText:function(d){var e=this.options;d.legendItem.attr({text:e.labelFormat?w.format(e.labelFormat,d):e.labelFormatter.call(d)})},renderItem:function(ab){var aa=this.chart,Z=aa.renderer,Y=this.options,X="horizontal"===Y.layout,T=this.symbolWidth,V=Y.symbolPadding,U=this.itemStyle,I=this.itemHiddenStyle,S=this.padding,C=X?g(Y.itemDistance,20):0,F=!Y.rtl,Q=Y.width,R=Y.itemMarginBottom||0,N=this.itemMarginTop,G=ab.legendItem,W=!ab.series,K=!W&&ab.series.drawLegendSymbol?ab.series:ab,m=K.options,A=this.createCheckboxForItem&&m&&m.showCheckbox,m=T+V+C+(A?20:0),r=Y.useHTML,B=ab.options.className;G||(ab.legendGroup=Z.g("legend-item").addClass("highcharts-"+K.type+"-series highcharts-color-"+ab.colorIndex+(B?" "+B:"")+(W?" highcharts-series-"+ab.index:"")).attr({zIndex:1}).add(this.scrollGroup),ab.legendItem=G=Z.text("",F?T+V:-V,this.baseline||0,r).css(o(ab.visible?U:I)).attr({align:F?"left":"right",zIndex:2}).add(ab.legendGroup),this.baseline||(T=U.fontSize,this.fontMetrics=Z.fontMetrics(T,G),this.baseline=this.fontMetrics.f+3+N,G.attr("y",this.baseline)),this.symbolHeight=Y.symbolHeight||this.fontMetrics.f,K.drawLegendSymbol(this,ab),this.setItemEvents&&this.setItemEvents(ab,G,r),A&&this.createCheckboxForItem(ab));this.colorizeItem(ab,ab.visible);U.width||G.css({width:(Y.itemWidth||Y.width||aa.spacingBox.width)-m});this.setText(ab);Z=G.getBBox();U=ab.checkboxOffset=Y.itemWidth||ab.legendItemWidth||Z.width+m;this.itemHeight=Z=Math.round(ab.legendItemHeight||Z.height||this.symbolHeight);X&&this.itemX-S+U>(Q||aa.spacingBox.width-2*S-Y.x)&&(this.itemX=S,this.itemY+=N+this.lastLineHeight+R,this.lastLineHeight=0);this.maxItemWidth=Math.max(this.maxItemWidth,U);this.lastItemY=N+this.itemY+R;this.lastLineHeight=Math.max(Z,this.lastLineHeight);ab._legendItemPos=[this.itemX,this.itemY];X?this.itemX+=U:(this.itemY+=N+Z+R,this.lastLineHeight=Z);this.offsetWidth=Q||Math.max((X?this.itemX-S-(ab.checkbox?0:C):U)+S,this.offsetWidth)},getAllItems:function(){var d=[];p(this.chart.series,function(e){var f=e&&e.options;e&&g(f.showInLegend,z(f.linkedTo)?!1:void 0,!0)&&(d=d.concat(e.legendItems||("point"===f.legendType?e.data:e)))});return d},adjustMargins:function(h,n){var f=this.chart,m=this.options,l=m.align.charAt(0)+m.verticalAlign.charAt(0)+m.layout.charAt(0);m.floating||p([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(d,e){d.test(l)&&!z(h[e])&&(f[q[e]]=Math.max(f[q[e]],f.legend[(e+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][e]*m[e%2?"x":"y"]+g(m.margin,12)+n[e]))})},render:function(){var G=this,E=G.chart,C=E.renderer,v=G.group,B,m,A,F,d=G.box,l=G.options,D=G.padding;G.itemX=D;G.itemY=G.initialItemY;G.offsetWidth=0;G.lastItemY=0;v||(G.group=v=C.g("legend").attr({zIndex:7}).add(),G.contentGroup=C.g().attr({zIndex:1}).add(v),G.scrollGroup=C.g().add(G.contentGroup));G.renderTitle();B=G.getAllItems();u(B,function(f,e){return(f.options&&f.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)});l.reversed&&B.reverse();G.allItems=B;G.display=m=!!B.length;G.lastLineHeight=0;p(B,function(e){G.renderItem(e)});A=(l.width||G.offsetWidth)+D;F=G.lastItemY+G.lastLineHeight+G.titleHeight;F=G.handleOverflow(F);F+=D;d||(G.box=d=C.rect().addClass("highcharts-legend-box").attr({r:l.borderRadius}).add(v),d.isNew=!0);d.attr({stroke:l.borderColor,"stroke-width":l.borderWidth||0,fill:l.backgroundColor||"none"}).shadow(l.shadow);0<A&&0<F&&(d[d.isNew?"attr":"animate"](d.crisp({x:0,y:0,width:A,height:F},d.strokeWidth())),d.isNew=!1);d[m?"show":"hide"]();G.legendWidth=A;G.legendHeight=F;p(B,function(e){G.positionItem(e)});m&&v.align(o(l,{width:A,height:F}),!0,"spacingBox");E.isResizing||this.positionCheckboxes()},handleOverflow:function(O){var M=this,K=this.chart,I=K.renderer,G=this.options,A=G.y,C=this.padding,K=K.spacingBox.height+("top"===G.verticalAlign?-A:A)-C,A=G.maxHeight,B,Q=this.clipRect,r=G.navigation,L=g(r.animation,!0),N=r.arrowSize||12,R=this.nav,l=this.pages,S,P=this.allItems,F=function(d){"number"===typeof d?Q.attr({height:d}):Q&&(M.clipRect=Q.destroy(),M.contentGroup.clip());M.contentGroup.div&&(M.contentGroup.div.style.clip=d?"rect("+C+"px,9999px,"+(C+d)+"px,0)":"auto")};"horizontal"!==G.layout||"middle"===G.verticalAlign||G.floating||(K/=2);A&&(K=Math.min(K,A));l.length=0;O>K&&!1!==r.enabled?(this.clipHeight=B=Math.max(K-20-this.titleHeight-C,0),this.currentPage=g(this.currentPage,1),this.fullHeight=O,p(P,function(f,e){var m=f._legendItemPos[1];f=Math.round(f.legendItem.getBBox().height);var h=l.length;if(!h||m-l[h-1]>B&&(S||m)!==l[h-1]){l.push(S||m),h++}e===P.length-1&&m+f-l[h-1]>B&&l.push(m);m!==S&&(S=m)}),Q||(Q=M.clipRect=I.clipRect(0,C,9999,0),M.contentGroup.clip(Q)),F(B),R||(this.nav=R=I.g().attr({zIndex:1}).add(this.group),this.up=I.symbol("triangle",0,0,N,N).on("click",function(){M.scroll(-1,L)}).add(R),this.pager=I.text("",15,10).addClass("highcharts-legend-navigation").css(r.style).add(R),this.down=I.symbol("triangle-down",0,0,N,N).on("click",function(){M.scroll(1,L)}).add(R)),M.scroll(0),O=K):R&&(F(),this.nav=R.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0);return O},scroll:function(m,D){var l=this.pages,B=l.length;m=this.currentPage+m;var A=this.clipHeight,v=this.options.navigation,C=this.pager,r=this.padding;m>B&&(m=B);0<m&&(void 0!==D&&x(D,this.chart),this.nav.attr({translateX:r,translateY:A+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({"class":1===m?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),C.attr({text:m+"/"+B}),this.down.attr({x:18+this.pager.getBBox().width,"class":m===B?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===m?v.inactiveColor:v.activeColor}).css({cursor:1===m?"default":"pointer"}),this.down.attr({fill:m===B?v.inactiveColor:v.activeColor}).css({cursor:m===B?"default":"pointer"}),D=-l[m-1]+this.initialItemY,this.scrollGroup.animate({translateY:D}),this.currentPage=m,this.positionCheckboxes(D))}};w.LegendSymbolMixin={drawRectangle:function(f,l){var e=f.symbolHeight,h=f.options.squareSymbol;l.legendSymbol=this.chart.renderer.rect(h?(f.symbolWidth-e)/2:0,f.baseline-e+1,h?e:f.symbolWidth,e,g(f.options.symbolRadius,e/2)).addClass("highcharts-point").attr({zIndex:3}).add(l.legendGroup)},drawLineMarker:function(F){var E=this.options,D=E.marker,C=F.symbolWidth,B=F.symbolHeight,m=B/2,A=this.chart.renderer,r=this.legendGroup;F=F.baseline-Math.round(0.3*F.fontMetrics.b);var G;G={"stroke-width":E.lineWidth||0};E.dashStyle&&(G.dashstyle=E.dashStyle);this.legendLine=A.path(["M",0,F,"L",C,F]).addClass("highcharts-graph").attr(G).add(r);D&&!1!==D.enabled&&(E=Math.min(g(D.radius,m),m),0===this.symbol.indexOf("url")&&(D=o(D,{width:B,height:B}),E=0),this.legendSymbol=D=A.symbol(this.symbol,C/2-E,F-E,2*E,2*E,D).addClass("highcharts-point").add(r),D.isMarker=!0)}};(/Trident\/7\.0/.test(t.navigator.userAgent)||s)&&k(w.Legend.prototype,"positionItem",function(f,l){var e=this,h=function(){l._legendItemPos&&f.call(e,l)};h();setTimeout(h)})})(c);(function(ar){var af=ar.addEvent,ad=ar.animate,T=ar.animObject,W=ar.attr,ai=ar.doc,am=ar.Axis,ak=ar.createElement,ah=ar.defaultOptions,ab=ar.discardElement,U=ar.charts,ao=ar.css,an=ar.defined,ag=ar.each,aq=ar.extend,ap=ar.find,S=ar.fireEvent,aj=ar.grep,ae=ar.isNumber,aa=ar.isObject,Q=ar.isString,N=ar.Legend,x=ar.marginNames,ac=ar.merge,s=ar.objectEach,L=ar.Pointer,Y=ar.pick,Z=ar.pInt,X=ar.removeEvent,R=ar.seriesTypes,al=ar.splat,V=ar.svg,i=ar.syncTimeout,o=ar.win,j=ar.Chart=function(){this.getArgs.apply(this,arguments)};ar.chart=function(e,d,f){return new j(e,d,f)};aq(j.prototype,{callbacks:[],getArgs:function(){var d=[].slice.call(arguments);if(Q(d[0])||d[0].nodeName){this.renderTo=d.shift()}this.init(d[0],d[1])},init:function(h,r){var q,m,p=h.series,n=h.plotOptions||{};h.series=null;q=ac(ah,h);for(m in q.plotOptions){q.plotOptions[m].tooltip=n[m]&&ac(n[m].tooltip)||void 0}q.tooltip.userOptions=h.chart&&h.chart.forExport&&h.tooltip.userOptions||h.tooltip;q.series=h.series=p;this.userOptions=h;h=q.chart;m=h.events;this.margin=[];this.spacing=[];this.bounds={h:{},v:{}};this.labelCollectors=[];this.callback=r;this.isResizing=0;this.options=q;this.axes=[];this.series=[];this.hasCartesianSeries=h.showAxes;var l=this;l.index=U.length;U.push(l);ar.chartCount++;m&&s(m,function(e,d){af(l,d,e)});l.xAxis=[];l.yAxis=[];l.pointCount=l.colorCounter=l.symbolCounter=0;l.firstRender()},initSeries:function(d){var e=this.options.chart;(e=R[d.type||e.type||e.defaultSeriesType])||ar.error(17,!0);e=new e;e.init(this,d);return e},orderSeries:function(e){var d=this.series;for(e=e||0;e<d.length;e++){d[e]&&(d[e].index=e,d[e].name=d[e].name||"Series "+(d[e].index+1))}},isInsidePlot:function(f,e,h){var g=h?e:f;f=h?f:e;return 0<=g&&g<=this.plotWidth&&0<=f&&f<=this.plotHeight},redraw:function(F){var D=this.axes,A=this.series,C=this.pointer,B=this.legend,y=this.isDirtyLegend,H,G,z=this.hasCartesianSeries,r=this.isDirtyBox,n,I=this.renderer,v=I.isHidden(),w=[];this.setResponsive&&this.setResponsive(!1);ar.setAnimation(F,this);v&&this.temporaryDisplay();this.layOutTitles();for(F=A.length;F--;){if(n=A[F],n.options.stacking&&(H=!0,n.isDirty)){G=!0;break}}if(G){for(F=A.length;F--;){n=A[F],n.options.stacking&&(n.isDirty=!0)}}ag(A,function(d){d.isDirty&&"point"===d.options.legendType&&(d.updateTotals&&d.updateTotals(),y=!0);d.isDirtyData&&S(d,"updatedData")});y&&B.options.enabled&&(B.render(),this.isDirtyLegend=!1);H&&this.getStacks();z&&ag(D,function(d){d.updateNames();d.setScale()});this.getMargins();z&&(ag(D,function(d){d.isDirty&&(r=!0)}),ag(D,function(d){var e=d.min+","+d.max;d.extKey!==e&&(d.extKey=e,w.push(function(){S(d,"afterSetExtremes",aq(d.eventArgs,d.getExtremes()));delete d.eventArgs}));(r||H)&&d.redraw()}));r&&this.drawChartBox();S(this,"predraw");ag(A,function(d){(r||d.isDirty)&&d.visible&&d.redraw();d.isDirtyData=!1});C&&C.reset(!0);I.draw();S(this,"redraw");S(this,"render");v&&this.temporaryDisplay(!0);ag(w,function(d){d.call()})},get:function(h){function f(d){return d.id===h||d.options&&d.options.id===h}var m,k=this.series,l;m=ap(this.axes,f)||ap(this.series,f);for(l=0;!m&&l<k.length;l++){m=ap(k[l].points||[],f)}return m},getAxes:function(){var e=this,d=this.options,f=d.xAxis=al(d.xAxis||{}),d=d.yAxis=al(d.yAxis||{});ag(f,function(h,g){h.index=g;h.isX=!0});ag(d,function(h,g){h.index=g});f=f.concat(d);ag(f,function(g){new am(e,g)})},getSelectedPoints:function(){var d=[];ag(this.series,function(e){d=d.concat(aj(e.data||[],function(f){return f.selected}))});return d},getSelectedSeries:function(){return aj(this.series,function(d){return d.selected})},setTitle:function(h,f,n){var m=this,k=m.options,l;l=k.title=ac({style:{color:"#333333",fontSize:k.isStock?"16px":"18px"}},k.title,h);k=k.subtitle=ac({style:{color:"#666666"}},k.subtitle,f);ag([["title",h,l],["subtitle",f,k]],function(p,d){var t=p[0],q=m[t],r=p[1];p=p[2];q&&r&&(m[t]=q=q.destroy());p&&p.text&&!q&&(m[t]=m.renderer.text(p.text,0,0,p.useHTML).attr({align:p.align,"class":"highcharts-"+t,zIndex:p.zIndex||4}).add(),m[t].update=function(e){m.setTitle(!d&&e,d&&e)},m[t].css(p.style))});m.layOutTitles(n)},layOutTitles:function(f){var m=0,l,h=this.renderer,k=this.spacingBox;ag(["title","subtitle"],function(e){var p=this[e],n=this.options[e];e="title"===e?-3:n.verticalAlign?0:m+2;var g;p&&(g=n.style.fontSize,g=h.fontMetrics(g,p).b,p.css({width:(n.width||k.width+n.widthAdjust)+"px"}).align(aq({y:e+g},n),!1,"spacingBox"),n.floating||n.verticalAlign||(m=Math.ceil(m+p.getBBox(n.useHTML).height)))},this);l=this.titleOffset!==m;this.titleOffset=m;!this.isDirtyBox&&l&&(this.isDirtyBox=l,this.hasRendered&&Y(f,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this.options.chart,g=e.width,e=e.height,f=this.renderTo;an(g)||(this.containerWidth=ar.getStyle(f,"width"));an(e)||(this.containerHeight=ar.getStyle(f,"height"));this.chartWidth=Math.max(0,g||this.containerWidth||600);this.chartHeight=Math.max(0,ar.relativeLength(e,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},temporaryDisplay:function(d){var e=this.renderTo;if(d){for(;e&&e.style;){e.hcOrigStyle&&(ar.css(e,e.hcOrigStyle),delete e.hcOrigStyle),e.hcOrigDetached&&(ai.body.removeChild(e),e.hcOrigDetached=!1),e=e.parentNode}}else{for(;e&&e.style;){ai.body.contains(e)||e.parentNode||(e.hcOrigDetached=!0,ai.body.appendChild(e));if("none"===ar.getStyle(e,"display",!1)||e.hcOricDetached){e.hcOrigStyle={display:e.style.display,height:e.style.height,overflow:e.style.overflow},d={display:"block",overflow:"hidden"},e!==this.renderTo&&(d.height=0),ar.css(e,d),e.offsetWidth||e.style.setProperty("display","block","important")}e=e.parentNode;if(e===ai.body){break}}}},setClassName:function(d){this.container.className="highcharts-container "+(d||"")},getContainer:function(){var r,q=this.options,m=q.chart,p,n;r=this.renderTo;var h=ar.uniqueKey(),l;r||(this.renderTo=r=m.renderTo);Q(r)&&(this.renderTo=r=ai.getElementById(r));r||ar.error(13,!0);p=Z(W(r,"data-highcharts-chart"));ae(p)&&U[p]&&U[p].hasRendered&&U[p].destroy();W(r,"data-highcharts-chart",this.index);r.innerHTML="";m.skipClone||r.offsetWidth||this.temporaryDisplay();this.getChartSize();p=this.chartWidth;n=this.chartHeight;l=aq({position:"relative",overflow:"hidden",width:p+"px",height:n+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},m.style);this.container=r=ak("div",{id:h},l,r);this._cursor=r.style.cursor;this.renderer=new (ar[m.renderer]||ar.Renderer)(r,p,n,null,m.forExport,q.exporting&&q.exporting.allowHTML);this.setClassName(m.className);this.renderer.setStyle(m.style);this.renderer.chartIndex=this.index},getMargins:function(f){var e=this.spacing,h=this.margin,g=this.titleOffset;this.resetMargins();g&&!an(h[0])&&(this.plotTop=Math.max(this.plotTop,g+this.options.title.margin+e[0]));this.legend&&this.legend.display&&this.legend.adjustMargins(h,e);this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value);this.adjustPlotArea&&this.adjustPlotArea();f||this.getAxisMargins()},getAxisMargins:function(){var e=this,d=e.axisOffset=[0,0,0,0],f=e.margin;e.hasCartesianSeries&&ag(e.axes,function(g){g.visible&&g.getOffset()});ag(x,function(k,h){an(f[h])||(e[k]+=d[h])});e.setChartSize()},reflow:function(e){var p=this,n=p.options.chart,l=p.renderTo,m=an(n.width)&&an(n.height),h=n.width||ar.getStyle(l,"width"),n=n.height||ar.getStyle(l,"height"),l=e?e.target:o;if(!m&&!p.isPrinting&&h&&n&&(l===o||l===ai)){if(h!==p.containerWidth||n!==p.containerHeight){clearTimeout(p.reflowTimeout),p.reflowTimeout=i(function(){p.container&&p.setSize(void 0,void 0,!1)},e?100:0)}p.containerWidth=h;p.containerHeight=n}},initReflow:function(){var e=this,d;d=af(o,"resize",function(f){e.reflow(f)});af(e,"destroy",d)},setSize:function(d,m,h){var l=this,k=l.renderer;l.isResizing+=1;ar.setAnimation(h,l);l.oldChartHeight=l.chartHeight;l.oldChartWidth=l.chartWidth;void 0!==d&&(l.options.chart.width=d);void 0!==m&&(l.options.chart.height=m);l.getChartSize();d=k.globalAnimation;(d?ad:ao)(l.container,{width:l.chartWidth+"px",height:l.chartHeight+"px"},d);l.setChartSize(!0);k.setSize(l.chartWidth,l.chartHeight,h);ag(l.axes,function(e){e.isDirty=!0;e.setScale()});l.isDirtyLegend=!0;l.isDirtyBox=!0;l.layOutTitles();l.getMargins();l.redraw(h);l.oldChartHeight=null;S(l,"resize");i(function(){l&&S(l,"endResize",null,function(){--l.isResizing})},T(d).duration)},setChartSize:function(A){var z=this.inverted,y=this.renderer,w=this.chartWidth,q=this.chartHeight,v=this.options.chart,r=this.spacing,m=this.clipOffset,C,B,n,l;this.plotLeft=C=Math.round(this.plotLeft);this.plotTop=B=Math.round(this.plotTop);this.plotWidth=n=Math.max(0,Math.round(w-C-this.marginRight));this.plotHeight=l=Math.max(0,Math.round(q-B-this.marginBottom));this.plotSizeX=z?l:n;this.plotSizeY=z?n:l;this.plotBorderWidth=v.plotBorderWidth||0;this.spacingBox=y.spacingBox={x:r[3],y:r[0],width:w-r[3]-r[1],height:q-r[0]-r[2]};this.plotBox=y.plotBox={x:C,y:B,width:n,height:l};w=2*Math.floor(this.plotBorderWidth/2);z=Math.ceil(Math.max(w,m[3])/2);y=Math.ceil(Math.max(w,m[0])/2);this.clipBox={x:z,y:y,width:Math.floor(this.plotSizeX-Math.max(w,m[1])/2-z),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(w,m[2])/2-y))};A||ag(this.axes,function(d){d.setAxisSize();d.setAxisTranslation()})},resetMargins:function(){var e=this,d=e.options.chart;ag(["margin","spacing"],function(k){var h=d[k],f=aa(h)?h:[h,h,h,h];ag(["Top","Right","Bottom","Left"],function(l,g){e[k][g]=Y(d[k+l],f[g])})});ag(x,function(f,g){e[f]=Y(e.margin[g],e.spacing[g])});e.axisOffset=[0,0,0,0];e.clipOffset=[0,0,0,0]},drawChartBox:function(){var az=this.options.chart,ay=this.renderer,ax=this.chartWidth,aw=this.chartHeight,at=this.chartBackground,av=this.plotBackground,au=this.plotBorder,O,F=this.plotBGImage,J=az.backgroundColor,B=az.plotBackgroundColor,P=az.plotBackgroundImage,I,H=this.plotLeft,C=this.plotTop,K=this.plotWidth,M=this.plotHeight,A=this.plotBox,G=this.clipRect,v=this.clipBox,r="animate";at||(this.chartBackground=at=ay.rect().addClass("highcharts-background").add(),r="attr");O=az.borderWidth||0;I=O+(az.shadow?8:0);J={fill:J||"none"};if(O||at["stroke-width"]){J.stroke=az.borderColor,J["stroke-width"]=O}at.attr(J).shadow(az.shadow);at[r]({x:I/2,y:I/2,width:ax-I-O%2,height:aw-I-O%2,r:az.borderRadius});r="animate";av||(r="attr",this.plotBackground=av=ay.rect().addClass("highcharts-plot-background").add());av[r](A);av.attr({fill:B||"none"}).shadow(az.plotShadow);P&&(F?F.animate(A):this.plotBGImage=ay.image(P,H,C,K,M).add());G?G.animate({width:v.width,height:v.height}):this.clipRect=ay.clipRect(v);r="animate";au||(r="attr",this.plotBorder=au=ay.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add());au.attr({stroke:az.plotBorderColor,"stroke-width":az.plotBorderWidth||0,fill:"none"});au[r](au.crisp({x:H,y:C,width:K,height:M},-au.strokeWidth()));this.isDirtyBox=!1},propFromSeries:function(){var h=this,f=h.options.chart,n,m=h.options.series,k,l;ag(["inverted","angular","polar"],function(d){n=R[f.type||f.defaultSeriesType];l=f[d]||n&&n.prototype[d];for(k=m&&m.length;!l&&k--;){(n=R[m[k].type])&&n.prototype[d]&&(l=!0)}h[d]=l})},linkSeries:function(){var e=this,d=e.series;ag(d,function(f){f.linkedSeries.length=0});ag(d,function(f){var g=f.options.linkedTo;Q(g)&&(g=":previous"===g?e.series[f.index-1]:e.get(g))&&g.linkedParent!==f&&(g.linkedSeries.push(f),f.linkedParent=g,f.visible=Y(f.options.visible,g.options.visible,f.visible))})},renderSeries:function(){ag(this.series,function(d){d.translate();d.render()})},renderLabels:function(){var d=this,e=d.options.labels;e.items&&ag(e.items,function(m){var h=aq(e.style,m.style),l=Z(h.left)+d.plotLeft,k=Z(h.top)+d.plotTop+12;delete h.left;delete h.top;d.renderer.text(m.html,l,k).attr({zIndex:2}).css(h).add()})},render:function(){var h=this.axes,f=this.renderer,n=this.options,m,k,l;this.setTitle();this.legend=new N(this,n.legend);this.getStacks&&this.getStacks();this.getMargins(!0);this.setChartSize();n=this.plotWidth;m=this.plotHeight-=21;ag(h,function(d){d.setScale()});this.getAxisMargins();k=1.1<n/this.plotWidth;l=1.05<m/this.plotHeight;if(k||l){ag(h,function(d){(d.horiz&&k||!d.horiz&&l)&&d.setTickInterval(!0)}),this.getMargins()}this.drawChartBox();this.hasCartesianSeries&&ag(h,function(d){d.visible&&d.render()});this.seriesGroup||(this.seriesGroup=f.g("series-group").attr({zIndex:3}).add());this.renderSeries();this.renderLabels();this.addCredits();this.setResponsive&&this.setResponsive();this.hasRendered=!0},addCredits:function(e){var d=this;e=ac(!0,this.options.credits,e);e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){e.href&&(o.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position),this.credits.update=function(f){d.credits=d.credits.destroy();d.addCredits(f)})},destroy:function(){var h=this,p=h.axes,n=h.series,k=h.container,m,l=k&&k.parentNode;S(h,"destroy");h.renderer.forExport?ar.erase(U,h):U[h.index]=void 0;ar.chartCount--;h.renderTo.removeAttribute("data-highcharts-chart");X(h);for(m=p.length;m--;){p[m]=p[m].destroy()}this.scroller&&this.scroller.destroy&&this.scroller.destroy();for(m=n.length;m--;){n[m]=n[m].destroy()}ag("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(d){var e=h[d];e&&e.destroy&&(h[d]=e.destroy())});k&&(k.innerHTML="",X(k),l&&ab(k));s(h,function(d,e){delete h[e]})},isReadyToRender:function(){var d=this;return V||o!=o.top||"complete"===ai.readyState?!0:(ai.attachEvent("onreadystatechange",function(){ai.detachEvent("onreadystatechange",d.firstRender);"complete"===ai.readyState&&d.firstRender()}),!1)},firstRender:function(){var e=this,d=e.options;if(e.isReadyToRender()){e.getContainer();S(e,"init");e.resetMargins();e.setChartSize();e.propFromSeries();e.getAxes();ag(d.series||[],function(f){e.initSeries(f)});e.linkSeries();S(e,"beforeRender");L&&(e.pointer=new L(e,d));e.render();if(!e.renderer.imgCount&&e.onload){e.onload()}e.temporaryDisplay(!0)}},onload:function(){ag([this.callback].concat(this.callbacks),function(d){d&&void 0!==this.index&&d.apply(this,[this])},this);S(this,"load");S(this,"render");an(this.index)&&!1!==this.options.chart.reflow&&this.initReflow();this.onload=null}})})(c);(function(o){var g,e=o.each,q=o.extend,s=o.erase,j=o.fireEvent,n=o.format,k=o.isArray,i=o.isNumber,d=o.pick,p=o.removeEvent;o.Point=g=function(){};o.Point.prototype={init:function(h,m,l){this.series=h;this.color=h.color;this.applyOptions(m,l);h.options.colorByPoint?(m=h.options.colors||h.chart.options.colors,this.color=this.color||m[h.colorCounter],m=m.length,l=h.colorCounter,h.colorCounter++,h.colorCounter===m&&(h.colorCounter=0)):l=h.colorIndex;this.colorIndex=d(this.colorIndex,l);h.chart.pointCount++;return this},applyOptions:function(h,l){var m=this.series,f=m.options.pointValKey||m.pointValKey;h=g.prototype.optionsToObject.call(this,h);q(this,h);this.options=this.options?q(this.options,h):h;h.group&&delete this.group;f&&(this.y=this[f]);this.isNull=d(this.isValid&&!this.isValid(),null===this.x||!i(this.y,!0));this.selected&&(this.state="select");"name" in this&&void 0===l&&m.xAxis&&m.xAxis.hasNames&&(this.x=m.xAxis.nameToX(this));void 0===this.x&&m&&(this.x=void 0===l?m.autoIncrement(this):l);return this},optionsToObject:function(r){var w={},u=this.series,h=u.options.keys,x=h||u.pointArrayMap||["y"],m=x.length,t=0,v=0;if(i(r)||null===r){w[x[0]]=r}else{if(k(r)){for(!h&&r.length>m&&(u=typeof r[0],"string"===u?w.name=r[0]:"number"===u&&(w.x=r[0]),t++);v<m;){h&&void 0===r[t]||(w[x[v]]=r[t]),t++,v++}}else{"object"===typeof r&&(w=r,r.dataLabels&&(u._hasPointLabels=!0),r.marker&&(u._hasPointMarkers=!0))}}return w},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var l=this.series,r=l.zones,l=l.zoneAxis||"y",m=0,h;for(h=r[m];this[l]>=h.value;){h=r[++m]}h&&h.color&&!this.options.color&&(this.color=h.color);return h},destroy:function(){var h=this.series.chart,m=h.hoverPoints,l;h.pointCount--;m&&(this.setState(),s(m,this),m.length||(h.hoverPoints=null));if(this===h.hoverPoint){this.onMouseOut()}if(this.graphic||this.dataLabel){p(this),this.destroyElements()}this.legendItem&&h.legend.destroyItem(this);for(l in this){this[l]=null}},destroyElements:function(){for(var h=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],m,l=6;l--;){m=h[l],this[m]&&(this[m]=this[m].destroy())}},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(r){var u=this.series,t=u.tooltipOptions,f=d(t.valueDecimals,""),v=t.valuePrefix||"",m=t.valueSuffix||"";e(u.pointArrayMap||["y"],function(h){h="{point."+h;if(v||m){r=r.replace(h+"}",v+h+"}"+m)}r=r.replace(h+"}",h+":,."+f+"f}")});return n(r,{point:this,series:this.series})},firePointEvent:function(l,r,m){var h=this,t=this.series.options;(t.point.events[l]||h.options&&h.options.events&&h.options.events[l])&&this.importEvents();"click"===l&&t.allowPointSelect&&(m=function(f){h.select&&h.select(null,f.ctrlKey||f.metaKey||f.shiftKey)});j(this,l,r,m)},visible:!0}})(c);(function(Z){var O=Z.addEvent,M=Z.animObject,u=Z.arrayMax,D=Z.arrayMin,R=Z.correctFloat,U=Z.Date,T=Z.defaultOptions,Q=Z.defaultPlotOptions,H=Z.defined,x=Z.each,W=Z.erase,V=Z.extend,P=Z.fireEvent,Y=Z.grep,X=Z.isArray,t=Z.isNumber,S=Z.isString,N=Z.merge,E=Z.objectEach,s=Z.pick,o=Z.removeEvent,i=Z.splat,L=Z.SVGElement,g=Z.syncTimeout,j=Z.win;Z.Series=Z.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":Z.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1000,findNearestPointBy:"x"},{isCartesian:!0,pointClass:Z.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(h,e){var n=this,m,k=h.series,l;n.chart=h;n.options=e=n.setOptions(e);n.linkedSeries=[];n.bindAxes();V(n,{name:e.name,state:"",visible:!1!==e.visible,selected:!0===e.selected});m=e.events;E(m,function(f,d){O(n,d,f)});if(m&&m.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect){h.runTrackerClick=!0}n.getColor();n.getSymbol();x(n.parallelArrays,function(d){n[d+"Data"]=[]});n.setData(e.data,!1);n.isCartesian&&(h.hasCartesianSeries=!0);k.length&&(l=k[k.length-1]);n._i=s(l&&l._i,-1)+1;h.orderSeries(this.insert(k))},insert:function(e){var d=this.options.index,f;if(t(d)){for(f=e.length;f--;){if(d>=s(e[f].options.index,e[f]._i)){e.splice(f+1,0,this);break}}-1===f&&e.unshift(this);f+=1}else{e.push(this)}return s(f,e.length-1)},bindAxes:function(){var f=this,l=f.options,k=f.chart,h;x(f.axisTypes||[],function(d){x(k[d],function(e){h=e.options;if(l[d]===h.index||void 0!==l[d]&&l[d]===h.id||void 0===l[d]&&0===h.index){f.insert(e.series),f[d]=e,e.isDirty=!0}});f[d]||f.optionalAxis===d||Z.error(18,!0)})},updateParallelArrays:function(f,e){var l=f.series,k=arguments,h=t(e)?function(n){var m="y"===n&&l.toYData?l.toYData(f):f[n];l[n+"Data"][e]=m}:function(d){Array.prototype[e].apply(l[d+"Data"],Array.prototype.slice.call(k,2))};x(l.parallelArrays,h)},autoIncrement:function(){var f=this.options,e=this.xIncrement,k,h=f.pointIntervalUnit,e=s(e,f.pointStart,0);this.pointInterval=k=s(this.pointInterval,f.pointInterval,1);h&&(f=new U(e),"day"===h?f=+f[U.hcSetDate](f[U.hcGetDate]()+k):"month"===h?f=+f[U.hcSetMonth](f[U.hcGetMonth]()+k):"year"===h&&(f=+f[U.hcSetFullYear](f[U.hcGetFullYear]()+k)),k=f-e);this.xIncrement=e+k;return e},setOptions:function(h){var f=this.chart,n=f.options,m=n.plotOptions,k=(f.userOptions||{}).plotOptions||{},l=m[this.type];this.userOptions=h;f=N(l,m.series,h);this.tooltipOptions=N(T.tooltip,T.plotOptions.series&&T.plotOptions.series.tooltip,T.plotOptions[this.type].tooltip,n.tooltip.userOptions,m.series&&m.series.tooltip,m[this.type].tooltip,h.tooltip);this.stickyTracking=s(h.stickyTracking,k[this.type]&&k[this.type].stickyTracking,k.series&&k.series.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?!0:f.stickyTracking);null===l.marker&&delete f.marker;this.zoneAxis=f.zoneAxis;h=this.zones=(f.zones||[]).slice();!f.negativeColor&&!f.negativeFillColor||f.zones||h.push({value:f[this.zoneAxis+"Threshold"]||f.threshold||0,className:"highcharts-negative",color:f.negativeColor,fillColor:f.negativeFillColor});h.length&&H(h[h.length-1].value)&&h.push({color:this.color,fillColor:this.fillColor});return f},getCyclic:function(v,r,q){var p,l=this.chart,n=this.userOptions,m=v+"Index",h=v+"Counter",w=q?q.length:s(l.options.chart[v+"Count"],l[v+"Count"]);r||(p=s(n[m],n["_"+m]),H(p)||(l.series.length||(l[h]=0),n["_"+m]=p=l[h]%w,l[h]+=1),q&&(r=q[p]));void 0!==p&&(this[m]=p);this[v]=r},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||Q[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:Z.LegendSymbolMixin.drawLineMarker,setData:function(ab,J,I,G){var F=this,ac=F.points,C=ac&&ac.length||0,v,w=F.options,r=F.chart,B=null,A=F.xAxis,aa=w.turboThreshold,k=this.xData,ad=this.yData,K=(v=F.pointArrayMap)&&v.length;ab=ab||[];v=ab.length;J=s(J,!0);if(!1!==G&&v&&C===v&&!F.cropped&&!F.hasGroupedData&&F.visible){x(ab,function(e,d){ac[d].update&&e!==w.data[d]&&ac[d].update(e,!1,null,!1)})}else{F.xIncrement=null;F.colorCounter=0;x(this.parallelArrays,function(d){F[d+"Data"].length=0});if(aa&&v>aa){for(I=0;null===B&&I<v;){B=ab[I],I++}if(t(B)){for(I=0;I<v;I++){k[I]=this.autoIncrement(),ad[I]=ab[I]}}else{if(X(B)){if(K){for(I=0;I<v;I++){B=ab[I],k[I]=B[0],ad[I]=B.slice(1,K+1)}}else{for(I=0;I<v;I++){B=ab[I],k[I]=B[0],ad[I]=B[1]}}}else{Z.error(12)}}}else{for(I=0;I<v;I++){void 0!==ab[I]&&(B={series:F},F.pointClass.prototype.applyOptions.apply(B,[ab[I]]),F.updateParallelArrays(B,I))}}ad&&S(ad[0])&&Z.error(14,!0);F.data=[];F.options.data=F.userOptions.data=ab;for(I=C;I--;){ac[I]&&ac[I].destroy&&ac[I].destroy()}A&&(A.minRange=A.userMinRange);F.isDirty=r.isDirtyBox=!0;F.isDirtyData=!!ac;I=!1}"point"===w.legendType&&(this.processData(),this.generatePoints());J&&r.redraw(I)},processData:function(aa){var K=this.xData,J=this.yData,I=K.length,F;F=0;var G,B,ac=this.xAxis,C,v=this.options;C=v.cropThreshold;var y=this.getExtremesFromAll||v.getExtremesFromAll,r=this.isCartesian,v=ac&&ac.val2lin,A=ac&&ac.isLog,z,ab;if(r&&!this.isDirty&&!ac.isDirty&&!this.yAxis.isDirty&&!aa){return !1}ac&&(aa=ac.getExtremes(),z=aa.min,ab=aa.max);if(r&&this.sorted&&!y&&(!C||I>C||this.forceCrop)){if(K[I-1]<z||K[0]>ab){K=[],J=[]}else{if(K[0]<z||K[I-1]>ab){F=this.cropData(this.xData,this.yData,z,ab),K=F.xData,J=F.yData,F=F.start,G=!0}}}for(C=K.length||1;--C;){I=A?v(K[C])-v(K[C-1]):K[C]-K[C-1],0<I&&(void 0===B||I<B)?B=I:0>I&&this.requireSorting&&Z.error(15)}this.cropped=G;this.cropStart=F;this.processedXData=K;this.processedYData=J;this.closestPointRange=B},cropData:function(w,v,r,q){var p=w.length,n=0,l=p,y=s(this.cropShoulder,1),m;for(m=0;m<p;m++){if(w[m]>=r){n=Math.max(0,m-y);break}}for(r=m;r<p;r++){if(w[r]>q){l=r+y;break}}return{xData:w.slice(n,l),yData:v.slice(n,l),start:n,end:l}},generatePoints:function(){var aa=this.options,K=aa.data,J=this.data,I,G=this.processedXData,F=this.processedYData,B=this.pointClass,C=G.length,v=this.cropStart||0,y,r=this.hasGroupedData,aa=aa.keys,A,z=[],ab;J||r||(J=[],J.length=K.length,J=this.data=J);aa&&r&&(this.options.keys=!1);for(ab=0;ab<C;ab++){y=v+ab,r?(A=(new B).init(this,[G[ab]].concat(i(F[ab]))),A.dataGroup=this.groupMap[ab]):(A=J[y])||void 0===K[y]||(J[y]=A=(new B).init(this,K[y],G[ab])),A&&(A.index=y,z[ab]=A)}this.options.keys=aa;if(J&&(C!==(I=J.length)||r)){for(ab=0;ab<I;ab++){ab!==v||r||(ab+=C),J[ab]&&(J[ab].destroyElements(),J[ab].plotX=void 0)}}this.data=J;this.points=z},getExtremes:function(F){var C=this.yAxis,B=this.processedXData,A,y=[],z=0;A=this.xAxis.getExtremes();var v=A.min,G=A.max,w,m,r,l;F=F||this.stackedYData||this.processedYData||[];A=F.length;for(l=0;l<A;l++){if(m=B[l],r=F[l],w=(t(r,!0)||X(r))&&(!C.positiveValuesOnly||r.length||0<r),m=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(B[l+1]||m)>=v&&(B[l-1]||m)<=G,w&&m){if(w=r.length){for(;w--;){null!==r[w]&&(y[z++]=r[w])}}else{y[z++]=r}}}this.dataMin=D(y);this.dataMax=u(y)},translate:function(){this.processedXData||this.processData();this.generatePoints();var ar=this.options,aq=ar.stacking,ap=this.xAxis,ao=ap.categories,an=this.yAxis,am=this.points,ak=am.length,al=!!this.modifyValue,ah=ar.pointPlacement,ai="between"===ah||t(ah),af=ar.threshold,aj=ar.startFromThreshold?af:0,I,r,ab,l,w=Number.MAX_VALUE;"between"===ah&&(ah=0.5);t(ah)&&(ah*=s(ar.pointRange||ap.pointRange));for(ar=0;ar<ak;ar++){var ad=am[ar],ag=ad.x,ae=ad.y;r=ad.low;var ac=aq&&an.stacks[(this.negStacks&&ae<(aj?0:af)?"-":"")+this.stackKey],aa;an.positiveValuesOnly&&null!==ae&&0>=ae&&(ad.isNull=!0);ad.plotX=I=R(Math.min(Math.max(-100000,ap.translate(ag,0,0,0,1,ah,"flags"===this.type)),100000));aq&&this.visible&&!ad.isNull&&ac&&ac[ag]&&(l=this.getStackIndicator(l,ag,this.index),aa=ac[ag],ae=aa.points[l.key],r=ae[0],ae=ae[1],r===aj&&l.key===ac[ag].base&&(r=s(af,an.min)),an.positiveValuesOnly&&0>=r&&(r=null),ad.total=ad.stackTotal=aa.total,ad.percentage=aa.total&&ad.y/aa.total*100,ad.stackY=ae,aa.setOffset(this.pointXOffset||0,this.barW||0));ad.yBottom=H(r)?an.translate(r,0,1,0,1):null;al&&(ae=this.modifyValue(ae,ad));ad.plotY=r="number"===typeof ae&&Infinity!==ae?Math.min(Math.max(-100000,an.translate(ae,0,1,0,1)),100000):void 0;ad.isInside=void 0!==r&&0<=r&&r<=an.len&&0<=I&&I<=ap.len;ad.clientX=ai?R(ap.translate(ag,0,0,0,1,ah)):I;ad.negative=ad.y<(af||0);ad.category=ao&&void 0!==ao[ad.x]?ao[ad.x]:ad.x;ad.isNull||(void 0!==ab&&(w=Math.min(w,Math.abs(I-ab))),ab=I);ad.zone=this.zones.length&&ad.getZone()}this.closestPointRangePx=w},getValidPoints:function(e,h){var f=this.chart;return Y(e||this.points||[],function(d){return h&&!f.isInsidePlot(d.plotX,d.plotY,f.inverted)?!1:!d.isNull})},setClip:function(z){var y=this.chart,w=this.options,v=y.renderer,r=y.inverted,q=this.clipBox,m=q||y.clipBox,A=this.sharedClipKey||["_sharedClip",z&&z.duration,z&&z.easing,m.height,w.xAxis,w.yAxis].join(),n=y[A],l=y[A+"m"];n||(z&&(m.width=0,r&&(m.x=y.plotSizeX),y[A+"m"]=l=v.clipRect(r?y.plotSizeX+99:-99,r?-y.plotLeft:-y.plotTop,99,r?y.chartWidth:y.chartHeight)),y[A]=n=v.clipRect(m),n.count={length:0});z&&!n.count[this.index]&&(n.count[this.index]=!0,n.count.length+=1);!1!==w.clip&&(this.group.clip(z||q?n:y.clipRect),this.markerGroup.clip(l),this.sharedClipKey=A);z||(n.count[this.index]&&(delete n.count[this.index],--n.count.length),0===n.count.length&&A&&y[A]&&(q||(y[A]=y[A].destroy()),y[A+"m"]&&(y[A+"m"]=y[A+"m"].destroy())))},animate:function(f){var e=this.chart,k=M(this.options.animation),h;f?this.setClip(k):(h=this.sharedClipKey,(f=e[h])&&f.animate({width:e.plotSizeX,x:0},k),e[h+"m"]&&e[h+"m"].animate({width:e.plotSizeX+99,x:0},k),this.animate=null)},afterAnimate:function(){this.setClip();P(this,"afterAnimate");this.finishedAnimating=!0},drawPoints:function(){var K=this.points,J=this.chart,I,G,F,C,A=this.options.marker,B,v,w,r,z=this[this.specialGroup]||this.markerGroup,y=s(A.enabled,this.xAxis.isRadial?!0:null,this.closestPointRangePx>=2*A.radius);if(!1!==A.enabled||this._hasPointMarkers){for(G=0;G<K.length;G++){F=K[G],I=F.plotY,C=F.graphic,B=F.marker||{},v=!!F.marker,w=y&&void 0===B.enabled||B.enabled,r=F.isInside,w&&t(I)&&null!==F.y?(I=s(B.symbol,this.symbol),F.hasImage=0===I.indexOf("url"),w=this.markerAttribs(F,F.selected&&"select"),C?C[r?"show":"hide"](!0).animate(w):r&&(0<w.width||F.hasImage)&&(F.graphic=C=J.renderer.symbol(I,w.x,w.y,w.width,w.height,v?B:A).add(z)),C&&C.attr(this.pointAttribs(F,F.selected&&"select")),C&&C.addClass(F.getClassName(),!0)):C&&(F.graphic=C.destroy())}}},markerAttribs:function(h,f){var m=this.options.marker,l=h.marker||{},k=s(l.radius,m.radius);f&&(m=m.states[f],f=l.states&&l.states[f],k=s(f&&f.radius,m&&m.radius,k+(m&&m.radiusPlus||0)));h.hasImage&&(k=0);h={x:Math.floor(h.plotX)-k,y:h.plotY-k};k&&(h.width=h.height=2*k);return h},pointAttribs:function(l,h){var v=this.options.marker,r=l&&l.options,q=r&&r.marker||{},p=this.color,m=r&&r.color,n=l&&l.color,r=s(q.lineWidth,v.lineWidth);l=l&&l.zone&&l.zone.color;p=m||l||n||p;l=q.fillColor||v.fillColor||p;p=q.lineColor||v.lineColor||p;h&&(v=v.states[h],h=q.states&&q.states[h]||{},r=s(h.lineWidth,v.lineWidth,r+s(h.lineWidthPlus,v.lineWidthPlus,0)),l=h.fillColor||v.fillColor||l,p=h.lineColor||v.lineColor||p);return{stroke:p,"stroke-width":r,fill:l}},destroy:function(){var l=this,d=l.chart,v=/AppleWebKit\/533/.test(j.navigator.userAgent),r,p,q=l.data||[],m,n;P(l,"destroy");o(l);x(l.axisTypes||[],function(e){(n=l[e])&&n.series&&(W(n.series,l),n.isDirty=n.forceRedraw=!0)});l.legendItem&&l.chart.legend.destroyItem(l);for(p=q.length;p--;){(m=q[p])&&m.destroy&&m.destroy()}l.points=null;clearTimeout(l.animationTimeout);E(l,function(f,e){f instanceof L&&!f.survive&&(r=v&&"group"===e?"hide":"destroy",f[r]())});d.hoverSeries===l&&(d.hoverSeries=null);W(d.series,l);d.orderSeries();E(l,function(e,f){delete l[f]})},getGraphPath:function(z,y,w){var v=this,r=v.options,q=r.step,m,n=[],A=[],l;z=z||v.points;(m=z.reversed)&&z.reverse();(q={right:1,center:2}[q]||q&&3)&&m&&(q=4-q);!r.connectNulls||y||w||(z=this.getValidPoints(z));x(z,function(f,e){var p=f.plotX,h=f.plotY,d=z[e-1];(f.leftCliff||d&&d.rightCliff)&&!w&&(l=!0);f.isNull&&!H(y)&&0<e?l=!r.connectNulls:f.isNull&&!y?l=!0:(0===e||l?e=["M",f.plotX,f.plotY]:v.getPointSpline?e=v.getPointSpline(z,f,e):q?(e=1===q?["L",d.plotX,h]:2===q?["L",(d.plotX+p)/2,d.plotY,"L",(d.plotX+p)/2,h]:["L",p,d.plotY],e.push("L",p,h)):e=["L",p,h],A.push(f.x),q&&A.push(f.x),n.push.apply(n,e),l=!1)});n.xMap=A;return v.graphPath=n},drawGraph:function(){var f=this,e=this.options,k=(this.gappedPath||this.getGraphPath).call(this),h=[["graph","highcharts-graph",e.lineColor||this.color,e.dashStyle]];x(this.zones,function(l,d){h.push(["zone-graph-"+d,"highcharts-graph highcharts-zone-graph-"+d+" "+(l.className||""),l.color||f.color,l.dashStyle||e.dashStyle])});x(h,function(p,n){var l=p[0],m=f[l];m?(m.endX=k.xMap,m.animate({d:k})):k.length&&(f[l]=f.chart.renderer.path(k).addClass(p[1]).attr({zIndex:1}).add(f.group),m={stroke:p[2],"stroke-width":e.lineWidth,fill:f.fillGraph&&f.color||"none"},p[3]?m.dashstyle=p[3]:"square"!==e.linecap&&(m["stroke-linecap"]=m["stroke-linejoin"]="round"),m=f[l].attr(m).shadow(2>n&&e.shadow));m&&(m.startX=k.xMap,m.isArea=k.isArea)})},applyZones:function(){var an=this,am=this.chart,al=am.renderer,ak=this.zones,aj,ai,ag=this.clips||[],ah,ac=this.graph,ad=this.area,ab=Math.max(am.chartWidth,am.chartHeight),af=this[(this.zoneAxis||"y")+"Axis"],ae,G,F=am.inverted,A,aa,v,I,B=!1;ak.length&&(ac||ad)&&af&&void 0!==af.min&&(G=af.reversed,A=af.horiz,ac&&ac.hide(),ad&&ad.hide(),ae=af.getExtremes(),x(ak,function(f,e){aj=G?A?am.plotWidth:0:A?0:af.toPixels(ae.min);aj=Math.min(Math.max(s(ai,aj),0),ab);ai=Math.min(Math.max(Math.round(af.toPixels(s(f.value,ae.max),!0)),0),ab);B&&(aj=ai=af.toPixels(ae.max));aa=Math.abs(aj-ai);v=Math.min(aj,ai);I=Math.max(aj,ai);af.isXAxis?(ah={x:F?I:v,y:0,width:aa,height:ab},A||(ah.x=am.plotHeight-ah.x)):(ah={x:0,y:F?I:v,width:ab,height:aa},A&&(ah.y=am.plotWidth-ah.y));F&&al.isVML&&(ah=af.isXAxis?{x:0,y:G?v:I,height:ah.width,width:am.chartWidth}:{x:ah.y-am.plotLeft-am.spacingBox.x,y:0,width:ah.height,height:am.chartHeight});ag[e]?ag[e].animate(ah):(ag[e]=al.clipRect(ah),ac&&an["zone-graph-"+e].clip(ag[e]),ad&&an["zone-area-"+e].clip(ag[e]));B=f.value>ae.max}),this.clips=ag)},invertGroups:function(h){function f(){x(["group","markerGroup"],function(d){m[d]&&(l.renderer.isVML&&m[d].attr({width:m.yAxis.len,height:m.xAxis.len}),m[d].width=m.yAxis.len,m[d].height=m.xAxis.len,m[d].invert(h))})}var m=this,l=m.chart,k;m.xAxis&&(k=O(l,"resize",f),O(m,"destroy",k),f(h),m.invertGroups=f)},plotGroup:function(k,h,q,p,n){var l=this[k],m=!l;m&&(this[k]=l=this.chart.renderer.g().attr({zIndex:p||0.1}).add(n));l.addClass("highcharts-"+h+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(H(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(l.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0);l.attr({visibility:q})[m?"attr":"animate"](this.getPlotBox());return l},getPlotBox:function(){var e=this.chart,d=this.xAxis,f=this.yAxis;e.inverted&&(d=f,f=this.xAxis);return{translateX:d?d.left:e.plotLeft,translateY:f?f.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var B=this,A=B.chart,z,y=B.options,w=!!B.animate&&A.renderer.isSVG&&M(y.animation).duration,v=B.visible?"inherit":"hidden",q=y.zIndex,r=B.hasRendered,l=A.seriesGroup,m=A.inverted;z=B.plotGroup("group","series",v,q,l);B.markerGroup=B.plotGroup("markerGroup","markers",v,q,l);w&&B.animate(!0);z.inverted=B.isCartesian?m:!1;B.drawGraph&&(B.drawGraph(),B.applyZones());B.drawDataLabels&&B.drawDataLabels();B.visible&&B.drawPoints();B.drawTracker&&!1!==B.options.enableMouseTracking&&B.drawTracker();B.invertGroups(m);!1===y.clip||B.sharedClipKey||r||z.clip(A.clipRect);w&&B.animate();r||(B.animationTimeout=g(function(){B.afterAnimate()},w));B.isDirty=!1;B.hasRendered=!0},redraw:function(){var h=this.chart,f=this.isDirty||this.isDirtyData,m=this.group,l=this.xAxis,k=this.yAxis;m&&(h.inverted&&m.attr({width:h.plotWidth,height:h.plotHeight}),m.animate({translateX:s(l&&l.left,h.plotLeft),translateY:s(k&&k.top,h.plotTop)}));this.translate();this.render();f&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(h,f){var m=this.xAxis,l=this.yAxis,k=this.chart.inverted;return this.searchKDTree({clientX:k?m.len-h.chartY+m.pos:h.chartX-m.pos,plotY:k?l.len-h.chartX+l.pos:h.chartY-l.pos},f)},buildKDTree:function(){function e(n,m,l){var k,h;if(h=n&&n.length){return k=d.kdAxisArray[m%l],n.sort(function(q,p){return q[k]-p[k]}),h=Math.floor(h/2),{point:n[h],left:e(n.slice(0,h),m+1,l),right:e(n.slice(h+1),m+1,l)}}}this.buildingKdTree=!0;var d=this,f=-1<d.options.findNearestPointBy.indexOf("y")?2:1;delete d.kdTree;g(function(){d.kdTree=e(d.getValidPoints(null,!d.directTouch),f,f);d.buildingKdTree=!1},d.options.kdNow?0:1)},searchKDTree:function(l,h){function r(z,y,w,v){var e=y.point,f=q.kdAxisArray[w%v],d,k,A=e;k=H(z[p])&&H(e[p])?Math.pow(z[p]-e[p],2):null;d=H(z[n])&&H(e[n])?Math.pow(z[n]-e[n],2):null;d=(k||0)+(d||0);e.dist=H(d)?Math.sqrt(d):Number.MAX_VALUE;e.distX=H(k)?Math.sqrt(k):Number.MAX_VALUE;f=z[f]-e[f];d=0>f?"left":"right";k=0>f?"right":"left";y[d]&&(d=r(z,y[d],w+1,v),A=d[m]<A[m]?d:e);y[k]&&Math.sqrt(f*f)<A[m]&&(z=r(z,y[k],w+1,v),A=z[m]<A[m]?z:A);return A}var q=this,p=this.kdAxisArray[0],n=this.kdAxisArray[1],m=h?"distX":"dist";h=-1<q.options.findNearestPointBy.indexOf("y")?2:1;this.kdTree||this.buildingKdTree||this.buildKDTree();if(this.kdTree){return r(l,this.kdTree,h,h)}}})})(c);(function(o){var g=o.Axis,e=o.Chart,q=o.correctFloat,s=o.defined,j=o.destroyObjectProperties,n=o.each,k=o.format,i=o.objectEach,d=o.pick,p=o.Series;o.StackItem=function(l,r,m,h,u){var t=l.chart.inverted;this.axis=l;this.isNegative=m;this.options=r;this.x=h;this.total=null;this.points={};this.stack=u;this.rightCliff=this.leftCliff=0;this.alignOptions={align:r.align||(t?m?"left":"right":"center"),verticalAlign:r.verticalAlign||(t?"middle":m?"bottom":"top"),y:d(r.y,t?4:m?14:-6),x:d(r.x,t?m?-6:6:0)};this.textAlign=r.textAlign||(t?m?"right":"left":"center")};o.StackItem.prototype={destroy:function(){j(this,this.axis)},render:function(h){var m=this.options,l=m.format,l=l?k(l,this):m.formatter.call(this);this.label?this.label.attr({text:l,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(l,null,null,m.useHTML).css(m.style).attr({align:this.textAlign,rotation:m.rotation,visibility:"hidden"}).add(h)},setOffset:function(h,l){var m=this.axis,f=m.chart,r=m.translate(m.usePercentage?100:this.total,0,0,0,1),m=m.translate(0),m=Math.abs(r-m);h=f.xAxis[0].translate(this.x)+h;r=this.getStackBox(f,this,h,r,l,m);if(l=this.label){l.align(this.alignOptions,null,r),r=l.alignAttr,l[!1===this.options.crop||f.isInsidePlot(r.x,r.y)?"show":"hide"](!0)}},getStackBox:function(m,v,t,l,x,r){var w=v.axis.reversed,u=m.inverted;m=m.plotHeight;v=v.isNegative&&!w||!v.isNegative&&w;return{x:u?v?l:l-r:t,y:u?m-t-x:v?m-l-r:m-l,width:u?r:x,height:u?x:r}}};e.prototype.getStacks=function(){var f=this;n(f.yAxis,function(h){h.stacks&&h.hasVisibleSeries&&(h.oldStacks=h.stacks)});n(f.series,function(h){!h.options.stacking||!0!==h.visible&&!1!==f.options.chart.ignoreHiddenSeries||(h.stackKey=h.type+d(h.options.stack,""))})};g.prototype.buildStacks=function(){var l=this.series,r=d(this.options.reversedStacks,!0),m=l.length,h;if(!this.isXAxis){this.usePercentage=!1;for(h=m;h--;){l[r?h:m-h-1].setStackedPoints()}for(h=0;h<m;h++){l[h].modifyStacks()}}};g.prototype.renderStackTotals=function(){var l=this.chart,r=l.renderer,m=this.stacks,h=this.stackTotalGroup;h||(this.stackTotalGroup=h=r.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());h.translate(l.plotLeft,l.plotTop);i(m,function(f){i(f,function(t){t.render(h)})})};g.prototype.resetStacks=function(){var f=this,h=f.stacks;f.isXAxis||i(h,function(l){i(l,function(m,r){m.touched<f.stacksTouched?(m.destroy(),delete l[r]):(m.total=null,m.cum=null)})})};g.prototype.cleanStacks=function(){var f;this.isXAxis||(this.oldStacks&&(f=this.stacks=this.oldStacks),i(f,function(h){i(h,function(l){l.cum=l.total})}))};p.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var T=this.processedXData,S=this.processedYData,R=[],V=S.length,U=this.options,P=U.threshold,O=U.startFromThreshold?P:0,L=U.stack,U=U.stacking,N=this.stackKey,M="-"+N,x=this.negStacks,B=this.yAxis,K=B.stacks,r=B.oldStacks,w,G,I,F,A,Q,C;B.stacksTouched+=1;for(A=0;A<V;A++){Q=T[A],C=S[A],w=this.getStackIndicator(w,Q,this.index),F=w.key,I=(G=x&&C<(O?0:P))?M:N,K[I]||(K[I]={}),K[I][Q]||(r[I]&&r[I][Q]?(K[I][Q]=r[I][Q],K[I][Q].total=null):K[I][Q]=new o.StackItem(B,B.options.stackLabels,G,Q,L)),I=K[I][Q],null!==C&&(I.points[F]=I.points[this.index]=[d(I.cum,O)],s(I.cum)||(I.base=F),I.touched=B.stacksTouched,0<w.index&&!1===this.singleStacks&&(I.points[F][0]=I.points[this.index+","+Q+",0"][0])),"percent"===U?(G=G?N:M,x&&K[G]&&K[G][Q]?(G=K[G][Q],I.total=G.total=Math.max(G.total,I.total)+Math.abs(C)||0):I.total=q(I.total+(Math.abs(C)||0))):I.total=q(I.total+(C||0)),I.cum=d(I.cum,O)+(C||0),null!==C&&(I.points[F].push(I.cum),R[A]=I.cum)}"percent"===U&&(B.usePercentage=!0);this.stackedYData=R;B.oldStacks={}}};p.prototype.modifyStacks=function(){var r=this,u=r.stackKey,t=r.yAxis.stacks,f=r.processedXData,v,m=r.options.stacking;r[m+"Stacker"]&&n([u,"-"+u],function(x){for(var w=f.length,l,h;w--;){if(l=f[w],v=r.getStackIndicator(v,l,r.index,x),h=(l=t[x]&&t[x][l])&&l.points[v.key]){r[m+"Stacker"](h,l,w)}}})};p.prototype.percentStacker=function(h,m,l){m=m.total?100/m.total:0;h[0]=q(h[0]*m);h[1]=q(h[1]*m);this.stackedYData[l]=h[1]};p.prototype.getStackIndicator=function(l,r,m,h){!s(l)||l.x!==r||h&&l.key!==h?l={x:r,index:0,key:h}:l.index++;l.key=[m,r,l.index].join();return l}})(c);(function(T){var E=T.addEvent,z=T.animate,q=T.Axis,t=T.createElement,L=T.css,O=T.defined,N=T.each,J=T.erase,x=T.extend,s=T.fireEvent,Q=T.inArray,P=T.isNumber,H=T.isObject,S=T.isArray,R=T.merge,o=T.objectEach,M=T.pick,D=T.Point,u=T.Series,j=T.seriesTypes,i=T.setAnimation,g=T.splat;x(T.Chart.prototype,{addSeries:function(h,f,m){var l,k=this;h&&(f=M(f,!0),s(k,"addSeries",{options:h},function(){l=k.initSeries(h);k.isDirtyLegend=!0;k.linkSeries();f&&k.redraw(m)}));return l},addAxis:function(l,k,r,p){var n=k?"xAxis":"yAxis",m=this.options;l=R(l,{index:this[n].length,isX:k});k=new q(this,l);m[n]=g(m[n]||{});m[n].push(l);M(r,!0)&&this.redraw(p);return k},showLoading:function(k){var h=this,p=h.options,n=h.loadingDiv,m=p.loading,l=function(){n&&L(n,{left:h.plotLeft+"px",top:h.plotTop+"px",width:h.plotWidth+"px",height:h.plotHeight+"px"})};n||(h.loadingDiv=n=t("div",{className:"highcharts-loading highcharts-loading-hidden"},null,h.container),h.loadingSpan=t("span",{className:"highcharts-loading-inner"},null,n),E(h,"redraw",l));n.className="highcharts-loading";h.loadingSpan.innerHTML=k||p.lang.loading;L(n,x(m.style,{zIndex:10}));L(h.loadingSpan,m.labelStyle);h.loadingShown||(L(n,{opacity:0,display:""}),z(n,{opacity:m.style.opacity||0.5},{duration:m.showDuration||0}));h.loadingShown=!0;l()},hideLoading:function(){var e=this.options,d=this.loadingDiv;d&&(d.className="highcharts-loading highcharts-loading-hidden",z(d,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){L(d,{display:"none"})}}));this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions tooltip".split(" "),update:function(A,w,e){var k=this,f={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},d=A.chart,h,r,v=[];if(d){R(!0,k.options.chart,d);"className" in d&&k.setClassName(d.className);if("inverted" in d||"polar" in d){k.propFromSeries(),h=!0}"alignTicks" in d&&(h=!0);o(d,function(m,l){-1!==Q("chart."+l,k.propsRequireUpdateSeries)&&(r=!0);-1!==Q(l,k.propsRequireDirtyBox)&&(k.isDirtyBox=!0)});"style" in d&&k.renderer.setStyle(d.style)}A.colors&&(this.options.colors=A.colors);A.plotOptions&&R(!0,this.options.plotOptions,A.plotOptions);o(A,function(m,l){if(k[l]&&"function"===typeof k[l].update){k[l].update(m,!1)}else{if("function"===typeof k[f[l]]){k[f[l]](m)}}"chart"!==l&&-1!==Q(l,k.propsRequireUpdateSeries)&&(r=!0)});N("xAxis yAxis zAxis series colorAxis pane".split(" "),function(l){A[l]&&(N(g(A[l]),function(m,n){(n=O(m.id)&&k.get(m.id)||k[l][n])&&n.coll===l&&(n.update(m,!1),e&&(n.touched=!0));if(!n&&e){if("series"===l){k.addSeries(m,!1).touched=!0}else{if("xAxis"===l||"yAxis"===l){k.addAxis(m,"xAxis"===l,!1).touched=!0}}}}),e&&N(k[l],function(m){m.touched?delete m.touched:v.push(m)}))});N(v,function(l){l.remove(!1)});h&&N(k.axes,function(l){l.update({},!1)});r&&N(k.series,function(l){l.update({},!1)});A.loading&&R(!0,k.options.loading,A.loading);h=d&&d.width;d=d&&d.height;P(h)&&h!==k.chartWidth||P(d)&&d!==k.chartHeight?k.setSize(h,d):M(w,!0)&&k.redraw()},setSubtitle:function(d){this.setTitle(void 0,d)}});x(D.prototype,{update:function(F,C,B,A){function y(){w.applyOptions(F);null===w.y&&v&&(w.graphic=v.destroy());H(F,!0)&&(v&&v.element&&F&&F.marker&&void 0!==F.marker.symbol&&(w.graphic=v.destroy()),F&&F.dataLabels&&w.dataLabel&&(w.dataLabel=w.dataLabel.destroy()));m=w.index;r.updateParallelArrays(w,m);k.data[m]=H(k.data[m],!0)||H(F,!0)?w.options:F;r.isDirty=r.isDirtyData=!0;!r.fixedBox&&r.hasCartesianSeries&&(n.isDirtyBox=!0);"point"===k.legendType&&(n.isDirtyLegend=!0);C&&n.redraw(B)}var w=this,r=w.series,v=w.graphic,m,n=r.chart,k=r.options;C=M(C,!0);!1===A?y():w.firePointEvent("update",{options:F},y)},remove:function(e,d){this.series.removePoint(Q(this,this.series.data),e,d)}});x(u.prototype,{addPoint:function(U,K,I,G){var F=this.options,C=this.data,A=this.chart,B=this.xAxis,B=B&&B.hasNames&&B.names,r=F.data,y,v,k=this.xData,w,V;K=M(K,!0);y={series:this};this.pointClass.prototype.applyOptions.apply(y,[U]);V=y.x;w=k.length;if(this.requireSorting&&V<k[w-1]){for(v=!0;w&&k[w-1]>V;){w--}}this.updateParallelArrays(y,"splice",w,0,0);this.updateParallelArrays(y,w);B&&y.name&&(B[V]=y.name);r.splice(w,0,U);v&&(this.data.splice(w,0,null),this.processData());"point"===F.legendType&&this.generatePoints();I&&(C[0]&&C[0].remove?C[0].remove(!1):(C.shift(),this.updateParallelArrays(y,"shift"),r.shift()));this.isDirtyData=this.isDirty=!0;K&&A.redraw(G)},removePoint:function(A,y,w){var v=this,r=v.data,n=r[A],l=v.points,m=v.chart,k=function(){l&&l.length===r.length&&l.splice(A,1);r.splice(A,1);v.options.data.splice(A,1);v.updateParallelArrays(n||{series:v},"splice",A,1);n&&n.destroy();v.isDirty=!0;v.isDirtyData=!0;y&&m.redraw()};i(w,m);y=M(y,!0);n?n.firePointEvent("remove",null,k):k()},remove:function(k,h,p){function n(){m.destroy();l.isDirtyLegend=l.isDirtyBox=!0;l.linkSeries();M(k,!0)&&l.redraw(h)}var m=this,l=m.chart;!1!==p?s(m,"remove",null,n):n()},update:function(I,G){var F=this,C=F.chart,B=F.userOptions,k=F.oldType||F.type,y=I.type||B.type||C.options.chart.type,A=j[k].prototype,r,h=["group","markerGroup","dataLabelsGroup"],v=["navigatorSeries","baseSeries"],K=F.finishedAnimating&&{animation:!1};if(Object.keys&&"data"===Object.keys(I).toString()){return this.setData(I.data,G)}if(y&&y!==k||void 0!==I.zIndex){h.length=0}F.options.isInternal&&(v.length=0);v=h.concat(v);N(v,function(d){v[d]=F[d];delete F[d]});I=R(B,K,{index:F.index,pointStart:F.xData[0]},{data:F.options.data},I);F.remove(!1,null,!1);for(r in A){F[r]=void 0}x(F,j[y||k].prototype);N(v,function(d){F[d]=v[d]});F.init(C,I);F.oldType=k;C.linkSeries();M(G,!0)&&C.redraw(!1)}});x(q.prototype,{update:function(f,e){var h=this.chart;f=h.options[this.coll][this.options.index]=R(this.userOptions,f);this.destroy(!0);this.init(h,x(f,{events:void 0}));h.isDirtyBox=!0;M(e,!0)&&h.redraw()},remove:function(h){for(var n=this.chart,m=this.coll,l=this.series,k=l.length;k--;){l[k]&&l[k].remove(!1)}J(n.axes,this);J(n[m],this);S(n.options[m])?n.options[m].splice(this.options.index,1):delete n.options[m];N(n[m],function(e,d){e.options.index=d});this.destroy();n.isDirtyBox=!0;M(h,!0)&&n.redraw()},setTitle:function(e,d){this.update({title:e},d)},setCategories:function(e,d){this.update({categories:e},d)}})})(c);(function(g){var d=g.color,k=g.each,h=g.map,i=g.pick,e=g.Series,j=g.seriesType;j("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(u){var t=[],r=[],D=this.xAxis,y=this.yAxis,x=y.stacks[this.stackKey],q={},A=this.index,z=y.series,B=z.length,s,o=i(y.options.reversedStacks,!0)?1:-1,m;u=u||this.points;if(this.options.stacking){for(m=0;m<u.length;m++){q[u[m].x]=u[m]}g.objectEach(x,function(l,f){null!==l.total&&r.push(f)});r.sort(function(l,f){return l-f});s=h(z,function(){return this.visible});k(r,function(n,w){var p=0,l,v;if(q[n]&&!q[n].isNull){t.push(q[n]),k([-1,1],function(G){var F=1===G?"rightNull":"leftNull",C=0,E=x[r[w+G]];if(E){for(m=A;0<=m&&m<B;){l=E.points[m],l||(m===A?q[n][F]=!0:s[m]&&(v=x[n].points[m])&&(C-=v[1]-v[0])),m+=o}}q[n][1===G?"rightCliff":"leftCliff"]=C})}else{for(m=A;0<=m&&m<B;){if(l=x[n].points[m]){p=l[1];break}m+=o}p=y.translate(p,0,1,0,1);t.push({isNull:!0,plotX:D.translate(n,0,0,0,1),x:n,plotY:p,yBottom:p})}})}return t},getGraphPath:function(D){var s=e.prototype.getGraphPath,r=this.options,G=r.stacking,u=this.yAxis,t,o,B=[],x=[],F=this.index,q,m=u.stacks[this.stackKey],l=r.threshold,E=u.getThreshold(r.threshold),A,r=r.connectNulls||"percent"===G,z=function(H,C,w){var v=D[H];H=G&&m[v.x].points[F];var I=v[w+"Null"]||0;w=v[w+"Cliff"]||0;var p,y,v=!0;w||I?(p=(I?H[0]:H[1])+w,y=H[0]+w,v=!!I):!G&&D[C]&&D[C].isNull&&(p=y=l);void 0!==p&&(x.push({plotX:q,plotY:null===p?E:u.getThreshold(p),isNull:v,isCliff:!0}),B.push({plotX:q,plotY:null===y?E:u.getThreshold(y),doCurve:!1}))};D=D||this.points;G&&(D=this.getStackPoints(D));for(t=0;t<D.length;t++){if(o=D[t].isNull,q=i(D[t].rectPlotX,D[t].plotX),A=i(D[t].yBottom,E),!o||r){r||z(t,t-1,"left"),o&&!G&&r||(x.push(D[t]),B.push({x:t,plotX:q,plotY:A})),r||z(t,t+1,"right")}}t=s.call(this,x,!0,!0);B.reversed=!0;o=s.call(this,B,!0,!0);o.length&&(o[0]="L");o=t.concat(o);s=s.call(this,x,!1,r);o.xMap=t.xMap;this.areaPath=o;return s},drawGraph:function(){this.areaPath=[];e.prototype.drawGraph.apply(this);var l=this,o=this.areaPath,n=this.options,m=[["area","highcharts-area",this.color,n.fillColor]];k(this.zones,function(p,f){m.push(["zone-area-"+f,"highcharts-area highcharts-zone-area-"+f+" "+p.className,p.color||l.color,p.fillColor||n.fillColor])});k(m,function(q){var p=q[0],f=l[p];f?(f.endX=o.xMap,f.animate({d:o})):(f=l[p]=l.chart.renderer.path(o).addClass(q[1]).attr({fill:i(q[3],d(q[2]).setOpacity(i(n.fillOpacity,0.75)).get()),zIndex:0}).add(l.group),f.isArea=!0);f.startX=o.xMap;f.shiftUnit=n.step?2:1})},drawLegendSymbol:g.LegendSymbolMixin.drawRectangle})})(c);(function(e){var d=e.pick;e=e.seriesType;e("spline","line",{},{getPointSpline:function(q,t,u){var j=t.plotX,n=t.plotY,k=q[u-1];u=q[u+1];var i,g,s,p;if(k&&!k.isNull&&!1!==k.doCurve&&!t.isCliff&&u&&!u.isNull&&!1!==u.doCurve&&!t.isCliff){q=k.plotY;s=u.plotX;u=u.plotY;var o=0;i=(1.5*j+k.plotX)/2.5;g=(1.5*n+q)/2.5;s=(1.5*j+s)/2.5;p=(1.5*n+u)/2.5;s!==i&&(o=(p-g)*(s-j)/(s-i)+n-p);g+=o;p+=o;g>q&&g>n?(g=Math.max(q,n),p=2*n-g):g<q&&g<n&&(g=Math.min(q,n),p=2*n-g);p>u&&p>n?(p=Math.max(u,n),g=2*n-p):p<u&&p<n&&(p=Math.min(u,n),g=2*n-p);t.rightContX=s;t.rightContY=p}t=["C",d(k.rightContX,k.plotX),d(k.rightContY,k.plotY),d(i,j),d(g,n),j,n];k.rightContX=k.rightContY=null;return t}})})(c);(function(e){var d=e.seriesTypes.area.prototype,f=e.seriesType;f("areaspline","spline",e.defaultPlotOptions.area,{getStackPoints:d.getStackPoints,getGraphPath:d.getGraphPath,drawGraph:d.drawGraph,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})})(c);(function(o){var g=o.animObject,e=o.color,q=o.each,s=o.extend,j=o.isNumber,n=o.merge,k=o.pick,i=o.Series,d=o.seriesType,p=o.svg;d("column","line",{borderRadius:0,crisp:!0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:0.1,shadow:!1},select:{color:"#cccccc",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){i.prototype.init.apply(this,arguments);var f=this,h=f.chart;h.hasRendered&&q(h.series,function(l){l.type===f.type&&(l.isDirty=!0)})},getColumnMetrics:function(){var D=this,z=D.options,x=D.xAxis,C=D.yAxis,A=x.reversed,v,w={},t=0;!1===z.grouping?t=1:q(D.chart.series,function(y){var r=y.options,m=y.yAxis,l;y.type!==D.type||!y.visible&&D.chart.options.chart.ignoreHiddenSeries||C.len!==m.len||C.pos!==m.pos||(r.stacking?(v=y.stackKey,void 0===w[v]&&(w[v]=t++),l=w[v]):!1!==r.grouping&&(l=t++),y.columnIndex=l)});var u=Math.min(Math.abs(x.transA)*(x.ordinalSlope||z.pointRange||x.closestPointRange||x.tickInterval||1),x.len),h=u*z.groupPadding,B=(u-2*h)/(t||1),z=Math.min(z.maxPointWidth||x.len,k(z.pointWidth,B*(1-2*z.pointPadding)));D.columnMetrics={width:z,offset:(B-z)/2+(h+((D.columnIndex||0)+(A?1:0))*B-u/2)*(A?-1:1)};return D.columnMetrics},crispCol:function(l,t,r,h){var v=this.chart,u=this.borderWidth,m=-(u%2?0.5:0),u=u%2?0.5:1;v.inverted&&v.renderer.isVML&&(u+=1);this.options.crisp&&(r=Math.round(l+r)+m,l=Math.round(l)+m,r-=l);h=Math.round(t+h)+u;m=0.5>=Math.abs(t)&&0.5<h;t=Math.round(t)+u;h-=t;m&&h&&(--t,h+=1);return{x:l,y:t,width:r,height:h}},translate:function(){var C=this,x=C.chart,w=C.options,B=C.dense=2>C.closestPointRange*C.xAxis.transA,B=C.borderWidth=k(w.borderWidth,B?0:1),z=C.yAxis,t=C.translatedThreshold=z.getThreshold(w.threshold),u=k(w.minPointLength,5),m=C.getColumnMetrics(),h=m.width,D=C.barW=Math.max(h,1+2*B),A=C.pointXOffset=m.offset;x.inverted&&(t-=0.5);w.pointPadding&&(D=Math.ceil(D));i.prototype.translate.apply(C);q(C.points,function(r){var G=k(r.yBottom,t),y=999+Math.abs(G),y=Math.min(Math.max(-y,r.plotY),z.len+y),E=r.plotX+A,l=D,H=Math.min(y,G),v,F=Math.max(y,G)-H;u&&Math.abs(F)<u&&(F=u,v=!z.reversed&&!r.negative||z.reversed&&r.negative,0===r.y&&0>=C.dataMax&&(v=!v),H=Math.abs(H-t)>u?G-u:t-(v?u:0));r.barX=E;r.pointWidth=h;r.tooltipPos=x.inverted?[z.len+z.pos-x.plotLeft-y,C.xAxis.len-E-l/2,F]:[E+l/2,y+z.pos-x.plotTop,F];r.shapeType="rect";r.shapeArgs=C.crispCol.apply(C,r.isNull?[E,t,l,0]:[E,H,l,F])})},getSymbol:o.noop,drawLegendSymbol:o.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(y,u){var v=this.options,x,w=this.pointAttrToOptions||{};x=w.stroke||"borderColor";var t=w["stroke-width"]||"borderWidth",r=y&&y.color||this.color,f=y&&y[x]||v[x]||this.color||r,m=y&&y[t]||v[t]||this[t]||0,w=v.dashStyle;y&&this.zones.length&&(r=y.getZone(),r=y.options.color||r&&r.color||this.color);u&&(y=n(v.states[u],y.options.states&&y.options.states[u]||{}),u=y.brightness,r=y.color||void 0!==u&&e(r).brighten(y.brightness).get()||r,f=y[x]||f,m=y[t]||m,w=y.dashStyle||w);x={fill:r,stroke:f,"stroke-width":m};w&&(x.dashstyle=w);return x},drawPoints:function(){var r=this,u=this.chart,t=r.options,l=u.renderer,v=t.animationLimit||250,f;q(r.points,function(m){var h=m.graphic;if(j(m.plotY)&&null!==m.y){f=m.shapeArgs;if(h){h[u.pointCount<v?"animate":"attr"](n(f))}else{m.graphic=h=l[m.shapeType](f).add(m.group||r.group)}t.borderRadius&&h.attr({r:t.borderRadius});h.attr(r.pointAttribs(m,m.selected&&"select")).shadow(t.shadow,null,t.stacking&&!t.borderRadius);h.addClass(m.getClassName(),!0)}else{h&&(m.graphic=h.destroy())}})},animate:function(m){var w=this,u=this.yAxis,l=w.options,x=this.chart.inverted,t={},r=x?"translateX":"translateY",v;p&&(m?(t.scaleY=0.001,m=Math.min(u.pos+u.len,Math.max(u.pos,u.toPixels(l.threshold))),x?t.translateX=m-u.len:t.translateY=m,w.group.attr(t)):(v=w.group.attr(r),w.group.animate({scaleY:1},s(g(w.options.animation),{step:function(h,f){t[r]=v+f.pos*(u.pos-v);w.group.attr(t)}})),w.animate=null))},remove:function(){var f=this,h=f.chart;h.hasRendered&&q(h.series,function(l){l.type===f.type&&(l.isDirty=!0)});i.prototype.remove.apply(f,arguments)}})})(c);(function(d){d=d.seriesType;d("bar","column",null,{inverted:!0})})(c);(function(e){var d=e.Series;e=e.seriesType;e("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e \x3cspan style\x3d"font-size: 0.85em"\x3e {series.name}\x3c/span\x3e\x3cbr/\x3e',pointFormat:"x: \x3cb\x3e{point.x}\x3c/b\x3e\x3cbr/\x3ey: \x3cb\x3e{point.y}\x3c/b\x3e\x3cbr/\x3e"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&d.prototype.drawGraph.call(this)}})})(c);(function(e){var d=e.deg2rad,h=e.isNumber,f=e.pick,g=e.relativeLength;e.CenteredSeriesMixin={getCenter:function(){var j=this.options,o=this.chart,l=2*(j.slicedOffset||0),i=o.plotWidth-2*l,o=o.plotHeight-2*l,n=j.center,n=[f(n[0],"50%"),f(n[1],"50%"),j.size||"100%",j.innerSize||0],k=Math.min(i,o),q,p;for(q=0;4>q;++q){p=n[q],j=2>q||2===q&&/%$/.test(p),n[q]=g(p,[i,o,k,n[2]][q])+(j?l:0)}n[3]>n[2]&&(n[3]=n[2]);return n},getStartAndEndRadians:function(i,j){i=h(i)?i:0;j=h(j)&&j>i&&360>j-i?j:i+360;return{start:d*(i+-90),end:d*(j+-90)}}}})(c);(function(w){var j=w.addEvent,i=w.CenteredSeriesMixin,y=w.defined,z=w.each,p=w.extend,s=i.getStartAndEndRadians,q=w.inArray,o=w.noop,g=w.pick,x=w.Point,u=w.Series,t=w.seriesType,k=w.setAnimation;t("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:0.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:w.seriesTypes.column.prototype.pointAttribs,animate:function(h){var f=this,m=f.points,l=f.startAngleRad;h||(z(m,function(e){var r=e.graphic,n=e.shapeArgs;r&&(r.attr({r:e.startR||f.center[3]/2,start:l,end:l}),r.animate({r:n.r,start:n.start,end:n.end},f.options.animation))}),f.animate=null)},updateTotals:function(){var l,A=0,v=this.points,r=v.length,n,m=this.options.ignoreHiddenPoint;for(l=0;l<r;l++){n=v[l],A+=m&&!n.visible?0:n.isNull?0:n.y}this.total=A;for(l=0;l<r;l++){n=v[l],n.percentage=0<A&&(n.visible||!m)?n.y/A*100:0,n.total=A}},generatePoints:function(){u.prototype.generatePoints.call(this);this.updateTotals()},translate:function(N){this.generatePoints();var L=0,I=this.options,G=I.slicedOffset,F=G+(I.borderWidth||0),C,B,A,P=s(I.startAngle,I.endAngle),r=this.startAngleRad=P.start,P=(this.endAngleRad=P.end)-r,K=this.points,M,Q=I.dataLabels.distance,I=I.ignoreHiddenPoint,f,R=K.length,O;N||(this.center=N=this.getCenter());this.getX=function(e,l,h){A=Math.asin(Math.min((e-N[1])/(N[2]/2+h.labelDistance),1));return N[0]+(l?-1:1)*Math.cos(A)*(N[2]/2+h.labelDistance)};for(f=0;f<R;f++){O=K[f];O.labelDistance=g(O.options.dataLabels&&O.options.dataLabels.distance,Q);this.maxLabelDistance=Math.max(this.maxLabelDistance||0,O.labelDistance);C=r+L*P;if(!I||O.visible){L+=O.percentage/100}B=r+L*P;O.shapeType="arc";O.shapeArgs={x:N[0],y:N[1],r:N[2]/2,innerR:N[3]/2,start:Math.round(1000*C)/1000,end:Math.round(1000*B)/1000};A=(B+C)/2;A>1.5*Math.PI?A-=2*Math.PI:A<-Math.PI/2&&(A+=2*Math.PI);O.slicedTranslation={translateX:Math.round(Math.cos(A)*G),translateY:Math.round(Math.sin(A)*G)};B=Math.cos(A)*N[2]/2;M=Math.sin(A)*N[2]/2;O.tooltipPos=[N[0]+0.7*B,N[1]+0.7*M];O.half=A<-Math.PI/2||A>Math.PI/2?1:0;O.angle=A;C=Math.min(F,O.labelDistance/5);O.labelPos=[N[0]+B+Math.cos(A)*O.labelDistance,N[1]+M+Math.sin(A)*O.labelDistance,N[0]+B+Math.cos(A)*C,N[1]+M+Math.sin(A)*C,N[0]+B,N[1]+M,0>O.labelDistance?"center":O.half?"right":"left",A]}},drawGraph:null,drawPoints:function(){var n=this,C=n.chart.renderer,B,A,v,r,l=n.options.shadow;l&&!n.shadowGroup&&(n.shadowGroup=C.g("shadow").add(n.group));z(n.points,function(d){A=d.graphic;if(d.isNull){A&&(d.graphic=A.destroy())}else{r=d.shapeArgs;B=d.getTranslate();var e=d.shadowGroup;l&&!e&&(e=d.shadowGroup=C.g("shadow").add(n.shadowGroup));e&&e.attr(B);v=n.pointAttribs(d,d.selected&&"select");A?A.setRadialReference(n.center).attr(v).animate(p(r,B)):(d.graphic=A=C[d.shapeType](r).setRadialReference(n.center).attr(B).add(n.group),d.visible||A.attr({visibility:"hidden"}),A.attr(v).attr({"stroke-linejoin":"round"}).shadow(l,e));A.addClass(d.getClassName())}})},searchPoint:o,sortByAngle:function(d,e){d.sort(function(h,f){return void 0!==h.angle&&(f.angle-h.angle)*e})},drawLegendSymbol:w.LegendSymbolMixin.drawRectangle,getCenter:i.getCenter,getSymbol:o},{init:function(){x.prototype.init.apply(this,arguments);var d=this,e;d.name=g(d.name,"Slice");e=function(f){d.slice("select"===f.type)};j(d,"select",e);j(d,"unselect",e);return d},isValid:function(){return w.isNumber(this.y,!0)&&0<=this.y},setVisible:function(l,v){var h=this,r=h.series,n=r.chart,m=r.options.ignoreHiddenPoint;v=g(v,m);l!==h.visible&&(h.visible=h.options.visible=l=void 0===l?!h.visible:l,r.options.data[q(h,r.data)]=h.options,z(["graphic","dataLabel","connector","shadowGroup"],function(d){if(h[d]){h[d][l?"show":"hide"](!0)}}),h.legendItem&&n.legend.colorizeItem(h,l),l||"hover"!==h.state||h.setState(""),m&&(r.isDirty=!0),v&&n.redraw())},slice:function(f,l,h){var e=this.series;k(h,e.chart);g(l,!0);this.sliced=this.options.sliced=y(f)?f:!this.sliced;e.options.data[q(this,e.data)]=this.options;this.graphic.animate(this.getTranslate());this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(e){var d=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(d.x,d.y,d.r+e,d.r+e,{innerR:this.shapeArgs.r,start:d.start,end:d.end})}})})(c);(function(x){var j=x.addEvent,i=x.arrayMax,z=x.defined,C=x.each,p=x.extend,s=x.format,q=x.map,o=x.merge,g=x.noop,y=x.pick,u=x.relativeLength,t=x.Series,k=x.seriesTypes,w=x.stableSort;x.distribute=function(v,D){function F(e,d){return e.target-d.target}var B,A=!0,r=v,h=[],E;E=0;for(B=v.length;B--;){E+=v[B].size}if(E>D){w(v,function(e,d){return(d.rank||0)-(e.rank||0)});for(E=B=0;E<=D;){E+=v[B].size,B++}h=v.splice(B-1,v.length)}w(v,F);for(v=q(v,function(d){return{size:d.size,targets:[d.target]}});A;){for(B=v.length;B--;){A=v[B],E=(Math.min.apply(0,A.targets)+Math.max.apply(0,A.targets))/2,A.pos=Math.min(Math.max(0,E-A.size/2),D-A.size)}B=v.length;for(A=!1;B--;){0<B&&v[B-1].pos+v[B-1].size>v[B].pos&&(v[B-1].size+=v[B].size,v[B-1].targets=v[B-1].targets.concat(v[B].targets),v[B-1].pos+v[B-1].size>D&&(v[B-1].pos=D-v[B-1].size),v.splice(B,1),A=!0)}}B=0;C(v,function(e){var d=0;C(e.targets,function(){r[B].pos=e.pos+d;d+=r[B].size;B++})});r.push.apply(r,h);w(r,F)};t.prototype.drawDataLabels=function(){var H=this,E=H.options,D=E.dataLabels,B=H.points,A,v,G=H.hasRendered||0,f,m,F=y(D.defer,!!E.animation),I=H.chart.renderer;if(D.enabled||H._hasPointLabels){H.dlProcessOptions&&H.dlProcessOptions(D),m=H.plotGroup("dataLabelsGroup","data-labels",F&&!G?"hidden":"visible",D.zIndex||6),F&&(m.attr({opacity:+G}),G||j(H,"afterAnimate",function(){H.visible&&m.show(!0);m[E.animation?"animate":"attr"]({opacity:1},{duration:200})})),v=D,C(B,function(L){var e,n=L.dataLabel,J,r,l=L.connector,K=!n,d;A=L.dlOptions||L.options&&L.options.dataLabels;if(e=y(A&&A.enabled,v.enabled)&&!L.isNull){D=o(v,A),J=L.getLabelConfig(),d=D[L.formatPrefix+"Format"]||D.format,f=z(d)?s(d,J):D.formatter.call(J,D),d=D.style,J=D.rotation,d.color=y(D.color,d.color,H.color,"#000000"),"contrast"===d.color&&(L.contrastColor=I.getContrast(L.color||H.color),d.color=D.inside||0>y(L.labelDistance,D.distance)||E.stacking?L.contrastColor:"#000000"),E.cursor&&(d.cursor=E.cursor),r={fill:D.backgroundColor,stroke:D.borderColor,"stroke-width":D.borderWidth,r:D.borderRadius||0,rotation:J,padding:D.padding,zIndex:1},x.objectEach(r,function(M,h){void 0===M&&delete r[h]})}!n||e&&z(f)?e&&z(f)&&(n?r.text=f:(n=L.dataLabel=I[J?"text":"label"](f,0,-9999,D.shape,null,null,D.useHTML,null,"data-label"),n.addClass("highcharts-data-label-color-"+L.colorIndex+" "+(D.className||"")+(D.useHTML?"highcharts-tracker":""))),n.attr(r),n.css(d).shadow(D.shadow),n.added||n.add(m),H.alignDataLabel(L,n,D,null,K)):(L.dataLabel=n=n.destroy(),l&&(L.connector=l.destroy()))})}};t.prototype.alignDataLabel=function(L,K,I,H,G){var J=this.chart,E=J.inverted,F=y(L.plotX,-9999),D=y(L.plotY,-9999),A=K.getBBox(),B,N=I.rotation,M=I.align,l=this.visible&&(L.series.forceDL||J.isInsidePlot(F,Math.round(D),E)||H&&J.isInsidePlot(F,E?H.x+1:H.y+H.height-1,E)),v="justify"===y(I.overflow,"justify");if(l&&(B=I.style.fontSize,B=J.renderer.fontMetrics(B,K).b,H=p({x:E?this.yAxis.len-D:F,y:Math.round(E?this.xAxis.len-F:D),width:0,height:0},H),p(I,{width:A.width,height:A.height}),N?(v=!1,F=J.renderer.rotCorr(B,N),F={x:H.x+I.x+H.width/2+F.x,y:H.y+I.y+{top:0,middle:0.5,bottom:1}[I.verticalAlign]*H.height},K[G?"attr":"animate"](F).attr({align:M}),D=(N+720)%360,D=180<D&&360>D,"left"===M?F.y-=D?A.height:0:"center"===M?(F.x-=A.width/2,F.y-=A.height/2):"right"===M&&(F.x-=A.width,F.y-=D?0:A.height)):(K.align(I,null,H),F=K.alignAttr),v?L.isLabelJustified=this.justifyDataLabel(K,I,F,A,H,G):y(I.crop,!0)&&(l=J.isInsidePlot(F.x,F.y)&&J.isInsidePlot(F.x+A.width,F.y+A.height)),I.shape&&!N)){K[G?"attr":"animate"]({anchorX:E?J.plotWidth-L.plotY:L.plotX,anchorY:E?J.plotHeight-L.plotX:L.plotY})}l||(K.attr({y:-9999}),K.placed=!1)};t.prototype.justifyDataLabel=function(K,J,H,G,F,E){var I=this.chart,D=J.align,B=J.verticalAlign,A,r,v=K.box?0:K.padding||0;A=H.x+v;0>A&&("right"===D?J.align="left":J.x=-A,r=!0);A=H.x+G.width-v;A>I.plotWidth&&("left"===D?J.align="right":J.x=I.plotWidth-A,r=!0);A=H.y+v;0>A&&("bottom"===B?J.verticalAlign="top":J.y=-A,r=!0);A=H.y+G.height-v;A>I.plotHeight&&("top"===B?J.verticalAlign="bottom":J.y=I.plotHeight-A,r=!0);r&&(K.placed=!E,K.align(J,null,F));return r};k.pie&&(k.pie.prototype.drawDataLabels=function(){var ae=this,ad=ae.data,ac,aa=ae.chart,Z=ae.options.dataLabels,Y=y(Z.connectorPadding,10),X=y(Z.connectorWidth,1),U=aa.plotWidth,V=aa.plotHeight,I,W=ae.center,S=W[2]/2,T=W[1],R,K,ab,Q,e=[[],[]],F,v,G,B,J=[0,0,0,0];ae.visible&&(Z.enabled||ae._hasPointLabels)&&(C(ad,function(d){d.dataLabel&&d.visible&&d.dataLabel.shortened&&(d.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),d.dataLabel.shortened=!1)}),t.prototype.drawDataLabels.apply(ae),C(ad,function(d){d.dataLabel&&d.visible&&(e[d.half].push(d),d.dataLabel._pos=null)}),C(e,function(D,m){var l,f,h=D.length,A=[],r;if(h){for(ae.sortByAngle(D,m-0.5),0<ae.maxLabelDistance&&(l=Math.max(0,T-S-ae.maxLabelDistance),f=Math.min(T+S+ae.maxLabelDistance,aa.plotHeight),C(D,function(d){0<d.labelDistance&&d.dataLabel&&(d.top=Math.max(0,T-S-d.labelDistance),d.bottom=Math.min(T+S+d.labelDistance,aa.plotHeight),r=d.dataLabel.getBBox().height||21,d.positionsIndex=A.push({target:d.labelPos[1]-d.top+r/2,size:r,rank:d.y})-1)}),x.distribute(A,f+r-l)),B=0;B<h;B++){ac=D[B],f=ac.positionsIndex,ab=ac.labelPos,R=ac.dataLabel,G=!1===ac.visible?"hidden":"inherit",v=l=ab[1],A&&z(A[f])&&(void 0===A[f].pos?G="hidden":(Q=A[f].size,v=ac.top+A[f].pos)),delete ac.positionIndex,F=Z.justify?W[0]+(m?-1:1)*(S+ac.labelDistance):ae.getX(v<ac.top+2||v>ac.bottom-2?l:v,m,ac),R._attr={visibility:G,align:ab[6]},R._pos={x:F+Z.x+({left:Y,right:-Y}[ab[6]]||0),y:v+Z.y-10},ab.x=F,ab.y=v,y(Z.crop,!0)&&(K=R.getBBox().width,l=null,F-K<Y?(l=Math.round(K-F+Y),J[3]=Math.max(l,J[3])):F+K>U-Y&&(l=Math.round(F+K-U+Y),J[1]=Math.max(l,J[1])),0>v-Q/2?J[0]=Math.max(Math.round(-v+Q/2),J[0]):v+Q/2>V&&(J[2]=Math.max(Math.round(v+Q/2-V),J[2])),R.sideOverflow=l)}}}),0===i(J)||this.verifyDataLabelOverflow(J))&&(this.placeDataLabels(),X&&C(this.points,function(d){var f;I=d.connector;if((R=d.dataLabel)&&R._pos&&d.visible&&0<d.labelDistance){G=R._attr.visibility;if(f=!I){d.connector=I=aa.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+d.colorIndex).add(ae.dataLabelsGroup),I.attr({"stroke-width":X,stroke:Z.connectorColor||d.color||"#666666"})}I[f?"attr":"animate"]({d:ae.connectorPath(d.labelPos)});I.attr("visibility",G)}else{I&&(d.connector=I.destroy())}}))},k.pie.prototype.connectorPath=function(e){var d=e.x,f=e.y;return y(this.options.dataLabels.softConnector,!0)?["M",d+("left"===e[6]?5:-5),f,"C",d,f,2*e[2]-e[4],2*e[3]-e[5],e[2],e[3],"L",e[4],e[5]]:["M",d+("left"===e[6]?5:-5),f,"L",e[2],e[3],"L",e[4],e[5]]},k.pie.prototype.placeDataLabels=function(){C(this.points,function(e){var d=e.dataLabel;d&&e.visible&&((e=d._pos)?(d.sideOverflow&&(d._attr.width=d.getBBox().width-d.sideOverflow,d.css({width:d._attr.width+"px",textOverflow:"ellipsis"}),d.shortened=!0),d.attr(d._attr),d[d.moved?"animate":"attr"](e),d.moved=!0):d&&d.attr({y:-9999}))},this)},k.pie.prototype.alignDataLabel=g,k.pie.prototype.verifyDataLabelOverflow=function(n){var d=this.center,B=this.options,A=B.center,v=B.minSize||80,r,m=null!==B.size;m||(null!==A[0]?r=Math.max(d[2]-Math.max(n[1],n[3]),v):(r=Math.max(d[2]-n[1]-n[3],v),d[0]+=(n[3]-n[1])/2),null!==A[1]?r=Math.max(Math.min(r,d[2]-Math.max(n[0],n[2])),v):(r=Math.max(Math.min(r,d[2]-n[0]-n[2]),v),d[1]+=(n[0]-n[2])/2),r<d[2]?(d[2]=r,d[3]=Math.min(u(B.innerSize||0,r),r),this.translate(d),this.drawDataLabels&&this.drawDataLabels()):m=!0);return m});k.column&&(k.column.prototype.alignDataLabel=function(G,F,D,B,A){var E=this.chart.inverted,v=G.series,r=G.dlBox||G.shapeArgs,m=y(G.below,G.plotY>y(this.translatedThreshold,v.yAxis.len)),e=y(D.inside,!!this.options.stacking);r&&(B=o(r),0>B.y&&(B.height+=B.y,B.y=0),r=B.y+B.height-v.yAxis.len,0<r&&(B.height-=r),E&&(B={x:v.yAxis.len-B.y-B.height,y:v.xAxis.len-B.x-B.width,width:B.height,height:B.width}),e||(E?(B.x+=m?0:B.width,B.width=0):(B.y+=m?B.height:0,B.height=0)));D.align=y(D.align,!E||e?"center":m?"right":"left");D.verticalAlign=y(D.verticalAlign,E||e?"middle":m?"top":"bottom");t.prototype.alignDataLabel.call(this,G,F,D,B,A);G.isLabelJustified&&G.contrastColor&&G.dataLabel.css({color:G.contrastColor})})})(c);(function(f){var d=f.Chart,i=f.each,g=f.objectEach,h=f.pick,e=f.addEvent;d.prototype.callbacks.push(function(j){e(j,"render",function(){var k=[];i(j.labelCollectors||[],function(l){k=k.concat(l())});i(j.yAxis||[],function(l){l.options.stackLabels&&!l.options.stackLabels.allowOverlap&&g(l.stacks,function(m){g(m,function(n){k.push(n.label)})})});i(j.series||[],function(n){var o=n.options.dataLabels,m=n.dataLabelCollections||["dataLabel"];(o.enabled||n._hasPointLabels)&&!o.allowOverlap&&n.visible&&i(m,function(l){i(n.points,function(p){p[l]&&(p[l].labelrank=h(p.labelrank,p.shapeArgs&&p.shapeArgs.height),k.push(p[l]))})})});j.hideOverlappingLabels(k)})});d.prototype.hideOverlappingLabels=function(y){var q=y.length,o,j,A,t,s,m,x,u,z,p=function(n,l,D,C,B,w,v,r){return !(B>n+D||B+v<n||w>l+C||w+r<l)};for(j=0;j<q;j++){if(o=y[j]){o.oldOpacity=o.opacity,o.newOpacity=1,o.width||(A=o.getBBox(),o.width=A.width,o.height=A.height)}}y.sort(function(l,k){return(k.labelrank||0)-(l.labelrank||0)});for(j=0;j<q;j++){for(A=y[j],o=j+1;o<q;++o){if(t=y[o],A&&t&&A!==t&&A.placed&&t.placed&&0!==A.newOpacity&&0!==t.newOpacity&&(s=A.alignAttr,m=t.alignAttr,x=A.parentGroup,u=t.parentGroup,z=2*(A.box?0:A.padding||0),s=p(s.x+x.translateX,s.y+x.translateY,A.width-z,A.height-z,m.x+u.translateX,m.y+u.translateY,t.width-z,t.height-z))){(A.labelrank<t.labelrank?A:t).newOpacity=0}}}i(y,function(l){var k,n;l&&(n=l.newOpacity,l.oldOpacity!==n&&l.placed&&(n?l.show(!0):k=function(){l.hide()},l.alignAttr.opacity=n,l[l.isOld?"animate":"attr"](l.alignAttr,null,k)),l.isOld=!0)})}})(c);(function(P){var y=P.addEvent,u=P.Chart,j=P.createElement,q=P.css,E=P.defaultOptions,K=P.defaultPlotOptions,J=P.each,D=P.extend,t=P.fireEvent,o=P.hasTouch,M=P.inArray,L=P.isObject,z=P.Legend,O=P.merge,N=P.pick,i=P.Point,H=P.Series,x=P.seriesTypes,s=P.svg,g;g=P.TrackerMixin={drawTrackerPoint:function(){var e=this,d=e.chart.pointer,f=function(h){var k=d.getPointFromEvent(h);void 0!==k&&(d.isDirectTouch=!0,k.onMouseOver(h))};J(e.points,function(h){h.graphic&&(h.graphic.element.point=h);h.dataLabel&&(h.dataLabel.div?h.dataLabel.div.point=h:h.dataLabel.element.point=h)});e._hasTracking||(J(e.trackerGroups,function(h){if(e[h]){e[h].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(k){d.onTrackerMouseOut(k)});if(o){e[h].on("touchstart",f)}e.options.cursor&&e[h].css(q).css({cursor:e.options.cursor})}}),e._hasTracking=!0)},drawTrackerGraph:function(){var T=this,S=T.options,R=S.trackByArea,Q=[].concat(R?T.areaPath:T.graphPath),I=Q.length,G=T.chart,C=G.pointer,B=G.renderer,w=G.options.tooltip.snap,F=T.tracker,A,v=function(){if(G.hoverSeries!==T){T.onMouseOver()}},h="rgba(192,192,192,"+(s?0.0001:0.002)+")";if(I&&!R){for(A=I+1;A--;){"M"===Q[A]&&Q.splice(A+1,0,Q[A+1]-w,Q[A+2],"L"),(A&&"M"===Q[A]||A===I)&&Q.splice(A,0,"L",Q[A-2]+w,Q[A-1])}}F?F.attr({d:Q}):T.graph&&(T.tracker=B.path(Q).attr({"stroke-linejoin":"round",visibility:T.visible?"visible":"hidden",stroke:h,fill:R?h:"none","stroke-width":T.graph.strokeWidth()+(R?0:2*w),zIndex:2}).add(T.group),J([T.tracker,T.markerGroup],function(d){d.addClass("highcharts-tracker").on("mouseover",v).on("mouseout",function(e){C.onTrackerMouseOut(e)});S.cursor&&d.css({cursor:S.cursor});if(o){d.on("touchstart",v)}}))}};x.column&&(x.column.prototype.drawTracker=g.drawTrackerPoint);x.pie&&(x.pie.prototype.drawTracker=g.drawTrackerPoint);x.scatter&&(x.scatter.prototype.drawTracker=g.drawTrackerPoint);D(z.prototype,{setItemEvents:function(k,r,p){var n=this,m=n.chart.renderer.boxWrapper,l="highcharts-legend-"+(k.series?"point":"series")+"-active";(p?r:k.legendGroup).on("mouseover",function(){k.setState("hover");m.addClass(l);r.css(n.options.itemHoverStyle)}).on("mouseout",function(){r.css(O(k.visible?n.itemStyle:n.itemHiddenStyle));m.removeClass(l);k.setState()}).on("click",function(d){var e=function(){k.setVisible&&k.setVisible()};d={browserEvent:d};k.firePointEvent?k.firePointEvent("legendItemClick",d,e):t(k,"legendItemClick",d,e)})},createCheckboxForItem:function(d){d.checkbox=j("input",{type:"checkbox",checked:d.selected,defaultChecked:d.selected},this.options.itemCheckboxStyle,this.chart.container);y(d.checkbox,"click",function(e){t(d.series||d,"checkboxClick",{checked:e.target.checked,item:d},function(){d.select()})})}});E.legend.itemStyle.cursor="pointer";D(u.prototype,{showResetZoom:function(){var k=this,h=E.lang,p=k.options.chart.resetZoomButton,n=p.theme,m=n.states,l="chart"===p.relativeTo?null:"plotBox";this.resetZoomButton=k.renderer.button(h.resetZoom,null,null,function(){k.zoomOut()},n,m&&m.hover).attr({align:p.position.align,title:h.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(p.position,!1,l)},zoomOut:function(){var d=this;t(d,"selection",{resetSelection:!0},function(){d.zoom()})},zoom:function(h){var e,n=this.pointer,m=!1,l;!h||h.resetSelection?(J(this.axes,function(d){e=d.zoom()}),n.initiated=!1):J(h.xAxis.concat(h.yAxis),function(d){var f=d.axis;n[f.isXAxis?"zoomX":"zoomY"]&&(e=f.zoom(d.min,d.max),f.displayBtn&&(m=!0))});l=this.resetZoomButton;m&&!l?this.showResetZoom():!m&&L(l)&&(this.resetZoomButton=l.destroy());e&&this.redraw(N(this.options.chart.animation,h&&h.animation,100>this.pointCount))},pan:function(h,f){var m=this,l=m.hoverPoints,k;l&&J(l,function(d){d.setState()});J("xy"===f?[1,0]:[1],function(F){F=m[F?"xAxis":"yAxis"][0];var C=F.horiz,B=h[C?"chartX":"chartY"],C=C?"mouseDownX":"mouseDownY",w=m[C],A=(F.pointRange||0)/2,v=F.getExtremes(),r=F.toValue(w-B,!0)+A,A=F.toValue(w+F.len-B,!0)-A,p=A<r,w=p?A:r,r=p?r:A,A=Math.min(v.dataMin,F.toValue(F.toPixels(v.min)-F.minPixelPadding)),p=Math.max(v.dataMax,F.toValue(F.toPixels(v.max)+F.minPixelPadding)),e;e=A-w;0<e&&(r+=e,w=A);e=r-p;0<e&&(r=p,w-=e);F.series.length&&w!==v.min&&r!==v.max&&(F.setExtremes(w,r,!1,!1,{trigger:"pan"}),k=!0);m[C]=B});k&&m.redraw(!1);q(m.container,{cursor:"move"})}});D(i.prototype,{select:function(h,d){var n=this,m=n.series,l=m.chart;h=N(h,!n.selected);n.firePointEvent(h?"select":"unselect",{accumulate:d},function(){n.selected=n.options.selected=h;m.options.data[M(n,m.data)]=n.options;n.setState(h&&"select");d||J(l.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,m.options.data[M(e,m.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var d=this.series.chart,f=d.pointer;e=e?f.normalize(e):f.getChartCoordinatesFromPoint(this,d.inverted);f.runPointActions(e,this)},onMouseOut:function(){var d=this.series.chart;this.firePointEvent("mouseOut");J(d.hoverPoints||[],function(e){e.setState()});d.hoverPoints=d.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var f=this,e=O(f.series.options.point,f.options).events;f.events=e;P.objectEach(e,function(h,d){y(f,d,h)});this.hasImportedEvents=!0}},setState:function(X,W){var U=Math.floor(this.plotX),T=this.plotY,R=this.series,Q=R.options.states[X]||{},I=K[R.type].marker&&R.options.marker,G=I&&!1===I.enabled,C=I&&I.states&&I.states[X]||{},S=!1===C.enabled,f=R.stateMarkerGraphic,Z=this.marker||{},Y=R.chart,V=R.halo,F,m=I&&R.markerAttribs;X=X||"";if(!(X===this.state&&!W||this.selected&&"select"!==X||!1===Q.enabled||X&&(S||G&&!1===C.enabled)||X&&Z.states&&Z.states[X]&&!1===Z.states[X].enabled)){m&&(F=R.markerAttribs(this,X));if(this.graphic){this.state&&this.graphic.removeClass("highcharts-point-"+this.state),X&&this.graphic.addClass("highcharts-point-"+X),this.graphic.animate(R.pointAttribs(this,X),N(Y.options.chart.animation,Q.animation)),F&&this.graphic.animate(F,N(Y.options.chart.animation,C.animation,I.animation)),f&&f.hide()}else{if(X&&C){I=Z.symbol||R.symbol;f&&f.currentSymbol!==I&&(f=f.destroy());if(f){f[W?"animate":"attr"]({x:F.x,y:F.y})}else{I&&(R.stateMarkerGraphic=f=Y.renderer.symbol(I,F.x,F.y,F.width,F.height).add(R.markerGroup),f.currentSymbol=I)}f&&f.attr(R.pointAttribs(this,X))}f&&(f[X&&Y.isInsidePlot(U,T,Y.inverted)?"show":"hide"](),f.element.point=this)}(U=Q.halo)&&U.size?(V||(R.halo=V=Y.renderer.path().add((this.graphic||f).parentGroup)),V[W?"animate":"attr"]({d:this.haloPath(U.size)}),V.attr({"class":"highcharts-halo highcharts-color-"+N(this.colorIndex,R.colorIndex)}),V.point=this,V.attr(D({fill:this.color||R.color,"fill-opacity":U.opacity,zIndex:-1},U.attributes))):V&&V.point&&V.point.haloPath&&V.animate({d:V.point.haloPath(0)});this.state=X}},haloPath:function(d){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-d,this.plotY-d,2*d,2*d)}});D(H.prototype,{onMouseOver:function(){var e=this.chart,d=e.hoverSeries;if(d&&d!==this){d.onMouseOut()}this.options.events.mouseOver&&t(this,"mouseOver");this.setState("hover");e.hoverSeries=this},onMouseOut:function(){var f=this.options,e=this.chart,k=e.tooltip,h=e.hoverPoint;e.hoverSeries=null;if(h){h.onMouseOut()}this&&f.events.mouseOut&&t(this,"mouseOut");!k||this.stickyTracking||k.shared&&!this.noSharedTooltip||k.hide();this.setState()},setState:function(l){var h=this,r=h.options,p=h.graph,n=r.states,m=r.lineWidth,r=0;l=l||"";if(h.state!==l&&(J([h.group,h.markerGroup,h.dataLabelsGroup],function(d){d&&(h.state&&d.removeClass("highcharts-series-"+h.state),l&&d.addClass("highcharts-series-"+l))}),h.state=l,!n[l]||!1!==n[l].enabled)&&(l&&(m=n[l].lineWidth||m+(n[l].lineWidthPlus||0)),p&&!p.dashstyle)){for(m={"stroke-width":m},p.animate(m,N(h.chart.options.chart.animation,n[l]&&n[l].animation));h["zone-graph-"+r];){h["zone-graph-"+r].attr(m),r+=1}}},setVisible:function(n,h){var A=this,w=A.chart,v=A.legendItem,r,p=w.options.chart.ignoreHiddenSeries,m=A.visible;r=(A.visible=n=A.options.visible=A.userOptions.visible=void 0===n?!m:n)?"show":"hide";J(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(d){if(A[d]){A[d][r]()}});if(w.hoverSeries===A||(w.hoverPoint&&w.hoverPoint.series)===A){A.onMouseOut()}v&&w.legend.colorizeItem(A,n);A.isDirty=!0;A.options.stacking&&J(w.series,function(d){d.options.stacking&&d.visible&&(d.isDirty=!0)});J(A.linkedSeries,function(d){d.setVisible(n,!1)});p&&(w.isDirtyBox=!0);!1!==h&&w.redraw();t(A,r)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(d){this.selected=d=void 0===d?!this.selected:d;this.checkbox&&(this.checkbox.checked=d);t(this,d?"select":"unselect")},drawTracker:g.drawTrackerGraph})})(c);(function(g){var d=g.Chart,n=g.each,j=g.inArray,k=g.isArray,e=g.isObject,m=g.pick,i=g.splat;d.prototype.setResponsive=function(q){var p=this.options.responsive,o=[],s=this.currentResponsive;p&&p.rules&&n(p.rules,function(f){void 0===f._id&&(f._id=g.uniqueKey());this.matchResponsiveRule(f,o,q)},this);var r=g.merge.apply(0,g.map(o,function(f){return g.find(p.rules,function(h){return h._id===f}).chartOptions})),o=o.toString()||void 0;o!==(s&&s.ruleIds)&&(s&&this.update(s.undoOptions,q),o?(this.currentResponsive={ruleIds:o,mergedOptions:r,undoOptions:this.currentOptions(r)},this.update(r,q)):this.currentResponsive=void 0)};d.prototype.matchResponsiveRule=function(o,p){var f=o.condition;(f.callback||function(){return this.chartWidth<=m(f.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=m(f.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=m(f.minWidth,0)&&this.chartHeight>=m(f.minHeight,0)}).call(this)&&p.push(o._id)};d.prototype.currentOptions=function(o){function h(s,r,q,p){var t;g.objectEach(s,function(f,u){if(!p&&-1<j(u,["series","xAxis","yAxis"])){for(s[u]=i(s[u]),q[u]=[],t=0;t<s[u].length;t++){r[u][t]&&(q[u][t]={},h(f[t],r[u][t],q[u][t],p+1))}}else{e(f)?(q[u]=k(f)?[]:{},h(f,r[u]||{},q[u],p+1)):q[u]=r[u]||null}})}var l={};h(o,this.options,l,0);return l}})(c);return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-highcharts', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/highcharts/modules/series-label.js' */
(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(f){function m(s,p,q,n,t,r){s=(r-p)*(q-s)-(n-p)*(t-s);return 0<s?!0:0>s?!1:!0}function k(u,p,q,n,v,t,s,r){return m(u,p,v,t,s,r)!==m(q,n,v,t,s,r)&&m(u,p,q,n,v,t)!==m(u,p,q,n,s,r)}function d(u,p,q,n,v,t,s,r){return k(u,p,u+q,p,v,t,s,r)||k(u+q,p,u+q,p+n,v,t,s,r)||k(u,p+n,u+q,p+n,v,t,s,r)||k(u,p,u,p+n,v,t,s,r)}function c(r){var p=this,q=Math.max(f.animObject(p.renderer.globalAnimation).duration,250),n=!p.hasRendered;r.apply(p,[].slice.call(arguments,1));p.labelSeries=[];p.labelSeriesMaxSum=0;clearTimeout(p.seriesLabelTimer);j(p.series,function(v){var t=v.options.label,u=v.labelBySeries,s=u&&u.closest;t.enabled&&v.visible&&(v.graph||v.area)&&(p.labelSeries.push(v),t.minFontSize&&t.maxFontSize&&(v.sum=f.reduce(v.yData,function(x,w){return(x||0)+(w||0)},0),p.labelSeriesMaxSum=Math.max(p.labelSeriesMaxSum,v.sum)),n&&(q=Math.max(q,f.animObject(v.options.animation).duration)),s&&(void 0!==s[0].plotX?u.animate({x:s[0].plotX+s[1],y:s[0].plotY+s[2]}):u.attr({opacity:0})))});p.seriesLabelTimer=f.syncTimeout(function(){p.drawSeriesLabels()},p.renderer.forExport?0:q)}var b=f.wrap,j=f.each,o=f.extend,h=f.isNumber,i=f.pick,g=f.Series,l=f.SVGRenderer,e=f.Chart;f.setOptions({plotOptions:{series:{label:{enabled:!0,connectorAllowed:!0,connectorNeighbourDistance:24,minFontSize:null,maxFontSize:null,onArea:null,style:{fontWeight:"bold"},boxesToAvoid:[]}}}});l.prototype.symbols.connector=function(t,v,w,n,u){var s=u&&u.anchorX;u=u&&u.anchorY;var r,p,q=w/2;h(s)&&h(u)&&(r=["M",s,u],p=v-u,0>p&&(p=-n-p),p<w&&(q=s<t+w/2?p:w-p),u>v+n?r.push("L",t+q,v+n):u<v?r.push("L",t+q,v):s<t?r.push("L",t,v+n/2):s>t+w&&r.push("L",t+w,v+n/2));return r||[]};g.prototype.getPointsOnGraph=function(){if(this.xAxis||this.yAxis){var y=this.points,A,B,s=[],z,x,w,t;x=this.graph||this.area;w=x.element;var v=this.chart.inverted,p=this.xAxis;A=this.yAxis;var n=v?A.pos:p.pos,v=v?p.pos:A.pos,p=i(this.options.label.onArea,!!this.area),C=A.getThreshold(this.options.threshold);if(this.getPointSpline&&w.getPointAtLength&&!p){x.toD&&(B=x.attr("d"),x.attr({d:x.toD}));t=w.getTotalLength();for(z=0;z<t;z+=16){A=w.getPointAtLength(z),s.push({chartX:n+A.x,chartY:v+A.y,plotX:A.x,plotY:A.y})}B&&x.attr({d:B});A=y[y.length-1];A.chartX=n+A.plotX;A.chartY=v+A.plotY;s.push(A)}else{for(t=y.length,z=0;z<t;z+=1){A=y[z];B=y[z-1];A.chartX=n+A.plotX;A.chartY=v+A.plotY;p&&(A.chartCenterY=v+(A.plotY+i(A.yBottom,C))/2);if(0<z&&(x=Math.abs(A.chartX-B.chartX),w=Math.abs(A.chartY-B.chartY),x=Math.max(x,w),16<x)){for(x=Math.ceil(x/16),w=1;w<x;w+=1){s.push({chartX:B.chartX+w/x*(A.chartX-B.chartX),chartY:B.chartY+w/x*(A.chartY-B.chartY),chartCenterY:B.chartCenterY+w/x*(A.chartCenterY-B.chartCenterY),plotX:B.plotX+w/x*(A.plotX-B.plotX),plotY:B.plotY+w/x*(A.plotY-B.plotY)})}}h(A.plotY)&&s.push(A)}}return s}};g.prototype.labelFontSize=function(p,n){return p+this.sum/this.chart.labelSeriesMaxSum*(n-p)+"px"};g.prototype.checkClearPoint=function(F,H,I,y){var G=Number.MAX_VALUE,E=Number.MAX_VALUE,D,B,C=this.options.label.connectorAllowed,v=i(this.options.label.onArea,!!this.area),s=this.chart,J,A,x,K,w,z;for(w=0;w<s.boxesToAvoid.length;w+=1){if(A=s.boxesToAvoid[w],z=F+I.width,J=H,x=H+I.height,!(F>A.right||z<A.left||J>A.bottom||x<A.top)){return !1}}for(w=0;w<s.series.length;w+=1){if(J=s.series[w],A=J.interpolatedPoints,J.visible&&A){for(z=1;z<A.length;z+=1){if(A[z].chartX>=F-16&&A[z-1].chartX<=F+I.width+16){if(d(F,H,I.width,I.height,A[z-1].chartX,A[z-1].chartY,A[z].chartX,A[z].chartY)){return !1}this===J&&!D&&y&&(D=d(F-16,H-16,I.width+32,I.height+32,A[z-1].chartX,A[z-1].chartY,A[z].chartX,A[z].chartY))}!C&&!D||this===J&&!v||(x=F+I.width/2-A[z].chartX,K=H+I.height/2-A[z].chartY,G=Math.min(G,x*x+K*K))}if(!v&&C&&this===J&&(y&&!D||G<Math.pow(this.options.label.connectorNeighbourDistance,2))){for(z=1;z<A.length;z+=1){D=Math.min(Math.pow(F+I.width/2-A[z].chartX,2)+Math.pow(H+I.height/2-A[z].chartY,2),Math.pow(F-A[z].chartX,2)+Math.pow(H-A[z].chartY,2),Math.pow(F+I.width-A[z].chartX,2)+Math.pow(H-A[z].chartY,2),Math.pow(F+I.width-A[z].chartX,2)+Math.pow(H+I.height-A[z].chartY,2),Math.pow(F-A[z].chartX,2)+Math.pow(H+I.height-A[z].chartY,2)),D<E&&(E=D,B=A[z])}D=!0}}}return !y||D?{x:F,y:H,weight:G-(B?E:0),connectorPoint:B}:!1};e.prototype.drawSeriesLabels=function(){var p=this,n=this.labelSeries;p.boxesToAvoid=[];j(n,function(q){q.interpolatedPoints=q.getPointsOnGraph();j(q.options.label.boxesToAvoid||[],function(r){p.boxesToAvoid.push(r)})});j(p.series,function(G){function F(r,q,t){return r>x&&r<=x+I-t.width&&q>=z&&q<=z+H-t.height}if(G.xAxis||G.yAxis){var E,D,C,A=[],B,u;E=G.options.label;var s=p.inverted,x=s?G.yAxis.pos:G.xAxis.pos,z=s?G.xAxis.pos:G.yAxis.pos,I=p.inverted?G.yAxis.len:G.xAxis.len,H=p.inverted?G.xAxis.len:G.yAxis.len,w=G.interpolatedPoints,y=i(E.onArea,!!G.area),s=G.labelBySeries;D=E.minFontSize;E=E.maxFontSize;if(G.visible&&w){s||(G.labelBySeries=s=p.renderer.label(G.name,0,-9999,"connector").css(o({color:y?p.renderer.getContrast(G.color):G.color},G.options.label.style)),D&&E&&s.css({fontSize:G.labelFontSize(D,E)}),s.attr({padding:0,opacity:p.renderer.forExport?1:0,stroke:G.color,"stroke-width":1,zIndex:3}).add(G.group).animate({opacity:1},{duration:200}));E=s.getBBox();E.width=Math.round(E.width);for(u=w.length-1;0<u;--u){y?(D=w[u].chartX-E.width/2,C=w[u].chartCenterY-E.height/2):(D=w[u].chartX+3,C=w[u].chartY-E.height-3,F(D,C,E)&&(B=G.checkClearPoint(D,C,E)),B&&A.push(B),D=w[u].chartX+3,C=w[u].chartY+3,F(D,C,E)&&(B=G.checkClearPoint(D,C,E)),B&&A.push(B),D=w[u].chartX-E.width-3,C=w[u].chartY+3,F(D,C,E)&&(B=G.checkClearPoint(D,C,E)),B&&A.push(B),D=w[u].chartX-E.width-3,C=w[u].chartY-E.height-3),F(D,C,E)&&(B=G.checkClearPoint(D,C,E)),B&&A.push(B)}if(!A.length&&!y){for(D=x+I-E.width;D>=x;D-=16){for(C=z;C<z+H-E.height;C+=16){(B=G.checkClearPoint(D,C,E,!0))&&A.push(B)}}}if(A.length){if(A.sort(function(r,q){return q.weight-r.weight}),B=A[0],p.boxesToAvoid.push({left:B.x,right:B.x+E.width,top:B.y,bottom:B.y+E.height}),A=Math.sqrt(Math.pow(Math.abs(B.x-s.x),2),Math.pow(Math.abs(B.y-s.y),2))){w={opacity:p.renderer.forExport?1:0,x:B.x-x,y:B.y-z},y={opacity:1},10>=A&&(y={x:w.x,y:w.y},w={}),G.labelBySeries.attr(o(w,{anchorX:B.connectorPoint&&B.connectorPoint.plotX,anchorY:B.connectorPoint&&B.connectorPoint.plotY})).animate(y),G.options.kdNow=!0,G.buildKDTree(),G=G.searchPoint({chartX:B.x,chartY:B.y},!0),s.closest=[G,B.x-x-G.plotX,B.y-z-G.plotY]}}else{s&&(G.labelBySeries=s.destroy())}}}})};b(e.prototype,"render",c);b(e.prototype,"redraw",c)})(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-highcharts', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/highcharts/modules/exporting.js' */
(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(M){var A=M.defaultOptions,c=M.doc,v=M.Chart,i=M.addEvent,e=M.removeEvent,l=M.fireEvent,x=M.createElement,s=M.discardElement,m=M.css,y=M.merge,q=M.pick,L=M.each,j=M.objectEach,t=M.extend,d=M.isTouchDevice,o=M.win,g=o.navigator.userAgent,b=M.Renderer.prototype.symbols;/Edge\/|Trident\/|MSIE /.test(g);/firefox/i.test(g);t(A.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});A.navigation={buttonOptions:{theme:{},symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24}};y(!0,A.navigation,{menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",background:"none",color:"#333333",fontSize:d?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"},buttonOptions:{symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",stroke:"none",padding:5}}});A.exporting={type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:"printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}};M.post=function(h,f,k){var n=x("form",y({method:"post",action:h,enctype:"multipart/form-data"},k),{display:"none"},c.body);j(f,function(r,p){x("input",{type:"hidden",name:p,value:r},null,n)});n.submit();s(n)};t(v.prototype,{sanitizeSVG:function(h,f){if(f&&f.exporting&&f.exporting.allowHTML){var k=h.match(/<\/svg>(.*?$)/);k&&k[1]&&(k='\x3cforeignObject x\x3d"0" y\x3d"0" width\x3d"'+f.chart.width+'" height\x3d"'+f.chart.height+'"\x3e\x3cbody xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+k[1]+"\x3c/body\x3e\x3c/foreignObject\x3e",h=h.replace("\x3c/svg\x3e",k+"\x3c/svg\x3e"))}h=h.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(\S+)("|&quot;)\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href\x3d").replace(/\n/," ").replace(/<\/svg>.*?$/,"\x3c/svg\x3e").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1\x3d"rgb($2)" $1-opacity\x3d"$3"').replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad");this.ieSanitizeSVG&&(h=this.ieSanitizeSVG(h));return h},getChartHTML:function(){return this.container.innerHTML},getSVG:function(k){var h,r,u,n,f,p=y(this.options,k);r=x("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},c.body);u=this.renderTo.style.width;f=this.renderTo.style.height;u=p.exporting.sourceWidth||p.chart.width||/px$/.test(u)&&parseInt(u,10)||600;f=p.exporting.sourceHeight||p.chart.height||/px$/.test(f)&&parseInt(f,10)||400;t(p.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:u,height:f});p.exporting.enabled=!1;delete p.data;p.series=[];L(this.series,function(w){n=y(w.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:w.visible});n.isInternal||p.series.push(n)});L(this.axes,function(w){w.userOptions.internalKey||(w.userOptions.internalKey=M.uniqueKey())});h=new M.Chart(p,this.callback);k&&L(["xAxis","yAxis","series"],function(z){var w={};k[z]&&(w[z]=k[z],h.update(w))});L(this.axes,function(w){var C=M.find(h.axes,function(D){return D.options.internalKey===w.userOptions.internalKey}),B=w.getExtremes(),z=B.userMin,B=B.userMax;!C||void 0===z&&void 0===B||C.setExtremes(z,B,!0,!1)});u=h.getChartHTML();u=this.sanitizeSVG(u,p);p=null;h.destroy();s(r);return u},getSVGForExport:function(h,f){var k=this.options.exporting;return this.getSVG(y({chart:{borderRadius:0}},k.chartOptions,f,{exporting:{sourceWidth:h&&h.sourceWidth||k.sourceWidth,sourceHeight:h&&h.sourceHeight||k.sourceHeight}}))},exportChart:function(h,f){f=this.getSVGForExport(h,f);h=y(this.options.exporting,h);M.post(h.url,{filename:h.filename||"chart",type:h.type,width:h.width||0,scale:h.scale,svg:f},h.formAttributes)},print:function(){var z=this,w=z.container,p=[],u=w.parentNode,n=c.body,h=n.childNodes,k=z.options.exporting.printMaxWidth,r,B;if(!z.isPrinting){z.isPrinting=!0;z.pointer.reset(null,0);l(z,"beforePrint");if(B=k&&z.chartWidth>k){r=[z.options.chart.width,void 0,!1],z.setSize(k,void 0,!1)}L(h,function(C,f){1===C.nodeType&&(p[f]=C.style.display,C.style.display="none")});n.appendChild(w);o.focus();o.print();setTimeout(function(){u.appendChild(w);L(h,function(C,f){1===C.nodeType&&(C.style.display=p[f])});z.isPrinting=!1;B&&z.setSize.apply(z,r);l(z,"afterPrint")},1000)}},contextMenu:function(H,F,B,D,I,r,z){var C=this,J=C.options.navigation,w=C.chartWidth,f=C.chartHeight,p="cache-"+H,u=C[p],G=Math.max(I,r),E,h;u||(C[p]=u=x("div",{className:H},{position:"absolute",zIndex:1000,padding:G+"px"},C.container),E=x("div",{className:"highcharts-menu"},null,u),m(E,t({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},J.menuStyle)),h=function(){m(u,{display:"none"});z&&z.setState(0);C.openMenu=!1},C.exportEvents.push(i(u,"mouseleave",function(){u.hideTimer=setTimeout(h,500)}),i(u,"mouseenter",function(){clearTimeout(u.hideTimer)}),i(c,"mouseup",function(k){C.pointer.inClass(k.target,H)||h()})),L(F,function(n){"string"===typeof n&&(n=C.options.exporting.menuItemDefinitions[n]);if(M.isObject(n,!0)){var k;n.separator?k=x("hr",null,null,E):(k=x("div",{className:"highcharts-menu-item",onclick:function(K){K&&K.stopPropagation();h();n.onclick&&n.onclick.apply(C,arguments)},innerHTML:n.text||C.options.lang[n.textKey]},null,E),k.onmouseover=function(){m(this,J.menuItemHoverStyle)},k.onmouseout=function(){m(this,J.menuItemStyle)},m(k,t({cursor:"pointer"},J.menuItemStyle)));C.exportDivElements.push(k)}}),C.exportDivElements.push(E,u),C.exportMenuWidth=u.offsetWidth,C.exportMenuHeight=u.offsetHeight);F={display:"block"};B+C.exportMenuWidth>w?F.right=w-B-I-G+"px":F.left=B-G+"px";D+r+C.exportMenuHeight>f&&"top"!==z.alignOptions.verticalAlign?F.bottom=f-D-G+"px":F.top=D+r-G+"px";m(u,F);C.openMenu=!0},addButton:function(I){var H=this,E=H.renderer,G=y(H.options.navigation.buttonOptions,I),D=G.onclick,u=G.menuItems,C,F,z=G.symbolSize||12;H.btnCount||(H.btnCount=0);H.exportDivElements||(H.exportDivElements=[],H.exportSVGElements=[]);if(!1!==G.enabled){var B=G.theme,n=B.states,r=n&&n.hover,n=n&&n.select,w;delete B.states;D?w=function(f){f.stopPropagation();D.call(H,f)}:u&&(w=function(){H.contextMenu(F.menuClassName,u,F.translateX,F.translateY,F.width,F.height,F);F.setState(2)});G.text&&G.symbol?B.paddingLeft=q(B.paddingLeft,25):G.text||t(B,{width:G.width,height:G.height,padding:0});F=E.button(G.text,0,0,w,B,r,n).addClass(I.className).attr({"stroke-linecap":"round",title:H.options.lang[G._titleKey],zIndex:3});F.menuClassName=I.menuClassName||"highcharts-menu-"+H.btnCount++;G.symbol&&(C=E.symbol(G.symbol,G.symbolX-z/2,G.symbolY-z/2,z,z).addClass("highcharts-button-symbol").attr({zIndex:1}).add(F),C.attr({stroke:G.symbolStroke,fill:G.symbolFill,"stroke-width":G.symbolStrokeWidth||1}));F.add().align(t(G,{width:F.width,x:q(G.x,H.buttonOffset)}),!0,"spacingBox");H.buttonOffset+=(F.width+G.buttonSpacing)*("right"===G.align?-1:1);H.exportSVGElements.push(F,C)}},destroyExport:function(k){var h=k?k.target:this;k=h.exportSVGElements;var p=h.exportDivElements,r=h.exportEvents,n;k&&(L(k,function(f,u){f&&(f.onclick=f.ontouchstart=null,n="cache-"+f.menuClassName,h[n]&&delete h[n],h.exportSVGElements[u]=f.destroy())}),k.length=0);p&&(L(p,function(f,u){clearTimeout(f.hideTimer);e(f,"mouseleave");h.exportDivElements[u]=f.onmouseout=f.onmouseover=f.ontouchstart=f.onclick=null;s(f)}),p.length=0);r&&(L(r,function(f){f()}),r.length=0)}});b.menu=function(h,f,k,n){return["M",h,f+2.5,"L",h+k,f+2.5,"M",h,f+n/2+0.5,"L",h+k,f+n/2+0.5,"M",h,f+n-1.5,"L",h+k,f+n-1.5]};v.prototype.renderExporting=function(){var h=this,f=h.options.exporting,k=f.buttons,n=h.isDirtyExporting||!h.exportSVGElements;h.buttonOffset=0;h.isDirtyExporting&&h.destroyExport();n&&!1!==f.enabled&&(h.exportEvents=[],j(k,function(p){h.addButton(p)}),h.isDirtyExporting=!1);i(h,"destroy",h.destroyExport)};v.prototype.callbacks.push(function(f){f.renderExporting();i(f,"redraw",f.renderExporting);L(["exporting","navigation"],function(h){f[h]={update:function(k,n){f.isDirtyExporting=!0;y(!0,f.options[h],k);q(n,!0)&&f.redraw()}}})})})(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-highcharts', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/highcharts/modules/offline-exporting.js' */
(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(j){function h(e,n){var p=m.getElementsByTagName("head")[0],d=m.createElement("script");d.type="text/javascript";d.src=e;d.onload=n;d.onerror=function(){j.error("Error loading script "+e)};p.appendChild(d)}var f=j.merge,i=j.win,c=i.navigator,m=i.document,l=j.each,k=i.URL||i.webkitURL||i,g=/Edge\/|Trident\/|MSIE /.test(c.userAgent),b=/Edge\/\d+/.test(c.userAgent),o=g?150:0;j.CanVGRenderer={};j.dataURLtoBlob=function(n){if(i.atob&&i.ArrayBuffer&&i.Uint8Array&&i.Blob&&k.createObjectURL){n=n.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);for(var p=i.atob(n[3]),q=new i.ArrayBuffer(p.length),q=new i.Uint8Array(q),e=0;e<q.length;++e){q[e]=p.charCodeAt(e)}n=new i.Blob([q],{type:n[1]});return k.createObjectURL(n)}};j.downloadURL=function(e,p){var q=m.createElement("a"),d;if("string"===typeof e||e instanceof String||!c.msSaveOrOpenBlob){if(b||2000000<e.length){if(e=j.dataURLtoBlob(e),!e){throw"Data URL length limit reached"}}if(void 0!==q.download){q.href=e,q.download=p,m.body.appendChild(q),q.click(),m.body.removeChild(q)}else{try{if(d=i.open(e,"chart"),void 0===d||null===d){throw"Failed to open window"}}catch(n){i.location.href=e}}}else{c.msSaveOrOpenBlob(e,p)}};j.svgToDataUrl=function(e){var n=-1<c.userAgent.indexOf("WebKit")&&0>c.userAgent.indexOf("Chrome");try{if(!n&&0>c.userAgent.toLowerCase().indexOf("firefox")){return k.createObjectURL(new i.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}}catch(p){}return"data:image/svg+xml;charset\x3dUTF-8,"+encodeURIComponent(e)};j.imageToDataUrl=function(B,y,z,A,C,s,t,r,n){var w=new i.Image,v,x=function(){setTimeout(function(){var q=m.createElement("canvas"),p=q.getContext&&q.getContext("2d"),u;try{if(p){q.height=w.height*A;q.width=w.width*A;p.drawImage(w,0,0,q.width,q.height);try{u=q.toDataURL(y),C(u,y,z,A)}catch(d){v(B,y,z,A)}}else{t(B,y,z,A)}}finally{n&&n(B,y,z,A)}},o)},e=function(){r(B,y,z,A);n&&n(B,y,z,A)};v=function(){w=new i.Image;v=s;w.crossOrigin="Anonymous";w.onload=x;w.onerror=e;w.src=B};w.onload=x;w.onerror=e;w.src=B};j.downloadSVGLocal=function(G,B,D,F){function I(p,q){q=new i.jsPDF("l","pt",[p.width.baseVal.value+2*q,p.height.baseVal.value+2*q]);l(p.querySelectorAll('*[visibility\x3d"hidden"]'),function(u){u.parentNode.removeChild(u)});i.svg2pdf(p,q,{removeInvalid:!0});return q.output("datauristring")}function s(){C.innerHTML=G;var v=C.getElementsByTagName("text"),u,q=C.getElementsByTagName("svg")[0].style;l(v,function(y){l(["font-family","font-size"],function(z){!y.style[z]&&q[z]&&(y.style[z]=q[z])});y.style["font-family"]=y.style["font-family"]&&y.style["font-family"].split(" ").splice(-1);u=y.getElementsByTagName("title");l(u,function(z){y.removeChild(z)})});v=I(C.firstChild,0);try{j.downloadURL(v,H),F&&F()}catch(p){D()}}var t,r,e=!0,x,w=B.libURL||j.getOptions().exporting.libURL,C=m.createElement("div"),d=B.type||"image/png",H=(B.filename||"chart")+"."+("image/svg+xml"===d?"svg":d.split("/")[1]),n=B.scale||1,w="/"!==w.slice(-1)?w+"/":w;if("image/svg+xml"===d){try{c.msSaveOrOpenBlob?(r=new MSBlobBuilder,r.append(G),t=r.getBlob("image/svg+xml")):t=j.svgToDataUrl(G),j.downloadURL(t,H),F&&F()}catch(E){D()}}else{"application/pdf"===d?i.jsPDF&&i.svg2pdf?s():(e=!0,h(w+"jspdf.js",function(){h(w+"svg2pdf.js",function(){s()})})):(t=j.svgToDataUrl(G),x=function(){try{k.revokeObjectURL(t)}catch(p){}},j.imageToDataUrl(t,d,{},n,function(p){try{j.downloadURL(p,H),F&&F()}catch(q){D()}},function(){var z=m.createElement("canvas"),y=z.getContext("2d"),q=G.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*n,v=G.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*n,p=function(){y.drawSvg(G,0,0,q,v);try{j.downloadURL(c.msSaveOrOpenBlob?z.msToBlob():z.toDataURL(d),H),F&&F()}catch(u){D()}finally{x()}};z.width=q;z.height=v;i.canvg?p():(e=!0,h(w+"rgbcolor.js",function(){h(w+"canvg.js",function(){p()})}))},D,D,function(){e&&x()}))}};j.Chart.prototype.getSVGForLocalExport=function(D,A,B,C){var z=this,u,w=0,t,r,y,x,s,d=function(e,n,p){++w;p.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e);w===u.length&&C(z.sanitizeSVG(t.innerHTML,r))};j.wrap(j.Chart.prototype,"getChartHTML",function(e){var n=e.apply(this,Array.prototype.slice.call(arguments,1));r=this.options;t=this.container.cloneNode(!0);return n});z.getSVGForExport(D,A);u=t.getElementsByTagName("image");try{if(u.length){for(x=0,s=u.length;x<s;++x){y=u[x],j.imageToDataUrl(y.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:y},D.scale,d,B,B,B)}}else{C(z.sanitizeSVG(t.innerHTML,r))}}catch(E){B()}};j.Chart.prototype.exportChartLocal=function(n,q){var r=this,d=j.merge(r.options.exporting,n),p=function(){if(!1===d.fallbackToExportServer){if(d.error){d.error(d)}else{throw"Fallback to export server disabled"}}else{r.exportChart(d)}};g&&("application/pdf"===d.type||r.container.getElementsByTagName("image").length&&"image/svg+xml"!==d.type)||"application/pdf"===d.type&&r.container.getElementsByTagName("image").length?p():r.getSVGForLocalExport(d,q,p,function(e){-1<e.indexOf("\x3cforeignObject")&&"image/svg+xml"!==d.type?p():j.downloadSVGLocal(e,d,p)})};f(!0,j.getOptions().exporting,{libURL:"https://code.highcharts.com/6.0.1/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}})})(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-charts-highcharts', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/charts/highcharts.js' */
define("bitvoodoo/viewtracker/reporting/charts/highcharts",[],function(){return window.Highcharts});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:reporting-widgets-timeline', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/widgets/timeline.js' */
define("bitvoodoo/viewtracker/reporting/widgets/timeline",["jquery","ajs","bitvoodoo/viewtracker/reporting/rest/connector","bitvoodoo/viewtracker/reporting/charts/highcharts","bitvoodoo/viewtracker/reporting/events/strings","bitvoodoo/viewtracker/reporting/events/queue","bitvoodoo/viewtracker/reporting/rest/settings"],function(e,c,i,f,j,d,g){var a="space-";Highcharts.setOptions({global:{useUTC:false}});var b=function(l,k){if(l&&k){return l.userOptions.viewtrackerId===a+k}return false};var h=function(k){this.$element=k.element;this.queue=new d();this.connector=new i(this.$element);this.chartOptions=k.chartOptions||{};this.localSpaces=[];this.filteringData={contentId:k.contentId||undefined,spaceKeys:k.spaceKeys||undefined}};h.prototype.updateChart=function(){var k=this;var l=g.REPORTING_URL+"/spaces/timeline";if(this.filteringData.contentId){l=g.REPORTING_URL+"/contents/"+this.filteringData.contentId+"/timeline"}l+="?anonymous=true";this.connector.get(l,this.filteringData,function(p){var o=[];for(var n=0;n<p.results.length;n++){var m=p.results[n];o.push([m.viewDate,m.views])}if(k.chart.series.length===0){k.chart.addSeries({name:"Total",data:o,viewtrackerId:"total",showInLegend:false})}else{k.chart.series[0].setData(o)}})};h.prototype.removeSpaceFromChart=function(k){e.each(this.chart.series,function(l,m){if(b(m,k)){m.remove();return false}})};h.prototype.updateChartForSpace=function(m){var k=this;var l=e.extend({},this.filteringData);l.spaceKeys=[m];this.connector.getConfluenceAPI("/rest/api/space/"+m,{},function(n){k.connector.get(g.REPORTING_URL+"/spaces/timeline",l,function(t){var r=[];for(var q=0;q<t.results.length;q++){var o=t.results[q];r.push([o.viewDate,o.views])}var s=false;var p=0;e.each(k.chart.series,function(u,v){s=b(v,n.key);if(s){return false}p++});if(!s){k.chart.addSeries({name:n.name,data:r,type:"spline",viewtrackerId:a+n.key})}else{k.chart.series[p].setData(r)}})})};h.prototype.bindEventListeners=function(){var k=this;var l=[j.GLOBAL_DEVICE_TYPE_UPDATED,j.GLOBAL_CONTENT_TYPE_UPDATED];this.queue.subscribe(l,function(m){k.filteringData=e.extend(k.filteringData,m);k.updateChart()});this.queue.subscribe(j.GLOBAL_DATES_UPDATED,function(m){k.filteringData=e.extend(k.filteringData,m);if(k.localSpaces.length>0){e.each(k.localSpaces,function(n,o){k.removeSpaceFromChart(o)});k.localSpaces.lenght=0}k.updateChart()});this.queue.subscribe(j.GLOBAL_SPACES_UPDATED,function(m){if(m.length===0){delete k.filteringData.spaceKeys}else{k.filteringData=e.extend(k.filteringData,m)}k.updateChart()});this.queue.subscribe(j.LOCAL_SPACES_UPDATED,function(m){k.localSpaces=m.spaceKeys;delete m.spaceKeys;k.filteringData=e.extend(k.filteringData,m);e.each(m.unselectedSpaceKeys,function(n,o){k.removeSpaceFromChart(o)});e.each(k.localSpaces,function(n,o){k.updateChartForSpace(o)})})};h.prototype.show=function(){this.bindEventListeners();var l={title:{text:""},chart:{renderTo:this.$element.attr("id"),zoomType:"x",type:"areaspline",style:{fontFamily:"Dosis, sans-serif"}},xAxis:{type:"datetime",labels:{overflow:"justify"},title:{text:"Time"}},tooltip:{crosshairs:[true,true],valueSuffix:" views",shared:true,backgroundColor:"#ffffff"},yAxis:{title:{text:"Number of views"},min:0},series:[],plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:5}},marker:{enabled:false},pointInterval:3600000,},areaspline:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},lineWidth:2,states:{hover:{lineWidth:3}},marker:{enabled:false},threshold:null}},};for(var k in this.chartOptions){l[k]=e.extend(l[k],this.chartOptions[k])}this.chart=new f.Chart(l);if(this.filteringData.contentId){this.updateChart()}};return h});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'ch.bitvoodoo.confluence.plugins.viewtracker:viewtracker-reports-single-content', location = 'ch/bitvoodoo/confluence/plugins/viewtracker/scripts/reporting/reports/content.js' */
define("bitvoodoo/viewtracker/reporting/reports/content",["jquery","ajs","bitvoodoo/viewtracker/reporting/widgets/counter","bitvoodoo/viewtracker/reporting/events/queue","bitvoodoo/viewtracker/reporting/events/strings","bitvoodoo/viewtracker/reporting/rest/settings","bitvoodoo/viewtracker/users-statistic","bitvoodoo/viewtracker/modes","bitvoodoo/viewtracker/namespaces"],function(e,h,b,d,i,f,g,j,a){var c=function(){this.initialized=false;this.queue=new d()};c.prototype.bind=function(m){var l=e(m);var k=this;l.click(function(o){o.preventDefault();if(!k.initialized){h.safe.ajax({type:"GET",dataType:"json",data:{},url:f.REST_URL+"/webpanels?location=viewtracker.report.timeline.group&location=viewtracker.report.timeline&location=viewtracker.report.users.statistic&location=viewtracker.report.content.counter",success:function(p){k.locationsToContents=p},complete:function(){k.dialog=h.dialog2(aui.dialog.dialog2({id:"viewtracker-content-report-dialog",titleText:"Viewtracker",size:"large",removeOnHide:true,content:Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.content({data:k.locationsToContents}),footerActionContent:Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.contentFooter({}),footerHintContent:Confluence.Templates.Bitvoodoo.viewtracker.Reporting.Content.Report.footerHintContent({isPrivacyModeEnabled:a.Configuration.privacyMode,isHiddenUserStatistic:a.Configuration.hiddenUserStatistic,isDataSecurityInfoBoxFeatureEnabled:a.Configuration.isDataSecurityInfoBoxFeatureEnabled,isDataSecurityLinkFeatureEnabled:a.Configuration.isDataSecurityLinkFeatureEnabled})}));k.show();k.initContentReportTabPanel();var p=new j();p.initPrivacyModeTooltip();p.inithiddenUserStatisticTooltip()}})}else{k.show();k.initContentReportTabPanel();var n=new j();n.initPrivacyModeTooltip();n.inithiddenUserStatisticTooltip()}});h.$(document).on("click","#viewtracker-content-report-dialog #cancel-button",function(n){n.preventDefault();k.hide()})};c.prototype._init=function(){if(!this.initialized){this.initialized=true;var l=h.Meta.get("page-id");var k=h.params.remoteUserKey;this.queue.publish(i.WIDGET_INIT,{report:"content",contentId:l,userKey:k});this.queue.publish(i.CONTENT_REPORT_INIT,{})}};c.prototype.initContentReportTabPanel=function(){h.tabs.setup();var n=e("#single-content-report-tab");var l=e("#users-statistic-tab");if(n&&n.length){h.tabs.change(e('a[href="#content-report"]'))}else{if(l&&l.length){h.tabs.change(e('a[href="#users-statistic"]'))}}if(l&&l.length){var m=h.Meta.get("page-id");var k=e("#users-statistic-container");l.on("click",function(){g(m,true,"data","",k,k,false)});if(!n||!n.length){l.trigger("click")}}};c.prototype.initializeTooltip=function(){var l=e(".viewtracker-icon-privacy-mode");l.tooltip({title:function(){return "The Extended Privacy mode is activated. No user-specific data is stored and all reports based on users\u0027 information are deactivated."}});var k=e(".viewtracker-icon-hidden-statistic");k.tooltip({title:function(){return "Access to the user-specific reports is restricted. Please contact your Confluence Administrator for more information."}})};c.prototype.hide=function(){this.dialog.hide()};c.prototype.show=function(){this.dialog.show();this._init()};return c});require(["bitvoodoo/viewtracker/reporting/reports/content","ajs"],function(b,a){a.toInit(function(){var c=new b();if(a.Meta.get("remote-user")){c.bind("#reporting-single-content-link")}else{var d=$("#reporting-single-content-link");d.click(function(f){f.preventDefault()});d.addClass("no-viewtracker-report")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/tablesorter-date-parser.js' */
require(["ajs","jquery","confluence-sortable-tables/hooks"],function(b,c,d){d.onBeforeInit(a);function a(e){e.addParser({id:"dateAttributeParser",is:function(f,h,g){return c(g).is(".content-report-table-macro .modified")},format:function(f,h,g,i){return c(g).attr("data-sortable-date")},type:"numeric"})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/soy/content-report-table.soy' */
// This file was automatically generated from content-report-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Plugins.ContentReport.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Plugins == 'undefined') { Confluence.Templates.Plugins = {}; }
if (typeof Confluence.Templates.Plugins.ContentReport == 'undefined') { Confluence.Templates.Plugins.ContentReport = {}; }


Confluence.Templates.Plugins.ContentReport.contentReportTable = function(opt_data, opt_ignored) {
  var output = '';
  var hasSocialColumn__soy3 = opt_data.showCommentsCount || opt_data.showLikesCount;
  if (opt_data.results.length == 0 && opt_data.blueprintKey) {
    output += '<div class="blueprint-blank-experience ' + soy.$$escapeHtml(opt_data.blueprintKey) + '"><div class="content"><h2>' + soy.$$escapeHtml(opt_data.blankTitle) + '</h2><p>' + soy.$$escapeHtml(opt_data.blankDescription) + '</p></div>' + ((opt_data.createButtonLabel) ? '<p><button class="create-from-template-button aui-button aui-button-primary" data-space-key="' + soy.$$escapeHtml(opt_data.dataSpaceKey) + '" data-content-blueprint-id="' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '" href="' + soy.$$escapeHtml(opt_data.createContentUrl) + '" >' + soy.$$escapeHtml(opt_data.createButtonLabel) + '</button></p>' : '') + '</div>';
  } else {
    output += '<table class="aui content-report-table-macro' + ((hasSocialColumn__soy3) ? ' with-extra-columns' : '') + '"' + ((opt_data.analyticsKey) ? ' data-analytics-key="' + soy.$$escapeHtml(opt_data.analyticsKey) + '"' : '') + '><thead><tr><th>' + soy.$$escapeHtml('Title') + '</th><th>' + soy.$$escapeHtml('Creator') + '</th><th>' + soy.$$escapeHtml('Modified') + '</th></tr></thead><tbody>';
    var resultList43 = opt_data.results;
    var resultListLen43 = resultList43.length;
    if (resultListLen43 > 0) {
      for (var resultIndex43 = 0; resultIndex43 < resultListLen43; resultIndex43++) {
        var resultData43 = resultList43[resultIndex43];
        output += '<tr><td class="title"><a href="' + soy.$$escapeHtml(resultData43.urlPath) + '">' + soy.$$escapeHtml(resultData43.title) + '</a></td><td class="creator">' + Confluence.Templates.User.usernameLink({canView: opt_data.canViewProfiles, username: resultData43.creatorName, fullName: resultData43.creatorFullName, contextPath: opt_data.contextPath}) + '</td><td class="modified" data-sortable-date="' + soy.$$escapeHtml(resultData43.sortableDate) + '">' + soy.$$escapeHtml(resultData43.friendlyModificationDate) + '</td>' + ((hasSocialColumn__soy3) ? '<td class="social">' + ((opt_data.showCommentsCount && resultData43.commentCount != 0) ? '<span class="icon icon-comment"></span> <span class="count">' + soy.$$escapeHtml(resultData43.commentCount) + '</span>' : '') + ((opt_data.showLikesCount && resultData43.likeCount != 0) ? '<span class="icon icon-like"></span> <span class="count">' + soy.$$escapeHtml(resultData43.likeCount) + '</span>' : '') + '</td>' : '') + '</tr>';
      }
    } else {
      output += '<tr><td colspan="3">' + soy.$$escapeHtml('No content found.') + '</td></tr>';
    }
    output += '</tbody></table>' + ((opt_data.searchMoreResultsLinkUrl) ? '<div class="more-results"><a href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.searchMoreResultsLinkUrl) + '">' + soy.$$escapeHtml('Find more results') + '</a></div>' : '');
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Plugins.ContentReport.contentReportTable.soyTemplateName = 'Confluence.Templates.Plugins.ContentReport.contentReportTable';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/content-report-analytics.js' */
require(["ajs"],function(a){a.toInit(function(b){b(".content-report-table-macro").on("click",".title a",function(e){var c=b(e.delegateTarget).data("analytics-key");if(c){var d="content-report-table-macro.content-click."+c;a.trigger("analytics",{name:d})}})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-loader', location = 'js/loader.js' */
require(["ajs","wrm"],function(a,b){a.toInit(function(){a.$("#main").find("table").length&&b.require("wrc!sortable-tables-resources")})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/doctheme-utils.js' */
Confluence.DocThemeUtils=Confluence.DocThemeUtils||(function(f){var e;function c(){return(a().length)?true:false}function a(){if(!e){e=f("#splitter-content")}return e}function g(i){var h=f(i);f(i).appendTo(c()?a():f("body"));return h}function b(){return c()?a().scrollTop():f(document).scrollTop()}function d(){return c()?a().scrollLeft():f(document).scrollLeft()}return{isDocTheme:c,appendAbsolutePositionedElement:g,getMainContentScrollTop:b,getMainContentScrollLeft:d,getDocThemeContentElement:a}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/scrolling-inline-dialog.js' */
Confluence.ScrollingInlineDialog=function(a,d,c,b){var g=Confluence.DocThemeUtils.getDocThemeContentElement();var e=Confluence.DocThemeUtils.isDocTheme();b=b||{};if(!b.container&&e){b.container=g}var f=function(k,s,J,z){var v;var L="auto";var G;var p=-7;var q;var w;var u=e?g.width():AJS.$(window).width();var K=s.target.position();K.top+=e?g.scrollTop():0;K.left+=e?g.scrollLeft():0;var i=s.target.outerWidth();var m=K.left+i/2;var C=e?g.scrollTop()+AJS.$(window).height()-AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+AJS.$(window).height();var n=10;var o=20;G=K.top+s.target.outerHeight()+z.offsetY;var H=k.find(".arrow").outerWidth();var j=k.outerWidth();var D=s.target.outerWidth();if(z.centerOnHighlight){if(j>D){v=K.left-(j-D)/2;q=m-v-H/2}else{v=K.left+z.offsetX;q=(j-H)/2}}else{v=K.left+z.offsetX;if(j>D){q=m-v-H/2}else{q=(j-H)/2}}q=(q<0)?0:q;var h=(e)?(K.top-g.scrollTop()):(K.top-(window.pageYOffset||document.documentElement.scrollTop));var A=z.maxHeight||0;var t=k.height();var r=h>Math.max(t,A);var l=(G+k.height())<C;w=(!l&&r)||z.onTop;z.onTop=w;var y=u-(v+j+n);if(w){G=K.top-t-8;p=t}if(w===false&&l===false){var x=(G+t)-C;var E=e?g.scrollTop()+x+AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+x+o;var F=e?g:AJS.$("html, body");F.stop().animate({scrollTop:E},500)}if(z.isRelativeToMouse){if(y<0){L=n;v="auto";q=J.x-(AJS.$(window).width()-z.width)}else{v=J.x-20;q=J.x-v}}else{if(y<0){L=n;v="auto";var I=u-L;var B=I-j;q=m-B-H/2}}return{displayAbove:w,popupCss:{left:v,right:L,top:G},arrowCss:{position:"absolute",left:q,right:"auto",top:p}}};if(!b.calculatePositions){b.calculatePositions=f}return AJS.InlineDialog.call(this,a,d,c,b)};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-panel.js' */
Confluence.HighlightAction=(function(f){var d={};var c;var b={MAINCONTENT_AND_COMMENT:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".wiki-content"),o)},MAINCONTENT_ONLY:function(o){c=c||f(".wiki-content").first();return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(c,o)},COMMENT_ONLY:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".comment-content"),o)}};function a(p,q){var o={onClick:function(){},shouldDisplay:b.MAINCONTENT_AND_COMMENT};d[p]=f.extend(o,q)}function l(o){var p=d[o];if(!p){p=function(){AJS.logError("The button with key "+o+" doesn't have a registered handler")}}return p}function e(p){var o=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-fragment";return f.ajax({type:"POST",contentType:"application/json",url:o,data:JSON.stringify(p)})}function g(o){var p=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-column-table";return f.ajax({type:"POST",contentType:"application/json",url:p,data:JSON.stringify(o)})}function k(q,p,r){var o=i(r);o.tableColumnIndex=p;o.cellModifications=q;return o}function h(o,q){var p=i(q);p.xmlModification=o[0].xmlInsertion;return p}function j(o,q){var p=i(q);p.xmlModification=o;return p}function m(){if(window.getSelection){window.getSelection().empty&&window.getSelection().empty();window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}else{window.document.selection&&window.document.selection.empty()}}function i(p){var o={};o.pageId=p.pageId;o.selectedText=p.selectedText;o.index=p.index;o.numMatches=p.numMatches;o.lastFetchTime=n();return o}function n(){return f("meta[name='confluence-request-time']").attr("content")}return{registerButtonHandler:a,getButtonHandler:l,insertContentAtSelectionEnd:e,insertContentsInTableColumnCells:g,createTableInsertionBean:k,createInsertionBean:h,createXMLModificationBean:j,clearTextSelection:m,WORKING_AREA:b}})(AJS.$);Confluence.HighlightAction.RangeHelper=(function(h){function j(p){return{area:c(p),text:k(p),html:n(p),containingElement:d(p),range:p}}function c(q){var r=Confluence.DocThemeUtils.getMainContentScrollTop();var s=Confluence.DocThemeUtils.getMainContentScrollLeft();var w=q.getClientRects();if(!w.length&&q.parentElement()){var x=h(q.parentElement());var p=x.offset();w=[{top:p.top-((Confluence.DocThemeUtils.isDocTheme())?0:r),left:p.left-((Confluence.DocThemeUtils.isDocTheme())?0:s),bottom:p.top+x.height(),right:p.left+x.width()}]}var z=g(q,w);var u=function(E,D){var C={};C.top=E.top;C.left=E.left+s;C.bottom=D.bottom;if(E.left>=D.right){C.right=E.right}else{C.right=D.right}C.right=C.right+s;C.top=C.top+r;C.bottom=C.bottom+r;C.width=C.right-C.left;C.height=C.bottom-C.top;return C};var t=function(D){var C={};C.width=D.right-D.left;C.height=D.bottom-D.top;C.left=D.left+s;C.right=D.right+s;C.top=D.top+r;C.bottom=D.bottom+r;return C};var B=function(C){if(Confluence.DocThemeUtils.isDocTheme()){var D=Confluence.DocThemeUtils.getDocThemeContentElement().offset();C.left=C.left-D.left;C.right=C.right-D.left;C.top=C.top-D.top;C.bottom=C.bottom-D.top}return C};var A=B(u(z.first,z.last));var v=B(t(z.first));if(Confluence.HighlightAction.debug){var y=h("<div>").attr("id","highlight-actions-debug-helper");Confluence.DocThemeUtils.appendAbsolutePositionedElement(y).css(h.extend({position:"absolute",outline:"1px solid red"},A))}return{first:v,average:A}}function k(q){var p=(q.text!=undefined)?q.text:q.toString();return i(p)}function n(p){return(p.cloneContents)?h("<div>").append(p.cloneContents()).html():p.htmlText}function d(q){if(q.commonAncestorContainer){var p=q.commonAncestorContainer;if(p.nodeType==3){return p.parentNode}return p}else{if(q.parentElement){return q.parentElement()}}}function g(r,q){var p={};p.first=q[0];p.last=q[q.length-1];if(r.endOffset!=="undefined"){if(r.endOffset==0&&q.length>1){p.last=q[q.length-2]}}return p}function e(){if(window.getSelection&&window.getSelection().isCollapsed){return false}if(document.selection&&(document.selection.type=="None"||document.selection.createRange().htmlText=="")){return false}var s;if(window.getSelection){var p=window.getSelection();s=p.getRangeAt(p.rangeCount-1)}else{if(document.selection){s=document.selection.createRange()}}if(/^\s*$/.test(k(s))){var q=n(s);if(!q){return false}var r=q.toLowerCase().indexOf("<img ")!=-1;if(!r){return false}}if(!m(h(".wiki-content"),s)){return false}return s}function m(p,s){var q=d(s);var r=function(){var t=false;h.each(p,function(u,v){if(v===q||h.contains(v,q)){t=true;return false}});return t};return r()}function b(r,q){var p=k(o(r,q));var t=h.trim(k(q));var s=a(t,r);p=p.replace(/\s*$/,"");return{pageId:AJS.Meta.get("page-id"),selectedText:t,index:h.inArray(p.length-t.length,s),numMatches:s.length}}function f(p){if(document.createRange){return p.text()}else{range=document.body.createTextRange();range.moveToElementText(p.get(0));return range.text}}function o(r,q){var p;if(document.createRange){p=document.createRange();p.setStart(r.get(0),0);p.setEnd(q.endContainer,q.originalEndOffset)}else{p=document.body.createTextRange();p.moveToElementText(r.get(0));p.setEndPoint("EndToEnd",q)}return p}function a(u,s){var q=f(s);q=l(u,s.clone(),q);q=i(q);var t=0;var r=-1;var p=[];while((r=q.indexOf(u,t))>-1){p.push(r);t=r+1}return p}function l(u,t,r){var s=t.find('.user-mention, a[href^="/"]');t.find('.conf-macro[data-hasbody="false"], .jira-issue, .jira-issues').each(function(){if(h(this).text().indexOf(u)>-1){s=s.add(this)}});if(s.length>0){var p=u.replace(/\S/g," ");var q=new RegExp(u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g");s.each(function(){var v=h(this).text();h(this).text(v.replace(q,p))});return f(t)}return r}function i(p){return p.replace(/\u00a0/g,"\u0020")}return{getRangeOption:j,getUserSelectionRange:e,getSelectionRects:c,getSelectionText:k,getSelectionHTML:n,getContainingElement:d,getFirstAndLastSelectionRect:g,isSelectionInsideContent:m,computeSearchTextObject:b}})(AJS.$);AJS.toInit(function(f){var i=f(".wiki-content").first();var g={ELEMENT_NODE:1,TEXT_NODE:3};var k={IMAGE:"IMG"};var a=f("<div>").attr("id","action-dialog-target");var d;var j="selection-action-panel";var b;var e;function o(){var r=Confluence.getContextPath()+"/rest/highlighting/1.0/panel-items";var q=AJS.Meta.get("page-id");if(q!=undefined){r=r+"?pageId="+q}var s=f.get(r,function(t){if(t.length){m(t)}});h(s)}function m(v){var y=c();var q=29;var z=false;var B=v.length*q;var A=Confluence.HighlightPanel.Templates.panelContent({webItems:v});var x=false;var s=function(D,C,E){if(!x){D.append(A);D.find(".aui-button").tooltip({gravity:"s"});l(D.parent());D.find("button").click(function(H){var F=f(this).attr("data-key");var I=Confluence.HighlightAction.getButtonHandler(F);z=true;d.hide();var G=Confluence.HighlightAction.RangeHelper.getRangeOption(b);if(f.trim(G.text)!==""){G.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(i,b)}I.onClick(G)})}E();x=true;return false};var w=function(C){var D=false;C.find("button").each(function(E){var G=f(this);var F=G.attr("data-key");var I=Confluence.HighlightAction.getButtonHandler(F);var H=I.shouldDisplay(b);G.css("display",H?"inline-block":"none");D=D||H});if(!D){d.hide()}else{C.find(".contents").width("auto")}};var r=function(){Confluence.HighlightAction.Analytics.sendAnalyticsForOpeningHighlightOptionPanel();w(this.popup);y.bindHideEvents();a.show()};var u=function(){y.unbindHideEvents();a.hide()};var t={centerOnHighlight:true,onTop:true,fadeTime:0,width:B,persistent:true,initCallback:r,hideCallback:u};d=Confluence.ScrollingInlineDialog(a,j,s,t)}function l(q){q.children().attr("unselectable","on").on("selectstart",false)}function h(s){var q;var r=0;var t=1000;f(document).on("mouseup",function(u){s.done(function(w){if(!(w&&w.length>0)){return}var v=f(u.target);if(v.closest(".aui-inline-dialog").length!==0){return}setTimeout(function(){clearTimeout(q);var x=t;if(f(d[0]).is(":visible")){x=r}q=setTimeout(function(){n()},x)},r)})});s.done(function(){AJS.bind("quickedit.success",function(){d.hide()})})}function n(){b=Confluence.HighlightAction.RangeHelper.getUserSelectionRange();var q=function(t){return f.trim(t.toString())!==""};b.originalEndOffset=b.endOffset;if(!b||!q(b)){d.hide();return}var s=Confluence.HighlightAction.RangeHelper.getSelectionRects(b);if(!s){return}var r=p(s);if(r||!f(d[0]).is(":visible")){f(d[0]).hide();d.show()}}function c(){var t=function(){v();s()};var w=function(){q();y()};var r=false;var x=j+".inline-dialog-check";var v=function(){if(!r){f("body").bind("click."+x,function(A){var z=f(A.target);if(z.closest("#inline-dialog-"+j+" .contents").length===0){if(!b){d.hide()}}});r=true}};var q=function(){if(r){f("body").unbind("click."+x)}r=false};var u=function(z){if(z.keyCode===27){d.hide()}};var s=function(){f(document).on("keydown",u)};var y=function(){f(document).off("keydown",u)};return{bindHideEvents:t,unbindHideEvents:w}}function p(r){Confluence.DocThemeUtils.appendAbsolutePositionedElement(a);var q=false;if(!e||r.first.top!=e.first.top||r.first.height!=e.first.height||r.first.left!=e.first.left||r.first.width!=e.first.width){a.css({top:r.first.top,height:r.first.height,left:r.first.left,width:r.first.width});e=r;q=true}return q}o()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/quote-in-comment.js' */
AJS.toInit(function(f){var a=true;var h=false;var d="com.atlassian.confluence.plugins.confluence-highlight-actions:quote-comment";function b(l){var k=l.getBody().createTextRange();k.moveToElementText(l.getBody());k.collapse(false);k.select()}function e(){var k=40;if(Confluence.DocThemeUtils.isDocTheme()){var l=Confluence.DocThemeUtils.getDocThemeContentElement();var m=l.scrollTop()-f("#header").height()+f("#rte-toolbar").offset().top;l.scrollTop(m-k)}else{var m=f("#rte-toolbar").offset().top;f(document).scrollTop(m-k)}}function j(l,m){var n="<p><br/></p>";if(f.browser.msie&&!h){b(l);n="<p></p>"}var k="<blockquote><p>"+m.html+"</p></blockquote>"+n;l.execCommand("mceInsertContent",false,k);h=false}function i(k){Confluence.HighlightAction.clearTextSelection();setTimeout(function(){var l=AJS&&AJS.Rte&&AJS.Rte.getEditor&&AJS.Rte.getEditor();if(l){Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment();e();j(l,k)}else{Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment(a);h=true;var m=function(){j(AJS.Rte.getEditor(),k);AJS.unbind("quickedit.visible",m)};AJS.bind("quickedit.visible",m);c(g(k.containingElement))}},0)}function g(k){var l=f(k).closest("div.comment");return l}function c(k){if(!k.length>0){f(".quick-comment-prompt").click()}else{k.find(".comment-actions .action-reply-comment").click()}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(d,{onClick:i,shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_AND_COMMENT})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-analytics.js' */
Confluence.HighlightAction.Analytics=(function(c){var b="confluence.highlight.actions.open";var e="confluence.quote.in.comment.insert";var g="confluence.quote.in.comment.append";function d(h,i){AJS.trigger("analytics",{name:h,data:i})}function a(){d(b)}function f(h){if(h){d(e)}else{d(g)}}return{sendAnalyticsForOpeningHighlightOptionPanel:a,sendAnalyticsForQuoteInComment:f}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/soy/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.HighlightPanel.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.HighlightPanel == 'undefined') { Confluence.HighlightPanel = {}; }
if (typeof Confluence.HighlightPanel.Templates == 'undefined') { Confluence.HighlightPanel.Templates = {}; }


Confluence.HighlightPanel.Templates.panelContent = function(opt_data, opt_ignored) {
  var output = '';
  var webItemList3 = opt_data.webItems;
  var webItemListLen3 = webItemList3.length;
  for (var webItemIndex3 = 0; webItemIndex3 < webItemListLen3; webItemIndex3++) {
    var webItemData3 = webItemList3[webItemIndex3];
    output += '<button data-key="' + soy.$$escapeHtml(webItemData3.key) + '" class="aui-button aui-button-compact aui-button-subtle" title="' + soy.$$escapeHtml(webItemData3.label) + '"><span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(webItemData3.styleClass) + '"/></button>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.HighlightPanel.Templates.panelContent.soyTemplateName = 'Confluence.HighlightPanel.Templates.panelContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.expand-macro:expand-macro-core', location = 'com/atlassian/confluence/plugins/expand/js/expand-macro-core.js' */
(function(){var a=function(b){this.$=b;this.createToggleFunction=function(e){var d=this.$;return function c(i){if(typeof e!="undefined"&&!e(i)){return}var f=d(this),g=d(".expand-control-icon",f),h=d(".expand-content",f.closest(".expand-container")).first();var j;if(h.hasClass("expand-hidden")){h.css("display","block");h.animate({opacity:1});j="expand"}else{h.animate({opacity:0},{complete:function(){h.hide()}});j="collapse"}h.toggleClass("expand-hidden");g.toggleClass("expanded");if(j==="expand"){AJS.trigger("confluence.expand-macro.expanded")}else{AJS.trigger("confluence.expand-macro.collapsed")}AJS.trigger("analyticsEvent",{name:"confluence.expand-macro.expand-click",data:{userAction:j}})}};this.getExpandElements=function(c){return this.$(".expand-control",c)}};if(typeof Confluence==="undefined"){Confluence={}}if(typeof Confluence.Plugins==="undefined"){Confluence.Plugins={}}Confluence.Plugins.ExpandMacro={bind:function(b,c,g,f){var e=new a(b);var d=e.getExpandElements(c);d.length&&d.bind(g,e.createToggleFunction(f))}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.expand-macro:expand-macro-desktop-resources', location = 'com/atlassian/confluence/plugins/expand/js/expand-macro.js' */
AJS.toInit(function(a){Confluence.Plugins.ExpandMacro.bind(a,a("body"),"click keyup",function(b){return !(b.type=="keyup"&&b.keyCode!=13)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/soy/sharelinks-urlmacro-templates.soy' */
// This file was automatically generated from sharelinks-urlmacro-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Blueprints.SharelinksUrlMacro.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.SharelinksUrlMacro == 'undefined') { Confluence.Blueprints.SharelinksUrlMacro = {}; }


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink = function(opt_data, opt_ignored) {
  return '<a class="aui-button sharelinks-urlmacro-button" href="' + Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript(opt_data) + '"><span class="aui-icon aui-icon-small aui-iconfont-confluence">Confluence Icon</span> <span>' + soy.$$escapeHtml('Share on Confluence') + '</span></a>';
};
if (goog.DEBUG) {
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink.soyTemplateName = 'Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink';
}


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript = function(opt_data, opt_ignored) {
  return 'javascript:(function(){var screenWidth=screen.width,screenHeight=screen.height,popupWidth=640,popupHeight=580,popupLeft=0,popupTop=0; if(screenWidth>popupWidth){popupLeft=Math.round((screenWidth/2)-(popupWidth/2));}if(screenHeight>popupHeight){popupTop=Math.round((screenHeight/2)-(popupHeight/2));}window.open(\'' + soy.$$filterNoAutoescape(opt_data.bookmarkletActionURL) + '?bookmarkedURL=\'+encodeURIComponent(window.location.href), \'\',\'left=\'+popupLeft+\',top=\'+popupTop+\',width=\'+popupWidth+\',height=\'+popupHeight+\',personalbar=0,toolbar=0,scrollbars=1,resizable=1\');}());';
};
if (goog.DEBUG) {
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript.soyTemplateName = 'Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/js/sharelinks-urlmacro.js' */
AJS.toInit(function(a){a(".sharelinks-urlmacro-button").click(function(){alert("Drag this link to your toolbar");return false})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:jsUri', location = '/includes/js/third-party/jsUri.js' */
(function(){function g(a){a=decodeURIComponent(a);return a=a.replace("+"," ")}function h(a){var c,b,f,e,d=[];if("undefined"===typeof a||null===a||""===a)return d;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)b=c[a],f=b.split("="),e=f[0],b=-1===b.indexOf("=")?null:null===f[1]?"":f[1],d.push([e,b]);return d}function d(a){var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a||
""),b={};"source protocol authority userInfo user password host port relative path directory file query anchor".split(" ").forEach(function(a,e){b[a]=c[e]||""});this.uriParts=b;this.queryPairs=h(this.uriParts.query);this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(a,c){for(var b=0,f=this.length;b<f;++b)a.call(c||this,this[b],b,this)});"protocol userInfo host port path anchor".split(" ").forEach(function(a){d.prototype[a]=function(c){typeof c!=="undefined"&&
(this.uriParts[a]=c);return this.uriParts[a]}});d.prototype.hasAuthorityPrefix=function(a){if(typeof a!=="undefined")this.hasAuthorityPrefixUserPref=a;return this.hasAuthorityPrefixUserPref===null?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref};d.prototype.query=function(a){var c="",b;if(typeof a!=="undefined")this.queryPairs=h(a);for(a=0;a<this.queryPairs.length;a++){b=this.queryPairs[a];c.length>0&&(c=c+"&");c=b[1]===null?c+b[0]:c+b.join("=")}return c.length>0?"?"+c:c};
d.prototype.getQueryParamValue=function(a){var c,b;for(b=0;b<this.queryPairs.length;b++){c=this.queryPairs[b];if(g(a)===g(c[0]))return c[1]}};d.prototype.getQueryParamValues=function(a){var c=[],b,f;for(b=0;b<this.queryPairs.length;b++){f=this.queryPairs[b];g(a)===g(f[0])&&c.push(f[1])}return c};d.prototype.deleteQueryParam=function(a,c){var b=[],f,e,d,h;for(f=0;f<this.queryPairs.length;f++){e=this.queryPairs[f];d=g(e[0])===g(a);h=g(e[1])===g(c);(arguments.length===1&&!d||arguments.length===2&&!d&&
!h)&&b.push(e)}this.queryPairs=b;return this};d.prototype.addQueryParam=function(a,c,b){if(arguments.length===3&&b!==-1){b=Math.min(b,this.queryPairs.length);this.queryPairs.splice(b,0,[a,c])}else arguments.length>0&&this.queryPairs.push([a,c]);return this};d.prototype.replaceQueryParam=function(a,c,b){var d=-1,e,h;if(arguments.length===3){for(e=0;e<this.queryPairs.length;e++){h=this.queryPairs[e];if(g(h[0])===g(a)&&decodeURIComponent(h[1])===g(b)){d=e;break}}this.deleteQueryParam(a,b).addQueryParam(a,
c,d)}else{for(e=0;e<this.queryPairs.length;e++){h=this.queryPairs[e];if(g(h[0])===g(a)){d=e;break}}this.deleteQueryParam(a);this.addQueryParam(a,c,d)}return this};"protocol hasAuthorityPrefix userInfo host port path query anchor".split(" ").forEach(function(a){var c="set"+a.charAt(0).toUpperCase()+a.slice(1);d.prototype[c]=function(b){this[a](b);return this}});d.prototype.scheme=function(){var a="";if(this.protocol()){a=a+this.protocol();this.protocol().indexOf(":")!==this.protocol().length-1&&(a=
a+":");a=a+"//"}else this.hasAuthorityPrefix()&&this.host()&&(a=a+"//");return a};d.prototype.origin=function(){var a=this.scheme();if(this.userInfo()&&this.host()){a=a+this.userInfo();this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a=a+"@")}if(this.host()){a=a+this.host();this.port()&&(a=a+(":"+this.port()))}return a};d.prototype.toString=function(){var a=this.origin();if(this.path())a=a+this.path();else if(this.host()&&(this.query().toString()||this.anchor()))a=a+"/";if(this.query().toString()){this.query().toString().indexOf("?")!==
0&&(a=a+"?");a=a+this.query().toString()}if(this.anchor()){this.anchor().indexOf("#")!==0&&(a=a+"#");a=a+this.anchor()}return a};d.prototype.clone=function(){return new d(this.toString())};define("confluence/jsUri",function(){return d})})(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks.js' */
(function(g){function f(n){var i,o;if(n.offsetX===undefined){var m=0,l=0,k=n.target,j;do{if(k.scrollTop!=0||k.scrollLeft!=0){j=k}m+=k.offsetLeft;l+=k.offsetTop;k=k.offsetParent}while(k&&k!=k.offsetParent);i=n.pageX+(j?j.scrollLeft:0)-m;o=n.pageY+(j?j.scrollTop:0)-l}else{i=n.offsetX;o=n.offsetY}return i>=3&&i<=14&&o>=3&&o<=14}function e(i){return i.currentTarget===i.target}function d(j){var i="page";if(j.closest("table.tasks-report").length){i="report"}else{if(j.closest("#task-container").length){i="mytasks"}else{if(j.closest("ul.inline-task-list").length){i="task"}}}return i}function h(l,j){var i=l.attr("data-inline-task-id");var k=l.find(j).first();if(k.closest("li").attr("data-inline-task-id")===i){return k}else{return g()}}function c(j){var k=""+j.getFullYear();var l=""+(j.getMonth()+1);var i=""+j.getDate();if(l.length<2){l="0"+l}if(i.length<2){i="0"+i}return[k,l,i].join("-")}var a=false;g(window).bind("beforeunload",function(){a=true});var b=[];g(document).delegate("ul.inline-task-list > li[data-inline-task-id]",{click:function(n){if(e(n)&&f(n)){var l=g(n.target);l.toggleClass("checked");var i=l.hasClass("checked")?"CHECKED":"UNCHECKED";var k=l.data("inline-task-id");var o=l.closest("ul").attr("data-inline-tasks-content-id")||AJS.params.pageId;var j=AJS.contextPath()+"/rest/inlinetasks/1/task/"+o+"/"+k+"/";l.prop("disabled",true);var m=l.closest("tr");m.attr("aria-disabled",true);b.push(k);AJS.trigger("inline-tasks.status-update.start",{status:i,taskId:k,taskListQueue:b});g.ajax({type:"POST",url:j,data:g.toJSON({status:i,trigger:"VIEW_PAGE"}),dataType:"json",contentType:"application/json",timeout:30000,error:function(q,r,p){if(a||r==="timeout"){return}AJS.logError("Inline Task #"+k+" was not persisted to "+i+" because of "+p+" (status: "+r+")");var s=require("confluence/message-controller");l.toggleClass("checked");s.showError(s.parseError(q,"Oops! Your task change couldn\u0027t be saved. \u003cbr/\u003eThere could be a few reasons for this."),s.Location.FLAG)},success:function(){var p={dueDate:h(l,"time").attr("datetime"),completionDate:c(new Date()),mode:"view",assigneeUsername:h(l,".user-mention").attr("data-username"),context:d(l)};if(i==="CHECKED"){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.completed",data:p})}}}).always(function(){l.prop("disabled",false);var p=l.closest("tr");p.attr("aria-disabled",false);b.splice(AJS.indexOf(b,k),1);AJS.trigger("inline-tasks.status-update.complete",{status:i,taskId:k,taskListQueue:b})})}},mousemove:function(i){if(e(i)){if(f(i)){g(i.target).addClass("hover")}else{g(i.target).removeClass("hover")}}},mouseout:function(i){if(e(i)){g(i.target).removeClass("hover")}},mousedown:function(i){if(e(i)&&f(i)){g(i.target).addClass("task-active")}},mouseup:function(i){if(e(i)&&f(i)){g(i.target).removeClass("task-active")}}});g("ul.inline-task-list li:not(.checked) time.date-upcoming").tooltip({title:function(){return "This task is due in less than a week"},live:true});g("ul.inline-task-list li:not(.checked) time.date-past").tooltip({title:function(){return "This task is overdue"},live:true});g("span.emptycompletedate").tooltip({title:function(){return "A completion date wasn\u0027t recorded for this task"},live:true});g(document).on("click","time",function(){var j=g(this);var i={date:j.attr("datetime"),mode:"view",context:d(j)};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.clicked",data:i})});AJS.toInit(function(){if(AJS.Meta.get("access-mode")==="READ_ONLY"){g("[data-inline-task-id]").addClass("disabled");g("[data-inline-task-id]").prop("disabled",true)}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks-alert.js' */
Confluence.InlineTasks=Confluence.InlineTasks||{};(function(b){var a=function(c){this.settings=b.extend({},a.DEFAULTS,c);this.template=Confluence.InlineTasks.Templates;b("#inline-tasks-notice").remove();var d=b(this.template.notice(this.settings));d.hide().appendTo("body");d.find(".notice-close").click(function(){d.hide()});this.$notice=d};a.DEFAULTS={textMessage:"Oops! Your task change couldn\u0027t be saved. \u003cbr/\u003eThere could be a few reasons for this.",className:"general-notice"};a.prototype.show=function(){this.$notice.show();return this};a.prototype.hide=function(){this.$notice.hide();return this};Confluence.InlineTasks.Notice=a}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'templates/inline-tasks.soy' */
// This file was automatically generated from inline-tasks.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.InlineTasks.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Templates == 'undefined') { Confluence.InlineTasks.Templates = {}; }


Confluence.InlineTasks.Templates.notice = function(opt_data, opt_ignored) {
  return '<div class="aui-message error' + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '" id="inline-tasks-notice">' + soy.$$filterNoAutoescape(opt_data.textMessage) + '&nbsp;&nbsp;<a href="#" class="notice-close">' + soy.$$escapeHtml('Dismiss') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Templates.notice.soyTemplateName = 'Confluence.InlineTasks.Templates.notice';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks-focus.js' */
AJS.$(document).ready(function(f){var d="focusedTaskId";var a=require("confluence/jsUri");var c=new a(window.location.href);var g=c.getQueryParamValue(d);if(g){var b=$("li[data-inline-task-id="+g+"]");if(b.length){b.addClass("focused");window.scrollTo(b.offset().left,(b.offset().top-($(window).height()/2)))}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/jquery.tablesorter.serveronly.js' */
(function(a){a.extend({tablesorterServerOnly:new function(){this.defaults={classNameDisableSorting:"aui-table-column-unsortable",classNameHeaderDesc:"tablesorter-headerDesc",classNameHeaderAsc:"tablesorter-headerAsc",reverseSort:false,sortColumn:"",onInit:function(){},onSort:function(){},events:{clickHeader:"click.sortServerOnly",refreshHeader:"refreshHeader.sortServerOnly",simulateClickHeader:"simulateClickHeader.sortServerOnly"}};var b=this;var d={updateCurrentHeaderSort:function(e,f){d.resetHeadersSort(e,f);f.$headers.each(function(){var h=a(this),g=h.attr("data-column-name");var i=f.reverseSort;if(g===f.sortColumn){i?h.addClass(f.classNameHeaderDesc):h.addClass(f.classNameHeaderAsc)}})},resetHeadersSort:function(e,f){f.$headers.removeClass(f.classNameHeaderDesc).removeClass(f.classNameHeaderAsc)},prepareHTMLHeader:function(e,f){f.$headers.not("."+f.classNameDisableSorting).attr("unselectable","on").bind("selectstart",false).addClass("tablesorter-header").wrapInner("<span class='aui-table-header-content'/>")},bindEvents:function(f,g){var e=a(f);e.on(g.events.refreshHeader,function(){d.updateCurrentHeaderSort(f,g)});e.on(g.events.simulateClickHeader,function(i,j,h){g.reverseSort=h;g.sortColumn=j})}};var c=function(f,g){var e=a(f);g.$table=e;g.$headers=e.find("thead th");g.$tbodies=e.find("tbody");d.prepareHTMLHeader(f,g);d.updateCurrentHeaderSort(f,g);if(typeof g.onInit==="function"){g.onInit.apply(f,[g])}g.$headers.on(g.events.clickHeader,function(){var h=a(this);if(h.hasClass(g.classNameDisableSorting)){return false}var i=h.attr("data-column-name");if(i===g.sortColumn){g.reverseSort=!g.reverseSort}else{g.reverseSort=false}g.sortColumn=i;if(typeof g.onSort==="function"){g.onSort.apply(f,[g])}return false});d.bindEvents(f,g)};b.construct=function(e){return this.each(function(){var f=this,g=a.extend(true,{},a.tablesorterServerOnly.defaults,e);if(this.config&&f.hasInitialized&&a.tablesorter){a.tablesorter.destroy(f,false,function(){c(f,g)})}else{c(f,g)}})}}()});a.fn.extend({tablesorterServerOnly:a.tablesorterServerOnly.construct})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/tasks-table-sortable.js' */
(function(a){var b=function(d){this.ajaxUrl=d.ajaxUrl;this.restUrlPagination=d.restUrlPagination;this.$wrapper=d.$wrapper;this.table=d.table;this.$table=a(this.table);this.analyticEventKey=d.analyticEventKey;this.sortColumnDefault=d.sortColumnDefault||"duedate";this.sortReverseSortDefault=d.sortReverseSortDefault||false;this.reportParametersDefault=d.reportParametersDefault;this.pageIndex=d.pageIndex||0;this.pageSize=d.pageSize||10;this.pageTotal=d.pageTotal||0;this.pageLimit=d.pageLimit||7;this.adaptive=d.adaptive;this.columns=d.columns;this.templates=d.templates;this.onRenderEmptyTable=d.onRenderEmptyTable;this.onBusySorting=d.onBusySorting};b.getColumnNameFromSortBy=function(e){var d={"due date":"duedate","page title":"location",assignee:"assignee"};return d[e]?d[e]:"duedate"};b.getSortByFromColumnName=function(d){var e={duedate:"due date",location:"page title"};return e[d]?e[d]:d};b.prototype.updateOptions=function(d){a.extend(this,d);this.$table=a(this.table)};b.prototype.getCurrentPageIndex=function(){var e=this.$wrapper.find(".macro-auto-pagination").last();var d=parseInt(e.attr("data-initial-page-index"),10);return isNaN(d)?0:d};b.prototype.renderPagination=function(e,g){var d=this;if(!e){e=d.$table}if(!g){g=d.reportParametersDefault}this.$wrapper.find(".macro-auto-pagination").remove();if(!(d.pageTotal>1)){return}c.UI.Components.Pagination.build({scope:e,pageSize:d.pageSize,totalPages:d.pageTotal,pageLimit:d.pageLimit,path:d.restUrlPagination,adaptive:d.adaptive,currentPage:d.pageIndex,data:{reportParameters:JSON.stringify(g)},success:function f(h,j){var k={task:h,columns:d.columns};var i=d.templates.tasksReportLine(k);j.append(i)}})};b.prototype.toggleBusyState=function(d){this.$wrapper.attr("data-loading",d);if(d){this.$wrapper.find(".task-blanket").show()}else{this.$wrapper.find(".task-blanket").hide()}if(typeof this.onBusySorting==="function"){this.onBusySorting.apply(this,[d])}};b.prototype.renderTable=function(e){var d=this;var f=_.map(e,function(g){return d.templates.tasksReportLine({task:g,columns:d.columns})}).join("");d.$table.find("tbody").html(f);c.Binder.userHover()};b.prototype._triggerAnalyticsSorting=function(){var d=this.analyticEventKey;var e={column:this.sortColumn,direction:this.reverseSort?"desc":"asc"};AJS.trigger("analyticsEvent",{name:d,data:e})};b.prototype._buildAjaxData=function(e){var d={url:this.ajaxUrl,cache:false,dataType:"json",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,reportParameters:JSON.stringify(e)}};return d};b.prototype.init=function(){var d=this;d.sortColumn=d.sortColumnDefault;d.reverseSort=d.sortReverseSortDefault;this.$table.tablesorterServerOnly({sortColumn:d.sortColumn,reverseSort:d.reverseSort,onInit:function(){var e=a(this);e.addClass("aui-table-sortable")},onSort:function(i){var h=this,f=a(h);d.pageIndex=d.getCurrentPageIndex();d.sortColumn=i.sortColumn;d.reverseSort=i.reverseSort;d.toggleBusyState(true);var g=a.extend({},d.reportParametersDefault,{sortColumn:b.getSortByFromColumnName(d.sortColumn),reverseSort:d.reverseSort});var e=d._buildAjaxData(g);a.ajax(e).done(function(j){d.pageIndex=d.getCurrentPageIndex();d.pageTotal=j.totalPages;if(d.pageIndex===0&&d.pageTotal===0){if(typeof d.onRenderEmptyTable==="function"){d.$wrapper.find(".macro-auto-pagination").remove();f.remove();d.onRenderEmptyTable.apply(d)}return}d.renderTable(j.detailLines);d.renderPagination(null,g);f.trigger("refreshHeader.sortServerOnly");d._triggerAnalyticsSorting()}).fail(function(){var j=new c.InlineTasks.Notice({textMessage:"We can\u0027t sort your tasks right now. Refresh the page to try again.",className:"forbidden-notice"});j.show()}).always(function(){d.toggleBusyState(false)})}})};var c=window.Confluence||{};c.InlineTasks=c.InlineTasks||{};c.InlineTasks.TasksTableSortable=b})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/internal/namespace-legacy.js' */
"use strict";var Confluence=require("confluence/legacy");Confluence.UI||(Confluence.UI={});Confluence.UI.Components||(Confluence.UI.Components={});Confluence.UI.Components.BlankPlaceholderBox||(Confluence.UI.Components.BlankPlaceholderBox={});Confluence.UI.Components.CQL||(Confluence.UI.Components.CQL={});Confluence.UI.Components.DatePicker||(Confluence.UI.Components.DatePicker={});Confluence.UI.Components.LabelPicker||(Confluence.UI.Components.LabelPicker={});Confluence.UI.Components.Pagination||(Confluence.UI.Components.Pagination={});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = 'js/internal/soy-templates.js' */
define("confluence-ui-components/js/internal/soy-templates",[],function(){return{BlankPlaceholderBox:function(){return Confluence.UI.Components.BlankPlaceholderBox.Templates},DatePicker:function(){return Confluence.UI.Components.DatePicker.templates},LabelPicker:function(){return Confluence.UI.Components.LabelPicker.templates},Pagination:function(){return Confluence.UI.Components.Pagination.Templates},Components:function(){return Confluence.UI.Components.templates},UserGroupSelect2:function(){return Confluence.UI.Components.UserGroupSelect2}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/js/pagination.js' */
define("confluence-ui-components/js/pagination",["ajs","confluence/hover-user","confluence-ui-components/js/internal/soy-templates","jquery","underscore"],function(g,c,b,f,j){var d=function(n,o,m){var l=n.find("a").attr("aria-disabled",m);if(m){l.attr("disabled","disabled")}else{l.removeAttr("disabled");var k=f(".aui-nav-selected",n).data("index")+1;n.find(".aui-nav-next > a").attr("aria-disabled",k===o);n.find(".aui-nav-previous > a").attr("aria-disabled",k===1)}};var a={scope:null,success:null,data:null,path:"",url:"#",pageLimit:7,currentPage:0,adaptive:false,totalPages:0,pageSize:0};var e=function(m,n,o){var k=Math.floor(o/2);var l=n-1;if(!o||n<=o||m-k<0){return 0}if(m+k>l){return n-o}return m-k};var h=function(p){var o=p.totalPages;var n=p.currentPage;var q=p.pageLimit;var l=p.adaptive;var k;if(q){if(l){o=n+q}k=q}else{k=o}var m=e(n,o,q);return b.Pagination().paginationFooter({currentPage:n||0,startPage:m,itemsToRender:k,totalPages:o,pageSize:p.pageSize,url:p.url||"#"})};var i=function(n){var l=j.extend({},a,n);if(typeof l.success!=="function"){l.success=function(){}}var o=h(l);l.scope.after(o);var m=l.scope.next();var k=m.data("initial-page-index");m.on("click","a",function(t){var s=f(this);var v=s.parents("ol").prev();if(v.prop("id")==="floating-scrollbar"){v=v.prev()}var r=v.is("table")?v:v.find("table");var p=r.data("pageIndex")||k;var u=s.parent("li");if(u.hasClass("aui-nav-selected")||u.find("> a[aria-disabled=true]").length){return}if(u.hasClass("aui-nav-next")){p++}else{if(u.hasClass("aui-nav-previous")){p--}else{p=u.data("index")}}d(m,l.totalPages,true);var q=f.extend({},{pageSize:l.pageSize,pageIndex:p},l.data);f.getJSON(g.contextPath()+l.path,q).done(function(x){p=x.currentPage;var w=r.find("tbody");w.find("tr").remove();r.data("pageIndex",p);j.each(x.detailLines,function(z){l.success(z,w)});g.trigger("ui.components.pagination.updated",[x,l]);var y=f.extend({},l,{totalPages:x.totalPages,adaptive:x.adaptive,currentPage:p});m.html(h(y));d(m,y.totalPages,false);c()}).fail(function(){d(m,l.totalPages,false)});t.preventDefault()})};return{build:i}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/js/internal/pagination-legacy.js' */
"use strict";var _=require("underscore");window.Confluence.UI.Components.Pagination=_.extend(window.Confluence.UI.Components.Pagination,require("confluence-ui-components/js/pagination"));require("ajs").deprecate.prop(window.Confluence.UI.Components.Pagination,"build",{sinceVersion:"2.1.1",extraInfo:"Use require('confluence-ui-components/js/pagination')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/soy/pagination.soy' */
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.Pagination.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.Pagination == 'undefined') { Confluence.UI.Components.Pagination = {}; }
if (typeof Confluence.UI.Components.Pagination.Templates == 'undefined') { Confluence.UI.Components.Pagination.Templates = {}; }


Confluence.UI.Components.Pagination.Templates.paginationFooter = function(opt_data, opt_ignored) {
  var output = '<ol class="aui-nav aui-nav-pagination macro-auto-pagination" data-page-size="' + soy.$$escapeHtml(opt_data.pageSize) + '" data-initial-page-index="' + soy.$$escapeHtml(opt_data.currentPage) + '"><li class="aui-nav-previous"><a ' + ((opt_data.currentPage == 0) ? 'aria-disabled="true"' : 'href="#"') + '>' + soy.$$escapeHtml('Prev') + '</a></li>';
  var startIdx__soy16 = opt_data.startPage + 1;
  var currentIdx__soy17 = opt_data.currentPage + 1;
  var endIdx__soy18 = startIdx__soy16 + opt_data.itemsToRender;
  var totalRange__soy19 = opt_data.totalPages + 1;
  var indexInit20 = startIdx__soy16;
  var indexLimit20 = endIdx__soy18 < totalRange__soy19 ? endIdx__soy18 : totalRange__soy19;
  for (var index20 = indexInit20; index20 < indexLimit20; index20++) {
    output += (index20 == currentIdx__soy17) ? '<li class="aui-nav-selected" data-index="' + soy.$$escapeHtml(index20 - 1) + '">' + soy.$$escapeHtml(index20) + '</li>' : '<li data-index="' + soy.$$escapeHtml(index20 - 1) + '"><a href="#">' + soy.$$escapeHtml(index20) + '</a></li>';
  }
  output += '<li class="aui-nav-next"><a ' + ((currentIdx__soy17 == opt_data.totalPages) ? 'aria-disabled="true"' : 'href="' + soy.$$escapeHtml(opt_data.url) + '"') + '>' + soy.$$escapeHtml('Next') + '</a></li></ol>';
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.Pagination.Templates.paginationFooter.soyTemplateName = 'Confluence.UI.Components.Pagination.Templates.paginationFooter';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:blank-placeholder-box', location = 'soy/blank-placeholder-box.soy' */
// This file was automatically generated from blank-placeholder-box.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.BlankPlaceholderBox.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox.Templates == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox.Templates = {}; }


Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox = function(opt_data, opt_ignored) {
  return '<div class="blank-placeholder-box ' + ((opt_data.customClass) ? soy.$$escapeHtml(opt_data.customClass) : '') + '"><div class="content"><h2>' + soy.$$escapeHtml(opt_data.blankTitle) + '</h2><p>' + soy.$$escapeHtml(opt_data.blankDescription) + '</p></div>' + ((opt_data.customHtml) ? soy.$$filterNoAutoescape(opt_data.customHtml) : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox.soyTemplateName = 'Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'templates/tasks-report.soy' */
// This file was automatically generated from tasks-report.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.InlineTasks.Report.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Report == 'undefined') { Confluence.InlineTasks.Report = {}; }
if (typeof Confluence.InlineTasks.Report.Templates == 'undefined') { Confluence.InlineTasks.Report.Templates = {}; }


Confluence.InlineTasks.Report.Templates.tasksReport = function(opt_data, opt_ignored) {
  var output = '<div class="table-wrapper" data-loading="false"><div class="task-blanket"></div><input type="hidden" name="reportParameters" value="' + soy.$$escapeHtml(opt_data.reportParameters) + '" /><table class="aui aui-table-interactive tasks-report" data-sortable="false" data-total-pages="' + soy.$$escapeHtml(opt_data.totalPages) + '" data-page-size="' + soy.$$escapeHtml(opt_data.pageSize) + '" data-adaptive="' + soy.$$escapeHtml(opt_data.adaptive) + '" data-page-limit="' + soy.$$escapeHtml(opt_data.pageLimit) + '"><thead><tr class="tablesorter-headerRow">';
  var headingList14 = opt_data.headings;
  var headingListLen14 = headingList14.length;
  for (var headingIndex14 = 0; headingIndex14 < headingListLen14; headingIndex14++) {
    var headingData14 = headingList14[headingIndex14];
    output += '<th class="header-' + soy.$$escapeHtml(headingData14) + ((headingData14 == 'description') ? ' aui-table-column-unsortable' : '') + '" data-column-name="' + soy.$$escapeHtml(headingData14) + '">' + soy.$$escapeHtml(opt_data.headingTexts[headingData14]) + '</th>';
  }
  output += '</tr></thead><tbody>';
  if (opt_data.tasks.length) {
    var taskList29 = opt_data.tasks;
    var taskListLen29 = taskList29.length;
    for (var taskIndex29 = 0; taskIndex29 < taskListLen29; taskIndex29++) {
      var taskData29 = taskList29[taskIndex29];
      output += Confluence.InlineTasks.Report.Templates.tasksReportLine({task: taskData29, columns: opt_data.headings});
    }
  } else {
    output += '<tr><td colspan="' + soy.$$escapeHtml(opt_data.headings.length) + '">' + soy.$$escapeHtml('Create a task list in a Confluence page to keep track of things you need to do.') + '</td></tr>';
  }
  output += '</tbody></table></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Report.Templates.tasksReport.soyTemplateName = 'Confluence.InlineTasks.Report.Templates.tasksReport';
}


Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Hey! Did you know...') + '</h2><p>' + soy.$$escapeHtml('You can view the tasks you created, or assigned to you, in the tasks tabs of your profile.') + '</p>';
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification.soyTemplateName = 'Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification';
}


Confluence.InlineTasks.Report.Templates.tasksReportLine = function(opt_data, opt_ignored) {
  var output = '<tr data-task-id="' + soy.$$escapeHtml(opt_data.task.taskId) + '" aria-disabled="false">';
  var columnList51 = opt_data.columns;
  var columnListLen51 = columnList51.length;
  for (var columnIndex51 = 0; columnIndex51 < columnListLen51; columnIndex51++) {
    var columnData51 = columnList51[columnIndex51];
    if (columnData51 == 'duedate') {
      output += '<td class=\'tasks-report-date\'>' + ((opt_data.task.dueDate) ? soy.$$escapeHtml(opt_data.task.dueDate) : '') + '</td>';
    } else if (columnData51 == 'description') {
      output += '<td>' + soy.$$filterNoAutoescape(opt_data.task.taskHtml) + '</td>';
    } else if (columnData51 == 'assignee') {
      output += '<td class=\'tasks-report-assignee\'>' + ((opt_data.task.assigneeUserName) ? Confluence.Templates.User.usernameLink({username: opt_data.task.assigneeUserName, fullName: opt_data.task.assigneeFullName, canView: false}) : '') + '</td>';
    } else if (columnData51 == 'location') {
      output += '<td><a class=\'task-location\' href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.task.pageUrl) + '">' + soy.$$escapeHtml(opt_data.task.pageTitle) + '</a></td>';
    } else if (columnData51 == 'completedate') {
      output += '<td class=\'tasks-report-date\'>' + ((opt_data.task.completeDate) ? soy.$$escapeHtml(opt_data.task.completeDate) : (opt_data.task.taskCompleted) ? '<span class="emptycompletedate">--</span>' : '') + '</td>';
    } else if (columnData51 == 'labels') {
      output += '<td>';
      var labelList90 = opt_data.task.labels;
      var labelListLen90 = labelList90.length;
      for (var labelIndex90 = 0; labelIndex90 < labelListLen90; labelIndex90++) {
        var labelData90 = labelList90[labelIndex90];
        output += aui.labels.label({text: labelData90});
      }
      output += '</td>';
    }
  }
  output += '</tr>';
  return output;
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Report.Templates.tasksReportLine.soyTemplateName = 'Confluence.InlineTasks.Report.Templates.tasksReportLine';
}


Confluence.InlineTasks.Report.Templates.taskReportBrowserWarning = function(opt_data, opt_ignored) {
  var param98 = '<p>' + soy.$$escapeHtml('Unable to show this task report.') + '</p>';
  var messageList102 = opt_data.messages;
  var messageListLen102 = messageList102.length;
  for (var messageIndex102 = 0; messageIndex102 < messageListLen102; messageIndex102++) {
    var messageData102 = messageList102[messageIndex102];
    param98 += '<p>' + soy.$$escapeHtml(messageData102) + '</p>';
  }
  var output = '' + aui.message.warning({content: param98});
  return output;
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Report.Templates.taskReportBrowserWarning.soyTemplateName = 'Confluence.InlineTasks.Report.Templates.taskReportBrowserWarning';
}


Confluence.InlineTasks.Report.Templates.taskReportWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '<p>' + soy.$$escapeHtml('Unable to show the task report. Edit this page to resolve the issues.') + '</p>'});
};
if (goog.DEBUG) {
  Confluence.InlineTasks.Report.Templates.taskReportWarning.soyTemplateName = 'Confluence.InlineTasks.Report.Templates.taskReportWarning';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report-blank-exp.js' */
(function(b){Confluence.InlineTasks=Confluence.InlineTasks||{};Confluence.InlineTasks.TasksReport=Confluence.InlineTasks.TasksReport||{};var a={"blank.complete.title":"Task report","blank.complete.desc":"Get going, no tasks completed yet.","blank.incomplete.title":"Task report","blank.incomplete.desc":"Looking good, no incomplete tasks."};Confluence.InlineTasks.TasksReport.renderBlankExperiences=function(g,c){if(!c){c="incomplete"}var f=a["blank."+c+".title"],e=a["blank."+c+".desc"];var d=Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox({blankTitle:f,blankDescription:e,customClass:c+" tasks-report-blank"});g.html(d)}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report.js' */
AJS.$(function(c){var b="/rest/inlinetasks/1/task-report/",a=Confluence.InlineTasks.Report.Templates,e=Confluence.InlineTasks.TasksTableSortable;var d=c(".tasks-report").parent();_.each(d,function(i){var l=c(i),n=l.find("table.tasks-report"),m=n.data("page-size"),k=n.data("total-pages"),f=n.data("page-limit"),q=n.data("adaptive"),p=l.find("input[name=reportParameters]").val(),g=JSON.parse(p);var o=function(r,s){c(r).attr("aria-disabled",s)};AJS.bind("inline-tasks.status-update.start",function(t,s){if(s.taskListQueue.length>0){var r=c("li[data-inline-task-id="+s.taskId+"]").closest(".tasks-report").siblings(".macro-auto-pagination");o(r,true);r=r.find("li a");r.on("click.taskreport.pagination",function(u){u.preventDefault();u.stopPropagation()})}});AJS.bind("inline-tasks.status-update.complete",function(s,r){if(r.taskListQueue.length===0){o(".macro-auto-pagination",false);c(".macro-auto-pagination li a").off("click.taskreport.pagination")}});var j=n.closest(".table-wrapper");var h=new e({$wrapper:j,table:n[0],sortReverseSortDefault:g.reverseSort,sortColumnDefault:e.getColumnNameFromSortBy(g.sortColumn),reportParametersDefault:g,pageIndex:0,pageSize:m,pageTotal:k,adaptive:q,pageLimit:f,templates:a,columns:g.columns,onRenderEmptyTable:function(){Confluence.InlineTasks.TasksReport.renderBlankExperiences(j,g.status)},analyticEventKey:"confluence-spaces.tasks.report.sorted",restUrlPagination:b,ajaxUrl:Confluence.getContextPath()+b});h.init();if(q||k>1){h.renderPagination()}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'js/help-tip.js' */
(function(f){function b(){return false}function d(){return true}var l=0,g=new Date().getTime();var k=AJS.contextPath()+"/rest/helptips/1.0/tips";function h(n){n=""+(n||"");return n.replace(/\./g,"-")}function j(o,n){if(AJS.EventQueue&&n&&n.attributes.id){var q={};var p=h(n.attributes.id);q.name="helptips."+p+"."+o;q.properties={};AJS.EventQueue.push(q)}}function c(){return"c"+g+(l++)}var a={dismissedTipIds:[],loaded:f.Deferred(),url:function(){return k},sync:function(o,n){o||(o="get");n||(n=null);return f.ajax(this.url(),{type:o,context:this,dataType:"json",contentType:"application/json",data:n&&JSON.stringify(n),processData:false}).promise()},fetch:function(){var n=this.sync();n.done(function(o){f.merge(this.dismissedTipIds,o);this.loaded.resolve()});return n.promise()},show:function(n){this.loaded.done(n)},dismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=true}else{this.dismissedTipIds.push(o);this.sync("post",{id:o})}},undismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=false}else{this.dismissedTipIds.splice(f.inArray(o,this.dismissedTipIds),1);this.sync("delete",{id:o})}},isDismissed:function(n){var o=n.attributes.id;return(o)?f.inArray(o,this.dismissedTipIds)>=0:n._dismissed}};var e=AJS.HelpTip=function(n){var o;this.attributes=f.extend({},n);this.attributes.id||(this.attributes.id=false);if(this.attributes.body){this.attributes.bodyHtml=this.attributes.body;delete this.attributes.body}this.cid=c();o=this.attributes.anchor;delete this.attributes.anchor;this.view=o?new i(this,o):new m(this);this.view.$el.addClass("aui-help-tip")};AJS.HelpTip.Manager=a;f.extend(e.prototype,{show:function(){var n=this;AJS.HelpTip.Manager.show(function(){if(!n.isDismissed()){if(AJS.Popups&&AJS.Popups.DisplayController){AJS.Popups.DisplayController.request({name:n.id,weight:1000,show:function(){n.view.show()}})}else{n.view.show()}j("shown",n)}})},dismiss:function(){var n=h(arguments[0]||"programmatically");this.view.dismiss();if(!this.isDismissed()){AJS.HelpTip.Manager.dismiss(this);j("dismissed."+n,this)}},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return AJS.HelpTip.Manager.isDismissed(this)}});var i=function(o,n){this.initialize(o,n)};f.extend(i.prototype,{initialize:function(r,q){var o=this;var s=q.prop("ownerDocument");var p=s!=window.document;if(p){var n=f("iframe").filter(function(){return this.contentDocument==s});n.contents().scroll(function(){var v=f(this).contents().find("body").scrollTop();var w=n.offset().top;var u=o.popup.data("offset-top");var t=o.popup.find(".arrow").height();o.popup.css("top",u-v);o.popup.toggle(v<=u-w-t&&v+n.height()-t+w-o.popup.height()>=u)})}this.model=r;this.beforeHide=b;this.dismissButton=f(AJS.Templates.HelpTip.tipDismiss());this.dismissButton.click(function(t){r.dismiss("close-button");t.preventDefault()});this.popup=AJS.InlineDialog(q,r.cid,function(v,u,t){v.html(AJS.Templates.HelpTip.tipContent(r.attributes));v.find(".helptip-body").after(o.dismissButton);v.unbind("mouseover mouseout");v.find(".helptip-link").click(function(){j("learn-more.clicked",r)});t()},{container:"body",noBind:true,preHideCallback:function(){return o.beforeHide()},calculatePositions:function(t,y,z,x){var w=AJS.InlineDialog.opts.calculatePositions(t,y,z,x);if(p){var v=t.find(".arrow").height();var u=n.contents().find("body").scrollTop();w.popupCss.top=n.offset().top+(q.offset().top-u)+q.height()+v;w.popupCss.left=q.offset().left;n.contents().scroll()}t.data("offset-top",w.popupCss.top);return w}});this.popup.refresh();this._popupHide=this.popup.hide;this.popup.hide=b;this.$el=f(this.popup[0]);AJS.$(document).bind("showLayer",function(v,u,t){if(u==="inlineDialog"&&t.id===r.cid){AJS.InlineDialog.current=null;AJS.$(document.body).unbind("click."+r.cid+".inline-dialog-check");t._validateClickToClose=b;t.hide=b}})},show:function(){var n=this.popup,o=function(p){if(!n.has(p.target).length){n.shadow.remove();n.remove()}};n.show()},dismiss:function(){this.beforeHide=d;this._popupHide()}});var m=function(n){this.initialize(n)};f.extend(m.prototype,{initialize:function(){this.$el=f("<div />")},show:f.noop,dismiss:f.noop});if(AJS.Meta.get("remote-user")){a.fetch()}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'templates/help-tip.soy' */
// This file was automatically generated from help-tip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h4 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</div>' + ((opt_data.url) ? '<a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipDismiss = function(opt_data, opt_ignored) {
  return '<button class="helptip-dismiss aui-button" type="button">' + soy.$$escapeHtml('Dismiss') + '</button>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipDismiss.soyTemplateName = 'AJS.Templates.HelpTip.tipDismiss';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-feature-discovery-resources', location = 'js/tasks-discovery.js' */
(function(d){var c="com.atlassian.confluence.plugins.confluence-jira-metadata";var b="inline-tasks-flag";function a(){if(!!AJS.HelpTip){var e={id:null,body:Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification(),anchor:d("#user-menu-link")};var f=new AJS.HelpTip(e);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.feature.discovery.shown"});f.show();Confluence.FeatureDiscovery.forPlugin(c).markDiscovered(b)}}d(function(){if(d("meta[name=show-task-feature-discovery-flag]").length>0&&Confluence.FeatureDiscovery.forPlugin(c).shouldShow(b)){a()}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.js' */
(function(){function x(){this.returnValue=!1}function y(){this.cancelBubble=!0}var z=0,p=[],u={},v={},t={},w={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},A=/[<>&\"\']/g,q=window.setTimeout,m={},h,j="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/java-archive,jar,application/java-archive,war,application/java-archive,ear,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.template,xltx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,audio/mpeg,mpga mpega mp2 mp3,audio/mp3,mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/xml,xml,text/javascript,js,text/css,css,text/rtf,rtf,text/x-java-source,java,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe".split(/,/),
k,n,o;for(k=0;k<j.length;k+=2){o=j[k+1].split(/ /);for(n=0;n<o.length;n++){v[o[n]]=j[k];var r=t[j[k]]||[];r.push(o[n]);t[j[k]]=r}}j=navigator;k=j.userAgent;o=j.vendor;r=(n=/WebKit/.test(k))&&-1!==o.indexOf("Apple");o=window.opera&&window.opera.buildNumber;var j={windows:-1!==navigator.platform.indexOf("Win"),ie:!n&&!o&&/MSIE/gi.test(k)&&/Explorer/gi.test(j.appName),webkit:n,gecko:!n&&/Gecko/.test(k),safari:r,opera:!!o},c={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,
GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:v,mineTypeToExtensionsMap:t,ua:j,extend:function(a){c.each(arguments,function(b,g){0<g&&c.each(b,function(b,c){a[c]=b})});return a},getElement:function(a){return a&&1===a.nodeType?a:document.getElementById(a)},cleanName:function(a){var b,c;c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,
"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;p[a]=b;p.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),b;for(b=0;5>b;b++)a+=Math.floor(65535*Math.random()).toString(32);return(c.guidPrefix||
"p")+a+(z++).toString(32)},buildUrl:function(a,b){var g="";c.each(b,function(a,b){g+=(g?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)});g&&(a+=(0<a.indexOf("?")?"&":"?")+g);return a},each:function(a,b){var c,f;if(a)if(c=a.length,void 0===c)for(f in a){if(a.hasOwnProperty(f)&&!1===b(a[f],f))break}else for(f=0;f<c&&!1!==b(a[f],f);f++);},formatSize:function(a){return void 0===a||/\D/.test(a)?c.translate("N/A"):1073741824<a?Math.round(a/1073741824,1)+" GB":1048576<a?Math.round(a/1048576,1)+
" MB":1024<a?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,e=0;b=0;a&&(b=a.getBoundingClientRect(),a="CSS1Compat"===h.compatMode?h.documentElement:h.body,e=b.left+a.scrollLeft,b=b.top+a.scrollTop);return{x:e,y:b}}var f=0,d=0,e,h=document,b=b||h.body;if(a&&a.getBoundingClientRect&&0<navigator.userAgent.indexOf("MSIE")&&8!==h.documentMode)return f=c(a),d=c(b),{x:f.x-d.x,y:f.y-d.y};for(e=a;e&&e!=b&&e.nodeType;)f+=e.offsetLeft||0,d+=e.offsetTop||0,e=e.offsetParent;for(e=
a.parentNode;e&&e!=b&&e.nodeType;)f-=e.scrollLeft||0,d-=e.scrollTop||0,e=e.parentNode;return{x:f,y:d}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024));return a},xmlEncode:function(a){return a?(""+a).replace(A,function(a){return w[a]?"&"+w[a]+";":a}):a},toArray:function(a){var b,
c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},addI18n:function(a){return c.extend(u,a)},translate:function(a){return u[a]||a},isEmptyObj:function(a){if(void 0===a)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){return""==a.className?!1:RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},addClass:function(a,b){c.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),
function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return window.getComputedStyle(a,null)[b]},addEvent:function(a,b,g,f){var d,b=b.toLowerCase();void 0===h&&(h="Plupload_"+c.guid());a.addEventListener?(d=g,a.addEventListener(b,d,!1)):a.attachEvent&&(d=function(){var a=window.event;a.target||(a.target=a.srcElement);a.preventDefault=x;a.stopPropagation=y;g(a)},a.attachEvent("on"+b,d));void 0===a[h]&&(a[h]=c.guid());
m.hasOwnProperty(a[h])||(m[a[h]]={});a=m[a[h]];a.hasOwnProperty(b)||(a[b]=[]);a[b].push({func:d,orig:g,key:f})},removeEvent:function(a,b,g){var f,d;"function"==typeof g?f=g:d=g;b=b.toLowerCase();if(a[h]&&m[a[h]]&&m[a[h]][b]){for(var g=m[a[h]][b],e=g.length-1;0<=e;e--)if(g[e].key===d||g[e].orig===f)if(a.detachEvent?a.detachEvent("on"+b,g[e].func):a.removeEventListener&&a.removeEventListener(b,g[e].func,!1),g[e].orig=null,g[e].func=null,g.splice(e,1),void 0!==f)break;g.length||delete m[a[h]][b];if(c.isEmptyObj(m[a[h]])){delete m[a[h]];
try{delete a[h]}catch(k){a[h]=void 0}}}},removeAllEvents:function(a,b){void 0!==a[h]&&a[h]&&c.each(m[a[h]],function(g,f){c.removeEvent(a,f,b)})},Uploader:function(a){function b(){var a,b=0,d;if(this.state==c.STARTED){for(d=0;d<e.length;d++)!a&&e[d].status==c.QUEUED?(a=e[d],a.status=c.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a)):b++;b==e.length&&(this.stop(),this.trigger("UploadComplete",e))}}function g(){var a,b;d.reset();for(a=0;a<e.length;a++)b=e[a],void 0!==b.size?(d.size+=
b.size,d.loaded+=b.loaded):d.size=void 0,b.status==c.DONE?d.uploaded++:b.status==c.FAILED?d.failed++:d.queued++;void 0===d.size?d.percent=0<e.length?Math.ceil(100*(d.uploaded/e.length)):0:(d.bytesPerSec=Math.ceil(d.loaded/((+new Date-h||1)/1E3)),d.percent=0<d.size?Math.ceil(100*(d.loaded/d.size)):0)}var f={},d,e=[],h;d=new c.QueueProgress;a=c.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a);c.extend(this,{state:c.STOPPED,runtime:"",features:{},files:e,settings:a,
total:d,id:c.guid(),init:function(){function f(){var a=s[k++],b,e,d;if(a){b=a.getFeatures();if(e=i.settings.required_features){e=e.split(",");for(d=0;d<e.length;d++)if(!b[e[d]]){f();return}}a.init(i,function(c){c&&c.success?(i.features=b,i.runtime=a.name,i.trigger("Init",{runtime:a.name}),i.trigger("PostInit"),i.refresh()):f()})}else i.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})}var i=this,l,s,k=0,j;"function"==typeof a.preinit?a.preinit(i):c.each(a.preinit,function(a,
b){i.bind(b,a)});a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url);a.chunk_size=c.parseSize(a.chunk_size);a.max_file_size=c.parseSize(a.max_file_size);i.bind("FilesAdded",function(b,d){b.trigger("Started",d);var f,g,l=0,h;if((f=a.filters)&&f.length){h=[];c.each(f,function(a){c.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?h.push("\\.*"):h.push("\\."+a.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,
"\\$&")+"]","g"),"\\$&"))})});h=RegExp(h.join("|")+"$","i")}for(f=0;f<d.length;f++){g=d[f];g.loaded=0;g.percent=0;g.status=c.QUEUED;if(h&&!h.test(g.name))b.trigger("Error",{code:c.FILE_EXTENSION_ERROR,message:c.translate("File extension error."),file:g});else if(g.size!==void 0&&g.size>a.max_file_size)b.trigger("Error",{code:c.FILE_SIZE_ERROR,message:c.translate("File size error."),file:g});else{e.push(g);l++}}if(l)q(function(){i.trigger("QueueChanged");i.refresh()},1);else return false});a.unique_names&&
i.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]);b.target_name=b.id+"."+d});i.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100;g()});i.bind("StateChanged",function(a){if(a.state==c.STARTED)h=+new Date;else if(a.state==c.STOPPED)for(l=a.files.length-1;l>=0;l--)if(a.files[l].status==c.UPLOADING){a.files[l].status=c.QUEUED;g()}});i.bind("QueueChanged",g);i.bind("Error",function(a,e){if(e.file){e.file.status=c.FAILED;g();a.state==
c.STARTED&&(d.queued||q(function(){b.call(i)},1))}});i.bind("FileUploaded",function(a,d){d.status=c.DONE;d.loaded=d.size;a.trigger("UploadProgress",d);q(function(){b.call(i)},1)});if(a.runtimes){s=[];j=a.runtimes.split(/\s?,\s?/);for(l=0;l<j.length;l++)p[j[l]]&&s.push(p[j[l]])}else s=p;f();"function"==typeof a.init?a.init(i):c.each(a.init,function(a,b){i.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=c.STARTED&&(this.state=c.STARTED,this.trigger("StateChanged"),
b.call(this))},stop:function(){this.state!=c.STOPPED&&(this.state=c.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},getFile:function(a){var b;for(b=e.length-1;0<=b;b--)if(e[b].id===a)return e[b]},removeFile:function(a){var b;for(b=e.length-1;0<=b;b--)if(e[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var f;f=e.splice(void 0===a?0:a,void 0===b?e.length:b);this.trigger("FilesRemoved",f);this.trigger("QueueChanged");f[0].status==c.UPLOADING&&this.state==c.STARTED&&
this.trigger("CancelUpload");if(!d.queued){var g=this;q(function(){g.trigger("UploadComplete")})}return f},trigger:function(a){var b=f[a.toLowerCase()],c,d;if(b){d=Array.prototype.slice.call(arguments);d[0]=this;for(c=0;c<b.length;c++)if(!1===b[c].func.apply(b[c].scope,d))return!1}return!0},hasEventListener:function(a){return!!f[a.toLowerCase()]},bind:function(a,b,c){var d,a=a.toLowerCase();d=f[a]||[];d.push({func:b,scope:c||this});f[a]=d},unbind:function(a,b){var a=a.toLowerCase(),c=f[a],d;if(c){if(void 0!==
b)for(d=c.length-1;0<=d;d--){if(c[d].func===b){c.splice(d,1);break}}else c=[];c.length||delete f[a]}},unbindAll:function(){var a=this;c.each(f,function(b,c){a.unbind(c)})},destroy:function(){this.trigger("Destroy");this.unbindAll()}})},File:function(a,b,c){this.id=a;this.name=b;this.size=c;this.status=this.percent=this.loaded=0},Runtime:function(){this.getFeatures=function(){};this.init=function(){}},QueueProgress:function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=
0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},runtimes:{}};window.plupload=c})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.html5.js' */
(function(s,j,f,p){function G(f,e,k,g){var b,a,d,q,m=this;var c=y[f.id],r=function(c){b=j.createElement("canvas");b.style.display="none";j.body.appendChild(b);a=b.getContext("2d");d=new Image;d.onerror=d.onabort=function(){g({success:!1})};d.onload=function(){var r,t,j,o;e.width||(e.width=d.width);e.height||(e.height=d.height);q=Math.min(e.width/d.width,e.height/d.height);if(1>q||1===q&&"image/jpeg"===k){r=Math.round(d.width*q);t=Math.round(d.height*q);b.width=r;b.height=t;a.drawImage(d,0,0,r,t);
if("image/jpeg"===k){if(j=new w(atob(c.substring(c.indexOf("base64,")+7))),j.headers&&j.headers.length&&(o=new H,o.init(j.get("exif")[0])&&(o.setExif("PixelXDimension",r),o.setExif("PixelYDimension",t),j.set("exif",o.getBinary()),m.hasEventListener("ExifData")&&m.trigger("ExifData",f,o.EXIF()),m.hasEventListener("GpsData")&&m.trigger("GpsData",f,o.GPS()))),e.quality)try{c=b.toDataURL(k,e.quality/100)}catch(s){c=b.toDataURL(k)}}else c=b.toDataURL(k);c=c.substring(c.indexOf("base64,")+7);c=atob(c);
j&&(j.headers&&j.headers.length)&&(c=j.restore(c),j.purge());b.parentNode.removeChild(b);g({success:!0,data:c})}else g({success:!1})};d.src=c},t;"FileReader"in s?(t=new FileReader,t.readAsDataURL(c),t.onload=function(){r(t.result)}):r(c.getAsDataURL())}function C(){function f(b,a){var d=k?0:-8*(a-1),q=0,m;for(m=0;m<a;m++)q|=g.charCodeAt(b+m)<<Math.abs(d+8*m);return q}function e(b,a,d){d=3===arguments.length?d:g.length-a-1;g=g.substr(0,a)+b+g.substr(d+a)}var k=!1,g;return{II:function(b){if(b===p)return k;
k=b},init:function(b){k=!1;g=b},SEGMENT:function(b,a,d){switch(arguments.length){case 1:return g.substr(b,g.length-b-1);case 2:return g.substr(b,a);case 3:e(d,b,a);break;default:return g}},BYTE:function(b){return f(b,1)},SHORT:function(b){return f(b,2)},LONG:function(b,a){if(a===p)return f(b,4);var d="",q=k?0:-24,m;for(m=0;4>m;m++)d+=String.fromCharCode(a>>Math.abs(q+8*m)&255);e(d,b,4)},SLONG:function(b){b=f(b,4);return 2147483647<b?b-4294967296:b},STRING:function(b,a){for(var d="",a=a+b;b<a;b++)d+=
String.fromCharCode(f(b,1));return d}}}function w(f){var e={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},k=[],g,b,a=p,d=0;g=new C;g.init(f);if(65496===g.SHORT(0)){b=2;for(f=Math.min(1048576,f.length);b<=f;)if(a=g.SHORT(b),65488<=a&&65495>=a)b+=2;else{if(65498===a||65497===a)break;d=g.SHORT(b+2)+2;e[a]&&g.STRING(b+4,e[a].signature.length)===e[a].signature&&k.push({hex:a,app:e[a].app.toUpperCase(),
name:e[a].name.toUpperCase(),start:b,length:d,segment:g.SEGMENT(b,d)});b+=d}g.init(null);return{headers:k,restore:function(a){g.init(a);var d=new w(a);if(!d.headers)return!1;for(a=d.headers.length;0<a;a--){var c=d.headers[a-1];g.SEGMENT(c.start,c.length,"")}d.purge();b=65504==g.SHORT(2)?4+g.SHORT(4):2;a=0;for(d=k.length;a<d;a++)g.SEGMENT(b,0,k[a].segment),b+=k[a].length;return g.SEGMENT()},get:function(a){for(var d=[],c=0,b=k.length;c<b;c++)k[c].app===a.toUpperCase()&&d.push(k[c].segment);return d},
set:function(a,d){var c=[];"string"===typeof d?c.push(d):c=d;for(var b=ii=0,f=k.length;b<f&&!(k[b].app===a.toUpperCase()&&(k[b].segment=c[ii],k[b].length=c[ii].length,ii++),ii>=c.length);b++);},purge:function(){k=[];g.init(null)}}}}function H(){function f(a,d){var q=e.SHORT(a),m,c,k,h,l,j=[],n={};for(m=0;m<q;m++)if(l=a+12*m+2,k=d[e.SHORT(l)],k!==p){c=e.SHORT(l+=2);h=e.LONG(l+=2);l+=4;j=[];switch(c){case 1:case 7:4<h&&(l=e.LONG(l)+g.tiffHeader);for(c=0;c<h;c++)j[c]=e.BYTE(l+c);break;case 2:4<h&&(l=
e.LONG(l)+g.tiffHeader);n[k]=e.STRING(l,h-1);continue;case 3:2<h&&(l=e.LONG(l)+g.tiffHeader);for(c=0;c<h;c++)j[c]=e.SHORT(l+2*c);break;case 4:1<h&&(l=e.LONG(l)+g.tiffHeader);for(c=0;c<h;c++)j[c]=e.LONG(l+4*c);break;case 5:l=e.LONG(l)+g.tiffHeader;for(c=0;c<h;c++)j[c]=e.LONG(l+4*c)/e.LONG(l+4*c+4);break;case 9:l=e.LONG(l)+g.tiffHeader;for(c=0;c<h;c++)j[c]=e.SLONG(l+4*c);break;case 10:l=e.LONG(l)+g.tiffHeader;for(c=0;c<h;c++)j[c]=e.SLONG(l+4*c)/e.SLONG(l+4*c+4);break;default:continue}h=1==h?j[0]:j;
n[k]=b.hasOwnProperty(k)&&"object"!=typeof h?b[k][h]:h}return n}var e,k,g={},b;e=new C;k={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",
41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{"0":"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};b={ColorSpace:{1:"sRGB","0":"Uncalibrated"},MeteringMode:{"0":"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",
13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{"0":"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",
16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{"0":"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{"0":"Auto white balance",1:"Manual white balance"},SceneCaptureType:{"0":"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},
Contrast:{"0":"Normal",1:"Soft",2:"Hard"},Saturation:{"0":"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{"0":"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(a){g={tiffHeader:10};if(a===p||!a.length)return!1;e.init(a);return 65505===e.SHORT(0)&&"EXIF\x00"===e.STRING(4,5).toUpperCase()?(a=p,a=g.tiffHeader,e.II(18761==e.SHORT(a)),42!==e.SHORT(a+=2)?a=!1:(g.IFD0=g.tiffHeader+e.LONG(a+
2),a=f(g.IFD0,k.tiff),g.exifIFD="ExifIFDPointer"in a?g.tiffHeader+a.ExifIFDPointer:p,g.gpsIFD="GPSInfoIFDPointer"in a?g.tiffHeader+a.GPSInfoIFDPointer:p,a=!0),a):!1},EXIF:function(){var a;a=f(g.exifIFD,k.exif);a.ExifVersion&&(a.ExifVersion=String.fromCharCode(a.ExifVersion[0],a.ExifVersion[1],a.ExifVersion[2],a.ExifVersion[3]));return a},GPS:function(){var a;a=f(g.gpsIFD,k.gps);a.GPSVersionID&&(a.GPSVersionID=a.GPSVersionID.join("."));return a},setExif:function(a,d){if("PixelXDimension"!==a&&"PixelYDimension"!==
a)return!1;var b;b=a;var f,c,h,j=0;if("string"===typeof b)for(hex in f=k.exif,f)if(f[hex]===b){b=hex;break}f=g.exifIFD;c=e.SHORT(f);for(i=0;i<c;i++)if(h=f+12*i+2,e.SHORT(h)==b){j=h+8;break}j?(e.LONG(j,d),b=!0):b=!1;return b},getBinary:function(){return e.SEGMENT()}}}var y={},F;f.runtimes.Html5=f.addRuntime("html5",{getFeatures:function(){var h,e,k,g,b,a;e=k=b=a=!1;s.XMLHttpRequest&&(h=new XMLHttpRequest,k=!!h.upload,e=!(!h.sendAsBinary&&!h.upload));e&&(g=!!(h.sendAsBinary||s.Uint8Array&&s.ArrayBuffer),
b=!(!File||!File.prototype.getAsDataURL&&!s.FileReader||!g),a=!(!File||!File.prototype.mozSlice&&!File.prototype.webkitSlice&&!File.prototype.slice));F=f.ua.safari&&f.ua.windows&&navigator.userAgent&&0<navigator.userAgent.indexOf("Version/4");h=e;e=j.createElement("div");return{html5:h,dragdrop:"draggable"in e||"ondragstart"in e&&"ondrop"in e,jpgresize:b,pngresize:b,multipart:b||!!s.FileReader||!!s.FormData,canSendBinary:g,cantSendBlobInFormData:!(!f.ua.gecko||!s.FormData||!s.FileReader||FileReader.prototype.readAsArrayBuffer),
progress:k,chunks:a,multi_selection:!(f.ua.safari&&f.ua.windows),triggerDialog:f.ua.gecko&&s.FormData||f.ua.webkit||f.ua.windows}},init:function(h,e){function k(a){var d,b,g=[],c,e={};for(b=0;b<a.length;b++)d=a[b],e[d.name]||(e[d.name]=!0,c=f.guid(),y[c]=d,c=new f.File(c,d.fileName||d.name,d.fileSize||d.size),c.nativeFile=d,g.push(c));g.length&&h.trigger("FilesAdded",g)}var g,b;g=this.getFeatures();g.html5?(h.upload=function(a){k(a)},h.bind("Init",function(a){var d,b,g=[],c,e,t=a.settings.filters,
l,s;c=j.body;var n;d=j.createElement("div");d.id=a.id+"_html5_container";f.extend(d.style,{position:"absolute",background:h.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:h.settings.shim_bgcolor?"":0});d.className="plupload html5";h.settings.container&&(c=j.getElementById(h.settings.container),"static"===f.getStyle(c,"position")&&(c.style.position="relative"));c.appendChild(d);c=0;a:for(;c<t.length;c++){l=t[c].extensions.split(/,/);for(e=0;e<
l.length;e++){if("*"===l[e]){g=[];break a}(s=f.mimeTypes[l[e]])&&g.push(s)}}d.innerHTML='<input id="'+h.id+'_html5"  style="font-size:999px" type="file" accept="'+g.join(",")+'" '+(h.settings.multi_selection&&h.features.multi_selection?'multiple="multiple"':"")+" />";d.scrollTop=100;n=j.getElementById(h.id+"_html5");h.settings.inputFileClazz&&(n.className+=" "+h.settings.inputFileClazz);a.features.triggerDialog?f.extend(n.style,{position:"absolute",width:"100%",height:"100%"}):f.extend(n.style,{cssFloat:"right",
styleFloat:"right"});var p=function(){k(this.files);if(navigator.appVersion.indexOf("MSIE10")===-1){n=this.cloneNode(true);n.onchange=p;this.parentNode.replaceChild(n,this)}else this.value=""};n.onchange=p;if(b="string"===typeof a.settings.browse_button?j.getElementById(a.settings.browse_button):a.settings.browse_button){var o=a.settings.browse_button_hover,B=a.settings.browse_button_active;d=a.features.triggerDialog?b:d;o&&(f.addEvent(d,"mouseover",function(){f.addClass(b,o)},a.id),f.addEvent(d,
"mouseout",function(){f.removeClass(b,o)},a.id));B&&(f.addEvent(d,"mousedown",function(){f.addClass(b,B)},a.id),f.addEvent(j.body,"mouseup",function(){f.removeClass(b,B)},a.id));a.features.triggerDialog&&f.addEvent(b,"click",function(b){j.getElementById(a.id+"_html5").click();b.preventDefault()},a.id)}}),h.bind("PostInit",function(){var a=f.getElement(h.settings.drop_element),b,e=!1;a&&(F?(f.addEvent(a,"dragenter",function(){var b,d;b=j.getElementById(h.id+"_drop");b||(b=j.createElement("input"),
b.setAttribute("type","file"),b.setAttribute("id",h.id+"_drop"),b.setAttribute("multiple","multiple"),f.addEvent(b,"change",function(){k(this.files);f.removeEvent(b,"change",h.id);b.parentNode.removeChild(b)},h.id),a.appendChild(b),e=!0);f.getPos(a,j.getElementById(h.settings.container));d=f.getSize(a);"static"===f.getStyle(a,"position")&&f.extend(a.style,{position:"relative"});f.extend(b.style,{position:"absolute",display:"block",top:0,left:0,width:d.w+"px",height:d.h+"px",opacity:0})},h.id),f.addEvent(a,
"dragleave",function(){e||(b&&b.parentElement.removeChild(b),b=null);e=!1})):(f.addEvent(a,"dragover",function(a){a.preventDefault()},h.id),f.addEvent(a,"drop",function(a){if(!$(".disable-attachment-uploader").length){var c=a.dataTransfer;c&&c.files&&k(c.files)}b&&b.parentElement.removeChild(b);b=null;a.preventDefault();h.settings.stop_propagation&&(a.cancelBubble?a.cancelBubble=!0:a.stopPropagation())},h.id)))}),h.bind("Refresh",function(a){var b,e,g;if(b=j.getElementById(h.settings.browse_button))e=
f.getPos(b,j.getElementById(a.settings.container)),g=f.getSize(b),a=j.getElementById(h.id+"_html5_container"),f.extend(a.style,{top:e.y+"px",left:e.x+"px",width:g.w+"px",height:g.h+"px"}),h.features.triggerDialog&&("static"===f.getStyle(b,"position")&&f.extend(b.style,{position:"relative"}),e=parseInt(f.getStyle(b,"z-index"),10),isNaN(e)&&(e=0),f.extend(b.style,{zIndex:e}),f.extend(a.style,{zIndex:e-1}))}),h.bind("CancelUpload",function(){b&&b.abort&&b.abort()}),h.bind("UploadFile",function(a,d){function e(c){function k(){function e(c){var h=
0,m="----pluploadboundary"+f.guid(),n,r="";b=new XMLHttpRequest;b.upload&&(b.upload.onprogress=function(b){d.loaded=Math.min(d.size,q+b.loaded-h);a.trigger("UploadProgress",d)});b.onreadystatechange=function(){var e,g;if(b.readyState==4){try{e=b.status}catch(h){e=0}if(e>=400)a.trigger("Error",{code:f.HTTP_ERROR,message:f.translate("HTTP Error."),file:d,status:e,xhr:b,response:b.responseText||""});else{if(p){g={chunk:j,chunks:p,response:b.responseText,status:e};a.trigger("ChunkUploaded",d,g);q=q+z;
if(g.cancelled){d.status=f.FAILED;return}d.loaded=Math.min(d.size,(j+1)*u)}else d.loaded=d.size;a.trigger("UploadProgress",d);c=o=n=r=null;if(!p||++j>=p){d.status=f.DONE;a.trigger("FileUploaded",d,{response:b.responseText,status:e})}else k()}}};if(a.settings.multipart&&g.multipart){x.name=d.target_name||d.name;b.open("post",D,!0);f.each(a.settings.headers,function(a,c){b.setRequestHeader(c,a)});if("string"!==typeof c&&s.FormData){n=new FormData;f.each(f.extend(x,a.settings.multipart_params),function(a,
b){n.append(b,a)});n.append(a.settings.file_data_name,c);b.send(n);return}if("string"===typeof c){b.setRequestHeader("Content-Type","multipart/form-data; boundary="+m);f.each(f.extend(x,a.settings.multipart_params),function(a,b){r=r+("--"+m+'\r\nContent-Disposition: form-data; name="'+b+'"\r\n\r\n');r=r+(unescape(encodeURIComponent(a))+"\r\n")});y=f.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";r+="--"+m+'\r\nContent-Disposition: form-data; name="'+a.settings.file_data_name+
'"; filename="'+unescape(encodeURIComponent(d.name))+'"\r\nContent-Type: '+y+"\r\n\r\n"+c+"\r\n--"+m+"--\r\n";h=r.length-c.length;c=r;if(b.sendAsBinary)b.sendAsBinary(c);else if(g.canSendBinary){for(var w=new Uint8Array(c.length),v=0;v<c.length;v++)w[v]=c.charCodeAt(v)&255;b.send(w.buffer)}return}}D=f.buildUrl(a.settings.url,f.extend(x,a.settings.multipart_params));b.open("post",D,!0);b.setRequestHeader("Content-Type","application/octet-stream");c.encoding&&b.setRequestHeader("Content-Encoding",c.encoding);
f.each(a.settings.headers,function(a,c){b.setRequestHeader(c,a)});b.send(c.getData?c.getData():c)}var o,p,x,u,z,y,D=a.settings.url;if(!(d.status==f.DONE||d.status==f.FAILED||a.state==f.STOPPED)){x={name:d.target_name||d.name};if(h.chunk_size&&d.size>h.chunk_size&&(g.chunks||"string"==typeof c)){u=h.chunk_size;p=Math.ceil(d.size/u);z=Math.min(u,d.size-j*u);if("string"==typeof c)o=c.substring(j*u,j*u+z);else{var v=c,A=j*u,E=j*u+z,w;if(File.prototype.slice)try{v.slice(),o=v.slice(A,E)}catch(C){o=v.slice(A,
E-A)}else o=(w=File.prototype.webkitSlice||File.prototype.mozSlice)?w.call(v,A,E):null}x.chunk=j;x.chunks=p}else z=d.size,o=c;"string"!==typeof o&&n&&g.cantSendBlobInFormData&&g.chunks&&a.settings.chunk_size?(n.onload=function(){e(n.result)},n.readAsBinaryString(o)):e(o)}}var j=0,q=0,n="FileReader"in s?new FileReader:null;k()}var h=a.settings,c;c=y[d.id];g.jpgresize&&a.settings.resize&&/\.(png|jpg|jpeg)$/i.test(d.name)?G.call(a,d,a.settings.resize,/\.png$/i.test(d.name)?"image/png":"image/jpeg",function(a){a.success?
(d.size=a.data.length,e(a.data)):e(c)}):e(c)}),h.bind("Destroy",function(a){var b,e,g=j.body,c={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(b in c)(e=j.getElementById(c[b]))&&f.removeAllEvents(e,a.id);f.removeAllEvents(j.body,a.id);a.settings.container&&(g=j.getElementById(a.settings.container));g.removeChild(j.getElementById(c.inputContainer))}),e({success:!0})):e({success:!1})}})})(window,document,plupload);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = '/includes/js/amd/shim/plupload-amd.js' */
define("plupload",function(){return plupload});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-position', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
(function(c){c.ui=c.ui||{};var k=/left|center|right/,l=/top|center|bottom/,n=c.fn.position,o=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);var b=c.extend({},b),a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),f=b.offset?b.offset.split(" "):[0,0],h,j,e;9===d.nodeType?(h=a.width(),j=a.height(),e={top:0,left:0}):d.setTimeout?(h=a.width(),j=a.height(),e={top:a.scrollTop(),left:a.scrollLeft()}):d.preventDefault?(b.at="left top",h=j=0,e={top:b.of.pageY,left:b.of.pageX}):
(h=a.outerWidth(),j=a.outerHeight(),e=a.offset());c.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=k.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=k.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b[this]=a});1===g.length&&(g[1]=g[0]);f[0]=parseInt(f[0],10)||0;1===f.length&&(f[1]=f[0]);f[1]=parseInt(f[1],10)||0;"right"===b.at[0]?e.left+=h:"center"===b.at[0]&&(e.left+=h/2);"bottom"===b.at[1]?e.top+=j:"center"===b.at[1]&&
(e.top+=j/2);e.left+=f[0];e.top+=f[1];return this.each(function(){var a=c(this),d=a.outerWidth(),m=a.outerHeight(),k=parseInt(c.curCSS(this,"marginLeft",true))||0,l=parseInt(c.curCSS(this,"marginTop",true))||0,n=d+k+(parseInt(c.curCSS(this,"marginRight",true))||0),o=m+l+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},e),p;if(b.my[0]==="right")i.left=i.left-d;else if(b.my[0]==="center")i.left=i.left-d/2;if(b.my[1]==="bottom")i.top=i.top-m;else if(b.my[1]==="center")i.top=i.top-m/2;
p={left:i.left-k,top:i.top-l};c.each(["left","top"],function(a,e){if(c.ui.position[g[a]])c.ui.position[g[a]][e](i,{targetWidth:h,targetHeight:j,elemWidth:d,elemHeight:m,collisionPosition:p,collisionWidth:n,collisionHeight:o,offset:f,my:b.my,at:b.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-a.collisionPosition.left,
b.left)},top:function(b,a){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if("center"!==a.at[0]){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft(),g="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,f="left"===a.at[0]?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=0>a.collisionPosition.left?g+f+h:0<d?g+f+h:0}},top:function(b,
a){if("center"!==a.at[1]){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop(),g="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,f="top"===a.at[1]?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=0>a.collisionPosition.top?g+f+h:0<d?g+f+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,a){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),g=d.offset(),f=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,
"left",!0),10)||0,g={top:a.top-g.top+f,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)},c.fn.offset=function(b){var a=this[0];return!a||!a.ownerDocument?null:b?c.isFunction(b)?this.each(function(a){c(this).offset(b.call(this,a,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,b)}):o.call(this)});c.curCSS||(c.curCSS=c.css)})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-progress-indicator', location = 'src/js/aui/progress-indicator.js' */
("undefined"===typeof window?global:window).__6e7c4718c7a654752224497662064b97=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function s(a,b,d){(0,t.recomputeStyle)(a);a.css("width",100*d+"%");b.attr("data-value",d)}function u(a,b,d){var e=d.currentProgress,c=d.value,a=(0,k.default)(a),f=(0,k.default)(b);"number"===typeof c&&(1>=c&&0<=c)&&(f.trigger(x,[e,c]),(0,y.supportsCssTransition)()?(a.one(z,function(){f.trigger(v,[e,c])}),s(a,f,c)):(s(a,f,c),f.trigger(v,[e,c])))}function w(a){var a=
(0,k.default)(a).first(),b=a.children(".aui-progress-indicator-value");a.removeAttr("data-value");(0,t.recomputeStyle)(a);b.css("width","")}function q(a){return l.default.isNumber(a)&&l.default.isFinite(a)&&!l.default.isNaN(a)}function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d=parseFloat(a);return q(d)?d:Number(b)}function m(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return Number(parseFloat(a).toFixed(b))}function n(a){var b=a.max,b=0<b?b:f.max,
a=Math.max(0,Math.min(a.val,b)),d=m(a/b,6),e=m(100*d,2);return{max:b,val:a,valAsFraction:d,valAsPercent:e}}function h(a){var b=n(a._data),d=b.val,e=b.valAsFraction,b=b.max,c=a.querySelector(".aui-progress-indicator"),f=c.getAttribute("data-value");a.indeterminate?(c.removeAttribute("aria-valuenow"),w(c)):(c.setAttribute("aria-valuenow",d),c.setAttribute("aria-valuemax",b),u(c.querySelector(".aui-progress-indicator-value"),c,{currentProgress:f,value:e}))}var o={};"use strict";Object.defineProperty(o,
"__esModule",{value:!0});var k=j(__700a145ba3db9966cc95664c892049f8),l=j(__59c1c30030f41c99b6757d449d9a3a7b),p=j(__8548ccf5d6767d1d4e6633309de41309),t=__6debdf74a4da8ac8391a98223e1bae21,y=__7a2976c482edfafd9b5879a49ffe0535,e;e=__921ad9514d56376fef992861d9ec0f51;if(!e||!e.__esModule){var r={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);r.default=e;e=r}i=j(__28c84e7bb75f6c3b0ba124d57bd69571);var v="aui-progress-indicator-after-update",x="aui-progress-indicator-before-update",
z="transitionend webkitTransitionEnd",f={indeterminate:!1,max:1,val:0};(0,p.default)("aui-progressbar",{template:function(a){a._data.max=g(a.getAttribute("max"),f.max);a._data.val=g(a.getAttribute("value"),f.val);a._data.indeterminate=a.hasAttribute("indeterminate");var b=n(a._data),d=b.valAsFraction;a.innerHTML='<div class="aui-progress-indicator"\n         '+(a._data.indeterminate?"":'data-value="'+d+'"')+'\n         role="progressbar"\n         aria-valuemin="0"\n         aria-valuenow="'+b.val+
'"\n         aria-valuemax="'+b.max+'"\n         tabindex="0"\n     >\n        <span class="aui-progress-indicator-value" style="width: '+b.valAsPercent+'%"></span>\n    </div>'},attached:function(a){h(a)},attributes:{indeterminate:{created:function(a){a.indeterminate=!0},removed:function(a){a.indeterminate=!1}},value:{value:f.val,fallback:function(a,b){if(a._updating)return!1;a._data.val=g(b.newValue,b.oldValue||f.val);h(a)}},max:{value:f.max,fallback:function(a,b){if(a._updating)return!1;a._data.max=
g(b.newValue,b.oldValue||f.max);h(a)}}},prototype:{get _data(){return this.__data||(this._data=l.default.defaults({},f))},set _data(a){return this.__data=a},get indeterminate(){return this._data.indeterminate},set indeterminate(a){this._data.indeterminate=!!a;h(this)},get value(){return n(this._data).val},set value(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("value",a.newValue);this._updating=!1;this._data.val=g(a.newValue,a.oldValue||f.val);h(this)},get max(){return n(this._data).max},
set max(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("max",a.newValue);this._updating=!1;this._data.max=g(a.newValue,a.oldValue||f.max);h(this)}}});p={update:e.fn(function(a,b){if("string"===typeof a){var d=document.getElementById(a);d&&(a=d)}var d=(0,k.default)(a).first(),e=d.children(".aui-progress-indicator-value"),c=d.attr("data-value"),f=!c,g=parseFloat(c)||0;if(c=c&&g===b)c=parseFloat(e.get(0).style.width)||0,c=g===100*c;if(!c)return f&&e.css("width",0),u(e,d,
{currentProgress:g,value:b}),d},"AJS.progressBars.update",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"}),setIndeterminate:e.fn(w,"AJS.progressBars.setIndeterminate",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"})};(0,i.default)("progressBars",p);o.default=p;return o=o["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/drag-and-drop-utils.js' */
define("confluence-drag-and-drop/drag-and-drop-utils",["jquery","window","ajs"],function(c,d,f){return{defaultMimeType:"application/octet-stream",base:/^\w+:\/\/[^\/?#]+/.exec(location.href),bindDragEnter:function(a,b){if(a.addEventListener)(b=this.isFireFox35OrLater()?this.firefox35DragEnterAndOverCallbackWrapper(b):b)&&a.addEventListener("dragenter",b,!1);else if(a.attachEvent){var e=this.ieDragEnterAndDragOverCallbackWrapper(b);a.attachEvent("ondragenter",e);c(d).unload(function(){a.detachEvent("ondragenter",
e)})}},bindDragOver:function(a,b){if(a.addEventListener)this.isFireFox35OrLater()?b=this.firefox35DragEnterAndOverCallbackWrapper(b):c.browser.safari&&(b=this.safariDragOverCallbackWrapper(b)),b&&a.addEventListener("dragover",b,!1);else if(a.attachEvent){var e=this.ieDragEnterAndDragOverCallbackWrapper(b);a.attachEvent("ondragover",e);c(d).unload(function(){a.detachEvent("ondragover",e)})}},bindDragLeave:function(a,b){b&&(c.browser.safari||this.isFireFox35OrLater()||tinymce.isIE11?a.addEventListener("dragleave",
b,!1):c.browser.msie?(a.attachEvent("ondragleave",b),c(d).unload(function(){a.detachEvent("ondragleave",b)})):c.browser.mozilla&&a.addEventListener("dragexit",b,!1))},bindDrop:function(a,b){if(c.browser.mozilla){var e=this.isFireFox35OrLater()?"drop":"dragdrop";a.addEventListener(e,this.mozillaDropCallbackWrapper(b),!1)}else if(c.browser.msie){if(b){var g=function(a){b(a);f.DragAndDropUtils.stopPropagation(a)};a.attachEvent("ondrop",g);c(d).unload(function(){a.detachEvent("ondrop",g)})}}else c.browser.safari&&
b&&a.addEventListener("drop",function(a){b(a);f.DragAndDropUtils.stopPropagation(a)},!1)},niceSize:function(a){for(var b=" B; kB; MB; GB; TB; PB; EB; ZB; YB".split(";"),c=0,d=b.length;c<d;c++)if(a<Math.pow(2,10*(c+1)))return(!c?a:(a/Math.pow(2,10*c)).toFixed(2))+b[c];return(a/Math.pow(2,10*(c+1))).toFixed(2)+b[b.length-1]},ieDragEnterAndDragOverCallbackWrapper:function(a){return function(b){if(b=b||d.event)a&&a(b),c.browser.msie&&(b.returnValue=!1)}},safariDragOverCallbackWrapper:function(a){return function(b){if((b=
b||d.event)&&"file"!==b.target.type)a&&a(b),-1!=c.inArray("public.file-url",b.dataTransfer.types)&&b.preventDefault()}},mozillaDropCallbackWrapper:function(a){return function(b){b&&(a&&a(b),b.preventDefault(),f.DragAndDropUtils.isFireFox35OrLater()?f.DragAndDropUtils.firefox35FileDataInEvent(b)&&b.stopPropagation():b.stopPropagation())}},firefox35DragEnterAndOverCallbackWrapper:function(a){return function(b){b&&(a&&a(b),f.DragAndDropUtils.firefox35FileDataInEvent(b)&&b.preventDefault())}},firefox35FileDataInEvent:function(a){return-1!=
c.inArray("application/x-moz-file",a.dataTransfer.types)},stopPropagation:function(a){if(a=a||d.event)a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){if(a=a||d.event)a.preventDefault?a.preventDefault():a.returnValue=!1},isFireFox35OrLater:function(){return!this.isFireFox30()&&-1!=c.browser.version.indexOf("1.9.")},isFireFox30:function(){return-1!=c.browser.version.indexOf("1.9.0")},enableDropZoneOn:function(a,b){if(!a)throw Error("Cannot enable drop zone on invalid container. Received: "+
a);b=b||f.DragAndDrop.defaultDropHandler;this.bindDragEnter(a);this.bindDragOver(a);this.bindDragLeave(a);this.bindDrop(a,b)}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-drag-and-drop/drag-and-drop-utils","AJS.DragAndDropUtils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/default-drop-handler.js' */
define("confluence-drag-and-drop/default-drop-handler","ajs document confluence/meta jquery confluence/legacy underscore plupload window confluence/message-controller".split(" "),function(a,h,j,f,k,p,l,q,r){var m={initialise:function(){function n(){var a=f(".aui-blanket:visible");return a.length&&a.css("visibility")!=="hidden"&&!f("#drag-and-drop-progress-dialog:visible").length}function m(){for(;e.files.length;)e.removeFile(e.files[0])}var d,i=h.getElementById("fileuploadShim");if(!i){i=h.createElement("div");
i.setAttribute("id","fileuploadShim");h.body.appendChild(i)}var e=new l.Uploader({runtimes:"html5",dragdrop:true,drop_element:f("body")[0],browse_button:i.getAttribute("id"),multipart:false,stop_propagation:true,max_file_size:+j.get("global-settings-attachment-max-size")}),o=function(){d=a.Editor&&a.Editor.isVisible()&&k.EditorUploadProgressDialog?k.EditorUploadProgressDialog:new a.DragAndDropProgressDialog};d=null;e.init();a.DragAndDrop.defaultDropHandler=null;e.bind("FilesAdded",function(g,b){function s(a,
b){!d&&o();for(var c=0;c<b.length;c++){var g=b[c];g.status!==l.FAILED&&d.render({workId:g.id,status:g.status,file:g})}e.start()}if(n())m();else if(a.Editor&&a.Editor.isVisible()){var c=p.reject(b,function(b){return b.status===l.FAILED});k.Uploader&&k.Uploader.trigger("FilesAdded",c)}else a.UploadUtils.filterFiles(g,b,s)});e.bind("BeforeUpload",function(g,b){if(!a.Editor||!a.Editor.isVisible()){var e=a.DragAndDropUtils.base+a.contextPath()+"/plugins/drag-and-drop/upload.action",c=j.get("page-id"),
c=c!=0?{pageId:c}:{draftId:j.get("draft-id")},f=b.name.substr(b.name.lastIndexOf(".")+1);c.filename=b.name;c.size=b.size;c.mimeType=l.mimeTypes[f.toLowerCase()]||a.DragAndDropUtils.defaultMimeType;c.spaceKey=j.get("space-key");c.atl_token=j.get("atl-token");g.settings.url=l.buildUrl(e,c);d.cancelListeners.push(function(b,c){var e=g.getFile(c.workId);e&&g.removeFile(e);d.renderInfo(c.workId,"File was manually removed from the queue.")});d.show()}});e.bind("UploadProgress",function(a,b){d.renderUpdateToBytesUploaded(b.id,
b.loaded,b.size);d.hideCloseButton()});e.bind("FileUploaded",function(e,b,f){f.status===0?d.renderError(b.id,"The server is not responding. Please check that it is running."):d.renderComplete(b.id)});e.bind("Error",function(e,b){if(n())m();else if(a.Editor&&a.Editor.isVisible())k.Uploader&&k.Uploader.trigger("Error",b);else{var h,c;if(b.response){try{h=f.parseJSON(b.response);c=h.actionErrors[0]}catch(i){if(i.name==="SyntaxError")c="Invalid response received from the server.";else{b.responseText=b.response;
c=r.parseError(b)}}d.renderError(b.file.id,c);a.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.server-unknown"})}else{c=b.message;if(b.code===l.FILE_SIZE_ERROR){c=a.format("is too big to upload. Files must be less than {0}.",a.DragAndDropUtils.niceSize(j.get("global-settings-attachment-max-size")));a.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.file-size"})}else if(b.code===a.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR){c="might be a folder or an unsupported file type.";
a.trigger("analyticsEvent",{name:"confluence.default-drop.upload.error.file-type"})}!d&&o();d.render({workId:b.file.id,status:b.file.status,file:b.file,errorMessage:c});if(!d.isVisible()){d.show();d.showCloseButton()}}}});e.bind("UploadComplete",function(){if(!e.total.queued&&d){d.showCloseButton();d.hasErrors()||setTimeout(function(){d.hide();d.clearRenderOutput();q.location.reload()},1E3)}})},bind:function(){function a(){f(h).unbind("dragenter",a);m.initialise()}f(h).bind("dragenter",a)}};return m});
require("confluence/module-exporter").safeRequire("confluence-drag-and-drop/default-drop-handler",function(a){require("ajs").toInit(a.bind)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/observable-array-list.js' */
define("confluence-drag-and-drop/observable-array-list",["ajs","jquery"],function(g,f){var e=function(){this._data=[];this._pushObservers=[]};e.prototype={push:function(a){this._data.push(a);this._notifyPushObservers(a)},length:function(){return this._data.length},remove:function(a,b){return this._remove.call(this._data,a,b)},_remove:function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)},shift:function(){return this._data.shift()},removeByPredicate:function(a){for(var b=
[],c=this._data.length,d=0;d<c;d++)a(this._data[d])||b.push(this._data[d]);this._data=b;return c-this._data.length},addPushObserver:function(a){if(f.isFunction(a))this._pushObservers.push(a);else throw Error("Attempting to add an observer that is not a function: "+a);},_notifyPushObservers:function(a){for(var b=0,c=this._pushObservers.length;b<c;b++)this._pushObservers[b](a)}};return e});require("confluence/module-exporter").exportModuleAsGlobal("confluence-drag-and-drop/observable-array-list","AJS.ObservableArrayList");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/upload-progress-dialog.js' */
define("confluence-drag-and-drop/upload-progress-dialog",["ajs","plupload","jquery","document"],function(b,g,c,i){var h=function(a){var d=this,e={header:"Attach files",width:600,height:400};this._options=c.extend({},e,a);this.id="drag-and-drop-progress-dialog";this._dialog=new b.Dialog(this._options.width,this._options.height,this.id);this._dialog.addHeader(this._options.header).addPanel("Panel 1",b.DragAndDrop.Templates.uploadFileStatusContainer()).addButton("Done",
function(){d.hide();d.clearRenderOutput()},"all-file-uploads-complete");this._dialog.getCurrentPanel().setPadding(0);this._$closeButton=this.find(".all-file-uploads-complete");c(i).keydown(function(a){if(27===a.which)return d._$closeButton.prop("disabled")||(d.hide(),d.clearRenderOutput()),b.stopEvent(a)});this._$container=this.find("#upload-statuses");this._workIdsOfFilesInProgress=[];this.cancelListeners=[];this.onShowListeners=[];this._hidden=!0;this.hasErrorMessage=!1};h.prototype={show:function(){this._hidden&&
(this._dialog.show(),this._hidden=!1,c.each(this.onShowListeners,function(a,c){c()}));this.hideCloseButton()},hide:function(){this._hidden||(this._dialog.hide(),this._hidden=!0)},isVisible:function(){return!this._hidden},_getProgressElementId:function(a){return"file-"+a+"-progress"},render:function(a){this._workIdsOfFilesInProgress.push(a.workId);var d=this._getProgressElementId(a.workId);this._$container.append(b.DragAndDrop.Templates.fileStatus({filename:a.file.name,progressElementId:d,workId:a.workId,
showCancel:a.status==g.QUEUED}));b.progressBars.update("#"+d,0);a.status==g.QUEUED?c("#file-upload-cancel-"+a.workId).click(function(b){return function(d){c.each(b,function(c,b){b(d,a)})}}(this.cancelListeners)):this.renderError(a.workId,a.errorMessage)},renderError:function(a,d){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var e=c("#file-status-block-"+a),f=b.escapeEntities(e.attr("data-filename"));e.html(aui.message.error({content:d,titleContent:f}));
this.hasErrorMessage=!0},renderInfo:function(a,d){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var e=c("#file-status-block-"+a),f=b.escapeEntities(e.attr("data-filename"));e.html(aui.message.info({content:d,titleContent:f}));this.hasErrorMessage=!0},hasErrors:function(){return this.hasErrorMessage},renderUpdateToBytesUploaded:function(a,d,e){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var f=
b.DragAndDropUtils.niceSize(d),g=c("#file-"+a+"-uploaded");g.length?g.text(f):c("#file-upload-progress-text-"+a).html(b.DragAndDrop.Templates.uploadFileStatusProgressMessage({fileId:a,uploadedSizeNice:f,totalSizeNice:b.DragAndDropUtils.niceSize(e)}));b.progressBars.update("#"+this._getProgressElementId(a),d/e)},renderComplete:function(a){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);c("#cancel-or-success-placeholder-"+a).html(b.DragAndDrop.Templates.uploadFileStatusSuccessIcon())},
renderCancelled:function(a){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);b.progressBars.setIndeterminate("#"+this._getProgressElementId(a));c("#file-upload-progress-text-"+a).html("Canceled.");c("#cancel-or-success-placeholder-"+a).hide()},clearRenderOutput:function(){this.showCloseButton();this._$container.empty();this._workIdsOfFilesInProgress=[];this.hasErrorMessage=!1},hideCloseButton:function(){this._$closeButton.hide()},
showCloseButton:function(){this._$closeButton.show()},find:function(a){return this._dialog.getCurPanel().page.body.parent().find(a)}};return h});require("confluence/module-exporter").exportModuleAsGlobal("confluence-drag-and-drop/upload-progress-dialog","AJS.DragAndDropProgressDialog");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'templates/drag-and-drop.soy' */
// This file was automatically generated from drag-and-drop.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.DragAndDrop.Templates.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.DragAndDrop == 'undefined') { AJS.DragAndDrop = {}; }
if (typeof AJS.DragAndDrop.Templates == 'undefined') { AJS.DragAndDrop.Templates = {}; }


AJS.DragAndDrop.Templates.fileStatus = function(opt_data, opt_ignored) {
  return '<li id="file-status-block-' + soy.$$escapeHtml(opt_data.workId) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '"><div class="aui-group aui-group-split file-status-item"><div class="aui-item"><label>' + soy.$$escapeHtml(opt_data.filename) + '</label></div><div class="aui-item"><div id="file-upload-progress-text-' + soy.$$escapeHtml(opt_data.workId) + '" class="file-upload-progress-text">' + soy.$$escapeHtml('Waiting...') + '</div></div></div><div class="file-upload-progress-block"><div class="aui-progress-indicator" id="' + soy.$$escapeHtml(opt_data.progressElementId) + '"><span class="aui-progress-indicator-value"></span></div>' + ((opt_data.showCancel) ? '<div id="cancel-or-success-placeholder-' + soy.$$escapeHtml(opt_data.workId) + '" class="cancel-or-success-placeholder ui-state-default"><span id="file-upload-cancel-' + soy.$$escapeHtml(opt_data.workId) + '" class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Cancel Upload') + '">' + soy.$$escapeHtml('Cancel') + '</span></div>' : '') + '</div></li>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.fileStatus.soyTemplateName = 'AJS.DragAndDrop.Templates.fileStatus';
}


AJS.DragAndDrop.Templates.uploadFileStatusContainer = function(opt_data, opt_ignored) {
  return '<ul id="upload-statuses"></ul>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.uploadFileStatusContainer.soyTemplateName = 'AJS.DragAndDrop.Templates.uploadFileStatusContainer';
}


AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon = function(opt_data, opt_ignored) {
  return '<span class=\'aui-icon aui-icon-small aui-iconfont-success\'></span>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon.soyTemplateName = 'AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon';
}


AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage = function(opt_data, opt_ignored) {
  return '<span id="file-' + soy.$$escapeHtml(opt_data.fileId) + '-uploaded">' + soy.$$escapeHtml(opt_data.uploadedSizeNice) + '</span> ' + soy.$$escapeHtml('of') + ' ' + soy.$$escapeHtml(opt_data.totalSizeNice);
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage.soyTemplateName = 'AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage';
}


AJS.DragAndDrop.Templates.dropZone = function(opt_data, opt_ignored) {
  return '<div class="attachments-drop-zone"><div class="drop-zone-image"></div><div class="drop-zone-text">' + soy.$$escapeHtml('Drop files here to attach them') + '</div></div>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.dropZone.soyTemplateName = 'AJS.DragAndDrop.Templates.dropZone';
}


AJS.DragAndDrop.Templates.dragOverlay = function(opt_data, opt_ignored) {
  return '<div id="dragOverlay"><div class="overlay-blanket"></div><div class="overlay-center"><p>' + soy.$$escapeHtml('Drop files to insert them into the page') + '</p></div><span class="overlay-baseline"></span><div class="overlay-drop-zone"></div></div>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.dragOverlay.soyTemplateName = 'AJS.DragAndDrop.Templates.dragOverlay';
}


AJS.DragAndDrop.Templates.dragAndDropTip = function(opt_data, opt_ignored) {
  return '<div class="attach-tip-discovery"><span class="img"></span><div class="text"><strong>' + soy.$$escapeHtml('Tip:') + ' </strong><p>' + soy.$$escapeHtml('Drop files straight into your page to insert them directly.') + '</p><div><a class="close-tip" href="#">' + soy.$$escapeHtml('Ok, got it!') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  AJS.DragAndDrop.Templates.dragAndDropTip.soyTemplateName = 'AJS.DragAndDrop.Templates.dragAndDropTip';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/upload-utils.js' */
define("confluence-drag-and-drop/upload-utils",["ajs"],function(h){return{ErrorCode:{FILE_IS_A_FOLDER_ERROR:-602},filterFiles:function(d,a,g){for(var e=[],b=0,c=0;c<a.length;c++)if(4096>=a[c].nativeFile.size){var f=new FileReader;f.onload=function(){b++;e.push(this.currentFile);b===a.length&&g(d,e)};f.onerror=function(){d.removeFile(this.currentFile);d.trigger("Error",{code:h.UploadUtils.ErrorCode.FILE_IS_A_FOLDER_ERROR,message:"File is a folder",file:this.currentFile});b++;b===a.length&&g(d,e)};
f.currentFile=a[c];f.readAsText(a[c].nativeFile)}else b++,e.push(a[c]),b===a.length&&g(d,e)}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-drag-and-drop/upload-utils","AJS.UploadUtils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:util-resource', location = 'util/utils.js' */
define("confluence/ic/util/utils",["jquery","underscore","ajs","backbone","exports"],function(w,R,u,x,F){var m={INLINE_COMMENTS:u.DarkFeatures.isEnabled("confluence-inline-comments"),RESOLVED_INLINE_COMMENTS:u.DarkFeatures.isEnabled("confluence-inline-comments-resolved"),RICH_TEXT_EDITOR:u.DarkFeatures.isEnabled("confluence-inline-comments-rich-editor"),DANGLING_COMMENT:u.DarkFeatures.isEnabled("confluence-inline-comments-dangling-comment")},t=["dateautocomplete","confluencemacrobrowser","propertypanel","jiraconnector","dfe"],n=["autoresize","confluenceleavecomment"],r=["code"];var a,C,q;function O(){return R.clone(m)}function N(){return R.clone(t)}function j(){return R.clone(n)}function d(U,T){var W;if(!U||!T){return}var S=w(U.containingElement);if(!S.is(".inline-comment-marker.valid")){S=w("<div/>").append(U.html).find(".inline-comment-marker.valid")}if(S.length>0&&f(S)){var V=S.first().data("ref");W=T.findWhere({markerRef:V});return W}}function f(S){return S.filter(function(){return w(this).text().length>0}).length>0}function h(S){return u.contextPath()+"/pages/viewpage.action?pageId="+u.Meta.get("latest-page-id")+"&focusedCommentId="+S+"#comment-"+S}function s(Y,X,S){var V=X.match(/(focusedCommentId|replyToComment)=(\d+)/);if(V==null){return}var U=V[1]==="replyToComment";var W=parseInt(V[2],10);var T=Y.findWhere({id:W});if(T!=null){o(Y,T,S,U)}else{w.ajax({url:u.contextPath()+"/rest/inlinecomments/1.0/comments/replies/"+W+"/commentId"}).done(function(Z){T=Y.findWhere({id:Z});o(Y,T,S,U)})}}function o(V,U,S,T){if(U!=null){if(U.isResolved()){new S({collection:V,focusCommentId:U.get("id")}).render()}else{if(!U.isDangling()){x.trigger("ic:view",U,"permalink",{isReplyComment:T})}}}}function K(){if(u.Meta.get("current-user-avatar-url")){return u.contextPath()+u.Meta.get("current-user-avatar-url")}return u.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/anonymous.png"}function P(){return u.Meta.get("user-display-name")||u.Meta.get("current-user-fullname")}function b(U){if(typeof U.selectionStart==="number"){var S=U.value.length;U.selectionStart=S;U.selectionEnd=S}else{if(typeof U.createTextRange!=null){U.focus();var T=U.createTextRange();T.collapse(false);T.select()}}}function L(S){b(S);window.setTimeout(function(){b(S)},1)}function E(X,W){var U="webkitAnimationEnd oanimationend msAnimationEnd animationend";var T=X.$wikiContent;var S=w.Deferred();if(W){var Y=w(".inline-comment-marker.active");T.addClass("ic-fade-in-animation");T.one(U,function(){w(this).removeClass("ic-fade-in-animation")});X.$el.addClass("ic-slide-in");X.$el.one(U,function(){w(this).removeClass("ic-slide-in");Y.addClass("ic-highlight-pulse");Y.one(U,function(){Y.removeClass("ic-highlight-pulse")})});S.resolve()}else{T.bind(U,function(Z){if(Z.originalEvent.animationName=="ic-fade-out-animation"){X.$wikiContent.removeClass("ic-fade-out-animation");X.$wikiContent.css("opacity","0.5")}else{if(Z.originalEvent.animationName=="ic-fade-in-animation"){X.$wikiContent.css("opacity","1");X.$wikiContent.removeClass("ic-fade-in-animation");X.$wikiContent.unbind(U)}}});T.addClass("ic-fade-out-animation");X.$el.addClass("ic-slide-out");var V=function(){X.$el.removeClass("ic-slide-out");X._emptySidebar();y().css("padding-right","0");T.addClass("ic-fade-in-animation");T.css("position","static");S.resolve();X.$el.off(U,V)};X.$el.on(U,V)}return S.promise()}function k(S){var T=w(S).closest("a");if(!T.length){T=w(S).find("a")}return T}function A(S){S.each(function(){var T=k(this);T.length&&T.off("mousemove")})}function Q(){return document.body.style.animation!==undefined||document.body.style.webkitAnimation!==undefined}function c(T){var S=T.parents(".expand-content.expand-hidden");S.each(function(U){w(this).siblings(".expand-control").click()})}function v(T){var S=u.Rte&&u.Rte.getEditor();if(T===true){if(M()&&S&&S.isDirty()){return confirm("Your comment will be lost.")}}else{if(S&&S.isDirty()&&Confluence.Editor&&!Confluence.Editor.getContentType){return confirm("Your comment will be lost.")}}return true}function M(){return !!w(".ic-sidebar #wysiwygTextarea_ifr").length}function G(){return u.Meta.get("use-keyboard-shortcuts")&&Confluence.KeyboardShortcuts&&Confluence.KeyboardShortcuts.enabled}function p(S){S.$("button.ic-action-hide").tooltip({gravity:"se"});S.$("#ic-nav-next").tooltip({gravity:"s"});S.$("#ic-nav-previous").tooltip({gravity:"s"})}function B(W){if(J()){W.css("padding-bottom","20px");return}var U=W.height();var V=W.offset().top;var T=V+U;var X=this.getPageContainer().offset().top;var S=T-X;this.getPageContainer().css({"min-height":S+"px"})}function z(W){W=W.closest(".ic-display-comment-view");var V=this;var T=w(".confluence-embedded-image, .confluence-embedded-file img",W);var U=T.length;var S=0;if(U>0){T.off("load").one("load",function(){if(++S===U){V.recalculateContentHeight(W)}}).each(function(){if(this.complete){w(this).load()}})}}function J(){if(q===undefined){q=!!D().length}return q}function y(){if(a===undefined){a=w("#content")}return a}function D(){if(C===undefined){C=w("#splitter-content")}return C}function g(S,T){if(T&&!T.is(":visible")){return}if(S){if(this.isDocTheme()){this.getSplitterContent().scrollTop(T.offset().top-S)}else{window.scrollTo(0,T.offset().top-S)}}}function e(T){var S=w.Deferred();w.ajax({url:u.contextPath()+"/rest/api/content/"+T+"?expand=body.editor",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"}).then(function(U){var V=U.body.editor.value;S.resolve(V)}).fail(function(U,W,V){S.reject(U,W,V)});return S.promise()}function I(S){var T=S.closest(".conf-macro");return(T.data("hasbody")===false||S.find('.conf-macro[data-hasbody="false"]').length>0)||r.indexOf(T.data("macro-name"))!=-1}function i(S){return S.closest(".user-mention").length>0||S.find(".user-mention").length>0}function l(S){return S.closest("a[href^='/']:not('.user-mention')").length>0||S.find("a[href^='/']:not('.user-mention')").length>0}function H(){var S={isDefault:true,path:u.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/default.png"};if(u.Meta.get("current-user-avatar-url")!=="/images/icons/profilepics/default.png"){S={isDefault:false,path:u.contextPath()+u.Meta.get("current-user-avatar-url")}}var T=u.Meta.get("remote-user");return{userName:T==""?null:T,displayName:u.Meta.get("current-user-fullname"),profilePicture:S}}F.overlappedSelection=d;F.focusedCommentUrl=h;F.showFocusedComment=s;F.getAuthorAvatarUrl=K;F.moveCaretToEnd=L;F.animateSidebar=E;F.getDarkFeatures=O;F.getInlineLinks=k;F.removeInlineLinksDialog=A;F.isAnimationSupported=Q;F.showHighlightContent=c;F.getUnsupportedRtePlugins=N;F.getSupportedRtePlugins=j;F.confirmProcess=v;F.getAuthorDisplayName=P;F.isKeyboardShortcutsEnable=G;F.addSidebarHeadingTooltip=p;F.hasEditorInSidebar=M;F.recalculateContentHeight=B;F.resizeContentAfterLoadingImages=z;F.isDocTheme=J;F.getPageContainer=y;F.getSplitterContent=D;F.scrollToCommentAfterToggleSideBar=g;F.getEditorFormat=e;F.containUnsupportedMacro=I;F.containInternalLink=i;F.containUserMetion=l;F.getCurrentUserInfo=H});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:util-resource', location = 'util/text-highlighter.js' */
define("confluence/ic/util/text-highlighter",["jquery"],function(c){var a="ic-current-selection";function b(){c.textHighlighter.createWrapper=function(d){return c("<span></span>").addClass(d.highlightedClass)};this.$el=c("#content .wiki-content").first();if(this.$el.length>0){this.$el.textHighlighter({highlightedClass:a})}}b.prototype.highlight=function(e){if(this.$el.length===0){return}var d=c(this.$el.getHighlighter().doHighlight(e));return this.$el.getHighlighter().serializeHighlights(d)};b.prototype.removeHighlight=function(){if(this.$el.length===0){return}this.$el.getHighlighter().removeHighlights();return this};b.prototype.deserializeHighlights=function(d,e){if(this.$el.length===0){return}var f='<span class="inline-comment-marker" data-ref="'+e+'"></span>';return this.$el.getHighlighter().deserializeHighlights(d,f)};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/comment.js' */
define("confluence/ic/model/comment",["jquery","underscore","backbone","ajs","confluence/ic/util/utils","confluence/ic/model/reply-collection"],function(d,b,g,a,c,f){var e=g.Model.extend({defaults:{authorDisplayName:c.getAuthorDisplayName(),authorUserName:a.Meta.get("remote-user"),authorAvatarUrl:a.contextPath()+a.Meta.get("current-user-avatar-url"),body:"",originalSelection:"",containerId:a.Meta.get("latest-page-id"),containerVersion:a.Meta.get("page-version"),parentCommentId:"0",lastFetchTime:d("meta[name=confluence-request-time]").attr("content"),hasDeletePermission:true,hasEditPermission:true,hasResolvePermission:true,resolveProperties:{resolved:false,resolvedTime:0},serializedHighlights:"",deleted:false},urlRoot:a.contextPath()+"/rest/inlinecomments/1.0/comments",initialize:function(h){h=h||{};this._setHighlights(h.markerRef);var i=this;this.replies=new f();this.replies.url=function(){return i.url()+"/replies"};if(c.getDarkFeatures().DANGLING_COMMENT&&a.Meta.get("page-id")===a.Meta.get("latest-page-id")){if(this.isDangling()&&!this.isResolved()){this.resolve(true,{wait:true,dangling:true,success:b.bind(function(){g.trigger("ic:open:dangled",this)},this),error:b.bind(function(k,j){g.trigger("ic:resolve:dangled:failed",this)},this)})}}},validate:function(){if(!this.get("body")){return true}},resolve:function(h,i){i=i||{};this.save({},b.extend(i,{url:this.urlRoot+"/"+this.get("id")+"/resolve/"+h+"/dangling/"+(i.dangling===true)}))},isResolved:function(){return this.get("resolveProperties").resolved},isDangling:function(){return this.highlight===undefined},isDeleted:function(){return this.get("deleted")},_setHighlights:function(i){var h;if(i!==undefined){h=d("#content .wiki-content:first").find('.inline-comment-marker[data-ref="'+i+'"]')}else{h=d(".ic-current-selection")}if(h.length!==0){this.highlights=h;this.highlight=h.first()}else{this.highlights=undefined;this.highlight=undefined}},destroy:function(i){i=i?b.clone(i):{};var h=this;var k=i.success;var j=function(n,m){var l=m.error;m.error=function(o){if(l){l(n,o,m)}n.trigger("error",n,o,m)}};i.success=function(l){if(k){k(h,l,i)}};j(this,i);return this.sync("delete",this,i)}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/comment-collection.js' */
define("confluence/ic/model/comment-collection",["jquery","backbone","ajs","underscore","confluence/ic/model/comment"],function(d,f,a,b,e){var c=f.Collection.extend({model:e,initialize:function(){this.listenTo(this,"sort",this._removeCachedMarkers)},url:function(){var h=a.contextPath();var g=a.Meta.get("page-id");return h+"/rest/inlinecomments/1.0/comments?containerId="+g},getResolvedCount:function(){return this.getResolvedComments().length},getUnresolveCount:function(){return this.reject(function(g){return g.isResolved()===true&&g.isDeleted()===false}).length},getResolvedComments:function(){return this.filter(function(g){return g.isResolved()===true&&g.isDeleted()===false})},getResolvedCommentsDesc:function(){return b.sortBy(this.getResolvedComments(),function(g){return 0-g.get("resolveProperties").resolvedTime})},getNextCommentOnPage:function(){return this._getCommentAtRelativeOffset(1)},getPrevCommentOnPage:function(){return this._getCommentAtRelativeOffset(-1)},_getCommentAtRelativeOffset:function(j){var k=this.getCommentsOnPage();var g=this.findWhere({active:true});if(g===undefined||k.length<=1){return null}var i=b.pluck(k,"id");var h=b.indexOf(i,g.get("id"));return k[(h+j+k.length)%k.length]},getCommentsOnPage:function(){return this.filter(function(g){return((g.isResolved()===false)&&!g.isDangling()&&(g.isDeleted()===false))||g.get("active")===true})},getCommentsOnPageCount:function(){return this.getCommentsOnPage().length},getActiveIndexWithinPageComments:function(){var h=b.pluck(this.getCommentsOnPage(),"id");var g=this.findWhere({active:true});if(g===undefined){return null}var i=g.get("id");return b.indexOf(h,i)},comparator:function(h,g){if(this.markers===undefined){this.markers=d("#content .wiki-content:first").find(".inline-comment-marker")}if(h.highlight===undefined){return 1}if(g.highlight===undefined){return -1}return this.markers.index(h.highlight)-this.markers.index(g.highlight)},_removeCachedMarkers:function(){this.markers=undefined}});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/reply.js' */
define("confluence/ic/model/reply",["jquery","backbone","ajs","confluence/ic/util/utils",],function(d,e,b,c){var a=e.Model.extend({defaults:{authorDisplayName:c.getAuthorDisplayName(),authorUserName:b.Meta.get("remote-user"),authorAvatarUrl:b.contextPath()+b.Meta.get("current-user-avatar-url"),body:"",commentId:"0",hasDeletePermission:true,hasEditPermission:!!b.Meta.get("remote-user")},urlRoot:function(){return b.contextPath()+"/rest/inlinecomments/1.0/comments/"+this.get("commentId")+"/replies"},sync:function(h,g,f){f=f||{};if(h==="create"){f.url=this.urlRoot()+"?containerId="+b.Meta.get("latest-page-id")}return e.sync.call(this,h,g,f)},validate:function(){if(!this.get("body")){return true}}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:models', location = '/model/reply-collection.js' */
define("confluence/ic/model/reply-collection",["backbone","confluence/ic/model/reply"],function(c,a){var b=c.Collection.extend({model:a});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:app', location = 'analytics/ic-analytics.js' */
define("confluence/ic/analytics",["ajs","underscore","backbone"],function(b,c,d){var a={};c.extend(a,d.Events);a.start=function(){if(this.running===true){return}this.running=true;this.send=function(e,f){b.trigger("analytics",{name:e,data:f})};this.listenTo(d,"ic:highlight-panel-click",function(){this.send("confluence.highlight.actions.comment.inline")});this.listenTo(d,"ic:view",function(f,e){this.send("confluence.comment.inline.view");if(e==="nav"){this.send("confluence.comment.inline.view.nav")}if(e==="permalink"){this.send("confluence.comment.inline.view.permalink")}});this.listenTo(d,"ic:overlap",function(){this.send("confluence.comment.inline.overlap")});this.listenTo(d,"ic:edit",function(){this.send("confluence.comment.inline.edit")});this.listenTo(d,"ic:persist",function(){this.send("confluence.comment.inline.create")});this.listenTo(d,"ic:sidebar:close",function(){this.send("confluence.comment.inline.sidebar.close")});this.listenTo(d,"ic:reply:persist",function(){this.send("confluence.comment.inline.reply")});this.listenTo(d,"ic:delete ic:reply:delete",function(){this.send("confluence.comment.inline.delete")});this.listenTo(d,"ic:resolved",function(){this.send("confluence.comment.inline.resolved")});this.listenTo(d,"ic:unresolved",function(){this.send("confluence.comment.inline.unresolved")});this.listenTo(d,"ic:resolved:view",function(f){var e={total:f};this.send("confluence.comment.inline.resolved.view",e)});this.listenTo(d,"ic:resolved:dismiss:recovery",function(){this.send("confluence.comment.inline.resolved.dismiss")});this.listenTo(d,"ic:resolved:show:recovery",function(){this.send("confluence.comment.inline.resolved.discovery")});this.listenTo(d,"ic:open:dangled",function(f){var e={commentId:f.get("id"),pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.open.dangled",e)});this.listenTo(d,"ic:editor:load:fail",function(){var e={pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.editor.load.fail",e)});this.listenTo(d,"ic:resolve:dangled:failed",function(f){var e={commentId:f.get("id"),pageId:b.Meta.get("page-id")};this.send("confluence.comment.inline.resolved.dangled.failed",e)})};a.stop=function(){this.running=false;this.stopListening()};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:app', location = '/app/app.js' */
define("confluence/ic/app/app",["jquery","backbone","ajs","confluence/ic/model/comment","confluence/ic/model/comment-collection","confluence/ic/analytics","exports"],function(e,h,c,f,d,b,a){function g(){b.start();var n=true;var i=new d();function l(){q().done(function(s){s.afterSyncCommentCollection();s.displayPermalinkedComment(i)})}e("body").on("click","#view-resolved-comments",function(s){s.preventDefault();q().done(function(t){t.createResolvedCommentListView()})});i.fetch({cache:false}).done(function(){if(i.getCommentsOnPageCount()>0){l()}if(i.getResolvedCount()>0){q().done(function(s){s.updateResolvedCommentCountInToolsMenu()})}});var k=window.location.search;if(k.indexOf("focusedCommentId")!==-1){l()}h.listenTo(h,"ic:resolved",function(){l()});var o=e("#view-resolved-comments>span");o.text("Resolved comments"+c.format(" ({0})",i.getResolvedCount()));var p=function(u,t){var v=i.get(t);var s=false;if(v===undefined){v=new f({id:t});s=true}v.fetch({success:function(w){w._setHighlights(w.get("markerRef"));if(s){i.add(w)}else{v.replies.isFetched=false}h.trigger("ic:view",v,"quickreload")}})};c.bind("qr:show-new-thread",function(t,s){q().done(function(){p(t,s)})});c.bind("qr:add-new-highlight",function(u,t,s){q().done(function(){c.trigger("qr:add-new-highlight-text",[t,s])})});var j;var r;function q(){if(n){n=false;if(j){return j.promise()}j=e.Deferred();WRM.require("wrc!inline-comments-load-sidebar").then(function(){var s=require("confluence/ic/app/loader");s.init(i);j.resolve(s)})}r=false;return j.promise()}var m="com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment";if(Confluence&&Confluence.HighlightAction){Confluence.HighlightAction.registerButtonHandler(m,{onClick:function(s){q().done(function(t){if(r==false){r=true;t.loadSidebarOnClick(s)}})},shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})}}a.init=g});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-comments:bootstrap', location = '/app/bootstrap.js' */
require(["jquery","ajs","confluence/ic/app/app"],function(c,a,b){if(a.Meta.get("page-id")&&(a.Meta.get("page-id")===a.Meta.get("latest-page-id"))){c(b.init)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-amd-resources', location = '/js/amd/confluence-amd.js' */
define("confluence",function(){return Confluence});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-amd-resources', location = '/js/amd/tinymce-amd.js' */
define("tinymce",function(){return tinymce});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:common', location = '/js/view-file-macro-utils.js' */
define("vfm/view-file-macro-utils",[],function(){var a={DEFAULT_HEIGHT:"250",DEFAULT_HEIGHT_IN_COMMENT:"150",THUMBNAIL_STATUS_IN_PROGRESS:202,THUMBNAIL_STATUS_CONVERTED:200,THUMBNAIL_STATUS_ERROR:415,THUMBNAIL_STATUS_BUSY:429,THUMBNAIL_POLLING_PERIOD:1000,THUMBNAIL_POLLING_BACKOFF_RATIO:1.25,MAP_NICE_TYPE_TO_TEXT:{"pdf document":"PDF","word document":"Document","excel spreadsheet":"Spreadsheet","powerpoint presentation":"Presentation","generic file":"File"},getFileNameFromUrl:function(b){if(!b){return""}var c=b.indexOf("#");c=(c>=0)?c:b.length;b=b.substring(0,c);c=b.indexOf("?");c=(c>=0)?c:b.length;b=b.substring(0,c);c=b.lastIndexOf("/");b=b.substring(c+1,b.length);return decodeURIComponent(b)},isSupportPointerEvents:function(){var b=document.createElement("x");b.style.cssText="pointer-events:auto";return b.style.pointerEvents==="auto"},getParameterByName:function(d,c){var e=d.indexOf("#");if(e>=0){d=d.substring(0,e)}var b=new RegExp(c+"=([^&]*)","i").exec(d);return b?decodeURIComponent(b[1]):null},addParamsToUrl:function(b,h){var f="";if(b.indexOf("?")===-1){f="?"}else{f="&"}var e=Object.keys(h);for(var d=0;d<e.length;d++){var c=e[d];var g=h[c];if(d>0){f+="&"}f+=c+"="+g}return b+f},getFileTypeTextFromNiceType:function(b){b=b?b.toLowerCase():"";return this.MAP_NICE_TYPE_TO_TEXT[b]?this.MAP_NICE_TYPE_TO_TEXT[b]:b}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:common', location = '/js/services/conversion-service.js' */
define("vfm/services/conversion-service",["ajs","jquery"],function(a,b){return{postThumbnailConversionResults:function(c){var d=a.contextPath()+"/rest/documentConversion/latest/conversion/thumbnail/results";var e=Object.keys(c);var f=_.map(e,function(g){return{id:g,v:c[g].version}});return b.ajax({type:"POST",url:d,contentType:"application/json",data:JSON.stringify(f)})},getThumbnailUrl:function(d,c){return a.contextPath()+"/rest/documentConversion/latest/conversion/thumbnail/"+d+"/"+c}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:file-types-utils-resources', location = 'utils/file-types-utils.js' */
define("confluence-editor/utils/file-types-utils",[],function(){var e={"aui-iconfont-file-image":"image/gif image/jpeg image/pjpeg image/png image/tiff image/bmp".split(" "),"aui-iconfont-file-pdf":["application/pdf"],"aui-iconfont-file-video":"audio/mpeg audio/x-wav audio/mp3 audio/mp4 video/mpeg video/quicktime video/mp4 video/x-m4v video/x-flv video/x-ms-wmv video/avi video/webm video/vnd.rn-realvideo".split(" "),"aui-iconfont-file-code":"text/html text/xml text/javascript application/javascript application/x-javascript text/css text/x-java-source".split(" "),
"aui-iconfont-file-doc":["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],"aui-iconfont-file-xls":["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],"aui-iconfont-file-ppt":["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],"aui-iconfont-file-txt":["text/plain"],"aui-iconfont-file-zip":["application/zip","application/java-archive"]},b={},c;for(c in e)for(var f=
e[c],d=0,g=f.length;d<g;d++)b[f[d]]=c;return{getAUIIconFromMime:function(a){return b[a]||"aui-iconfont-file-generic"},isImage:function(a){return b[a]&&0===a.indexOf("image/")}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/utils/file-types-utils","AJS.Confluence.FileTypesUtils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-soy-resources', location = '/templates/embedded-file-view.soy' */
// This file was automatically generated from embedded-file-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.ViewFileMacro.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.ViewFileMacro == 'undefined') { Confluence.ViewFileMacro = {}; }
if (typeof Confluence.ViewFileMacro.Templates == 'undefined') { Confluence.ViewFileMacro.Templates = {}; }


Confluence.ViewFileMacro.Templates.embeddedFile = function(opt_data, opt_ignored) {
  return '<span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="' + soy.$$escapeHtml(opt_data.fileSrc) + '" data-nice-type="' + soy.$$escapeHtml(opt_data.niceType) + '" data-file-src="' + soy.$$escapeHtml(opt_data.fileSrc) + '" data-linked-resource-id="' + soy.$$escapeHtml(opt_data.attachmentId) + '" data-linked-resource-type="attachment" data-linked-resource-container-id="' + soy.$$escapeHtml(opt_data.containerId) + '" data-linked-resource-default-alias="' + soy.$$escapeHtml(opt_data.fileName) + '" data-mime-type="' + soy.$$escapeHtml(opt_data.mimeType) + '" data-has-thumbnail="' + ((opt_data.hasThumbnail) ? 'true' : 'false') + '" data-linked-resource-version="' + soy.$$escapeHtml(opt_data.attachmentVersion) + '"' + ((opt_data.unresolvedCommentCount && opt_data.unresolvedCommentCount >= 0) ? 'data-unresolved-comment-count=' + soy.$$escapeHtml(opt_data.unresolvedCommentCount) : '') + '><img src="' + soy.$$escapeHtml(opt_data.placeholderSrc) + '" height="' + soy.$$escapeHtml(opt_data.height) + '" />' + ((! opt_data.hasThumbnail) ? '<span class="title">' + soy.$$escapeHtml(opt_data.fileName) + '</span>' : '') + '</a></span>';
};
if (goog.DEBUG) {
  Confluence.ViewFileMacro.Templates.embeddedFile.soyTemplateName = 'Confluence.ViewFileMacro.Templates.embeddedFile';
}


Confluence.ViewFileMacro.Templates.embeddedUnknownFile = function(opt_data, opt_ignored) {
  return '<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-file unknown-attachment" src="' + soy.$$escapeHtml(opt_data.placeholderSrc) + '" /></span>';
};
if (goog.DEBUG) {
  Confluence.ViewFileMacro.Templates.embeddedUnknownFile.soyTemplateName = 'Confluence.ViewFileMacro.Templates.embeddedUnknownFile';
}


Confluence.ViewFileMacro.Templates.overlayEmbeddedFile = function(opt_data, opt_ignored) {
  return '<span class="overlay"></span>';
};
if (goog.DEBUG) {
  Confluence.ViewFileMacro.Templates.overlayEmbeddedFile.soyTemplateName = 'Confluence.ViewFileMacro.Templates.overlayEmbeddedFile';
}


Confluence.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount = function(opt_data, opt_ignored) {
  return '<span class="comment-count-overlay"><span class="content">' + soy.$$escapeHtml(opt_data.commentCountRep) + '</span></span>';
};
if (goog.DEBUG) {
  Confluence.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount.soyTemplateName = 'Confluence.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount';
}


Confluence.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc = function(opt_data, opt_ignored) {
  return '<span class="file-type-desc-overlay"><i class="aui-icon aui-icon-small ' + soy.$$escapeHtml(opt_data.iconClass) + '"></i><span class="content"> ' + soy.$$escapeHtml(opt_data.fileType) + '</span></span>';
};
if (goog.DEBUG) {
  Confluence.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc.soyTemplateName = 'Confluence.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-resources', location = '/js/services/file-service.js' */
define("vfm/services/file-service",["ajs","jquery"],function(a,b){return{getCommentCount:function(c,e){var d="/rest/files/1.0/files/content/{0}/commentCount?attachmentId={1}";d=a.contextPath()+a.format(d,c,e);return b.get(d)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-embedded-file-view-resources', location = '/js/components/embedded-file-view.js' */
define("vfm/components/embedded-file-view",["jquery","backbone","ajs","confluence/legacy","vfm/view-file-macro-utils"],function(c,g,f,h,i){function b(s){var r=c(s.el);var q=r.find(".confluence-embedded-image, .confluence-embedded-file");if(q.hasClass("unknown-attachment")||(q.attr("src")&&q.attr("src").indexOf("/confluence/plugins/servlet/confluence/placeholder/unknown-attachment")>=0)){return this}var j={mimeType:"",niceType:""};var k=q.hasClass("confluence-embedded-image");var o=r.parent().is("a");var m=q.attr("data-has-thumbnail")==="true";if(k){j.mimeType="image/png"}else{j.mimeType=q.attr("data-mime-type");j.niceType=q.attr("data-nice-type")!=="null"?q.attr("data-nice-type"):"generic file"}var p=!o?e(q):"";var l=(!k&&m)?a(j):"";if(p||l){var n=h.ViewFileMacro.Templates.overlayEmbeddedFile();r.append(c(n).append(p).append(l));if(l){r.addClass("has-comment-overlay")}}}var d=function(j){j=parseInt(j,10);j=c.isNumeric(j)?j:0;return j>9?"9+":j+""};var e=function(o){var j="",k=o.attr("data-linked-resource-container-id"),m=o.attr("data-linked-resource-id");if(k&&m){var n=o.attr("data-unresolved-comment-count");var l=d(n);if(l!=="0"){j=h.ViewFileMacro.Templates.overlayEmbeddedFileCommentCount({commentCountRep:l})}}return j};var a=function(j){return h.ViewFileMacro.Templates.overlayEmbeddedFileFileTypeDesc({fileType:i.getFileTypeTextFromNiceType(j.niceType),iconClass:f.Confluence.FileTypesUtils.getAUIIconFromMime(j.mimeType)})};return{render:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources', location = '/js/vfm.js' */
require(["jquery","ajs","vfm/components/embedded-file-view"],function(c,a,b){c(document).on("click",".confluence-embedded-file.unknown-attachment",function(d){d.preventDefault()});a.toInit(function(){c(".confluence-embedded-file-wrapper").each(function(){b.render({el:this})})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:editor-core-resources', location = 'loader/profiles.js' */
define("confluence-editor/profiles",["jquery","ajs"],function(d,c){return{createProfileForCommentEditor:function(){return{plugins:"searchreplace confluenceimagedialog autocompletemacro confluencemacrobrowser confluenceleavecomment confluencewatch autoresize".split(" ")}},createProfileForPageEditor:function(a){var b="searchreplace confluencedrafts confluenceimagedialog autocompletemacro confluencemacrobrowser flextofullsize referrer".split(" ");c.Meta.getBoolean("shared-drafts")&&c.DarkFeatures.isEnabled("unpublished-changes-lozenge")&&
b.push("unpublishedchanges");a&&a.versionComment&&b.push("confluenceversioncomment");a&&a.notifyWatchers&&b.push("confluencenotifywatchers");return{plugins:b}},createProfileForTemplateEditor:function(){return{plugins:"searchreplace confluenceimagedialog autocompletemacro confluencemacrobrowser confluenceleavetemplate flextofullsize confluencetemplateeditor".split(" ")}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/profiles","AJS.Confluence.Editor._Profiles");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-util', location = 'jscripts/util.js' */
define("confluence-quick-edit/util",["window","ajs"],function(c,d){return{generateUUID:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getBaseUrl:function(){var a=c.location.protocol.replace(/:$/,"")+"://"+c.location.host+"/"+c.location.pathname.replace(/^\//,""),b=c.location.search.replace(/^\?/,""),b=b.replace(/\&?focusedCommentId=\d+/,""),b=b.replace(/^\&/,"");return{url:a,search:b,addQueryParam:function(a,
b){this.search=this.search?this.search+"&"+a+"="+b:a+"="+b},toString:function(){return this.url+"?"+this.search}}},timeoutDeferred:function(a,b,c){"function"!==typeof b.reject&&d.log("WARNING: invalid, not rejectable object passed to AJS.Confluence.QuickEdit.Util.timeoutDeferred. You should use a Deferred object");setTimeout(function(){"pending"===b.state()&&(d.logError("Timeout: "+a),b.reject("timeout"))},c);return b}}});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/util","AJS.Confluence.QuickEdit.Util");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:querystring', location = '/includes/js/api/querystring.js' */
define("confluence/api/querystring",[],function(){return{stringify:function(a){var b="",c;for(c in a)for(var d=0;d<a[c].length;d++)b+="&"+c,a[c][d]&&(b+="="+a[c][d]);return b.substring(1)},parse:function(a){var b={};if(a){"?"===a.substr(0,1)&&(a=a.substr(1));for(var a=a.split("&"),c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]||(b[d[0]]=[]);b[d[0]].push(a[c].substring(d[0].length+1))}}return b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:url', location = '/includes/js/api/url.js' */
define("confluence/api/url",["confluence/api/querystring","jquery"],function(d,e){var g=/([^\?|#]+)[\?]?([^#]*)[#]?(.*)/,f=["source","urlPath","queryParams","anchor"];return{parse:function(a){var b={};if(a=g.exec(a)){for(var c=0;c<f.length;c++)b[f[c]]=a[c];b.queryParams=d.parse(b.queryParams)}return b},format:function(a){return e.isEmptyObject(a)?"":(!a.urlPath?"":a.urlPath)+(e.isEmptyObject(a.queryParams)?"":"?"+d.stringify(a.queryParams))+(!a.anchor?"":"#"+a.anchor)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:analytics-support', location = '/includes/js/analytics-support.js' */
define("confluence/analytics-support","jquery ajs confluence/meta window document confluence/api/url".split(" "),function(j,o,l,k,m,h){var b={},n;b.setAnalyticsSource=function(a,d){if(typeof n==="undefined"){var c=j._data(k,"events");n=c&&c.analytics&&c.analytics.length>0}n&&a.attr("href",function(a,c){var b=encodeURIComponent(d),g=h.parse(c);if(!j.isEmptyObject(g))g.queryParams.src=[b];return h.format(g)})};b.srcRemovedUrl=function(a){a=h.parse(a);delete a.queryParams.src;for(var d=Object.keys(a.queryParams),
c=0;c<d.length;c++){var b=d[c],f=b.split(".");f.length===3&&f[0]==="src"&&delete a.queryParams[b];b==="jwt"&&delete a.queryParams[b]}return h.format(a)};b.srcParamValues=function(a){return(a=h.parse(a).queryParams)&&a.src?a.src:[]};b.srcAttrParamValues=function(a){for(var a=h.parse(a).queryParams,b={},c=Object.keys(a),e=0;e<c.length;e++){var f=c[e],i=f.split(".");if(i.length===3&&i[0]==="src"){var g=i[1],i=i[2];b[g]=b[g]||{};b[g][i]=decodeURIComponent(a[f][0])}}return b};b.extractAnalyticsData=function(a){for(var d=
[],c=b.srcParamValues(a),a=b.srcAttrParamValues(a),e=0;e<c.length;e++){var f=c[e];d.push({src:f,attr:a[f]||{}})}return d};b.publish=function(a,b){o.trigger("analytics",{name:a,data:b||{}})};b.init=function(){var a=b.extractAnalyticsData(m.URL),d={userKey:l.get("remote-user-key"),pageID:l.get("page-id"),draftID:l.get("draft-id")};if(a.length>0){for(var c=0;c<a.length;c++){var e=a[c],f=j.extend({},d,e.attr);b.publish("confluence.viewpage.src."+e.src,f)}if(k.history&&k.history.replaceState){a=b.srcRemovedUrl(m.URL);
m.URL!==a&&k.history.replaceState(null,"",a)}}else b.publish("confluence.viewpage.src.empty",d)};return b});require("confluence/module-exporter").exportModuleAsGlobal("confluence/analytics-support","AJS.Confluence.Analytics",function(j){require("ajs").toInit(j.init)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/quick-edit.js' */
define("confluence-quick-edit/quick-edit","ajs confluence/legacy confluence/templates confluence/meta jquery window document confluence-quick-edit/util wrm".split(" "),function(b,e,o,h,c,r,s,t,u){function v(){var a=new c.Deferred;b.Confluence.EditorLoader.load(function(){setTimeout(function(){a.resolve()},0)},function(){a.reject()});return a}var p={enableShortcut:function(){c("#editPageLink").addClass("full-load")},disableShortcut:function(){c("#editPageLink").removeClass("full-load")}},i=[],n={loadingContentTimeout:4E3,
register:function(a){i.push(a)},disableHandlers:function(){c.each(i,function(a,b){return b.disable()})},enableHandlers:function(){c.each(i,function(a,b){return b.enable()})},SaveBarBinder:{bind:function(a,b){a&&e.Editor.addSaveHandler(a);b&&e.Editor.addCancelHandler(b)}},activateEditor:function(a){function e(){function f(a){var b=new c.Deferred;u.require(a).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)});return b}var i,j=new c.Deferred;if(h.get("access-mode")==="READ_ONLY"){b.logError("activateEditor could not be initialised: Read-only mode is enabled");
return j.reject("READ_ONLY")}if(b.Rte&&b.Rte.getEditor()){b.debug("there is already an editor open");return j.reject("EDITOR_OPEN")}if(!a.$container||!a.$form){b.logError("activateEditor could not be initialised: bad arguments",a);return j.reject("BAD_ARGS")}i=b.Confluence.BlockAndBuffer.block(c(s));a.preActivate&&a.preActivate();p.disableShortcut();var q=a.timeoutResources||b.Confluence.EditorLoader.loadingTimeout,l=n.loadingContentTimeout,k=t.timeoutDeferred;c.when(k("resources",v(),q),k("fetch content",
a.fetchContent||c.Deferred().resolve(),l),k("additional resources",a.additionalResources?f(a.additionalResources):c.Deferred().resolve(),q)).done(function(e,f){var d={$container:a.$container,content:f,$form:a.$form,replayBufferedKeys:i};a.preInitialise&&a.preInitialise(d);c(".quick-comment-prompt",d.$container).hide();c(".quick-comment-body",d.$container).addClass("comment-body");var g=b.Confluence.EditorLoader.getPreloadContainer();if(d.content&&d.content.title){var m=d.content.title;g.find("#content-title").val(m)}d.$form.append(g.children());
g.show();c("#editor-precursor").hide();c("#rte-savebar").find(".toolbar-split-left").hide();if(h.get("content-type")==="comment"){c("#pluggable-status").hide();var g=o.Editor.Page.cancelButton({contentType:h.get("content-type"),sharedDraftsEnabled:h.getBoolean("shared-drafts")}),m=c("#rte-button-cancel"),l=m.parent(".rte-toolbar-group-done");if(l.length){l.remove();c("#rte-button-discard").remove()}else m.remove();c("#rte-savebar").find(".toolbar-split-right").append(g);g=o.Editor.Page.previewButton({});
c("#rte-button-ellipsis").parent().remove();c("#rte-savebar").find(".toolbar-group-preview").empty().append(g)}var k=function(){d.editor=b.Rte.getEditor();d.$container.find(".quick-comment-loading-container").hide();d.$form.show();d.$form.addClass("fadeIn");var c=d.editor,e=d.content?d.content.editorContent:"",f=d.replayBufferedKeys;if(e){b.debug("Initial Editor Content from quick edit: ",e);c.setContent(e);c.startContent=c.getContent({format:"raw",no_events:1});c.undoManager.clear()}f()&&c.undoManager.add();
b.trigger("quickedit.success");b.trigger("quickedit.visible");b.trigger("add-bindings.keyboardshortcuts");b.trigger("active.dynamic.rte");a.postInitialise&&a.postInitialise(d);n.SaveBarBinder.bind(a.saveHandler,a.cancelHandler);b.trigger("rte-quick-edit-ready");c=h.get("content-type");h.get("collaborative-content")&&(c==="page"||c==="blogpost")&&b.trigger("rte-collab-editor-loaded");b.unbind("rte-ready",k);j.resolve()};b.bind("rte-ready",k);b.bind("rte-destroyed",a.postDeactivate||function(){});b.Rte.BootstrapManager.initialise({plugins:a.plugins,
toolbar:a.toolbar,excludePlugins:a.excludePlugins,isQuickEdit:true,onInitialise:a.onInitialise})}).fail(function(c,e){j.reject(c,e);b.logError("Error loading page quick edit. Falling back to normal edit URL...");b.trigger("analytics",{name:"rte.quick-edit.activate-editor.failed"});if(a.fallbackUrl){b.log("This parameter is deprecated. To be removed in the next major version (5.8 or 6.0). Please use the promise returned to bind custom action if the editor fails to load instead.");r.location=a.fallbackUrl}});
return j.promise()}if(a.closeAnyExistingEditor&&b.Rte&&b.Rte.getEditor()){var f=new c.Deferred;this.deactivateEditor().done(function(){e().done(function(){f.resolve()}).fail(function(a){f.reject(a)})}).fail(function(){b.debug("Could not deactivate current editor.");f.reject("Could not deactivate current editor.")});return f.promise()}return e()},deactivateEditor:function(){require("tinymce").majorVersion>=4?require("tinymce").execCommand("mceRemoveEditor",true,"wysiwygTextarea"):require("tinymce").execCommand("mceRemoveControl",
true,"wysiwygTextarea");e.Editor.UI.toggleSavebarBusy(false);var a=b.Confluence.EditorLoader.getPreloadContainer().empty();c(".editor-container").remove();c("#editor-precursor").remove();c("#anonymous-warning").remove();c(".quick-comment-prompt").show();c(".bottom-comment-panels").show();c("#editor-notification-container").empty();c(".action-reply-comment").removeAttr("reply-disabled");p.enableShortcut();e.Editor.removeAllSaveHandlers();e.Editor.removeAllCancelHandlers();return b.Confluence.EditorLoader.getEditorPreloadMarkup().done(function(c){a.append(c);
a.hide();(new b.Confluence.QuickEditCaptchaManager(a)).refreshCaptcha();b.trigger("rte-destroyed");b.unbind("rte-destroyed")})}};return n});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/quick-edit","AJS.Confluence.QuickEdit");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/handlers/view.js' */
define("confluence-quick-edit/handlers/view",["jquery","ajs","window"],function(c,d,e){return function(){var a;sessionStorage.viewPort&&(a=JSON.parse(sessionStorage.viewPort));if(a&&a.pageId==d.params.pageId){var b;b=c("#main-content");var f=c("#header");b=-1!==a.blockIndex?b.children().first().children().eq(a.blockIndex).find(".innerCell").eq(a.columnIndex).children().eq(a.index):b.children().eq(a.index);e.scrollTo(0,b.offset().top+a.offset-f.outerHeight())}delete sessionStorage.viewPort}});
require("confluence/module-exporter").safeRequire("confluence-quick-edit/handlers/view",function(c){require("ajs").toInit(c)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/captcha-manager.js' */
define("confluence-quick-edit/captcha-manager",["jquery","ajs"],function(d,e){return function(f){function a(a){return d(f||"body").find(a)}return{refreshCaptcha:function(){var b=a("img.captcha-image");if(0<b.length){var c=Math.random();b.attr("src",e.contextPath()+"/jcaptcha?id="+c);a('input[name="captchaId"]').val(c);a('input[name="captchaResponse"]').val("")}},getCaptchaData:function(){return{id:a('input[name="captchaId"]').val(),response:a('input[name="captchaResponse"]').val()}}}}});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/captcha-manager","AJS.Confluence.QuickEditCaptchaManager");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/handlers/shortcut.js' */
define("confluence-quick-edit/handlers/shortcut",["ajs"],function(a){var d=!1;a.bind("initialize.keyboardshortcuts add-bindings.keyboardshortcuts",function(){d=!0});a.bind("remove-bindings.keyboardshortcuts",function(){d=!1});return{createShortcut:function(f,g){function b(){c=c||a.whenIType(f).moveToAndClick(g)}function e(){c&&c.unbind();c=null}var c;return{bind:function(){d&&b();a.bind("initialize.keyboardshortcuts",b);a.bind("add-bindings.keyboardshortcuts",b);a.bind("remove-bindings.keyboardshortcuts",
e)},unbind:function(){e();a.unbind("initialize.keyboardshortcuts",b);a.unbind("add-bindings.keyboardshortcuts",b);a.unbind("remove-bindings.keyboardshortcuts",e)}}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/shortcut","AJS.Confluence.QuickEdit.KeyboardShortcuts");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/handlers/page.js' */
define("confluence-quick-edit/handlers/page","jquery ajs confluence/legacy confluence/meta confluence-quick-edit/handlers/shortcut confluence/aui-overrides confluence/analytics-support window confluence/api/browser confluence-editor/editor/page-editor-message confluence/message-controller confluence/api/event".split(" "),function(c,b,g,m,v,w,x,l,y,z,j,p){function n(){var a=c("#editPageLink");a.find(".aui-icon").css("visibility","visible");a.parent().spinStop()}function q(){var a=m.get("content-type");
return m.get("collaborative-content")&&(a==="page"||a==="blogpost")}function r(a,b,d){var e={pageId:d,blockIndex:-1,columnIndex:-1,index:-1,offset:0,hasBlock:function(){return this.blockIndex!==-1}},h=false,g=function(a,c){var d=a.offset();if(i(a)){e.index=c;e.offset=b-d.top;h=true}},i=function(a){var c=a.offset();return c.top-8<=b&&c.top+a.height()>=b};if(a.children().length===1&&a.children().first().hasClass("contentLayout2")){a.children().first().children().each(function(a){if(!e.hasBlock()&&i(c(this)))e.blockIndex=
a});if(e.hasBlock()){a=a.children().first().children().eq(e.blockIndex).find(".innerCell");a.each(function(a){if(e.columnIndex===-1){var b=c(this).children().length;if(b>0)if(b<2){if(c(this).children().first().height()>25)e.columnIndex=a}else e.columnIndex=a}});a.eq(e.columnIndex).children().each(function(a){h||g(c(this),a)})}}else a.children().each(function(a){h||g(c(this),a)});return h?e:null}function A(a){var f=require("tinymce");i.disable();w.metaToParams();if(b.DarkFeatures.isEnabled("confluence.view.edit.transition")){var d=
c("#main-content"),e=c("#header"),h=c("#main-header"),e=l.pageYOffset+e.outerHeight()+h.outerHeight();k=r(d,e,b.params.pageId);b.trigger("quick-edit.viewport.saved");var j=function(){c(f.activeEditor.getWin().document).find("body#tinymce").addClass("page-edit");c("#content").css({paddingRight:0});b.unbind("quickedit.visible",j)};b.bind("quickedit.visible",j)}d=a.$form;e=b.Meta.get("content-type")==="page"?"doeditpage":"doeditblogpost";e=b.contextPath()+"/pages/"+e+".action?pageId="+g.getContentId();
c(".ia-splitter-left").remove();try{c("#main").unwrap()}catch(m){}c("#rte").removeClass("editor-default").addClass("editor-fullheight");a.$container.children().remove();c(".editor-container").children().eq(0).unwrap();d.attr({"class":"editor aui",action:e,name:"editpageform",id:"editpageform",style:""});a.$container.append(d);a.$container.removeClass("view").addClass("edit");c("body").addClass("contenteditor edit")}function B(a){require("tinymce");c("#editor-precursor").show();c("#rte-savebar").find(".toolbar-split-left").show();
if(l.history.pushState){var f=c("#editPageLink").attr("href");if(f!=l.location.pathname+l.location.search){history.pushState({quickEdit:true},"",f);b.trigger("rte-quick-edit-push-state",f)}}else{l.location.hash="editor";b.trigger("rte-quick-edit-push-hash")}f=a.content;if(f.permissions)for(var d in f.permissions)c("#"+d).attr("value",f.permissions[d]);c("#originalVersion").val(a.content.pageVersion);b.Meta.set("page-version",a.content.pageVersion);b.Meta.set("page-title",a.content.title);c('meta[name="page-version"]').attr("content",
a.content.pageVersion);c('meta[name="ajs-page-version"]').attr("content",a.content.pageVersion);c("#syncRev").val(a.content.syncRev);b.Meta.set("conf-revision",a.content.confRev);c('meta[name="ajs-conf-revision"]').attr("content",a.content.confRev);d=a.content.atlToken;b.Meta.set("atl-token",d);c('input[name="atl_token"]').val(d);b.trigger("analyticsEvent",{name:"quick-edit-success"});c("#navigation").remove();var e=new Date,h=function(b,c){if(e&&!(c.type==="keydown"&&[91,92,93,224,33,34,37,38,39,
40,16,17,18,20,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(c.keyCode)>-1)){var d=new Date-e;e=null;g.Analytics.publish("confluence.editor.transition.firstkeydown",{delay:d});a.editor.onKeyDown.remove(h);a.editor.onChange.remove(h)}};a.editor.onKeyDown.add(h);a.editor.onChange.add(h);g.debugTimeEnd("confluence.editor")}function C(a){var b=function(){p.unbind("rte-ready",b);if(k){var d;d=c(a.getBody());d=k.hasBlock()?d.children().first().children().eq(k.blockIndex).find(".innerCell").eq(k.columnIndex).children().eq(k.index):
d.children().eq(k.index);a.getWin().scrollTo(0,d.offset().top+k.offset);c("#main").css("visibility","visible")}};p.bind("rte-ready",b)}function s(a){b.trigger("rte-collaborative-content-ready",a)}function D(){var a=new c.Deferred;g.debugTime("confluence.editor.quick.fetchContent");var f=c.ajax({url:b.contextPath()+"/rest/tinymce/1/content/"+g.getContentId()+".json",cache:false});f.success(function(c){b.Meta.get("edit-mode")&&b.Meta.get("edit-mode")!==c.editMode&&a.reject("edit mode change",f);g.debugTimeEnd("confluence.editor.quick.fetchContent");
q()&&s(c);b.bind("synchrony-events-bound",function h(){s(c);b.unbind("synchrony-events-bound",h)});a.resolve(c)});f.error(function(b){a.reject("error fetching content",b)});return a}function t(a,f){if(f)switch(f.status){case 405:n();j.showError(j.parseError(f),j.Location.FLAG);return;case 423:var d=JSON.parse(f.responseText).user;n();d={title:"Unable to edit",body:b.format("Collaborative editing is offline right now, and {0} is editing this page. Try again in a few minutes.",b.escapeHtml(d))};j.showError(d,j.Location.FLAG);return;case 412:n();
z.handleMessage("collab.edit.user.limit.reached",{type:"warning",title:"You can\u0027t edit this page right now",message:"\u003cp\u003eThis page is so popular, you\u0027ve reached the maximum number of simultaneous editors.\u003c/p\u003e\u003cp\u003eTry again when it\u0027s not so busy.\u003c/p\u003e",close:"manual"});x.publish("collab.edit.user.limit.reached",{browserName:u.friendlyName(),browserVersion:u.version(),pageId:m.get("page-id"),editMode:"quick",numEditors:m.get("max-number-editors")});return}l.location=c("#editPageLink").attr("href")}var o,k,u=new y(l.navigator.userAgent),i={editShortcut:v.createShortcut("e",
"#editPageLink"),activateEventHandler:function(a){if(!a.metaKey&&!a.shiftKey&&!a.ctrlKey&&!a.altKey&&!(a.which===2||a.which===3)){a.preventDefault();if(o&&o.state()==="pending")b.debug("Editor is being activated. Ignoring handler...");else{o=i.activateEditor();a=c("#editPageLink");a.find(".aui-icon").css("visibility","hidden");a.spin();a=c("#draft-status-lozenge");a.text()!==""&&b.Confluence.Analytics.publish("confluence.drafts.referrer",{referrerPage:"view",lozengeType:a.text()})}}},enable:function(){if(c("body").is(".theme-default")){var a=
c("#editPageLink");a.bind("click",i.activateEventHandler);a.removeClass("full-load");i.editShortcut.bind();b.debug("QuickPageEdit enabled")}else b.debug("QuickPageEdit not enabled")},activateEditor:function(){g.debugTime("confluence.editor");q()&&b.trigger("rte-quick-edit-init");var a=c("#content").find(".quick-comment-form"),f=function(){var a=require("tinymce").activeEditor.getWin(),e=c(a.document).find("#tinymce");if(a=r(e,a.pageYOffset,b.params.pageId))sessionStorage.viewPort=JSON.stringify(a)};
return b.Confluence.QuickEdit.activateEditor({fetchContent:D(),$container:c("#content"),$form:a.length?a:c('<form method="post"></form>'),preInitialise:A,postInitialise:B,saveHandler:function(){b.DarkFeatures.isEnabled("confluence.view.edit.transition")&&f();g.Editor.getNumConcurrentEditors()>1&&b.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:g.Editor.getNumConcurrentEditors(),pageId:b.params.pageId,draftType:b.params.draftType})},cancelHandler:function(){b.DarkFeatures.isEnabled("confluence.view.edit.transition")&&
f();g.Editor.getNumConcurrentEditors()>1&&b.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:g.Editor.getNumConcurrentEditors(),pageId:b.params.pageId,draftType:b.params.draftType})},plugins:b.Confluence.Editor._Profiles.createProfileForPageEditor({versionComment:true,notifyWatchers:true}).plugins,onInitialise:function(a){b.DarkFeatures.isEnabled("confluence.view.edit.transition")&&a.onLoad.add(C);b.messages.setup()}}).fail(t)},disable:function(){b.debug("QuickPageEdit disabled.");
i.editShortcut.unbind();c("#editPageLink").unbind("click",i.activateEventHandler)}};b.Confluence.QuickEdit.register(i);return{disable:i.disable,_objForTesting:{onFailActivateEditor:t}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/page","AJS.Confluence.QuickEdit.QuickEditPage");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-edit-general', location = 'jscripts/init.js' */
define("confluence-quick-edit/init",["ajs","jquery","window"],function(a,b,c){return function(){b("body").hasClass("page-gadget")?a.debug("QuickComment: editor preload is disabled"):b(c).load(function(){a.debug("QuickComment: instigated background loading of the comment editor.");a.Confluence.EditorLoader.load()});a.Confluence.QuickEdit.enableHandlers();a.trigger("rte-quick-edit-enable-handlers")}});
require("confluence/module-exporter").safeRequire("confluence-quick-edit/init",function(a){var b=require("ajs");b.DarkFeatures.isEnabled("disable-quick-edit")?b.log("disable-quick-edit is turned on; run AJS.Confluence.EditorLoader.load() manually."):b.toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment.js' */
define("confluence-quick-edit/handlers/comment","ajs confluence/legacy jquery aui/flag confluence-quick-edit/util confluence-editor/editor/page-editor-message confluence/message-controller".split(" "),function(a,h,e,n,l,i,g){function m(a,c){var d=a.match(RegExp("[?&]"+c+"=(\\d+)"));return d&&d.length>1?parseInt(d[1]):0}e(function(){a.AppLinksInitialisationBinder=function(b){a.bind("init.rte",b)}});var f={timeout:8E3,showLoadingEditorErrorMessage:function(b){a.trigger("rte-quick-comment-loading-failed");
var c={};if(b==="READ_ONLY"){c.title="This site is read-only";c.body="You can\u0027t make changes right now."}else{c.title="Error";c.body="Error loading the comment editor. Please refresh the page to try again."}g.showError(c,g.Location.FLAG)},preInitialise:function(){a.Confluence.QuickEdit.QuickEditPage.disable();a.Meta.set("content-type","comment");a.Meta.set("draft-type","");a.params.contentType="comment";a.params.draftType=
"";a.Meta.set("use-inline-tasks","false");e("#editor-precursor").children().eq(0).hide();e("#pagelayout-menu").parent().hide();e("#page-layout-2-group").hide();e("#rte-button-tasklist").remove();e("#pluggable-status-container").remove();e("#rte-insert-tasklist").parent().remove()},postInitialise:function(b){a.Rte.editorFocus(b.editor)},delegatingSaveCommentHandler:function(a){return a.asyncRenderSafe?f.ajaxSaveCommentHandler(a):f.reloadPageSaveCommentHandler(a)},reloadPageSaveCommentHandler:function(a){var c=
l.getBaseUrl();c.addQueryParam("focusedCommentId",a.id);c.addQueryParam("refresh",+new Date);window.location.href=c.toString()+"#comment-"+a.id},ajaxSaveCommentHandler:function(b){var c={isDefault:true,path:a.Meta.get("static-resource-url-prefix")+"/images/icons/profilepics/default.png"};a.Meta.get("current-user-avatar-uri-reference")!==a.contextPath()+"/images/icons/profilepics/default.png"&&(c={isDefault:false,path:a.Meta.get("current-user-avatar-uri-reference")});var d=a.Meta.get("remote-user"),
e={userName:d===""?null:d,displayName:a.Meta.get("current-user-fullname"),profilePicture:c};f.cancelComment().done(function(){h.CommentDisplayManager.addOrUpdateComment(e,b,true,false);a.trigger("page.commentAddedOrUpdated",{commentId:b.id})})},cancelHandler:function(){if(a.Confluence.QuickEdit){a.Rte.Content.editorResetContentChanged();a.Confluence.QuickEdit.deactivateEditor()}},createCommenterParam:function(b,c,d){return{userName:c||a.Meta.get("remote-user")||null,displayName:d||a.Meta.get("user-display-name"),
profilePicture:{isDefault:b.hasClass("defaultLogo"),path:b.attr("src")}}},createSaveHandler:function(b,c){var d=l.generateUUID();return function(f){f.preventDefault();if(a.Rte.Content.isEmpty()){a.Confluence.EditorNotification.notify("warning","Comment text is empty. Cannot create empty comments.");h.Editor.UI.toggleSavebarBusy(false)}else{var j=f=0,k=a.Confluence.EditorLoader.getEditorForm();if(k.is("form")){j=k.attr("action");f=m(j,"parentId");j=m(j,"commentId")}var g=new a.Confluence.QuickEditCaptchaManager(k),k=function(a,
b){c(a,b);g.refreshCaptcha()},i=e("#watchPage").is(":checked");j>0?h.Editor.CommentManager.updateComment(h.getContentId(),j,a.Rte.Content.getHtml(),i,g.getCaptchaData(),b,k):h.Editor.CommentManager.saveComment(h.getContentId(),f,a.Rte.Content.getHtml(),i,d,g.getCaptchaData(),b,k)}}},saveCommentErrorHandler:function(b,c){h.Editor.UI.toggleSavebarBusy(false);var d;if(b&&b.search(/captcha/i)!==-1){d="The typed word did not match the text in the picture.";i.closeMessages(["captcha-response-failed"]);i.handleMessage("captcha-response-failed",
{type:"error",message:d})}else{d="Failed to save the comment. Please try again later.";if(c)g.showError(g.parseError(c,d),g.Location.FLAG);else{i.closeMessages(["server-offline"]);i.handleMessage("server-offline",{type:"error",message:d})}}a.logError("Error saving comment",b)},cancelComment:function(){a.Rte.Content.editorResetContentChanged();return a.Confluence.QuickEdit.deactivateEditor()},proceedWithActivation:function(){var b=new e.Deferred,c=a.Rte&&a.Rte.getEditor();if(c)if(c.isDirty()&&!h.Editor.isEmpty())if(confirm("Your comment will be lost."))b=
f.cancelComment();else return b.reject();else b=f.cancelComment();else b.resolve();return b}};return f});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/comment","AJS.Confluence.QuickEdit.QuickComment");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/top-level.js' */
define("confluence-quick-edit/handlers/comment/top-level",["ajs","jquery","confluence-quick-edit/handlers/shortcut","confluence-quick-edit/handlers/comment","window"],function(b,a,c,d,f){function h(a){d.preInitialise(a)}function i(b){a("#comments-section").one("click",".quick-comment-prompt",e.activateEventHandler);a("#rte-savebar").scrollWindowToElement();d.postInitialise(b)}function j(){b.Confluence.EditorLoader.resourcesLoaded()||(b.trigger("analytics",{name:"rte.quick-edit.top-comment.spinner"}),
a(".quick-comment-prompt").hide(),a(".quick-comment-loading-container").fadeIn().spin("medium"))}function k(b){b.preventDefault();f.location=a("#add-comment-rte").attr("href")}var l=b.DarkFeatures.isEnabled("editor.slow.comment.disable"),e={commentShortcut:c.createShortcut("m",".quick-comment-prompt"),activateEventHandler:function(c){c.preventDefault();d.proceedWithActivation().done(function(){var c=d.createSaveHandler(d.delegatingSaveCommentHandler,d.saveCommentErrorHandler),g=a("form[name=inlinecommentform]");
return b.Confluence.QuickEdit.activateEditor({preActivate:j,$container:g.closest(".quick-comment-container"),$form:g,preInitialise:h,saveHandler:c,cancelHandler:d.cancelHandler,postInitialise:i,plugins:b.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,additionalResources:["wrc!comment-editor"],timeoutResources:d.timeout}).fail(function(c){b.logError("activateEventHandler failed because of: "+c);"READ_ONLY"===c||l?(d.showLoadingEditorErrorMessage(c),a("#comments-section").one("click",
".quick-comment-prompt",e.activateEventHandler)):f.location=a("#add-comment-rte").attr("href")})}).fail(function(){a("#comments-section").one("click",".quick-comment-prompt",e.activateEventHandler)})},enable:function(){a("#comments-section").one("click",".quick-comment-prompt",e.activateEventHandler);a("#add-comment-rte").removeClass("full-load");this.commentShortcut.bind()},disable:function(){a("#comments-section").off("click",".quick-comment-prompt");this.commentShortcut.unbind()}};b.Confluence.QuickEdit.register(e);
return{bindCommentAreaFallbackHandler:function(){a("#comments-section").delegate(".quick-comment-prompt","click",k)},cancelComment:function(){b.log("'AJS.Confluence.QuickEdit.QuickComment.TopLevel.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return b.Confluence.QuickEdit.QuickComment.cancelComment()}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/comment/top-level","AJS.Confluence.QuickEdit.QuickComment.TopLevel");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/reply.js' */
define("confluence-quick-edit/handlers/comment/reply",["ajs","confluence/legacy","jquery"],function(a,g,b){function i(b){a.Confluence.QuickEdit.QuickComment.preInitialise(b);b.$container.scrollWindowToElement()}function j(b){a.Confluence.QuickEdit.QuickComment.postInitialise(b)}function h(b){var e=b.attr("id").match(/comment-(\d+)/),f=0;e?f=parseInt(e[1]):(a.trigger("analytics",{name:"rte.quick-edit.get-reply-parent.failed"}),a.logError("replyHandler: activateEventHandler - could not extract a parent comment Id from the comment id "+
b.attr("id")));return f}function k(){b(".comment.reply").closest(".comment-threads").remove()}var l=a.DarkFeatures.isEnabled("editor.slow.comment.disable"),d={activateEventHandler:function(d){d.preventDefault();d.stopPropagation();var e=this;if(b(e).attr("reply-disabled"))return!1;a.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){var f=b(e).closest("div.comment"),c=b(".quick-comment-container img.userLogo"),c=a.Confluence.QuickEdit.QuickComment.createCommenterParam(c),c=
{contentId:g.getContentId(),parentCommentId:h(f),commenter:c,context:{contextPath:a.Meta.get("context-path"),staticResourceUrlPrefix:a.Meta.get("static-resource-url-prefix")}},c=b(g.Templates.Comments.displayReplyEditorLoadingContainer(c)),d=b(".quick-comment-loading-container",c);d.hide();f.after(c);a.Confluence.EditorLoader.resourcesLoaded()?a.trigger("analytics",{name:"rte.quick-edit.reply-comment.no-spinner"}):(a.trigger("analytics",{name:"rte.quick-edit.reply-comment.spinner"}),f.after(c),d.fadeIn(),
d.spin("medium"),d[0].scrollIntoView());c=b(e).closest(".comment-thread").find(".quick-comment-container");a.Meta.set("form-name",b("form",c).attr("name"));a.Confluence.QuickEdit.activateEditor({$container:c,$form:b("form.quick-comment-form[name=threadedcommentform]"),preInitialise:i,postInitialise:j,saveHandler:a.Confluence.QuickEdit.QuickComment.createSaveHandler(a.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,a.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler),cancelHandler:a.Confluence.QuickEdit.QuickComment.cancelHandler,
plugins:a.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,postDeactivate:k,additionalResources:["wrc!comment-editor"],timeoutResources:a.Confluence.QuickEdit.QuickComment.timeout}).fail(function(){l?a.Confluence.QuickEdit.QuickComment.showLoadingEditorErrorMessage():window.location=b("#reply-comment-"+h(f)).attr("href")});b(e).attr("reply-disabled",!0)})},enable:function(){b("#comments-section").delegate(".action-reply-comment","click",d.activateEventHandler)},disable:function(){b("#comments-section").undelegate(".action-reply-comment",
"click")}};a.Confluence.QuickEdit.register(d);return{cancelComment:function(){a.log("'AJS.Confluence.QuickEdit.QuickComment.Reply.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return a.Confluence.QuickEdit.QuickComment.cancelComment()}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/comment/reply","AJS.Confluence.QuickEdit.QuickComment.Reply");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/edit.js' */
define("confluence-quick-edit/handlers/comment/edit",["ajs","confluence-quick-edit/handlers/comment","jquery","confluence/legacy"],function(e,b,d,i){function j(a){b.preInitialise(a);a.$container.scrollWindowToElement()}function k(a){b.postInitialise(a)}function h(a){return(a=a.attr("id").match(/comment-(\d+)/))?parseInt(a[1]):0}function l(a){var b=new d.Deferred;d.ajax({url:e.contextPath()+"/rest/api/content/"+a+"?expand=body.editor",cache:!1}).done(function(a){!a||!a.body||!a.body.editor?b.reject("invalid response from loading comment rest endpoint"):
b.resolve({editorContent:a.body.editor.value})}).fail(function(){b.reject("error fetching content")});return b}function m(){var a=d(".comment.edit");a.prev(".comment").show();a.remove()}var n=e.DarkFeatures.isEnabled("editor.slow.comment.disable"),g={activateEventHandler:function(a){var g=this;a.preventDefault();a.stopPropagation();b.proceedWithActivation().done(function(){var a=d(g).closest("div.comment"),c;c=a.find(".author .confluence-userlink");var f=a.find(".comment-user-logo img.userLogo");
c=b.createCommenterParam(f,c.attr("data-username"),c.text());c={contentId:i.getContentId(),commentId:h(a),commenter:c,context:{contextPath:e.Meta.get("context-path"),staticResourceUrlPrefix:e.Meta.get("static-resource-url-prefix")},mode:"edit"};c=d(i.Templates.Comments.displayEditEditorContainer(c));f=d(".quick-comment-loading-container",c);a.hide();a.after(c);f.fadeIn().spin("medium");f[0].scrollIntoView();c=a.next(".quick-comment-container");e.Meta.set("form-name",d("form",c).attr("name"));e.Confluence.QuickEdit.activateEditor({$container:c,
$form:d("form.quick-comment-form[name=editcommentform]"),fetchContent:l(h(a)),preInitialise:j,postInitialise:k,saveHandler:b.createSaveHandler(b.delegatingSaveCommentHandler,b.saveCommentErrorHandler),cancelHandler:b.cancelHandler,plugins:e.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins,postDeactivate:m,additionalResources:["wrc!comment-editor"],timeoutResources:b.timeout}).fail(function(){n?b.showLoadingEditorErrorMessage():window.location=d("#edit-comment-"+h(a)).attr("href")})})},
enable:function(){d("#comments-section").delegate(".comment-action-edit","click",g.activateEventHandler)},disable:function(){d("#comments-section").undelegate(".comment-action-edit","click")}};e.Confluence.QuickEdit.register(g);return{cancelComment:function(){e.log("'AJS.Confluence.QuickEdit.QuickComment.Edit.cancelComment' is deprecated in 5.7, consider using 'AJS.Confluence.QuickEdit.QuickComment.cancelComment' instead.");return b.cancelComment()}}});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/handlers/comment/edit","AJS.Confluence.QuickEdit.QuickComment.Edit");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/editor-comment-manager.js' */
define("confluence-quick-edit/editor-comment-manager",["ajs","jquery","confluence/legacy"],function(d,e,j){return function(){function k(a,f,l,i,b,g,h){d.trigger("analytics",{name:"confluence.page.comment.create",data:{pageID:d.Meta.get("page-id")}});a={type:"POST",url:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{html:f,watch:l,uuid:i},dataType:"json",cache:!1,headers:{"X-Atlassian-Token":"no-check"},success:function(a){g(a)},error:function(a,c,b){c=c+": "+b;a.responseText&&
(c=c+" - "+a.responseText);h(c,a)},timeout:12E4};b&&b.id&&(a.headers["X-Atlassian-Captcha-Id"]=b.id,a.headers["X-Atlassian-Captcha-Response"]=b.response);e.ajax(a)}return{addComment:function(a,f,d,i,b,g,h,e,c){j.Editor.CommentManager.saveComment(a,f,d,function(a){j.CommentDisplayManager.addComment(h,a,g);e(a)},c)},saveComment:function(a,f,e,i,b,g,h,j){var c=null,c=f?d.contextPath()+"/rest/tinymce/1/content/"+a+"/comments/"+f+"/comment?actions=true":d.contextPath()+"/rest/tinymce/1/content/"+a+"/comment?actions=true";
k(c,e,i,b,g,h,j)},updateComment:function(a,f,e,i,b,g,h){a=d.contextPath()+"/rest/tinymce/1/content/"+a+"/comments/"+f+"?actions=true";k(a,e,i,null,b,g,h)}}}});require("confluence/module-exporter").safeRequire("confluence-quick-edit/editor-comment-manager",function(d){var e=require("confluence/legacy");require("ajs").bind("init.rte",function(){e.Editor.CommentManager=d()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:editor-view-resources', location = 'jscripts/view-content/pushed-navigation-util.js' */
define("confluence-quick-edit/view-content/pushed-navigation-util",["ajs","jquery","window"],function(d,f,a){function c(){return d.Rte&&d.Rte.getEditor()&&!!f("#editpageform").length}var b=a.location.hash,e=a.location.search;return{isInEditPage:c,filterPreviewHashChange:function(){var g=c()||a.history.pushState||!(a.location.hash&&0===a.location.hash.indexOf("#!"))&&!(b&&0===b.indexOf("#!"));b=a.location.hash;return g},filterPreviewNavigationEvent:function(){var b=c()||!/[?&]preview=([^&]*)/.test(a.location.search)&&
!/[?&]preview=([^&]*)/.test(e);e=a.location.search;return b}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quick-edit/view-content/pushed-navigation-util","Confluence.Editor.PushedNavUtil");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:editor-view-resources', location = 'jscripts/view-content/pushed-navigation.js' */
define("confluence-quick-edit/view-content/pushed-navigation","jquery underscore window confluence/legacy ajs confluence-quick-edit/view-content/pushed-navigation-util".split(" "),function(b,n,a,g,c,d){function e(){if(h){if(f.split("#")[0]!=a.location.href.split("#")[0]){b(a).unbind("popstate",k);a.location.reload()}}else f.split("#")[0]==a.location.href.split("#")[0]&&f.split("#")[1]!=="editor"||a.location.reload()}function i(){f=a.location.href}function l(){var b=g.Editor.Drafts.unloadMessage();
if(b){g.Editor.Drafts.unBindUnloadMessage();if(confirm(b+"\n\n"+"Press OK to continue, or Cancel to stay on the current page.")){c.trigger("analytics",{name:"rte.quick-edit.confirmation.leaving"});e()}else{c.trigger("analytics",{name:"rte.quick-edit.confirmation.staying"});if(h){j=true;a.history.forward()}else a.location.hash="editor";g.Editor.Drafts.bindUnloadMessage()}}else e()}function o(){d.isInEditPage()?a.location.hash!=="#editor"&&l():e()}function k(){j?j=false:d.isInEditPage()?l():e()}function m(a,b){return function(){n.every(b,
function(a){return a()})&&a()}}var h=!!a.history.pushState,j=false,f=a.location.href,p=[d.filterPreviewHashChange],q=[d.filterPreviewNavigationEvent];c.bind("rte-quick-edit-enable-handlers",function(){a.location.hash==="#editor"&&b("#editPageLink").click()});return function(){i();if(h){b(a).bind("popstate",m(k,q));b(a).bind("rte-quick-edit-push-state",i)}else{b(a).bind("hashchange",m(o,p));b(a).bind("rte-quick-edit-push-hash",i)}}});
require("confluence/module-exporter").safeRequire("confluence-quick-edit/view-content/pushed-navigation",function(b){require("ajs").toInit(function(){setTimeout(b,0)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-trigger', location = 'src/js/aui/trigger.js' */
("undefined"===typeof window?global:window).__30cf7e8f2431e5458a101ad849353fcd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(a.isEnabled()){var c=document.getElementById(a.getAttribute("aria-controls"));c&&c.message&&c.message(b)}}"use strict";var g=e(__700a145ba3db9966cc95664c892049f8),h=e(__65ca28a9d6b0f244027266ff8e6a6d1c),f=e(__0ac9a2c09f995a9c0a478af8742f59b7);(0,f.default)("data-aui-trigger",{type:f.default.type.ATTRIBUTE,events:{click:function(a,b){var c=
b.target,c=(0,g.default)(c).closest("a[href]",a);c.length&&c[0]!==a||(d(a,b),b.preventDefault())},mouseenter:function(a,b){d(a,b)},mouseleave:function(a,b){d(a,b)},focus:function(a,b){d(a,b)},blur:function(a,b){d(a,b)}},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")}}});(0,h.default)("aui/trigger");return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-attributes', location = 'src/js/aui/internal/attributes.js' */
("undefined"===typeof window?global:window).__ab489eda548cad099ce93b60faa6a3d5=function(){function d(a){return null!==a}function e(a,b,c){c?a.setAttribute(b,""):a.removeAttribute(b)}function f(a,b){var c=function(a){return a.toLowerCase()===b.toLowerCase()},d=null===b,e=!d&&!a.values.filter(c).length;return d?a.hasOwnProperty("missingDefault")?a.missingDefault:null:e?a.hasOwnProperty("invalidDefault")?a.invalidDefault:a.hasOwnProperty("missingDefault")?a.missingDefault:null:a.values.length?a.values.filter(c)[0]:
null}function g(a,b,c){a.setAttribute(b.attribute,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.computeBooleanValue=d;b.setBooleanAttribute=e;b.computeEnumValue=f;b.setEnumAttribute=g;b.default={computeBooleanValue:d,setBooleanAttribute:e,computeEnumValue:f,setEnumAttribute:g};return b}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer', location = 'src/js/aui/internal/enforcer.js' */
("undefined"===typeof window?global:window).__2512e2cfb8f46670d5cb777690a28c72=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;var a=__c1e961001275c079e48525ad3a48c8c2;if(a&&a.__esModule)d=a;else{var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;d=b}c.default=function(a){function c(b){return e(function(){return a.hasAttribute(b)},b+" wasn't defined")}function b(d){if(!c(d,a))return!1;var f=a.getAttribute(d);
return e(function(){return document.getElementById(f)},'an element with id set to "'+f+'" was not found')}function e(b,c){return!b()?(a?d.error(c,a):d.error(c),!1):!0}return{attributeExists:c,refersTo:b,satisfiesRules:e,ariaControls:function(){return b("aria-controls")},ariaOwns:function(){return b("aria-owns")}}};return c=c["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2', location = 'src/js/aui/inline-dialog2.js' */
("undefined"===typeof window?global:window).__b4529c3c44b8657454bfd27f30c89b5c=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function l(a,b){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&b(d)}function n(a){a=a.target;(0,e.default)(a).set("mouse-inside",!0);a.message({type:"mouseenter"})}function o(a){a=a.target;(0,e.default)(a).set("mouse-inside",!1);a.message({type:"mouseleave"})}function m(a){(0,e.default)(a).set("mouse-inside",void 0);a.removeEventListener("mouseenter",
n);a.removeEventListener("mouseleave",o);"hover"===a.respondsTo&&((0,e.default)(a).set("mouse-inside",!1),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",o))}function j(a){var b=!a.hasAttribute("aria-hidden"),d=a.hasAttribute("open");if(b||a.open!==d)d?((0,e.default)(a).set("is-processing-show",!0),(0,f.default)(a).show(),(0,f.default)(a).isVisible()?l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.enable();b.setAttribute("aria-expanded","true")}):
a.open=!1,(0,e.default)(a).set("is-processing-show",!1)):((0,f.default)(a).hide(),(0,f.default)(a).isVisible()?a.open=!0:l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.disable();b.setAttribute("aria-expanded","false")}))}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var q=c(__700a145ba3db9966cc95664c892049f8),p=c(__81deba69899d0f1851f2c511b87bbbae),r=c(__65ca28a9d6b0f244027266ff8e6a6d1c),g=c(__ab489eda548cad099ce93b60faa6a3d5),s=c(__2512e2cfb8f46670d5cb777690a28c72),
t=c(__28c84e7bb75f6c3b0ba124d57bd69571),f=c(__3ada4a8272640e5242be87f12c7e0fdf),h=c(__0ac9a2c09f995a9c0a478af8742f59b7),e=c(__3f2c7809aecfe899611b77461a9218ac),u={click:function(a){if(a.open){if(!(0,f.default)(a).isPersistent())a.open=!1}else a.open=!0},mouseenter:function(a){a.open||(a.open=!0);a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout()},mouseleave:function(a){if(!(0,f.default)(a).isPersistent()&&a.open){a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout();var b=setTimeout(function(){if(!(0,
e.default)(a).get("mouse-inside"))a.open=!1},1E3);a._clearMouseleaveTimeout=function(){clearTimeout(b);a._clearMouseleaveTimeout=null}}},focus:function(a){a.open||(a.open=!0)},blur:function(a){if(!(0,f.default)(a).isPersistent()&&a.open)a.open=!1}},i={attribute:"responds-to",values:["toggle","hover"],missingDefault:"toggle",invalidDefault:"toggle"},h=(0,h.default)("aui-inline-dialog",{prototype:{get open(){return(0,f.default)(this).isVisible()},set open(a){g.default.setBooleanAttribute(this,"open",
a);j(this)},get persistent(){return this.hasAttribute("persistent")},set persistent(a){g.default.setBooleanAttribute(this,"persistent",a)},get respondsTo(){return g.default.computeEnumValue(i,this.getAttribute(i.attribute))},set respondsTo(a){var b=this.respondsTo;g.default.setEnumAttribute(this,i,a);b!==this.respondsTo&&m(this)},message:function(a){var b={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]}[this.respondsTo];if(b&&-1<b.indexOf(a.type))u[a.type](this,a);return this}},
created:function(a){(0,e.default)(a).set("is-processing-show",!1);l(a,function(b){b.setAttribute("aria-expanded",a.open);b.setAttribute("aria-haspopup","true")})},attributes:{"aria-hidden":function(a,b){if("true"===b.newValue){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&d.setAttribute("aria-expanded","false")}g.default.setBooleanAttribute(a,"open","false"===b.newValue)},open:function(a){document.body.contains(a)&&j(a)},"responds-to":function(a,b){var d=g.default.computeEnumValue(i,
b.oldValue),c=g.default.computeEnumValue(i,b.newValue);d!==c&&m(a)}},attached:function(a){(0,s.default)(a).attributeExists("id");a.hasAttribute("open")?(0,e.default)(a).get("is-processing-show")||j(a):j(a);m(a)},detached:function(a){a._auiAlignment&&a._auiAlignment.destroy()},template:function(a){var b=(0,q.default)('<div class="aui-inline-dialog-contents"></div>').append(a.childNodes);(0,q.default)(a).addClass("aui-layer").html(b)}});(0,r.default)("aui/inline-dialog2",h);(0,t.default)("InlineDialog2",
h);k.default=h;return k=k["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'src/soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.inlineDialog2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.alignment) ? ' alignment="' + soy.$$escapeHtml(opt_data.alignment) + '"' : '') + ((opt_data.open) ? ' open' : '') + ((opt_data.persistent) ? ' persistent' : '') + ((opt_data.respondsTo) ? ' responds-to="' + soy.$$escapeHtml(opt_data.respondsTo) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  aui.inlineDialog2.inlineDialog2.soyTemplateName = 'aui.inlineDialog2.inlineDialog2';
}


aui.inlineDialog2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}));
};
if (goog.DEBUG) {
  aui.inlineDialog2.trigger.soyTemplateName = 'aui.inlineDialog2.trigger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview-support.js' */
define("cp/confluence/preview-support",["ajs"],function(a){var d=function(){var e=b.SELECTOR_STRINGS.IMAGE+", "+b.SELECTOR_STRINGS.LINK_IMAGE+", "+b.SELECTOR_STRINGS.EXTERNAL_IMAGE;if(b.isPDFSupported()){e+=", "+b.SELECTOR_STRINGS.PDF+", "+b.SELECTOR_STRINGS.LINK_PDF}return e};var c=function(){return b.SELECTOR_STRINGS.IMAGE+", "+b.SELECTOR_STRINGS.EXTERNAL_IMAGE+", "+b.SELECTOR_STRINGS.FILE+", "+b.SELECTOR_STRINGS.LINK_FILE+", "+b.SELECTOR_STRINGS.ATTACHMENT_MACRO};var b={SELECTOR_STRINGS:{IMAGE:"img.confluence-embedded-image[data-linked-resource-id]",EXTERNAL_IMAGE:"img.confluence-embedded-image.confluence-external-resource",PDF:"a.confluence-embedded-file[data-nice-type='PDF Document']",LINK_IMAGE:"a[data-linked-resource-type='attachment'][data-nice-type='Image']",LINK_PDF:"a[data-linked-resource-type='attachment'][data-nice-type='PDF Document']",FILE:"a.confluence-embedded-file",LINK_FILE:"a[data-linked-resource-type='attachment']",FILE_OVERLAY:"span.confluence-embedded-file-wrapper .overlay",ATTACHMENT_MACRO:".plugin_attachments_container a.previewAttachmentLink"},VIEW_MODE:{FULL:"full",COMMENT:"comment",SIMPLE:"simple"},isPDFSupported:function(){return a.DarkFeatures.isEnabled("pdf-preview")},getFileSelectorString:function(){if(a.DarkFeatures.isEnabled("previews.trigger-all-file-types")){return c()}else{return d()}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview.js' */
define("cp/confluence/preview",["underscore","jquery","cp/confluence/preview-support","ajs","confluence/jsUri"],function(k,e,f,i,b){var j,l;e(document).ready(g);function g(){var o=e(f.getFileSelectorString());o.off("click.fb");e(document.body).off("click.filePreviews");e(document.body).on("click.filePreviews",f.getFileSelectorString(),n);e(document.body).on("click.filePreviews",f.SELECTOR_STRINGS.FILE_OVERLAY,h);e(window).on("popstate",function(){if(!l&&i.DarkFeatures.isEnabled("previews.sharing.pushstate")){a()}});a()}function n(o){if(!o.altKey&&!o.ctrlKey&&!o.metaKey&&!e(this).parent().closest("a, #draft-changes-dialog, #cp-annotations, .diff-block-context, .diff-block-target").length){o.preventDefault();m(this)}}function h(p){p.preventDefault();var o=e(p.target);var q=o.closest("span.confluence-embedded-file-wrapper");m(q.find(f.SELECTOR_STRINGS.IMAGE+","+f.SELECTOR_STRINGS.FILE),undefined,undefined,o.closest(".comment-count-overlay").length>0)}function m(q,r,o,x){if(!l){var s="confluence-previews-css";var p="media-viewer";var y="viewattachments";WRM.require("wr!com.atlassian.confluence.plugins.confluence-previews:"+s);var z=e.Deferred(),u=z.promise();var t=setInterval(function(){for(var D=0;D<document.styleSheets.length;D++){var E=document.styleSheets[D];if(E.href&&(E.href.indexOf(s)!==-1||E.href.indexOf(p)!==-1||E.href.indexOf(y)!==-1)){w();return}if(document.styleSheets[D].imports&&document.all&&!window.atob){for(var C=0;C<document.styleSheets[D].imports.length;C++){if(document.styleSheets[D].imports[C].href.indexOf(s)!==-1){w();return}}}}},100);var w=function(){z.resolve();clearInterval(t)};var B=i.Meta.get("static-resource-url-prefix");var A="com.atlassian.confluence.plugins.confluence-previews:mediaviewer-chunks";var v=B+"/download/resources/"+A+"/";l=e.when(WRM.require(["wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-js","wrc!media-viewer"]),u);l.done(function(){j=require("cp/confluence/file-preview-loader");d(q,r,o,x)});Confluence.PageLoadingIndicator(e("body")).showUntilResolved(l,"We were unable to load the file previewer")}else{l.done(k.partial(d,q,r,o,x))}return l}var d=function(q,p,s,t){var o=e("#content");var r=e(q).closest(".comment,.cq-content,.ic-content");if(!p){if(!(o.hasClass("page")||o.hasClass("blogpost"))){p=f.VIEW_MODE.SIMPLE}else{if(r.length){p=f.VIEW_MODE.COMMENT}}}if(p===f.VIEW_MODE.COMMENT){j.showPreviewerForComment(q,r,p,t)}else{if(p===f.VIEW_MODE.SIMPLE){j.showPreviewerForSingleFile(q,p,s)}else{p=f.VIEW_MODE.FULL;j.showPreviewer(undefined,q,p,t)}}};function a(){if(c()){var q=new b(window.location.href);var p=window.history.pushState&&i.DarkFeatures.isEnabled("previews.sharing.pushstate");if(q.getQueryParamValue("preview")&&!p){var r="#!/preview"+q.getQueryParamValue("preview");var o=decodeURIComponent(q.deleteQueryParam("preview").setAnchor(r).toString());if(window.history.replaceState){window.history.replaceState({},"",o)}else{window.location=o}}else{if(q.anchor().indexOf("!/preview")===0&&p){var o;if(q.getQueryParamValue("preview")){o=q.setAnchor("")}else{o=q.addQueryParam("preview",q.anchor().substr("!/preview".length,q.anchor().length)).setAnchor("")}window.history.replaceState({},"",o)}}m()}}function c(){var o=new b(window.location.href);return i.DarkFeatures.isEnabled("previews.sharing")&&(o.getQueryParamValue("preview")||(o.anchor()&&o.anchor().indexOf("!/preview")===0))}return{loadConfluencePreviews:m}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/jquery-previewer.js' */
require(["cp/confluence/preview","jquery"],function(b,a){a.fn.previewer=function(c){if(!a(this).length){return this}var d=a.extend({},c);return this.each(function(){var f=a(this);var e=f.closest("li");var g=d.src||f.attr("data-image-src")||f.attr("src");if(g){f.click(function(j){var i={src:g,type:d.type,thumbnail:g,title:d.title||e.attr("data-file-name")||g,id:e.attr("data-attachment-id"),ownerId:e.attr("data-owner-id")};var h=b.loadConfluencePreviews([i],d.viewMode||"simple",d.from||"custom");d.zindex&&h.done(function(){a(".cp-container").css({"z-index":d.zindex})})})}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'org.randombits.confluence.toc:toc-plugin-analytics', location = 'net/customware/confluence/plugin/toc/analytics/analytics.js' */
AJS.toInit(function(){AJS.$(".toc-macro a").click(function(){AJS.trigger("analyticsEvent",{name:"confluence.toc-macro.heading-click"})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'org.randombits.confluence.toc:client-side-toc-resources', location = 'net/customware/confluence/plugin/toc/js/client-side-toc.js' */
require(["ajs"],function(a){a.toInit(function(f){function b(n){var m=f({});m.data("precedenceLevel",n);return m}function g(m){return f(m).data("precedenceLevel")}function i(n,m){f(n).data("precedenceLevel",m);return n}function h(n,m){return m===g(n)}function d(s,m,o){if(s.length===0){return f()}var n=s.map(g).reduce(function(u,t){return Math.min(u,t)});if(!h(s[0],n)){s.unshift(b(n))}var q=m.createTocLevelContainer();var r={subElements:[],currentItem:undefined,outline:undefined,flush:function(){if(this.subElements.length>0&&this.currentItem){d(this.subElements,m,this.outline).appendTo(this.currentItem);this.subElements=[]}},add:function(t){this.subElements.push(t)},resetItem:function(t){this.outline=(o||[]).slice(0);this.outline.push(t);this.currentItem=m.createTocItemContainer();this.currentItem.appendTo(q);return this.currentItem}};var p=0;s.forEach(function(t){if(h(t,n)){p++;r.flush();r.resetItem(p);if(t.textContent){c(t,r.outline.join(".")).appendTo(r.currentItem)}else{r.currentItem.addClass("toc-empty-item")}}else{r.add(t)}});r.flush();if(o.length===0&&m.decorateToc){m.decorateToc(q)}return q}function c(m,n){return f(Confluence.Plugins.TableOfContents.Client.tocItemBody({outline:n,linkHref:"#"+m.id,linkText:m.textContent}))}function l(m){return{createTocLevelContainer:function(){return this.createTocItemContainer()},createTocItemContainer:function(){return f(Confluence.Plugins.TableOfContents.Client.flatStyleTocItemContainer({cssClass:"toc-item-container"}))},decorateToc:function(o){function n(r,p){var s=r in m?m[r]:p;if(s){var q=f(Confluence.Plugins.TableOfContents.Client.flatStyleTocSeparator({separator:s}));q.appendTo(o)}}n("preseparator","[ ");f(o).find("span.toc-item-body").each(function(p,q){if(p>0){n("midseparator"," ] [ ")}f(q).appendTo(o)});n("postseparator"," ]");f(o).find(".toc-item-container").remove()}}}function e(m){return{createTocLevelContainer:function(){return f(Confluence.Plugins.TableOfContents.Client.listStyleTocLevelContainer({cssliststyle:m.cssliststyle,csslistindent:m.csslistindent}))},createTocItemContainer:function(){return f(Confluence.Plugins.TableOfContents.Client.listStyleTocItemContainer())}}}function j(m){var o;if(m.includeheaderregex){o=new RegExp(m.includeheaderregex)}var n;if(m.excludeheaderregex){n=new RegExp(m.excludeheaderregex)}return function(){var p=f(this).text();if(o&&!o.test(p)){return false}if(n&&n.test(p)){return false}return true}}function k(o,q){var m=q.headerelements;var r=m.split(",");var p=j(q);var n=f("#main-content").find(m).filter(p).each(function(){i(this,r.indexOf(this.nodeName))}).toArray();return d(n,o,[])}f(".client-side-toc-macro").each(function(){var o=f(this);var n=o.data()||{};var m;if(n.structure==="flat"){m=l(n)}else{m=e(n)}if(n.numberedoutline!==true){o.addClass("hidden-outline")}o.html(k(m,n))})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'org.randombits.confluence.toc:client-side-toc-resources', location = 'net/customware/confluence/plugin/toc/templates/client.soy' */
// This file was automatically generated from client.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Plugins.TableOfContents.Client.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Plugins == 'undefined') { Confluence.Plugins = {}; }
if (typeof Confluence.Plugins.TableOfContents == 'undefined') { Confluence.Plugins.TableOfContents = {}; }
if (typeof Confluence.Plugins.TableOfContents.Client == 'undefined') { Confluence.Plugins.TableOfContents.Client = {}; }


Confluence.Plugins.TableOfContents.Client.tocItemBody = function(opt_data, opt_ignored) {
  return '<span class="toc-item-body" data-outline="' + soy.$$escapeHtml(opt_data.outline) + '"><span class="toc-outline">' + soy.$$escapeHtml(opt_data.outline) + '</span><a href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="toc-link">' + soy.$$escapeHtml(opt_data.linkText) + '</a></span>';
};
if (goog.DEBUG) {
  Confluence.Plugins.TableOfContents.Client.tocItemBody.soyTemplateName = 'Confluence.Plugins.TableOfContents.Client.tocItemBody';
}


Confluence.Plugins.TableOfContents.Client.listStyleTocLevelContainer = function(opt_data, opt_ignored) {
  return '<ul style="' + ((opt_data.cssliststyle) ? ' list-style: ' + soy.$$escapeHtml(opt_data.cssliststyle) + ';' : '') + ((opt_data.csslistindent) ? ' padding-left: ' + soy.$$escapeHtml(opt_data.csslistindent) + ';' : '') + '"></ul>';
};
if (goog.DEBUG) {
  Confluence.Plugins.TableOfContents.Client.listStyleTocLevelContainer.soyTemplateName = 'Confluence.Plugins.TableOfContents.Client.listStyleTocLevelContainer';
}


Confluence.Plugins.TableOfContents.Client.listStyleTocItemContainer = function(opt_data, opt_ignored) {
  return '<li></li>';
};
if (goog.DEBUG) {
  Confluence.Plugins.TableOfContents.Client.listStyleTocItemContainer.soyTemplateName = 'Confluence.Plugins.TableOfContents.Client.listStyleTocItemContainer';
}


Confluence.Plugins.TableOfContents.Client.flatStyleTocItemContainer = function(opt_data, opt_ignored) {
  return '<span class="' + soy.$$escapeHtml(opt_data.cssClass) + '"></span>';
};
if (goog.DEBUG) {
  Confluence.Plugins.TableOfContents.Client.flatStyleTocItemContainer.soyTemplateName = 'Confluence.Plugins.TableOfContents.Client.flatStyleTocItemContainer';
}


Confluence.Plugins.TableOfContents.Client.flatStyleTocSeparator = function(opt_data, opt_ignored) {
  return '<span class="toc-separator">' + soy.$$escapeHtml(opt_data.separator) + '</span>';
};
if (goog.DEBUG) {
  Confluence.Plugins.TableOfContents.Client.flatStyleTocSeparator.soyTemplateName = 'Confluence.Plugins.TableOfContents.Client.flatStyleTocSeparator';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links…"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-constants', location = 'src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__584af8690b0248d0ffcba682ccaa70ba=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.INPUT_SUFFIX="-input";return a}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-toggle', location = 'src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__07a2f092bc69049991d58167c8791201=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function i(a){a._canFireEventsNow&&a.dispatchEvent(new m.default("change",{bubbles:!0}))}function c(a){return a._input||(a._input=a.querySelector("input"))}function g(a,b){c(b).removeAttribute(a)}function j(a,b,d){c(b).setAttribute(a,d.newValue)}function h(a){return{removed:g.bind(this,a),fallback:j.bind(this,a)}}"use strict";__7662207c0e706b4f9b15584a7f7253f9;
__e8e9fc435c352b74c65e5f8d64ed692c;var f=__ab489eda548cad099ce93b60faa6a3d5,e=d(__700a145ba3db9966cc95664c892049f8),n=d(__2512e2cfb8f46670d5cb777690a28c72),o=d(__e246bf93af36eb4453f35afeb1c302d9),p=d(__c6b5725916d210b9653318d2ea2472cb),q=d(__0ac9a2c09f995a9c0a478af8742f59b7),r=__584af8690b0248d0ffcba682ccaa70ba,m=d(__f7a5e0d2ea8865b104efc9b94861591e),k=__6c1bd26c14066cf537a86a0966c2d4fc,s=d(k),l={removed:function(a){g.call(this,"form",a);a._formId=null},fallback:function(a,b){j.call(this,"form",a,
b);a._formId=b.newValue}},t={removed:g.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+r.INPUT_SUFFIX)}};(0,q.default)("aui-toggle",{template:(0,p.default)('<input type="checkbox" class="aui-toggle-input assistive">','<span class="aui-toggle-view">','<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);
a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");a._spinner=new s.default;a._spinner.setAttribute("size",k.SIZE.SMALL.name);(0,e.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",function(b){a.busy&&b.keyCode===o.default.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",
function(b){a.busy&&b.preventDefault()});a.hasAttribute("checked")&&c(a).setAttribute("checked","");a._canFireEventsNow=!0},attached:function(a){(0,n.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&(a._input.checked=!a._input.checked);(0,f.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:t,checked:{removed:function(a){c(a).checked=!1;i(a)},fallback:function(a){c(a).checked=!0;i(a)}},disabled:h("disabled"),form:l,name:h("name"),
value:h("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();
return this},get checked(){return this._input.checked},set checked(a){this._input.checked!==a&&(this._input.checked=a,(0,f.setBooleanAttribute)(this,"checked",a))},get disabled(){return this._input.disabled},set disabled(a){return(0,f.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){l.fallback.call(this,this,{newValue:a||null});return this.form},get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},
set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,f.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,e.default)(this._input).addClass("indeterminate-checked"),(0,e.default)(this._tick).append(this._spinner)):(0,e.default)(this._cross).append(this._spinner)):((0,e.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=
!1,this._input.removeAttribute("aria-busy"),this._spinner.parentNode&&this._spinner.parentNode.removeChild(this._spinner));var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-errorPanel.soy' */
// This file was automatically generated from macro-errorPanel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroErrorPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr"><div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml('Error code:') + ' ' + soy.$$escapeHtml(opt_data.errorCode) + '</strong></p><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p><p>' + soy.$$filterNoAutoescape('Please consult the \x3ca href\x3d\x22https://evolu.software/help/issueform/troubleshooting\x22\x3eTroubleshooting\x3c/a\x3e documentation for more details.') + '</p></div></div>';
};
if (goog.DEBUG) {
  jinc.soy.content.macroErrorPanel.soyTemplateName = 'jinc.soy.content.macroErrorPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-warnPanel.soy' */
// This file was automatically generated from macro-warnPanel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroWarnPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr"><div class="aui-message aui-message-error"><p>' + soy.$$escapeHtml(opt_data.message) + '</p><p>' + soy.$$filterNoAutoescape('Please consult the \x3ca href\x3d\x22https://evolu.software/help/issueform/troubleshooting\x22\x3eTroubleshooting\x3c/a\x3e documentation for more details.') + '</p></div></div>';
};
if (goog.DEBUG) {
  jinc.soy.content.macroWarnPanel.soyTemplateName = 'jinc.soy.content.macroWarnPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-form-details-panel.soy' */
// This file was automatically generated from macro-form-details-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroFormDetailsPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr">' + soy.$$escapeHtml('You can view Jira issues in combination with the other \x27Issue Forms for Confluence\x27 macros.') + '</div><form id="jinc-issue-form" class="aui" method="post" action="#"><fieldset><div id="macro-param-div-issueKey" class="field-group macro-param-div required"><label for="macro-param-issueKey">' + soy.$$escapeHtml('Issue Key') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="issueKey" class="text long-field" type="text" title="labelsString" name="issueKey" /><button id="searchIssueButton" type="button" title="' + soy.$$escapeHtml('Search') + '" class="button" aria-disabled="false"><span class="aui-icon aui-icon-small aui-iconfont-search"></span></button></div><div id="macro-param-div-issueKey" class="field-group macro-param-div"><input id="issueSummary" class="text long-field" readonly disabled type="text" title="labelsString" name="issueSummary" /></div><div id="macro-param-div-projectKey" class="field-group macro-param-div"><input id="projectKey" class="text long-field" type="hidden" title="labelsString" name="projectKey" /></div><div id="macro-param-div-issueTypeId" class="field-group macro-param-div"><input id="issueTypeId" class="text long-field" type="hidden" title="labelsString" name="issueTypeId" /></div></fieldset></form>' + aui.expander.trigger({id: 'replace-text-trigger', contentId: 'expander-with-replace-text-content', tag: 'a', content: 'How to customize the form: ...', replaceText: 'How to customize the form:'}) + aui.expander.content({id: 'expander-with-replace-text-content', content: '<ul><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field label\x27 macro') + '</li><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field\x27 macro') + '</li></ul>' + soy.$$escapeHtml('and the Issue Form is ready to use and customized.') + '<p>' + soy.$$escapeHtml('') + '</p>'});
};
if (goog.DEBUG) {
  jinc.soy.content.macroFormDetailsPanel.soyTemplateName = 'jinc.soy.content.macroFormDetailsPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/js/jinc-form-details.js' */
AJS.bind("init.rte", function () {
    var dialog;
    var macroName = 'jinc-issue-details';
    var oriMacro;
    var projectList;


    AJS.MacroBrowser.setMacroJsOverride(macroName, {
        opener: function (macro) {
            oriMacro = macro;
            openJincEditor(macro);
        }
    });

    function disableSubmitButton(disable) {
        var buttons = AJS.$('#jinc-form-details-dialog .button-panel-submit-button');
        if (buttons.length >= 1) {
            buttons[0].disabled = disable;
        }
    }

    function openJincEditor(macro) {

        dialog = generateDialog("jinc-form-details-dialog");
        dialog.addHeader("\u0027Issue Forms - view form\u0027 Macro");
        dialog.addPanel("panel", "panel");
        dialog.getCurrentPanel().html(jinc.soy.content.macroFormDetailsPanel());
        dialog.addSubmit("Save", insertMacroIntoEditor);
        dialog.addCancel("Cancel", cancelChanges);
        disableSubmitButton(true);
        var issueField = $("#issueKey");
        if (macro.params && macro.params.issueKey) {
            issueField.val(macro.params.issueKey);
            findIssue(macro.params.issueKey);
        }

        issueField.on('change', function () {
            findIssue(this.value);
        })
        $("#searchIssueButton").on('click', function() {
            findIssue(issueField.val());
        });

        dialog.show();
    }

    function findIssue(issueKey) {
        var issueSummary = $("#issueSummary");
        $.ajax({
            type: 'GET',
            url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issue/' + issueKey,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function (res) {
                disableSubmitButton(false);
                issueSummary.val(res.key + " - "+ res.fields.summary);
            },
            error: function (errorString, exception) {
                disableSubmitButton(true);
                issueSummary.val("No issue found with issue key" + ' ' + issueKey);
            }
        });
    }

    function generateDialog(dialogId) {
        return new AJS.Dialog({
            width: 800,
            height: 600,
            id: dialogId,
            keypressListener: function (e) {
                if (e.keyCode === 27) {
                    cancelChanges();
                }
            }
        });
    };

    function getMacroDefinition(issueKey, projectKey, issueTypeId) {
        var oriMacroBody = "<p></p>";
        if (oriMacro.body) {
            oriMacroBody = oriMacro.body
        }
        return {
            name: macroName,
            params: {
                issueKey: issueKey,
                projectKey: projectKey,
                issueTypeId: issueTypeId
            },
            body: oriMacroBody
        };
    };

    function cancelChanges() {
        dialog.hide();
        dialog.remove();
        dialog = null;
    }

    function insertMacroIntoEditor() {
        $.ajax({
            type: 'GET',
            url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issue/' + $("#issueKey").val(),
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function (res) {
                var macroRenderRequest = {
                    contentId: Confluence.Editor.getContentId(),
                    macro: getMacroDefinition(res.key, res.fields.project.id, res.fields.issuetype.id)
                };
                tinymce.confluence.MacroUtils.insertMacro(macroRenderRequest);
                dialog.remove();
                dialog = null;
            },
            error: function (errorString, exception) {
                disableSubmitButton(true);
                issueSummary.val("No issue found with issue key" + ' ' + issueKey);
            }
        });
    }

});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-form-edit-auto-panel.soy' */
// This file was automatically generated from macro-form-edit-auto-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroFormEditPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr">' + soy.$$escapeHtml('You can view Jira issues in combination with the other \x27Issue Forms for Confluence\x27 macros.') + '</div><form id="jinc-issue-form" class="aui" method="post" action="#"><fieldset><div id="macro-param-div-issueKey" class="field-group macro-param-div required"><label for="macro-param-issueKey">' + soy.$$escapeHtml('Issue Key') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="issueKey" class="text long-field" type="text" title="labelsString" name="issueKey" /><button id="searchIssueButton" type="button" title="' + soy.$$escapeHtml('Search') + '" class="button" aria-disabled="false"><span class="aui-icon aui-icon-small aui-iconfont-search"></span></button></div><div id="macro-param-div-issueKey" class="field-group macro-param-div"><input id="issueSummary" class="text long-field" readonly disabled type="text" title="labelsString" name="issueSummary" /></div><div id="macro-param-div-projectKey" class="field-group macro-param-div"><input id="projectKey" class="text long-field" type="hidden" title="labelsString" name="projectKey" /></div><div id="macro-param-div-issueTypeId" class="field-group macro-param-div"><input id="issueTypeId" class="text long-field" type="hidden" title="labelsString" name="issueTypeId" /></div></fieldset></form>' + aui.expander.trigger({id: 'replace-text-trigger', contentId: 'expander-with-replace-text-content', tag: 'a', content: 'How to customize the form: ...', replaceText: 'How to customize the form:'}) + aui.expander.content({id: 'expander-with-replace-text-content', content: '<ul><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field label\x27 macro') + '</li><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field\x27 macro') + '</li></ul>' + soy.$$escapeHtml('and the Issue Form is ready to use and customized.') + '<p>' + soy.$$escapeHtml('') + '</p>'});
};
if (goog.DEBUG) {
  jinc.soy.content.macroFormEditPanel.soyTemplateName = 'jinc.soy.content.macroFormEditPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/js/jinc-form-edit-auto.js' */
AJS.bind("init.rte", function () {
    var dialog;
    var macroName = 'jinc-issue-edit-auto';
    var oriMacro;
    var projectList;


    AJS.MacroBrowser.setMacroJsOverride(macroName, {
        opener: function (macro) {
            oriMacro = macro;
            openJincEditor(macro);
        }
    });

    function disableSubmitButton(disable) {
        var buttons = AJS.$('#jinc-form-edit-auto-dialog .button-panel-submit-button');
        if (buttons.length >= 1) {
            buttons[0].disabled = disable;
        }
    }

    function openJincEditor(macro) {

        dialog = generateDialog("jinc-form-edit-auto-dialog");
        dialog.addHeader("\u0027Issue Forms - view form\u0027 Macro");
        dialog.addPanel("panel", "panel");
        dialog.getCurrentPanel().html(jinc.soy.content.macroFormEditPanel());
        dialog.addSubmit("Save", insertMacroIntoEditor);
        dialog.addCancel("Cancel", cancelChanges);
        disableSubmitButton(true);
        var issueField = $("#issueKey");
        if (macro.params && macro.params.issueKey) {
            issueField.val(macro.params.issueKey);
            findIssue(macro.params.issueKey);
        }

        issueField.on('change', function () {
            findIssue(this.value);
        });
        $("#searchIssueButton").on('click', function() {
            findIssue(issueField.val());
        });

        dialog.show();
    }

    function findIssue(issueKey) {
        var issueSummary = $("#issueSummary");
        $.ajax({
            type: 'GET',
            url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issue/' + issueKey,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function (res) {
                disableSubmitButton(false);
                issueSummary.val(res.key + " - "+ res.fields.summary);
            },
            error: function (errorString, exception) {
                disableSubmitButton(true);
                issueSummary.val("No issue found with issue key" + ' ' + issueKey);
            }
        });
    }

    function generateDialog(dialogId) {
        return new AJS.Dialog({
            width: 800,
            height: 600,
            id: dialogId,
            keypressListener: function (e) {
                if (e.keyCode === 27) {
                    cancelChanges();
                }
            }
        });
    }

    function getMacroDefinition(issueKey, projectKey, issueTypeId) {
        var oriMacroBody = "<p></p>";
        if (oriMacro.body) {
            oriMacroBody = oriMacro.body
        }
        return {
            name: macroName,
            params: {
                issueKey: issueKey,
                projectKey: projectKey,
                issueTypeId: issueTypeId
            },
            body: oriMacroBody
        };
    }

    function cancelChanges() {
        dialog.hide();
        dialog.remove();
        dialog = null;
    }

    function insertMacroIntoEditor() {
        $.ajax({
            type: 'GET',
            url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issue/' + $("#issueKey").val(),
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function (res) {
                var macroRenderRequest = {
                    contentId: Confluence.Editor.getContentId(),
                    macro: getMacroDefinition(res.key, res.fields.project.id, res.fields.issuetype.id)
                };
                tinymce.confluence.MacroUtils.insertMacro(macroRenderRequest);
                dialog.remove();
                dialog = null;
            },
            error: function (errorString, exception) {
                disableSubmitButton(true);
                issueSummary.val("No issue found with issue key" + ' ' + issueKey);
            }
        });
    }

});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-form-editor-panel.soy' */
// This file was automatically generated from macro-form-editor-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroFormPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr">' + soy.$$escapeHtml('You can create Jira issues in combination with the other \x27Issue Forms for Confluence\x27 macros.') + '</div><form id="jinc-issue-form" class="aui" method="post" action="#"><fieldset><div id="macro-param-div-projectKey" class="field-group macro-param-div required"><label for="macro-param-projectKey">' + soy.$$escapeHtml('Project') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="projectKey" class="text select2-input long-field" type="text" title="labelsString" name="projectKey" /></div><div id="macro-param-div-issueTypeId" class="field-group macro-param-div required"><label for="macro-param-issueTypeId">' + soy.$$escapeHtml('Issue type') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="issueTypeId" class="text select2-input long-field" type="text" title="labelsString" name="issueTypeId" /></div><div id="macro-param-div-buttonOnly" class="field-group macro-param-div"><label for="buttonOnly">' + soy.$$escapeHtml('Only Create-Button') + '</label><aui-toggle id="buttonOnly" label="Only Create-Button"></aui-toggle><div class="description">' + soy.$$escapeHtml('Renders a button that opens a dialog when selected. Otherwise the form will be rendered directly to the page.') + '</div></div><div id="macro-param-div-buttonLabel" class="field-group macro-param-div"><label for="macro-param-buttonType">' + soy.$$escapeHtml('Button label') + '</label><input id="buttonLabel" class="text long-field" type="text" title="Button Label" name="buttonLabel" /></div><div id="macro-param-div-buttonType" class="field-group macro-param-div"><label for="macro-param-buttonType">' + soy.$$escapeHtml('Button type') + '</label><input id="buttonType" class="text select2-input long-field" type="text" title="Button Type" name="buttonType" /></div><div id="macro-param-div-projectKeyHumanReadable" class="field-group macro-param-div"><input id="projectKeyHumanReadable" class="text long-field" type="hidden" title="Project" name="projectKeyHumanReadable" /></div></fieldset></form>' + aui.expander.trigger({id: 'replace-text-trigger', contentId: 'expander-with-replace-text-content', tag: 'a', content: 'How to customize the form: ...', replaceText: 'How to customize the form:'}) + aui.expander.content({id: 'expander-with-replace-text-content', content: '<ul><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field label\x27 macro') + '</li><li>' + soy.$$escapeHtml('add a \x27Issue Forms - field\x27 macro') + '</li><li>' + soy.$$escapeHtml('do not forget to add an \x27Issue Forms - Button bar\x27 macro') + '</li></ul>' + soy.$$escapeHtml('and the Issue Form is ready to use and customized.') + '<p>' + soy.$$escapeHtml('Feel free to use the \x27Create Jira Issue Page\x27 page template to get an initialized \x27Issue Forms - create form\x27') + '</p>'});
};
if (goog.DEBUG) {
  jinc.soy.content.macroFormPanel.soyTemplateName = 'jinc.soy.content.macroFormPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/js/jinc-form-editor.js' */
AJS.bind("init.rte", function() {
	var dialog;	
    var macroName = 'jinc-issue-create';
    var oriMacro;
    var projectList;
    
    
    AJS.MacroBrowser.setMacroJsOverride(macroName, {
        opener: function (macro) {
        	oriMacro = macro;
            openJincEditor(macro);
        }
    });
    
	function disableSubmitButton(disable) {
		var buttons = AJS.$('#jinc-form-editor-dialog .button-panel-submit-button');
		if (buttons.length >= 1) {
			buttons[0].disabled = disable;
		}
	}
    function openJincEditor(macro) {
        $.ajax({
            type: 'GET',
            url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/projectlist',
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function(res) {
            	    projectList = res;
                    dialog = generateDialog("jinc-form-editor-dialog");
                    dialog.addHeader("\u0027Issue Forms - create form\u0027 macro");
                    dialog.addPanel("panel", "panel");
                    dialog.getCurrentPanel().html(jinc.soy.content.macroFormPanel());
                    dialog.addSubmit("Save", insertMacroIntoEditor);
    				disableSubmitButton(true);
                    dialog.addCancel("Cancel", cancelChanges);
                	var issueField = $("#projectKey");
                	if (macro.params && macro.params.projectKey) {
                		issueField.val(macro.params.projectKey);
                		resetIssueTypeField(macro.params.projectKey, macro)
                	}
                var toggle = document.getElementById('buttonOnly');
                if (macro.params && macro.params.buttonOnly) {
                    toggle.checked = (macro.params.buttonOnly === 'true');
                }
                document.getElementById('macro-param-div-buttonLabel').hidden = !toggle.checked;
                document.getElementById('macro-param-div-buttonType').hidden = !toggle.checked;
                toggle.addEventListener('change', function(e) {
                    document.getElementById('macro-param-div-buttonLabel').hidden = !toggle.checked;
                    document.getElementById('macro-param-div-buttonType').hidden = !toggle.checked;
                });
                if (macro.params && macro.params.buttonLabel) {
                    var label = $("#buttonLabel");
                    label.val(macro.params.buttonLabel);
                }
                var buttonType = $("#buttonType");
                if (macro.params && macro.params.buttonType) {
                    buttonType.val(macro.params.buttonType);
                }
                buttonType.auiSelect2({
                    data :  [
                        { "id": "default", "text": "default"},
                        { "id": "primary", "text": "primary"},
                        { "id": "link", "text": "link"},
                        { "id": "subtle", "text": "subtle"}
                    ]
                });
                	issueField.auiSelect2({
                    	data : res
                    });
                	issueField.on('change', function() {
                		resetIssueTypeField(this.value, macro)
                		if (projectList != null) {
                			var hIndex;
                			for (hIndex = 0; hIndex < projectList.length; ++hIndex) {
                				if (projectList[hIndex].id == this.value) {
                        			var projectKeyHumanReadableField = $("#projectKeyHumanReadable");
                        			projectKeyHumanReadableField.val(projectList[hIndex].key);
                				}
                			}
                		}
                    })
                    dialog.show();
            },
            error: function(errorString, exception) {
                dialog = generateDialog("jinc-form-editor-dialog");
                dialog.addHeader("Something went wrong");
                dialog.addPanel("panel", "panel");
                var serverResponse = JSON.parse(errorString.responseText);
                var selectedAjsParams = {
        		        errorCode: serverResponse.errorCode,
                    message: serverResponse.message
        		    }
                dialog.getCurrentPanel().html(jinc.soy.content.macroErrorPanel(selectedAjsParams));
                dialog.addCancel("Close", cancelChanges);
                dialog.show();
            }
        });
    }
    
    function generateDialog(dialogId) {
        return new AJS.Dialog({
            width: 800,
            height: 600,
            id: dialogId,
            keypressListener: function(e) {
                if (e.keyCode === 27) {
                	cancelChanges();
                }
            }
        });
    }
    
    function resetIssueTypeField(projectId, macro) {
    	var issueTypeField = $("#issueTypeId");
        $.ajax({
            type: 'GET',
        	url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issuetypelist/' + projectId ,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: "json",
            success: function(res) {
            	if (macro.params && macro.params.issueTypeId) {
            		issueTypeField.val(macro.params.issueTypeId);
    				disableSubmitButton(false);
            	} else {
            		issueTypeField.val('');
            	}
            	issueTypeField.auiSelect2({
                	data : res
                });
            	issueTypeField.on('change', function(selected) {
    				disableSubmitButton(false);
				})

            },
            error: function(errorString, exception) {
            	issueTypeField.focus().siblings(".error").html(errorString);
            }
        });
    }
    
    function getMacroDefinition(projectKey, issueTypeId, projectKeyHumanReadable, buttonOnly, buttonLabel, buttonType) {
    	var oriMacroBody ="<p></p>";
    	if (oriMacro.body) {
    		oriMacroBody = oriMacro.body
    	}
        return {
            name: macroName,
            params: {
            	projectKey: projectKey,
            	issueTypeId: issueTypeId,
                projectKeyHumanReadable: projectKeyHumanReadable,
                buttonOnly: buttonOnly,
                buttonLabel: buttonLabel,
                buttonType: buttonType
            },
            body: oriMacroBody
        };
    }
    
    function cancelChanges() {
        dialog.hide();
        dialog.remove();
        dialog = null;
    }
    
    function insertMacroIntoEditor() {
        var buttonOnly = false;
        var toggle = document.getElementById('buttonOnly');
        if (toggle && toggle.checked) {
            buttonOnly = toggle.checked;
        }
        var macroRenderRequest = {
            contentId: Confluence.Editor.getContentId(),
            macro: getMacroDefinition($("#projectKey").val(), $("#issueTypeId").val(), $("#projectKeyHumanReadable").val(), buttonOnly, $("#buttonLabel").val(), $("#buttonType").val())
        };
        tinymce.confluence.MacroUtils.insertMacro(macroRenderRequest);
        dialog.remove();
        dialog = null;
    }
  
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-field-editor-panel.soy' */
// This file was automatically generated from macro-field-editor-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroFieldPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr">' + ((opt_data.mode == 'create') ? soy.$$escapeHtml('Choose the field that is to be filled in by the user.') : soy.$$escapeHtml('Choose the field that should be shown to the user.')) + '</div><div class="jinc-body"><form id="jinc-issue-default-value-form" name="issueFormField" class="aui" ng-controller="JincFieldCntl" method="post" action="#"><fieldset class="form-group"><div id="macro-param-div-fieldName" class="field-group macro-param-div required"><label for="fieldName">' + soy.$$escapeHtml('Field name') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="fieldName" class="text select2-input long-field" type="text" title="labelsString" name="fieldName" /></div>' + ((opt_data.mode == 'create') ? '<div ng-if="selectedField.unsupported != true"><div ng-if="selectedField.schema.type == \'string\'" id="macro-param-div-defaultValue-string" class="field-group macro-param-div"><label for="defaultValueString">' + soy.$$escapeHtml('Default value') + '</label><input ng-model="model.defaultValue" id="defaultValue" name="defaultValue" type="text" class="form-control default-value-input ng-pristine ng-invalid ng-invalid-required" /></div><div ng-if="selectedField.schema.type == \'number\'" id="macro-param-div-defaultValue-number" class="field-group macro-param-div"><label for="defaultValueNumber">' + soy.$$escapeHtml('Default value (number)') + '</label><input type="number" ng-model="model.defaultValue" id="defaultValue" name="defaultValue" class="form-control default-value-input ng-pristine ng-invalid ng-invalid-required" /><div ng-show="issueFormField.defaultValueNumber.$error.url" class="error">' + soy.$$escapeHtml('Not valid number!') + '</div></div><div ng-if="selectedField.schema.type == \'url\'" id="macro-param-div-defaultValue-url" class="field-group macro-param-div"><label for="defaultValueUrl">' + soy.$$escapeHtml('Default value (URL)') + '</label><input type="url" ng-model="model.defaultValue" id="defaultValue" ng-minlength="5" name="defaultValue" class="form-control default-value-input ng-pristine ng-invalid ng-invalid-required" /><div ng-show="issueFormField.defaultValueUrl.$error.url" class="error">' + soy.$$escapeHtml('Not valid url!') + '</div></div><div ng-if="selectedField.schema.type == \'longstring\'" id="macro-param-div-defaultValue-longstring" class="field-group macro-param-div"><label for="defaultValueLongstring">' + soy.$$escapeHtml('Default value') + '</label><textarea rows="4" ng-model="model.defaultValue" id="defaultValue" name="defaultValue" class="form-control textarea"></textarea></div><div ng-if="selectedField.schema.type == \'timetracking\'" id="macro-param-div-defaultValue-timetracking" class="field-group macro-param-div"><label for="defaultValueTimetracking"></label><input id="originalEstimate" ng-model="model.defaultValue" class="text select2-input long-field" type="text" name="originalEstimate" placeholder="' + soy.$$escapeHtml('Original Estimate') + '" /><input id="remainingEstimate"ng-model="model.childDefaultValue" class="text select2-input long-field" type="text" name="remainingEstimate" placeholder="' + soy.$$escapeHtml('Remaining Estimate') + '" /></div><div ng-if="selectedField.schema.type == \'user\'" id="macro-param-div-defaultValue-user" class="field-group macro-param-div"><label for="defaultValueUser">' + soy.$$escapeHtml('Default user') + '</label><ui-select ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="Type, to get suggestions ..."><img ng-if="$select.selected.avatarUrl" ng-src="{{$select.selected.avatarUrl}}" height="16px" width="16px" />{{$select.selected.displayName}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadUserSuggestion(selectedField.schema.fieldId, $select.search)" repeat="user.name as user in userSuggestion"><img ng-if="user.avatarUrl" ng-src="{{user.avatarUrl}}" height="16px" width="16px" /><span ng-bind-html="user.displayName | highlight: $select.search"></span></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'group\'" id="macro-param-div-defaultValue-group" class="field-group macro-param-div"><label for="defaultValueGroup">' + soy.$$escapeHtml('Default group') + '</label><ui-select ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="Type, to get suggestions ...">{{$select.selected.name}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadGroupSuggestion(selectedField.schema.fieldId, $select.search)" repeat="group.name as group in groupSuggestion"><div ng-bind-html="group.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'multiselectgroup\'" id="macro-param-div-defaultValue-multiselectgroup" class="field-group macro-param-div"><label for="defaultValueGroup">' + soy.$$escapeHtml('Default groups') + '</label><ui-select multiple ng-model="model.defaultValue" theme="bootstrap" name="defaultValue"><ui-select-match placeholder="Type, to get suggestions ...">{{$item.name}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadGroupSuggestion(selectedField.schema.fieldId, $select.search)" repeat="group.name as group in groupSuggestion"><div ng-bind-html="group.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'multiselectuser\'" id="macro-param-div-defaultValue-multiselectuser" class="field-group macro-param-div"><label for="defaultValueUser">' + soy.$$escapeHtml('Default users') + '</label><ui-select multiple ng-model="model.defaultValue" theme="bootstrap" name="defaultValue"><ui-select-match placeholder="' + soy.$$escapeHtml('Default users') + '"><img ng-if="$item.avatarUrl" ng-src="{{$item.avatarUrl}}" height="16px" width="16px" />{{$item.displayName}} &lt;{{$item.name}}&gt;</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadUserSuggestion(selectedField.schema.fieldId, $select.search)" repeat="user.name as user in userSuggestion"><img ng-if="user.avatarUrl" ng-src="{{$item.avatarUrl}}" height="16px" width="16px" /><span ng-bind-html="user.displayName | highlight: $select.search"></span></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'select\' || selectedField.schema.type == \'selectWithAllowedValues\' || selectedField.schema.type == \'radiobutton\'" id="macro-param-div-defaultValue-select" class="field-group macro-param-div"><label for="defaultValueSelect">' + soy.$$escapeHtml('Default value') + '</label><ui-select ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to highlight suggestions ...') + '"><img ng-if="$select.selected.iconUrl" ng-src="{{$select.selected.iconUrl}}" height="16px" width="16px" />{{$select.selected.name | removeEncodingFix}}</ui-select-match><ui-select-choices repeat="allowedValue as allowedValue in selectedField.allowedValues"><img ng-if="allowedValue.iconUrl" ng-src="{{allowedValue.iconUrl}}" height="16px" width="16px" /><span ng-bind-html="allowedValue.value | removeEncodingFix | highlight: $select.search"></span></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'multiselect\' || selectedField.schema.type == \'checkbox\'" id="macro-param-div-defaultValue-multiselect" class="field-group macro-param-div"><label for="defaultValueMultiselect">' + soy.$$escapeHtml('Default values') + '</label><ui-select multiple ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to highlight suggestions ...') + '">{{$item.value | removeEncodingFix}}</ui-select-match><ui-select-choices repeat="allowedValue as allowedValue in selectedField.allowedValues"><div ng-bind-html="allowedValue.value | removeEncodingFix | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'date\'" id="macro-param-div-defaultValue-date" class="field-group macro-param-div"><label for="defaultValueDate">' + soy.$$escapeHtml('Default date') + '</label><input bs-datepicker data-date-format="yyyy-MM-dd" data-date-type="string" data-autoclose="1" data-useNative="true" type="text" placeholder="yyyy-MM-dd" name="defaultValue" id="defaultValue" ng-model="model.defaultValue" class="form-control default-value-input" /></div><div ng-if="selectedField.schema.type == \'datetime\'" class="field-group macro-param-div"><label for="defaultValueDatetime">' + soy.$$escapeHtml('Default date/time') + '</label><input bs-datepicker data-date-format="yyyy-MM-dd" data-date-type="iso" data-autoclose="1" type="text" name="defaultValue_date" id="defaultValue_date" ng-model="model.defaultValue" class="form-control default-value-input" placeholder="Date" /><input bs-timepicker data-time-type="iso" data-autoclose="1" type="text" name="defaultValue_time" id="defaultValue_time" ng-model="model.defaultValue"  class="form-control default-value-input" placeholder="Time"/></div><div ng-if="selectedField.schema.type == \'labelsarray\'" id="macro-param-div-defaultValue-labelsarray" class="field-group macro-param-div"><label for="defaultValueLabelsarray">' + soy.$$escapeHtml('Default values') + '</label><ui-select multiple ng-model="model.defaultValue" theme="bootstrap" name="defaultValue"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to get suggestions ...') + '">{{$item.label}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="loadLabelSuggestion(selectedField.schema.customId, $select.search)" repeat="suggestion in labelSuggestion"><div ng-bind-html="suggestion.label | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'systemlabels\'" id="macro-param-div-defaultValue-systemlabels" class="field-group macro-param-div"><label for="defaultValueSystemlabels">' + soy.$$escapeHtml('Default values') + '</label><ui-select multiple ng-model="model.defaultValue" theme="bootstrap" name="defaultValue"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to get suggestions ...') + '">{{$item.label}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadSystemLabelSuggestion($select.search)" repeat="suggestion in systemLabelSuggestion"><div ng-bind-html="suggestion.label | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'cascadeselect\'" id="macro-param-div-defaultValue-systemlabels" class="field-group macro-param-div"><label for="defaultValueSystemlabels">' + soy.$$escapeHtml('Default value') + '</label><ui-select ng-model="model.defaultValue" name="defaultValue" on-select="model.childDefaultValue = null;" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to highlight suggestions ...') + '">{{$select.selected.value}}</ui-select-match><ui-select-choices repeat="allowedValue in selectedField.allowedValues"><div ng-bind-html="allowedValue.value | highlight: $select.search"></div></ui-select-choices></ui-select><ui-select ng-model="model.childDefaultValue" name="defaultValue_subselect" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to highlight suggestions ...') + '">{{$select.selected.value}}</ui-select-match><ui-select-choices repeat="allowedValue in model.defaultValue.children"><div ng-bind-html="allowedValue.value | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'softwareEpicLink\'" id="macro-param-div-defaultValue-epicLink" class="field-group macro-param-div"><label for="defaultValueEpicLink">' + soy.$$escapeHtml('Default epic link') + '</label><ui-select ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to get suggestions ...') + '">{{$select.selected.name}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadEpicSuggestion($select.search)" repeat="epic in epicSuggestion"><div ng-bind-html="epic.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'softwareSprint\'" id="macro-param-div-defaultValue-sprint" class="field-group macro-param-div"><label for="defaultValueSprint">' + soy.$$escapeHtml('Default sprint') + '</label><ui-select ng-model="model.defaultValue" id="defaultValue" name="defaultValue" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to get suggestions ...') + '">{{$select.selected.name}}</ui-select-match><ui-select-choices refresh-delay="50" refresh="reloadSprintSuggestion($select.search)" repeat="sprint in sprintSuggestion"><div ng-bind-html="sprint.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><!-- shrink the allowed values list --><div ng-if="selectedField.schema.type == \'select\' || selectedField.schema.type == \'selectWithAllowedValues\' || selectedField.schema.type == \'radiobutton\' || selectedField.schema.type == \'multiselect\' || selectedField.schema.type == \'checkbox\'" id="macro-param-div-shrinkedAllowedValues-multiselect" class="field-group macro-param-div"><label for="shrinkedAllowedValues">' + soy.$$escapeHtml('Selectable values') + '</label><ui-select multiple ng-model="model.shrinkedAllowedValues" id="shrinkedAllowedValues" name="shrinkedAllowedValues" theme="bootstrap"><ui-select-match placeholder="' + soy.$$escapeHtml('Type, to highlight suggestions ...') + '"><img ng-if="$item.iconUrl" ng-src="{{$item.iconUrl}}" height="16px" width="16px" />{{$item.name | removeEncodingFix}}</ui-select-match><ui-select-choices repeat="allowedValue as allowedValue in selectedField.allowedValues"><img ng-if="allowedValue.iconUrl" ng-src="{{allowedValue.iconUrl}}" height="16px" width="16px" /><span ng-bind-html="allowedValue.value | removeEncodingFix | highlight: $select.search"></span></ui-select-choices></ui-select></div><div ng-if="selectedField.schema.type == \'portfolioParentLink\'" id="macro-param-div-defaultValue-portfolioParentLink" class="field-group macro-param-div required"><label for="defaultValueString">' + soy.$$escapeHtml('Issue Type name') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input ng-model="model.defaultValue" id="defaultValue" name="defaultValue" type="text" class="form-control default-value-input ng-pristine ng-invalid ng-invalid-required" /></div><div ng-if="selectedField.schema.type == \'portfolioParentLink\'" id="macro-param-div-defaultValue-portfolioParentLink" class="field-group macro-param-div"><label for="hintPortfolioParentLink"></label><div id="hintPortfolioParentLink">' + soy.$$changeNewlineToBr(soy.$$escapeHtml('Due to special requirements in the processing of the issue type within Portfolio, you have to specify the issue type here.')) + soy.$$filterNoAutoescape('(see also \x3ca target\x3d\x22_blank\x22 href\x3d\x22https://evolu.software/help/issueform/portfolio-parent-link\x22\x3eWhy does the field Parent Link require an issue type? - online help\x3c/a\x3e)') + '</div></div></div><!-- hide field option --><div id="macro-param-div-hidden" class="field-group macro-param-div required"><label for="field-hidden">' + soy.$$escapeHtml('Hide field') + '</span></label><input ng-if="!confluence510orHigher" type="checkbox" id="field-hidden" class="form-control default-value-input ng-pristine ng-invalid ng-invalid-required"/><aui-toggle ng-if="confluence510orHigher" id="field-hidden" label="' + soy.$$escapeHtml('Hide field') + '"></aui-toggle></div><div id="macro-param-div-hidden" class="field-group macro-param-div required"><label for="make-field-required">' + soy.$$escapeHtml('Make field required') + '</span></label><aui-toggle id="make-field-required" label="' + soy.$$escapeHtml('Make field required') + '"></aui-toggle></div><!-- hint for the timetracking --><div ng-if="selectedField.schema.type == \'timetracking\'" id="macro-param-div-hint-timetracking" class="field-group macro-param-div"><label for="hintTimetracking"></label><div id="hintTimetracking">' + soy.$$changeNewlineToBr(soy.$$escapeHtml('Don\x27t forget to provide a hint e.g: \n You can specify a time unit after a time value \x27X\x27, such as Xw, Xd, Xh or Xm, to represent weeks (w), days (d), hours (h) and minutes (m), respectively. \n * Original Estimate - the amount of time you originally believe is required to resolve the issue. \n * Remaining Estimate - the amount of time you believe is required to resolve the issue in its current state.')) + '</div></div><div ng-if="selectedField.unsupported && selectedField.unsupported == true" class="field-group macro-param-div"><label for="hintUnsupported"></label><div id="hintUnsupported">' + soy.$$escapeHtml('Unsupported Field') + '</div></div>' : '') + '</fieldset></form></div>';
};
if (goog.DEBUG) {
  jinc.soy.content.macroFieldPanel.soyTemplateName = 'jinc.soy.content.macroFieldPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/js/jinc-field-editor.js' */
AJS.bind("init.rte", function () {
    var dialog;
    var macroName = 'jinc-issue-field';

    AJS.MacroBrowser.setMacroJsOverride(macroName, {
        opener: function (macro) {
            openJincEditor(macro);
        }
    });

    function disableSubmitButton(disable) {
        var buttons = AJS.$('#jinc-field-editor-dialog .button-panel-submit-button');
        if (buttons.length >= 1) {
            buttons[0].disabled = disable;
        }
    }

    // should be something like : defaultValue=|fieldName=priorty|issueTypeId=3|projectKey=10421|projectKEyHumanReadable=Test Core
    function splitParameter(parameterString) {
        var result = {};
        parameterString.split('|').forEach(function (x) {
            var arr = x.split('=');
            arr[1] && (result[arr[0]] = arr[1]);
        });
        return result;
    }

    function openJincEditor(macro) {
        var $macroDiv = AJS.$(tinymce.activeEditor.selection.getNode());
        var $parentDiv = $macroDiv[0].closest("[data-macro-name=jinc-issue-create]");
        var params;
        if ($parentDiv) {
            params = {mode: "create"};
        } else {
            $parentDiv = $macroDiv[0].closest("[data-macro-name=jinc-issue-details]");
            params = {mode: "view"};
        }
        if ($parentDiv) {
            var parameters = splitParameter($macroDiv[0].getAttribute('data-macro-parameters') + '|' + $parentDiv.getAttribute('data-macro-parameters'));
            var urlPart = "";
            if (params.mode === "create") {
                urlPart = '/rest/aevolu/jinc/1.0/jiraissue/fieldListWithDefault/' + parameters["projectKey"] + '/' + parameters["issueTypeId"];
            } else if (params.mode === "view") {
                urlPart = '/rest/aevolu/jinc/1.0/jiraissue/fieldListForIssue/' + parameters["issueKey"];
            }
            $.ajax({
                type: 'GET',
                url: AJS.contextPath() + urlPart,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                dataType: "json",
                success: function (res) {
                    dialog = generateDialog("jinc-field-editor-dialog");
                    dialog.addHeader("\u0027Issue Forms - field\u0027 Macro");
                    dialog.addPanel("panel", "panel");
                    dialog.getCurrentPanel().html(jinc.soy.content.macroFieldPanel(params));
                    dialog.addSubmit("Save", function () {
                        insertMacroIntoEditor(params.mode);
                    });
                    disableSubmitButton(true);
                    dialog.addCancel("Cancel", cancelChanges);
                    if (res.length > 0) {
                        var issueField = $("#fieldName");
                        if (macro.params && macro.params.fieldName) {
                            issueField.val(macro.params.fieldName);
                        }
                        issueField.auiSelect2({
                            data: res
                        });
                        issueField.on('change', function (selected) {
                            changeSelection(res, selected.val);
                            if (params.mode === "create") {
                                changeDefaultValue("");
                            }
                        });
                        dialog.show();
                        var element = angularIssueForms.element(document.querySelector('#jinc-issue-default-value-form'));
                        var isInitialized = element.injector();
                        if (isInitialized) {
                            console.log("someone has initialized an angular app in our div, we will replace it with ours!");
                            element.data("$injector","")
                        }
                        angularIssueForms.bootstrap(element, ['jincApp']);
                        if (macro.params && macro.params.fieldName) {
                            changeSelection(res, macro.params.fieldName);
                        }
                        if (params.mode === "create") {
                            var scope = angularIssueForms.element(document.getElementById("jinc-issue-default-value-form")).scope();
                            scope.$apply(function () {
                                scope.transferProjectKey(parameters["projectKey"]);
                            });
                            if (macro.params && macro.params.defaultValue) {
                                changeDefaultValue(macro.params.defaultValue);
                            }
                            if (macro.params && macro.params.shrinkedAllowedValues) {
                                changeShrinkedAllowedValues(macro.params.shrinkedAllowedValues);
                            }
                            if (macro.params && macro.params.hidden) {
                                var toggle = document.getElementById('field-hidden');
                                toggle.checked = (macro.params.hidden === 'true');
                            }
                            if (macro.params && macro.params.makeFieldRequired) {
                                var toggle = document.getElementById('make-field-required');
                                toggle.checked = (macro.params.makeFieldRequired === 'true');
                            }
                        }
                    } else {
                        var noPermssionString;
                        if (params.mode === "create") {
                            noPermssionString = "It seems that you don\u0027t have sufficient permissions to create an issue within the configured Jira Project. It may also be that you can not see the Jira Project or it has been deleted.";
                        } else if (params.mode === "view") {
                            noPermssionString = "It seems that you don\u0027t have sufficient permissions to view the issue. It may also possible it has been deleted.";
                        }
                        var selectedAjsParams = {
                            message: noPermssionString
                        };
                        dialog.getCurrentPanel().html(jinc.soy.content.macroWarnPanel(selectedAjsParams));
                        dialog.show();
                    }
                },
                error: function (errorString, exception) {
                    dialog = generateDialog("jinc-field-editor-dialog");
                    dialog.addHeader("Something went wrong");
                    dialog.addPanel("panel", "panel");
                    var serverResponse = JSON.parse(errorString.responseText);
                    var selectedAjsParams = {
                        errorCode: serverResponse.errorCode,
                        message: serverResponse.message
                    };
                    dialog.getCurrentPanel().html(jinc.soy.content.macroErrorPanel(selectedAjsParams));
                    dialog.addCancel("Close", cancelChanges);
                    dialog.show();
                }
            });
        } else {
            dialog = generateDialog("jinc-field-editor-dialog");
            dialog.addHeader("The macro must be placed within a form macro");
            dialog.addPanel("panel", "panel");
            var selectedAjsParams = {
                message: "You can only add this macro within the \u0027Issue Forms - create form\u0027 or \u0027Issue Forms - view form\u0027 macro"
            };
            dialog.getCurrentPanel().html(jinc.soy.content.macroWarnPanel(selectedAjsParams));
            dialog.addCancel("Close", cancelChanges);
            dialog.show();
        }

    }

    function generateDialog(dialogId) {
        return new AJS.Dialog({
            width: 800,
            height: 600,
            id: dialogId,
            keypressListener: function (e) {
                if (e.keyCode === 27) {
                    cancelChanges();
                }
            }
        });
    }

    function changeSelection(fieldList, selectedId) {
        disableSubmitButton(false);
        fieldList.forEach(function (entry) {
            if (entry.id === selectedId) {
                var scope = angularIssueForms.element(document.getElementById("jinc-issue-default-value-form")).scope();
                scope.$apply(function () {
                    scope.transfer(entry);
                });
            }
        });

    }

    function changeShrinkedAllowedValues(shrinkedAllowedValues) {
        var scope = angularIssueForms.element(document.getElementById("jinc-issue-default-value-form")).scope();
        scope.$apply(function () {
            scope.transferShrinkedAllowedValues(shrinkedAllowedValues);
        });
    }

    function changeDefaultValue(defaultValue) {
        var scope = angularIssueForms.element(document.getElementById("jinc-issue-default-value-form")).scope();
        scope.$apply(function () {
            scope.transferDefault(defaultValue);
        });
    }

    function getMacroDefinition(fieldName, defaultValue, hidden, shrinkedAllowedValues, makeFieldRequired) {
        return {
            name: macroName,
            params: {
                fieldName: fieldName,
                defaultValue: defaultValue,
                hidden: hidden,
                shrinkedAllowedValues : shrinkedAllowedValues,
                makeFieldRequired: makeFieldRequired
            }
        };
    }

    function cancelChanges() {
        dialog.hide();
        dialog.remove();
        dialog = null;
    }

    function insertMacroIntoEditor(mode) {
        var scope = angularIssueForms.element(document.getElementById("jinc-issue-default-value-form")).scope();
        var defaultValue = "";
        var hidden = false;
        var shrinkedAllowedValues = "";
        var makeFieldRequired = false;


        if (mode === "create") {
            var toggle = document.getElementById('field-hidden');
            hidden = toggle.checked;
            toggle = document.getElementById('make-field-required');
            makeFieldRequired = toggle.checked;

            if (scope.model.defaultValue) {
                if (scope.model.defaultValue.id) {
                    if (scope.model.childDefaultValue.id) {
                        defaultValue = scope.model.defaultValue.id + "," + scope.model.childDefaultValue.id;
                    } else {
                        defaultValue = scope.model.defaultValue.id;
                    }
                } else {
                    if ($.isArray(scope.model.defaultValue)) {
                        defaultValue = '';
                        scope.model.defaultValue.forEach(function (currentValue, index) {
                            if (currentValue.label) {
                                defaultValue = defaultValue + currentValue.label;
                            } else if (currentValue.id) {
                                defaultValue = defaultValue + currentValue.id;
                            } else {
                                defaultValue = defaultValue + currentValue
                            }
                            if ((index + 1) < scope.model.defaultValue.length) {
                                defaultValue = defaultValue + ',';
                            }
                        });
                    } else {
                        if (scope.model.childDefaultValue) {
                            defaultValue = scope.model.defaultValue + "-" + scope.model.childDefaultValue;
                        } else {
                            defaultValue = scope.model.defaultValue;
                        }
                    }
                }
                if (scope.selectedField.schema.type === "softwareEpicLink" && scope.model.defaultValue) {
                    defaultValue = scope.model.defaultValue.key + "," + encodeURIComponent(scope.model.defaultValue.name);
                }
                if (scope.selectedField.schema.type === "softwareSprint" && scope.model.defaultValue) {
                    defaultValue = scope.model.defaultValue.id + "," + encodeURIComponent(scope.model.defaultValue.name);
                }
            } else {
                defaultValue = scope.model.defaultValue;
            }
        }
        if (scope.model.shrinkedAllowedValues) {
                shrinkedAllowedValues = '';
                scope.model.shrinkedAllowedValues.forEach(function (currentValue, index) {
                    if (currentValue.label) {
                        shrinkedAllowedValues = shrinkedAllowedValues + currentValue.label;
                    } else if (currentValue.id) {
                        shrinkedAllowedValues = shrinkedAllowedValues + currentValue.id;
                    } else {
                        shrinkedAllowedValues = shrinkedAllowedValues + currentValue
                    }
                    if ((index + 1) < scope.model.shrinkedAllowedValues.length) {
                        shrinkedAllowedValues = shrinkedAllowedValues + ',';
                    }
                });
        }
        var macroRenderRequest = {
            contentId: Confluence.Editor.getContentId(),
            macro: getMacroDefinition(scope.selectedField.id, defaultValue, hidden, shrinkedAllowedValues, makeFieldRequired)
        };
        tinymce.confluence.MacroUtils.insertMacro(macroRenderRequest);
        dialog.remove();
        dialog = null;
    }

});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/templates/macro-field-label-editor-panel.soy' */
// This file was automatically generated from macro-field-label-editor-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jinc.soy.content.
 */

if (typeof jinc == 'undefined') { var jinc = {}; }
if (typeof jinc.soy == 'undefined') { jinc.soy = {}; }
if (typeof jinc.soy.content == 'undefined') { jinc.soy.content = {}; }


jinc.soy.content.macroFieldLabelPanel = function(opt_data, opt_ignored) {
  return '<div class="macro-descr">' + soy.$$escapeHtml('Choose the field whose label should be shown to the user.') + '</div><form id="jinc-issue-form" class="aui" method="post" action="#"><fieldset><div id="macro-param-div-fieldName" class="field-group macro-param-div required"><label for="macro-param-fieldName">' + soy.$$escapeHtml('Field name') + ' <span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="fieldName" class="text select2-input long-field" type="text" title="labelsString" name="fieldName" /></div><div id="macro-param-div-hidden" class="field-group macro-param-div required"><label for="make-field-required">' + soy.$$escapeHtml('Make field required') + '</span></label><aui-toggle id="make-field-required" label="' + soy.$$escapeHtml('Make field required') + '"></aui-toggle></div></fieldset></form>';
};
if (goog.DEBUG) {
  jinc.soy.content.macroFieldLabelPanel.soyTemplateName = 'jinc.soy.content.macroFieldLabelPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-field-macro-extender', location = '/js/jinc-field-label-editor.js' */
AJS.bind("init.rte", function() {
	var dialog;	
    var macroName = 'jinc-issue-field-label';
    
    
    AJS.MacroBrowser.setMacroJsOverride(macroName, {
        opener: function (macro) {
            openJincEditor(macro);
        }
    });
    
	function disableSubmitButton(disable) {
		var buttons = AJS.$('#jinc-field-label-editor-dialog .button-panel-submit-button');
		if (buttons.length >= 1) {
			buttons[0].disabled = disable;
		}
	}
	// should be something like : defaultValue=|fieldName=priorty|issueTypeId=3|projectKey=10421|projectKEyHumanReadable=Test Core
	function splitParameter(parameterString) {
		var result = {};
		parameterString.split('|').forEach(function(x){
		    var arr = x.split('=');
		    arr[1] && (result[arr[0]] = arr[1]);
		});
		return result;
	}
        
    function openJincEditor(macro) {
		var $macroDiv = AJS.$(tinymce.activeEditor.selection.getNode());
        var $parentDiv = $macroDiv[0].closest("[data-macro-name=jinc-issue-create]");
        var params;
        if ($parentDiv) {
            params = {mode: "create"};
        } else {
            $parentDiv = $macroDiv[0].closest("[data-macro-name=jinc-issue-details]");
            params = {mode: "view"};
        }
		if ($parentDiv) {
		    var parameters = splitParameter($macroDiv[0].getAttribute('data-macro-parameters') + '|' + $parentDiv.getAttribute('data-macro-parameters'));
            var urlPart = "";
            if (params.mode == "create") {
                urlPart = '/rest/aevolu/jinc/1.0/jiraissue/fieldListWithDefault/' + parameters["projectKey"] + '/' + parameters["issueTypeId"];
            } else if (params.mode == "view") {
                urlPart = '/rest/aevolu/jinc/1.0/jiraissue/fieldListForIssue/' + parameters["issueKey"];
            }
		    $.ajax({
              type: 'GET',
  		      url : AJS.contextPath() + urlPart,
              contentType: "application/x-www-form-urlencoded; charset=UTF-8",
              dataType: "json",
              success: function(res) {
                    dialog = generateDialog("jinc-field-label-editor-dialog");
                    dialog.addHeader("\u0027Issue Forms - field label\u0027 Macro");
                    dialog.addPanel("panel", "panel");
                    dialog.getCurrentPanel().html(jinc.soy.content.macroFieldLabelPanel());
                    dialog.addSubmit("Save", insertMacroIntoEditor);
                    disableSubmitButton(true);
                    dialog.addCancel("Cancel", cancelChanges);
                    if (res.length > 0) {
                        var issueField = $("#fieldName");
                        if (macro.params && macro.params.fieldName) {
                            issueField.val(macro.params.fieldName);
                            disableSubmitButton(false);
                        }
                        if (macro.params && macro.params.makeFieldRequired) {
                            var toggle = document.getElementById('make-field-required');
                            toggle.checked = (macro.params.makeFieldRequired === 'true');
                        }

                        issueField.auiSelect2({
                            data: res
                        });
                        issueField.on('change', function (selected) {
                            disableSubmitButton(false);
                        })
                        dialog.show();
                    } else {
                        var noPermssionString;
                        if (params.mode == "create") {
                            noPermssionString = "It seems that you don\u0027t have sufficient permissions to create an issue within the configured Jira Project. It may also be that you can not see the Jira Project or it has been deleted.";
                        } else if (params.mode == "view") {
                            noPermssionString = "It seems that you don\u0027t have sufficient permissions to view the issue. It may also possible it has been deleted.";
                        }
                        var selectedAjsParams = {
                            message: noPermssionString
                        }
                        dialog.getCurrentPanel().html(jinc.soy.content.macroWarnPanel(selectedAjsParams));
                        dialog.show();
                    }
            },
            error: function(errorString, exception) {
                dialog = generateDialog("jinc-field-label-editor-dialog");
                dialog.addHeader("Something went wrong");
                dialog.addPanel("panel", "panel");
                var serverResponse = JSON.parse(errorString.responseText);
        		var selectedAjsParams = {
        				errorCode: serverResponse.errorCode,
        				message: serverResponse.message
        		}	
                dialog.getCurrentPanel().html(jinc.soy.content.macroErrorPanel(selectedAjsParams));
                dialog.addCancel("j.in.c.label.editor.action.close", cancelChanges);
                dialog.show();
            }
        });
		} else  {
             dialog = generateDialog("jinc-field-label-editor-dialog");
			dialog.addHeader("The macro must be placed within a form macro");
			dialog.addPanel("panel", "panel");
			var selectedAjsParams = {
				message : "You can only add this macro within the \u0027Issue Forms - create form\u0027 or \u0027Issue Forms - view form\u0027 macro"
			}
			dialog.getCurrentPanel().html(jinc.soy.content.macroWarnPanel(selectedAjsParams));
			dialog.addCancel("j.in.c.label.editor.action.close", cancelChanges);
			dialog.show();
		}
    	
    	
        
    }
    
    function generateDialog(dialogId) {
        return new AJS.Dialog({
            width: 800,
            height: 600,
            id: dialogId,
            keypressListener: function(e) {
                if (e.keyCode === 27) {
                	cancelChanges();
                }
            }
        });
    };
    
    function getMacroDefinition(fieldName, makeFieldRequired) {
        return {
            name: macroName,
            params: {
                fieldName: fieldName,
                makeFieldRequired: makeFieldRequired
            }
        };
    };
    
    function cancelChanges() {
        dialog.hide();
        dialog.remove();
        dialog = null;
    }
    
    function insertMacroIntoEditor() {
        var makeFieldRequired = false;
        var toggle = document.getElementById('make-field-required');
        makeFieldRequired = toggle.checked;

        var macroRenderRequest = {
            contentId: Confluence.Editor.getContentId(),
            macro: getMacroDefinition($("#fieldName").val(), makeFieldRequired)
        };
        tinymce.confluence.MacroUtils.insertMacro(macroRenderRequest);
        dialog.remove();
        dialog = null;
    }
  
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-blueprint-resources', location = '/js/jinc-bp-wizard.js' */
AJS.toInit(function($) {

    'use strict';

    Confluence.Blueprint.setWizard('com.aevolu.j.in.c:jinc-blueprint-web-item',
        function(wizard) {
    	
    		var projectList;

            // === Step 1 ==========================================================================

            wizard.on('submit.jinc-blueprint-creation-wizard', function(e, state) {
                if (!validateMandatory(state, 'projectkey',
                        "Please select a project!")) {
                    return false;
                }
                if (!validateMandatory(state, 'issuetype',
                        "Please select an issue type!")) {
                    return false;
                }
                return true;
            });
            
            wizard.on('post-render.jinc-blueprint-creation-wizard', function(e, state) {
                var wizardForm = state.$container;
                var labelsField = $("#projectkey", wizardForm);
                $.ajax({
                    type: 'GET',
                    url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/projectlist',
                    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                    dataType: "json",
                    success: function(res) {
                    	projectList = res;
                        labelsField.auiSelect2({
                        	data : res
                        });
                        labelsField.on('change', function() {
                        	if (projectList != null) {
                        		var hIndex;
                    			for (hIndex = 0; hIndex < projectList.length; ++hIndex) {
                    				if (projectList[hIndex].id == this.value) {
                            			var projectKeyHumanReadableField = $("#projectKeyHumanReadable");
                            			projectKeyHumanReadableField.val(projectList[hIndex].text);
                    				}
                    			}
                    		}
                        	var issueField = $("#issuetype", wizardForm);
                            $.ajax({
                                type: 'GET',
                            	url: AJS.contextPath() + '/rest/aevolu/jinc/1.0/jiraissue/issuetypelist/' + this.value ,
                                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                                dataType: "json",
                                success: function(res) {
                                	issueField.val('');
                                	issueField.auiSelect2({
                                    	data : res
                                    });
                                },
                                error: function(errorString, exception) {
                                	issueField.focus().siblings(".error").html(errorString);
                                }
                            });
                        })
                    },
                    error: function(errorString, exception) {
                        var serverResponse = JSON.parse(errorString.responseText);
                		var selectedAjsParams = {
                				errorCode: serverResponse.errorCode,
                				message: serverResponse.message
                		}
                    	labelsField.focus().siblings(".error").html(jinc.soy.content.macroErrorPanel(selectedAjsParams));
                    }
                });
                
                
            });

            // === Private =========================================================================

            
            function validateMandatory(state, inputId, error) {

                var wizardForm = state.$container;
                var field = wizardForm.find('#' + inputId);
                var fieldValue = $.trim(field.val());

                // ... reset existing errors
                wizardForm.find('.error').html('');

                if (!fieldValue) {
                    field.focus().siblings(".error").html(error);
                    return false;
                }
                return true;
            }

        });
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.aevolu.j.in.c:jinc-blueprint-resources', location = '/templates/bp-wizard-dialog.soy' */
// This file was automatically generated from bp-wizard-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Blueprint.knb.Wizard.
 */

if (typeof Blueprint == 'undefined') { var Blueprint = {}; }
if (typeof Blueprint.knb == 'undefined') { Blueprint.knb = {}; }
if (typeof Blueprint.knb.Wizard == 'undefined') { Blueprint.knb.Wizard = {}; }


Blueprint.knb.Wizard.generalInfo = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui" id="jinc-issue-create-wizard"><fieldset><div class="field-group"><label for="projectkey">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="projectkey" class="text select2-input long-field" type="text" title="labelsString" name="projectkey"><div class="error"></div></div><div class="field-group"><label for="issuetype">' + soy.$$escapeHtml('Issue type') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input id="issuetype" class="text select2-input long-field" type="text" name="issuetype"><div class="error"></div></div><div class="field-group"><input id="projectKeyHumanReadable" class="text long-field" type="hidden" title="labelsString" name="projectKeyHumanReadable" /></div></fieldset></form>';
};
if (goog.DEBUG) {
  Blueprint.knb.Wizard.generalInfo.soyTemplateName = 'Blueprint.knb.Wizard.generalInfo';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jira-issues-view-mode-resources', location = 'jira/jira-issues-view-mode/main.js' */
require(["ajs","jquery"],function(b,d){var a="wr!confluence.extra.jira:jira-issues-view-mode-async-resource";var c=function(){var e=d(".wiki-content [data-jira-key][data-client-id]");if(e.length==0){return false}WRM.require(a,function(){require(["confluence/jim/jira/jira-issues-view-mode/lazy-loading","confluence/jim/jira/jira-issues-view-mode/fix-ui"],function(g,f){g.init(e).done(function(){f.fixBreakIconInOldConf()})})})};b.toInit(c);b.bind("ic-jim-async-supported",c)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:amd-support', location = 'amd/confluence-shim.js' */
define("confluence/jim/confluence-shim",function(){return window.Confluence});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:amd-support', location = 'amd/amd-exporter.js' */
define("confluence/jim/amd/module-exporter",[],function(){var a={};a.namespace=function(f,g,e){var h=f.split(".");var c=e||window;var d;var j=h.length-1;for(d=0;d<j;d++){var b=c[h[d]];c=(b!=null)?b:c[h[d]]={}}if(c[h[d]]){if(window.console&&window.console.warn){window.console.warn('Value of "'+f+'" was overridden')}}c[h[d]]=g||c[h[d]]||{};return c[h[d]]};a.safeRequire=function(c,b){if(define&&define.amd===undefined){var d=require(c);if(b){b(d)}}};a.exportModuleAsGlobal=function(c,d,b){a.safeRequire(c,function(e){a.namespace(d,e);if(b){b(e)}})};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-amd-global.js' */
define("applinks/lib/lodash",function(){if(!window._){throw"lodash not found"}return window._});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
define("applinks/lib/version",["applinks/lib/lodash"],function(c){function d(f,g){if(c.isUndefined(f)){return 0}else{if(typeof f!=="number"||isNaN(f)){throw new Error(g+": expected a number, was: <"+f+">")}else{return Math.floor(f)}}}function a(f,g){if(!f||!(f instanceof e)){throw new Error(g+": expected a Version object, was: <"+f+">")}return f}function b(f,g){return f>g?1:f==g?0:-1}function e(g,h,f){this.major=d(g,"major");this.minor=d(h,"minor");this.bugfix=d(f,"bugfix")}e.parse=function(g,h){h=h||"versionString";if(!g){throw new Error(h+": expected a non-empty string")}var f=g.split(".");if(f.length!==3){throw new Error(h+": expected <major>.<minor>.<bugfix> string, was: <"+g+">")}return new e(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]))};e.comparator=function(g,f){return a(g,"versionOne").compareTo(a(f,"versionTwo"))};e.prototype.compareTo=function(h){a(h,"that");var f=b(this.major,h.major);if(f!=0){return f}var g=b(this.minor,h.minor);if(g!=0){return g}return b(this.bugfix,h.bugfix)};e.prototype.greaterThan=function(f){return this.compareTo(f)>0};e.prototype.greaterThanOrEqual=function(f){return this.compareTo(f)>=0};e.prototype.lessThan=function(f){return this.compareTo(f)<0};e.prototype.lessThanOrEqual=function(f){return this.compareTo(f)<=0};e.prototype.equals=function(f){return this.compareTo(f)==0};e.prototype.toMinor=function(){return new e(this.major,this.minor)};e.prototype.toMajor=function(){return new e(this.major)};e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.bugfix};return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define("applinks/lib/aui-version-details",["applinks/lib/version"],function(g){var d=new g(5,8,15);var f=new g(5,9,13);var e=new g(5,8);var c=new g(5,9);function a(h){if(h.lessThan(d)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+d+" or "+f+" for Applinks to work")}if(h.greaterThanOrEqual(c)&&h.lessThan(f)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+f+" for Applinks to work")}}function b(h){var i=g.parse(h.version,"AUI version");a(i);h.versionDetails=i;h.versionDetails.is58=i.toMinor().equals(e);h.versionDetails.is59=i.toMinor().equals(c);return h}return{addVersionDetails:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define("applinks/lib/console",function(){return window.console});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define("applinks/lib/jquery",function(){return window.jQuery});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define("applinks/lib/aui",["applinks/lib/window","applinks/lib/aui-version-details"],function(b,c){var a=b.AJS;if(!a){throw new Error("window.AJS not defined, cannot load AUI")}return c.addVersionDetails(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
define("applinks/lib/wrm",function(){return window.WRM});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define("applinks/lib/skate",function(){return window.skate});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
define("applinks/lib/window",function(){return window});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/spi-amd.js' */
define("applinks/lib/spi",function(){return{get:function(){return AppLinks.SPI}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/applinks-creation-amd.js' */
define("applinks/lib/creation",function(){return{get:function(){return AppLinks.Creation}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/docs.js' */
define("applinks/common/docs",["applinks/lib/jquery","applinks/lib/aui","applinks/common/help-paths"],function(c,b,a){return{createDocLink:function(d,f,e){if(!e){e=""}else{e=" "+e}return c("<a/>",{"class":"ual-help-link help-link"+e,href:this.getDocHref(d,f),target:"_blank","data-help-link-key":d,text:"Help",title:"Help"})},getDocHref:function(e,f){var d=a.getFullPath(e);if(f){d+="#"+a.getPath(f)}return d}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/help-paths.js' */
define("applinks/common/help-paths",["applinks/lib/console","applinks/lib/wrm","applinks/lib/lodash","applinks/common/modules","applinks/common/preconditions"],function(b,a,g,e,d){var f=g.memoize(function(){var j=a.data.claim(e.dataFqn(e.COMMON_EXPORTED,"applinks-help-paths"));if(!j.entries){b.warn("Help paths not found, all help links are likely to be broken.")}return j.entries||{}});var i=function(j,m){d.nonEmptyString(j,"key");var l=f()[j]||j;if(m){d.nonEmptyString(m,"sectionKey");var k=l.replace(/\+/g,"");l+="#"+k+"-"+m}return l};function c(j,k){return j.indexOf(k,j.length-k.length)!==-1}function h(j,k){return c(j,k)?j:j+k}return{getPath:i,getFullPath:function(j,l){var k=this.baseUrl();return h(k,"/")+this.getPath(j,l)},baseUrl:g.partial(i,"applinks.docs.root")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/events.js' */
define("applinks/common/events",["applinks/lib/jquery","applinks/lib/lodash","applinks/lib/window","applinks/common/preconditions"],function(e,b,d,f){var c="applinks.event.";function a(g){return c+f.nonEmptyString(g,"eventId")}return{PREREADY:a("preready"),READY:a("ready"),APPLINKS_LOADED:a("loaded"),APPLINKS_UPDATED:a("updated"),NEW_APPLINK_CREATED:a("created"),ORPHANED_UPGRADE:a("orphaned.upgrade"),V3_ONBOARDING_FINISHED:a("v3-onboarding-finished"),Legacy:{MESSAGE_BOX_DISPLAYED:a("message-box-displayed")},applinksEvent:a,on:function(h,i,g){var j=g?b.bind(i,g):i;e(d.document).on(h,j)},off:function(g,h){e(d.document).off(g,h)},trigger:function(g,h){e(d.document).trigger(g,h)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/i18n.js' */
define("applinks/common/i18n",["applinks/lib/lodash","applinks/lib/jquery","applinks/lib/wrm","applinks/common/modules","applinks/common/preconditions","applinks/common/products"],function(e,g,c,f,h,b){var a=e.memoize(function(){var i=c.data.claim(f.dataFqn(f.COMMON_EXPORTED,"entity-types"));return h.hasValue(i,"entity-types","Entity Types data not found")});var d=e.memoize(function(){var i=c.data.claim(f.dataFqn(f.COMMON_EXPORTED,"authentication-types"));return h.hasValue(i,"authentication-types","Authentication Types data not found")});return{getApplicationTypeName:function(i){return b.getTypeName(i)},getEntityTypeName:function(i){return a().singular[i]||i},getPluralizedEntityTypeName:function(i){return a().plural[i]||i},getAuthenticationTypeName:function(i){return d()[i]||i}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/modules.js' */
define("applinks/common/modules",function(){return{PLUGIN_KEY:"com.atlassian.applinks.applinks-plugin",COMMON_EXPORTED:"applinks-common-exported",COMMON:"applinks-common",fqn:function(a){return this.PLUGIN_KEY+":"+a},dataFqn:function(a,b){return this.fqn(a)+"."+b}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/preconditions.js' */
define("applinks/common/preconditions",["applinks/lib/lodash"],function(c){function f(i,j,h){return d(c.isString(i)&&!c.isEmpty(i),h,b(j,": expected a non-empty string, was: <"+i+">"),i)}function g(i,j,h){return d(c.isFunction(i),h,b(j,": expected a function, was: "+i),i)}function a(i,j,h){return d(c.isArray(i),h,b(j,": expected an array, was: "+i),i)}function e(i,j,h){return d(i,h,b(j,": expected a value"),i)}function d(l,i,h,k){var j=i?i:h;if(!l){throw new Error(j)}return k||l}function b(i,h){return(i||"[unspecified]")+h}return{checkArgument:c.partial(d,c,c,"",c),nonEmptyString:f,isArray:a,isFunction:g,hasValue:e}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/products.js' */
define("applinks/common/products",["applinks/lib/lodash","applinks/lib/wrm","applinks/common/modules","applinks/common/preconditions"],function(c,b,d,f){var a=c.memoize(function(){var g=b.data.claim(d.dataFqn(d.COMMON_EXPORTED,"applinks-types"));return f.hasValue(g,"types","Application Types data not found")});function e(g){return a()[g]||g}return{BAMBOO:"bamboo",BITBUCKET:"stash",CONFLUENCE:"confluence",FECRU:"fecru",JIRA:"jira",REFAPP:"refapp",STASH:"stash",getTypeName:e}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/rest-service.js' */
(function(a,c,b){AppLinks=AJS.$.extend(window.AppLinks||{},{Event:{NAMESPACE:"applinks"},I18n:a,Docs:c});AppLinks.Event=AJS.$.extend(window.AppLinks.Event,b);if(AJS.AppLinksInitialisationBinder){AppLinks.initialisationBinder=AJS.AppLinksInitialisationBinder}else{AppLinks.initialisationBinder=function(d){AJS.toInit(d)}}AppLinks.initialisationBinder(function(){var d=AJS.$;AppLinks=d.extend(window.AppLinks||{},{failure:function(g){if(g.status==401){window.location.reload()}else{var e=AppLinks.parseError(g);var f=d(".page-error");if(f.length>0){f.html(e).fadeIn("slow")}else{alert("REST request failed: "+e)}}},jsonRequest:function(f,g,h,i,e){if(h){h=JSON.stringify(h)}d(".page-error").fadeOut("fast");if(!e){e=AppLinks.failure}return jQuery.ajax({url:f,type:g,data:h,dataType:"json",contentType:"application/json; charset=utf-8",cache:false,success:i,error:e,jsonp:false})},xmlRequest:function(f,g,h,i,e){if(h){h=JSON.stringify(h)}d(".page-error").fadeOut("fast");if(!e){e=AppLinks.failure}return jQuery.ajax({url:f,type:g,data:h,dataType:"xml",contentType:"application/xml; charset=utf-8",cache:false,success:i,error:e})},parseError:function(h){var f;try{f=JSON.parse(h.responseText)}catch(g){if(h.statusText){return f=h.statusText}else{return h}}if(f.message){if(d.isArray(f.message)){return f.message.join(" ")}return f.message}else{return h.statusText}},put:function(f,g,h,e){return AppLinks.jsonRequest(f,"PUT",g,h,e)},post:function(f,g,h,e){return AppLinks.jsonRequest(f,"POST",g,h,e)},update:function(f,g,e){AppLinks.put(AppLinks.self_link(f),f,g,e)},get:function(f,g,e){return AppLinks.jsonRequest(f,"GET",null,g,e)},getXml:function(f,g,e){return AppLinks.xmlRequest(f,"GET",null,g,e)},self_link:function(g){for(var e=0,h=g.link.length;e<h;e++){var f=g.link[e];if(f.rel=="self"){return f.href}}throw"No self-link found"},del:function(h,g,f){var e;if(typeof(h)=="string"){e=h}else{e=AppLinks.self_link(h)}return AppLinks.jsonRequest(e,"DELETE",null,g,f)},SPI:d.extend({},{API_VERSION:"1.0",REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks/",BASE_URL:AJS.contextPath()+"/rest/applinks/1.0",OAUTH_REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks-oauth/",OAUTH_BASE_URL:AJS.contextPath()+"/rest/applinks-oauth/1.0",setApiVersion:function(e){AppLinks.SPI.API_VERSION=e;AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL+AppLinks.SPI.API_VERSION)},setBaseUrl:function(e){AppLinks.SPI.BASE_URL=e},setOAuthBaseUrl:function(e){AppLinks.SPI.OAUTH_BASE_URL=e},getRemoteRestBaseUrl:function(e){return e+"/rest/applinks/"+AppLinks.SPI.API_VERSION},getRemotePluginServletBaseUrl:function(e){return e+"/plugins/servlet"},getAllLinks:function(g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink";return AppLinks.get(e,g,f)},getAllLinksWithAuthInfo:function(g,f){var e=AppLinks.SPI.BASE_URL+"/listApplicationlinks";return AppLinks.get(e,g,f)},getApplicationLinkState:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/listApplicationlinkstates/id/"+h;return AppLinks.get(e,g,f)},getLinksOfType:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/type/"+g;return AppLinks.get(e,h,f)},tryToFetchManifest:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/manifest.json?url="+encodeURIComponent(g);return AppLinks.get(e,h,f)},getManifestFor:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/manifest/"+h+".json";return AppLinks.get(e,g,f)},getLocalManifest:function(g,f){var e=AppLinks.SPI.BASE_URL+"/manifest.json";return AppLinks.get(e,g,f)},getRemoteManifest:function(g,h,f){var e=AppLinks.SPI.getRemoteRestBaseUrl(g)+"/manifest.json";return AppLinks.get(e,h,f)},getRemoteOAuthConsumerInfo:function(g,h,f){var e=AppLinks.SPI.getRemotePluginServletBaseUrl(g)+"/oauth/consumer-info";return AppLinks.getXml(e,h,f)},getApplinkStatus:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/status/"+h;return AppLinks.get(e,g,f)},createStaticUrlAppLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createStaticUrlAppLink?typeId="+h;return AppLinks.post(e,null,g,f)},createLink:function(l,j,n,f,k,m,h,o,g){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var i={applicationLink:l,username:j,password:n,createTwoWayLink:f,customRpcURL:k,rpcUrl:m,configFormValues:h};return AppLinks.post(e,i,o,g)},createLinkWithOrphanedTrust:function(l,j,o,f,k,m,h,n,p,g){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var i={applicationLink:l,username:j,password:o,createTwoWayLink:f,customRpcURL:k,rpcUrl:m,configFormValues:h,orphanedTrust:n};return AppLinks.post(e,i,p,g)},verifyTwoWayLinkDetails:function(e,k,l,h,j,g){var f=AppLinks.SPI.BASE_URL+"/applicationlinkForm/details";var i={username:l,password:h,remoteUrl:e,rpcUrl:k};return AppLinks.post(f,i,j,g)},getApplicationLinkInfo:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkInfo/id/"+g;return AppLinks.get(e,h,f)},deleteLink:function(i,e,h,g){var f=AppLinks.SPI.BASE_URL+"/applicationlink/"+i.id;if(e){f+="?reciprocate=true"}return AppLinks.del(f,h,g)},makePrimary:function(g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/primary/"+g.id;return AppLinks.post(e,null,f)},relocate:function(j,h,e,i,g){var f=AppLinks.SPI.BASE_URL+"/relocateApplicationlink/"+j.id+"?newUrl="+encodeURIComponent(h)+"&nowarning="+(e?"true":"false");return AppLinks.post(f,null,i,g)},legacyUpgrade:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/upgrade/legacy/"+h.id;return AppLinks.post(e,null,g,f)},ualUpgrade:function(i,e,h,g){var f=AppLinks.SPI.BASE_URL+"/upgrade/ual/"+i.id;return AppLinks.post(f,e,h,g)},getEntityTypesForApplicationType:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/type/entity/"+h;return AppLinks.get(e,g,f)},getLocalEntitiesWithLinksToApplication:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/localEntitiesWithLinksTo/"+e+".json";return AppLinks.get(f,h,g)},getEntityLinksForApplication:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entities/"+e+".json";AppLinks.get(f,h,g)},getEntityLinksForApplicationUsingAnonymousAccess:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entities/anonymous/"+e+".json";return AppLinks.get(f,h,g)},createNonUalEntityLink:function(n,i,f,h,l,g,m,k){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+n+"/"+i+"?reciprocate=false";var j={applicationId:f,typeId:h,key:l,name:g,isPrimary:false};return AppLinks.put(e,j,m,k)},createEntityLink:function(j,i,f,e,k,h){var g=AppLinks.SPI.BASE_URL+"/entitylink/"+j+"/"+i+"?reciprocate=";g+=(e?"true":"false");return AppLinks.put(g,f,k,h)},getConfiguredEntityLinks:function(h,g,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/primaryLinks/"+h+"/"+g+".json";return AppLinks.get(e,i,f)},deleteEntityLink:function(j,i,f,e,k,h){var g=AppLinks.SPI.BASE_URL+"/entitylink/"+j+"/"+i+"?typeId="+f.typeId+"&key="+f.key+"&applicationId="+f.applicationId+"&reciprocate="+e;return AppLinks.del(g,k,h)},makePrimaryEntityLink:function(i,h,e,j,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/primary/"+i+"/"+h+"?typeId="+e.typeId+"&key="+e.key+"&applicationId="+e.applicationId;return AppLinks.post(f,null,j,g)},canDeleteAppLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/permission/reciprocate-application-delete/"+h;return AppLinks.get(e,g,f)},canDeleteEntityLink:function(i,h,e,j,g){var f=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-delete/"+e.applicationId+"/"+i+"/"+h+"/"+e.typeId+"/"+e.key;return AppLinks.get(f,j,g)},canCreateReciprocateEntityLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-create/"+h;return AppLinks.get(e,g,f)},processPermissionCode:function(f){var e={noPermission:function(){},missing:function(){},credentialsRequired:function(g){},authenticationFailed:function(g){},noAuthentication:function(g){},noAuthenticationConfigured:function(){},noConnection:function(){},allowed:function(){},unrecognisedCode:function(g){},updateView:function(i,h,g){}};if(!f){f={}}f=d.extend(e,f);return function(h){var g=h.code;if(g=="NO_PERMISSION"){f.noPermission()}else{if(g=="MISSING"){f.missing()}else{if(g=="CREDENTIALS_REQUIRED"){f.credentialsRequired(h.url)}else{if(g=="AUTHENTICATION_FAILED"){f.authenticationFailed(h.url)}else{if(g=="NO_AUTHENTICATION"){f.noAuthentication(h.url)}else{if(g=="NO_AUTHENTICATION_CONFIGURED"){f.noAuthenticationConfigured()}else{if(g=="NO_CONNECTION"){f.noConnection()}else{if(g=="ALLOWED"){f.allowed()}else{f.unrecognisedCode(h.code)}}}}}}}}}},addAuthenticationTrigger:function(g,e,f){if(!f){f={}}if(typeof f.onSuccess=="undefined"){f.onSuccess=function(){location.reload()}}if(typeof f.onFailure=="undefined"){f.onFailure=function(){return true}}d(g).unbind("click");d(g).click(function(){if(f.before){f.before()}AppLinks.authenticateRemoteCredentials(e,f.onSuccess,f.onFailure)})},deleteOrphanedTrust:function(i,g,h,f){var e=AppLinks.SPI.BASE_URL+"/orphaned-trust/"+g+"/"+i;return AppLinks.del(e,h,f)},getOrphanedTrust:function(g,f){var e=AppLinks.SPI.BASE_URL+"/orphaned-trust/";return AppLinks.get(e,g,f)},showCreateEntityLinkSuggestion:function(){return true},getApplicationLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/"+h;return AppLinks.get(e,g,f)},createApplicationLink:function(h,f,k,l,e,m,i){var g=AppLinks.SPI.BASE_URL+"/applicationlink";var j={id:h,name:f,rpcUrl:k,displayUrl:l,typeId:e};return AppLinks.put(g,j,m,i)},createConsumer:function(g,p,f,o,k,n,i,r,j,m,q,h){var e=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+g+"/authentication/consumer";var l={key:p,name:f,description:o,sharedSecret:k,publicKey:n,outgoing:m,twoLOAllowed:i,executingTwoLOUser:r,twoLOImpersonationAllowed:j};return AppLinks.put(e,l,q,h)},createConsumerAutoConfigure:function(l,k,h,e,j,g){var f=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+l+"/authentication/consumer?autoConfigure=true";var i={twoLOAllowed:k,executingTwoLOUser:h,twoLOImpersonationAllowed:e};return AppLinks.put(f,i,j,g)},registerProvider:function(k,j,g,i,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/"+k+"/authentication/provider";var h={config:g,provider:j};return AppLinks.put(e,h,i,f)},enableFeature:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/features/"+g;return AppLinks.put(e,{},h,f)},disableFeature:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/features/"+g;return AppLinks.del(e,h,f)}},(window.AppLinks&&window.AppLinks.SPI)||{})});AppLinks.UI={showInfoBox:function(e){d(".aui-message.success").remove();AppLinks.UI.createMessage("success",e,"page-info")},hideInfoBox:function(){d(".aui-message.success").remove()},showErrorBox:function(e){AppLinks.UI.createMessage("error",e,"page-error")},hideErrorBox:function(){d(".aui-message.error").remove()},showWarningBox:function(f){if(d.isArray(f)&&f.length>0){var e=d("<ul></ul>");d(f).each(function(h){e.append(d("<li/>",{text:f[h]}))});var g=d('<div class="page-warning"></div>').append(e);AppLinks.UI.createMessage("warning",g.html(),"page-warning")}else{AppLinks.UI.createMessage("warning",f,"page-warning")}},hideWarningBox:function(){d(".aui-message.warning").remove()},shortenString:function(f,e){if(f.length>e){f=f.substring(0,e)+"..."}return f},createMessage:function(f,g,e){var h=d('<div class="'+e+'">');h.html(g);AJS.messages[f](".applinks-message-bar",{title:"",body:h.wrap("<div></div>").parent().html(),closeable:true});d(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED)},displayValidationErrorMessages:function(e,g,f){if(d.isArray(f)){d(f).each(function(k,j){var l=d('<div class="error applinks-error">');l.text(j);d(g).find("."+e).append(l)})}else{if(typeof f!="undefined"){var h=d('<div class="error applinks-error">');h.text(f.toString());d(g).find("."+e).append(h)}}},displayValidationError:function(e,f,g){return function(l){if(l.status==401){window.location.reload();return}d(".applinks-error").remove();d(".loading").remove();var j=l.responseText;var k=d.parseJSON(j);var i=k.message;if(typeof k.fields=="undefined"){AppLinks.UI.displayValidationErrorMessages(e,f,i)}else{var h=k.fields;d(h).each(function(m){var n=d('<div class="error applinks-error" id="'+h[m]+'-error">');n.text(i[m]);if(d(f).find("."+h[m]).length>0){n.insertAfter(d(f).find("."+h[m]))}else{n.insertAfter(d(f).find("."+e).append(n))}})}d(f).find("."+e).addClass("fully-populated-errors");if(g){g()}}},addProtocolToURL:function(e){var h=d.trim(e);var g=h.toLowerCase();var f=false;if(g.length>=7){if(g.substring(0,7).indexOf("http")!=-1){f=true}}if(!f){h="http://"+h}return h},prettyJoin:function(f,i,h){if(!h){h="and"}var e=f.length;var g="";d.each(f,function(j,k){if(j==(e-1)&&e>1){g+=" "+h+"  "+i(k)}else{g+=i(k);if(j+2<e){g+=", "}}});return g},showLoadingIcon:function(e){d('<span class="loading">&nbsp;</span>').insertAfter(e)},hideLoadingIcon:function(e){d(e).next(".loading").remove()},findUrl:function(h){var g=undefined;var i=h.toLowerCase();var f=i.indexOf("http:");if(f==-1){f=i.indexOf("https:")}if(f>-1){var e=i.indexOf(" ",f);if(e==-1){e=i.length}g=h.substring(f,e)}return g},findApplicationType:function(e){e=e.toLowerCase();if(e.indexOf("jira")!=-1){return"jira"}else{if(e.indexOf("fisheye")!=-1){return"fecru"}else{if(e.indexOf("confluence")!=-1){return"confluence"}else{if(e.indexOf("refapp")!=-1){return"refapp"}else{return undefined}}}}},escapeSelector:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},sanitiseHTML:function(e){var f={"<":"&lt;",'"':"&quot;","&":"&amp;"};return e.replace(/[<"&]/g,function(g){return f[g]})},refreshOrphanedTrust:function(){var e=function(f){d("tr.orphaned-trust-row").each(function(){var l=d(this);var m=l.attr("data-id");var j=l.attr("data-type");var h=false;for(var g=0;g<f.orphanedTrust.length;g++){var k=f.orphanedTrust[g];if(m==k.id&&j==k.type){h=true;break}}if(!h){l.remove();if(f.orphanedTrust.length==0){d(".orphaned-trust-warning").hide()}}})};AppLinks.SPI.getOrphanedTrust(e)},removeCssClass:function(e,f){d(e).removeClass(function(h,j){var i=j.split(" ");var g="";d.each(i,function(k,l){if(l.indexOf(f)!=-1){g=l}});return g})}};(function(){var e=d({});d.each(["bind","unbind","trigger"],function(f,g){AppLinks.UI[g]=function(){return e[g].apply(e,arguments)}})})();d(document).trigger(AppLinks.Event.PREREADY);d(document).trigger(AppLinks.Event.READY)})})(require("applinks/common/i18n"),require("applinks/common/docs"),require("applinks/common/events"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/autocomplete.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.autoComplete={cacheManager:function(c){var a={},b=[],c=c||30;return{get:function(d){return a[d]},put:function(d,e){a[d]=e;b.push(d);if(b.length>c){delete a[b.shift()]}},clear:function(){a={};b=[]}}}};(function(d){var c=function(f){AJS.log("InputDrivenDropDown: truncating text");var h=f.$.closest(".aui-dropdown").width(),g=20;d("a span:not(.icon)",f.$).each(function(){var j=d(this),i=AJS("var","&#8230;"),l=i.width(),k=false;j.wrapInner(d("<em>"));d("em",j).each(function(){var m=d(this);m.show();if(this.offsetLeft+this.offsetWidth>h){var t=this.childNodes,s=false;for(var o=t.length-1;o>=0;o--){var p=t[o],n=1,r=(p.nodeType==3)?"nodeValue":"innerHTML",q=p[r];do{if(n<=q.length){p[r]=q.substr(0,q.length-n++)}else{break}}while(this.offsetLeft+this.offsetWidth+l>h-g);if(n<=q.length){s=true;break}}if(s){k=true}else{m.hide()}}});if(k){j.append(i);this.elpss=i}})};var b=function(f,l){if(!l.length||!l[0]){return}AJS.log("InputDrivenDropDown: highlighting tokens");for(var h=0,j=l.length;h<j;h++){var g=l[h];l[h]=g?g.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g,"\\$"):""}var k=new RegExp("("+l.join("|")+")","gi");d("li a:not(.dropdown-prevent-highlight) span",f.$).each(function(){var m=d(this),i=m.html().replace(k,"<strong>$1</strong>");m.html(i)})};var e=function(j,g){var i=j.options,h=j.dd;if(h){h.hide();h.$.remove()}i.ajsDropDownOptions=i.ajsDropDownOptions||{};if(i.ajsDropDownOptions&&!i.ajsDropDownOptions.alignment){i.ajsDropDownOptions.alignment="left"}i.ajsDropDownOptions.selectionHandler=i.ajsDropDownOptions.selectionHandler||function(l,k){if(l.type!="click"){l.preventDefault();d("a",k).click();document.location=d("a",k).attr("href")}};i.ajsDropDownOptions.displayHandler=function(k){return AJS.escapeHtml(k.name)};var f=j.dd=new AJS.dropDown(g.matrix,i.ajsDropDownOptions)[0];if(i.ajsDropDownOptions&&i.ajsDropDownOptions.className){f.$.addClass(i.ajsDropDownOptions.className)}if(i.dropdownPlacement){i.dropdownPlacement(f.$)}else{AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");d("body").append(f.$)}b(f,g.queryTokens||[g.query]);c(f);if(i.dropdownPostprocess){i.dropdownPostprocess(f.$)}f.show(j._effect);if(typeof i.onShow=="function"){i.onShow.call(f,f.$)}return f};function a(g,f){this._effect="appear";this._timer=null;this.id=g;this.options=f;this.inactive=false;this.busy=false;this.cacheManager=AppLinks.autoComplete.cacheManager()}a.prototype.clearCache=function(){this.cacheManager.clear()};a.prototype.change=function(h,g){var f=this;if(h!=f._value||g){f._value=h;f.busy=false;clearTimeout(f._timer);if(g||(/\S{0,}/).test(h)){var i=f.cacheManager.get(h);if(i){e(f,i)}else{f.busy=true;f._timer=setTimeout(function(){f.options.getDataAndRunCallback.call(f,h,f.show)},200)}}else{f.dd&&f.dd.hide()}}};a.prototype.dropDownLength=function(){return this.dd.links?this.dd.links.length:0};a.prototype.dropDownItem=function(f){return this.dropDownLength()>f?this.dd.links[f]:null};a.prototype.hide=function(){this.dd&&this.dd.hide()};a.prototype.remove=function(){var f=this.dd;if(f){this.hide();f.$.remove()}this.inactive=true;this.options.onDeath&&this.options.onDeath()};a.prototype.show=function(g,i,h){if(this.inactive){AJS.log("Quick search abandoned before server response received, ignoring. "+this);return}var f={matrix:g,query:i,queryTokens:h};this.cacheManager.put(i,f);e(this,f);this.busy=false};AppLinks.inputDrivenDropdown=function(f){return new a("inputdriven-dropdown",f)}})(jQuery)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/fecru-compatibility.js' */
if(jQuery!=undefined&&AJS!=undefined){jQuery=AJS.$};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-callback.js' */
define("applinks/feature/oauth-callback",["applinks/lib/window","applinks/lib/lodash","applinks/common/preconditions"],function(c,a,d){function b(e){d.nonEmptyString(e,"url");this._url=e}b.prototype.source=function(e){d.hasValue(e,"source");this._source=e;return this};b.prototype.onSuccess=function(e){d.isFunction(e,"onSuccess");this._onSuccess=e;return this};b.prototype.onFailure=function(e){d.isFunction(e,"onFailure");this._onFailure=e;return this};b.prototype.success=function(){this.oauthWindow.close();if(this._onSuccess){this._onSuccess(this._source)}delete c.oauthCallback};b.prototype.failure=function(){this.oauthWindow.close();if(this._onFailure){this._onFailure(this._source)}delete c.oauthCallback};b.prototype.open=function(){c.oauthCallback=this;this.oauthWindow=c.open(this._url,"com_atlassian_applinks_authentication")};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-dance.js' */
define("applinks/feature/oauth-dance",["applinks/lib/console","applinks/lib/jquery","applinks/lib/lodash","applinks/lib/window","applinks/common/events","applinks/common/preconditions","applinks/feature/oauth-callback"],function(a,f,c,e,b,h,d){function g(j,i){this._scope=j||e.document;this._selector=i}g.prototype.onSuccess=function(i){h.isFunction(i,"onSuccess");this._onSuccess=i;return this};g.prototype.onFailure=function(i){h.isFunction(i,"onFailure");this._onFailure=i;return this};g.prototype.defaultSuccess=function(){return this.onSuccess(function(){e.location.reload()})};g.prototype.defaultFailure=function(){return this.onFailure(function(){return true})};g.prototype.initialize=function(){var i=this;if(this._selector){f(this._scope).on("click",this._selector,function(j){j.preventDefault();i._open(f(this))})}else{f(this._scope).on("click",function(j){j.preventDefault();i._open(f(this))})}};g.prototype.start=function(){var j=f(this._scope);var i=this._selector?j.find(this._selector):j;this._open(i)};g.prototype._open=function(i){if(i.length!==1){a.warn("Could not trigger OAuth dance, the source is not a single HTML element: "+i);return}var j=i.attr("data-authorisation-uri");if(j){this._onSuccess||this.defaultSuccess();this._onFailure||this.defaultFailure();new d(j).source(i).onSuccess(this._onSuccess).onFailure(this._onFailure).open()}else{a.warn("Could not trigger OAuth dance, data-authorisation-uri missing for: "+i)}};return g});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-oauth-ui', location = 'js/oauth-dialog.js' */
(function(c,a,b){AppLinks.authenticateRemoteCredentials=function(d,f,e){c(".applinks-error").remove();new b(d).onSuccess(f).onFailure(e).open()}})(require("applinks/lib/jquery"),require("applinks/common/events"),require("applinks/feature/oauth-callback"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:common', location = 'util/retry-caller.js' */
define("confluence/jim/util/retry-caller",["ajs","jquery","underscore"],function(b,d,c){var a=function(g,p){p=p||{};var h=p.args;var j=(typeof p.tester==="function")?p.tester:function(){return true};var i=p.delays||[0.1,0.3,0.5,0.7,1];var l=i.length;var e=p.name||"";var k=d.Deferred(),o=k.promise();var f=p.context||k;var n=0;var m=function(){if(n===l){return k.rejectWith(f,[f,"exceed-maximum-called-times",""])}var r=i[n++];var q=function(){d.when(g.apply(f,h)).then(function(){k.notify.apply(f,arguments);if(j.apply(f,arguments)){m()}else{k.resolveWith(f,arguments)}},function(){k.rejectWith(f,arguments)})};c.delay(q,r)};m();return o};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:common', location = 'util/common.js' */
AJS.JiraIssues={Remote:{}};var appLinksI18n={entries:{}};jQuery(document).ready(function(){AJS.JiraIssues=jQuery.extend(AJS.JiraIssues||{},{bindOAuthLink:function(c,f){var e={onSuccess:function(){f()},onFailure:function(){}};var d=c.attr("href");c.click(function(g){AppLinks.authenticateRemoteCredentials(d,e.onSuccess,e.onFailure);g.preventDefault()})},getOAuthRealm:function(f){var d=f.getResponseHeader("WWW-Authenticate")||"";var c=/OAuth realm\=\"([^\"]+)\"/;var e=c.exec(d);if(e){return e[1]}else{return null}}});jQuery("a.static-oauth-init").each(function(){AJS.JiraIssues.bindOAuthLink(jQuery(this),function(){window.location.reload()})});jQuery("a.anonymous-init").each(function(f,e){var c=encodeURIComponent(window.location.pathname.replace(Confluence.getContextPath(),""));var d=Confluence.getContextPath()+"/login.action?os_destination="+c;AJS.$(e).attr("href",d)});var a=function(j){var e=AJS.JiraIssues.Remote[j];var h="";for(var g=0;g<e.length;g++){h=h+(e[g].key+(g<e.length-1?",":""))}var d=function(l){var i="issuekey in ("+l+")";var m="/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery="+encodeURIComponent(i)+"&returnMax=true";var k=contextPath+"/plugins/servlet/issue-retriever?appId="+j+"&url="+encodeURIComponent(m)+"&columns=summary&columns=type&columns=resolution&columns=status";return k};var f=function(k){var i=AJS.$("item",k);i.each(function(){var u=AJS.$("link",this).text();var v=AJS.$("key",this).text();var r=AJS.$("summary",this).text();var s=AJS.$("type",this);var m=AJS.$("resolution",this);var w=m.attr("id")!="-1";var o=AJS.$("status",this);var n=AJS.$(".unknown-jira-issue."+v);for(var p=0;p<n.length;p++){var t=AJS.$("<a style=\"background-image: url('"+s.attr("iconUrl")+'\')" href="'+u+'"></a>');t.text(v);var l=AJS.$('<span class="jira-status"></span>');l.text(o.text().toUpperCase());var q=AJS.$('<span class="jira-issue'+(w?" resolved":"")+'" ></span>');q.append(t);q.append(document.createTextNode(" - "+r+" - "));q.append(l);AJS.$(n[p]).replaceWith(q)}})};var c=d(h);AJS.$.ajax({url:c,success:f,error:function(l){if(l.status==401){var k=AJS.JiraIssues.getOAuthRealm(l);if(k){var i={};AJS.$(e).each(function(){if(!i[this.key]){i[this.key]=true;var m=AJS.$('<span class="oauth-msg"> - <a class="oauth-init" href="'+k+'">'+"Authenticate"+"</a> "+"to see issue details"+"</span>");AJS.$(".unknown-jira-issue."+this.key).addClass("single-issue-oauth").append(m)}});AJS.JiraIssues.bindOAuthLink(AJS.$(".single-issue-oauth a.oauth-init"),function(){window.location.reload()})}}else{if(l.status==400&&e.length>1){AJS.$(e).each(function(){var m=this.key;var n=d(m);AJS.$.ajax({url:n,success:f,error:function(p){var o=AJS.$(".unknown-jira-issue."+m);o.removeClass("single-issue-oauth");AJS.$(".oauth-msg",o).remove();o.addClass("jira-error")}})})}}}})};AJS.$(".unknown-jira-issue").each(function(e,f){var d=AJS.$(f);var g=d.attr("data-app-link");var c=d.attr("data-key");AJS.JiraIssues.Remote[g]=AJS.JiraIssues.Remote[g]||[];AJS.JiraIssues.Remote[g].push({key:c})});for(var b in AJS.JiraIssues.Remote){a(b)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:web-resources', location = 'templates/extra/jira/jiraIssues.js' */
jQuery(document).ready(function(){var a=jQuery.extend(window.JiraIssues||{},{ADG_ENABLED:AJS.Meta.getNumber("build-number")>=4000,ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO:14/11,fixMenusShowingUnderWidgetInIE:function(){if(jQuery.browser.msie){jQuery("ul.ajs-menu-bar li.ajs-menu-item").each(function(){jQuery(this).hover(function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().each(function(){var c=jQuery(this);var b=c.css("position");if(b&&b!="auto"){c.addClass("ajs-menu-bar-z-index-fix-for-ie")}})},function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().removeClass("ajs-menu-bar-z-index-fix-for-ie")})})}},onSuccessFunction:function(d){if(!jQuery("fieldset input[name='height']",d).length){var b=jQuery(".bDiv table[id^='jiraissues_table']",d)[0];var e=b.grid;var c=b.clientHeight+jQuery(".hDiv",d)[0].clientHeight;jQuery(".bDiv",d).css("height",c+"px");e.options.height=c;e.fixHeight(c)}},onErrorFunction:function(h,c,b,n,f){var o=jQuery("#"+c);var g=b+": ";if(n.status=="200"){g+=f}else{g+=n.responseText}var i=n.getResponseHeader("WWW-Authenticate")||"";if(n.status=="401"&&i.indexOf("OAuth")!=-1){var m=/OAuth realm\=\"([^\"]+)\"/;var e=m.exec(i);if(e){o.empty();a.bigMessageFunction(c,'<a class="oauth-init" href="'+e[1]+'">'+"Authenticate"+"</a> "+"to retrieve your issues"+"</span>");jQuery(".bmDiv",h).css({"z-index":2});var j={onSuccess:function(){window.location.reload()},onFailure:function(){}};var l=jQuery(".oauth-init",o.parent());var d=l.attr("href");l.click(function(p){AppLinks.authenticateRemoteCredentials(d,j.onSuccess,j.onFailure);p.preventDefault()});AJS.$(".gBlock").remove()}}else{if(n.status=="400"){a.bigMessageFunction(c,"The Jira server was not able to process the search. This may indicate a problem with the syntax of this macro. Alternatively, if this table is requesting specific issue keys, you may not have permission to view one of these issues.")}else{var k=jQuery("iframe.jiraissues_errorMsgSandbox",h);k.load(function(){var r=this.contentWindow||this.contentDocument;var q=jQuery((r.document?r.document:r).body);jQuery("a",q).each(function(){this.target="_top"});jQuery(".pPageStat",h).empty().text(q.text());var p=jQuery("div.bmDiv",h)[0];k.removeClass("hidden");k.css({height:p.clientHeight+"px",width:p.clientWidth+"px"})});k[0].src=jQuery("fieldset input[name='retrieverUrlHtml']",h).val();a.bigMessageFunction(c,k)}}jQuery(h).find(".pReload").removeClass("loading");o[0].grid.loading=false;jQuery(h).find(".pButton").each(function(){jQuery(this).removeClass("pBtnOver");jQuery(this).css({cursor:"default",opacity:"0.3"})});jQuery(h).find("span.pcontrol input").attr("readonly","true")},onReloadFunction:function(b,d,c){jQuery(".bmDiv",d).remove();jQuery(".bmDistance",d).remove();c.onSubmit=function(){a.reloadOnSubmitFunction(b,c);return true}},reloadOnSubmitFunction:function(b,c){c.params=[{name:"useCache",value:false}];c.onSubmit=function(){a.onSubmitFunction(b,c);return true}},onSubmitFunction:function(b,c){c.params=[{name:"useCache",value:b}]},showTrustWarningsFunction:function(d,c){var b=jQuery(d).children(".trusted_warnings");if(c.trustedMessage){b.find("td:last").html(c.trustedMessage);b.css("display","block")}else{b.css("display","none")}},preProcessFunction:function(e,b,d,c,f){if(d){a.showTrustWarningsFunction(e,c)}if(c.total==0){jQuery(".pPageStat",e).html(f);a.bigMessageFunction(b,f);jQuery(".pReload",e).removeClass("loading");return}},bigMessageFunction:function(e,f){var d=jQuery("<div></div>");var b=jQuery("<div></div>");d.addClass("bmDistance");b.addClass("bmDiv");if(typeof f=="string"){b.html("<p><strong>"+f+"</strong></p>")}else{f.appendTo(b)}var c=jQuery("#"+e);c.after(b).after(d)},getParamsFrom:function(c){var b={};c.children("input").each(function(){b[jQuery(this).attr("name")]=jQuery(this).attr("value")});return b},initializeColumnWidth:function(f,p){var d={},m=function(i){return a.ADG_ENABLED?Math.round(i*a.ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO):i};if(!(p&&p.length)){return d}var h=37,n=11,k=f.width()-(h+(p.length*n)),j=false,q=false,o=0,c=m(140);for(var l=0,e=p.length;l<e;l++){var g=p[l].name;switch(g){case"summary":j=true;o++;break;case"description":q=true;o++;break;case"type":o++;d[g]=30;k-=30;break;case"priority":o++;d[g]=50;k-=50;break;case"status":o++;d[g]=m(100);k-=m(100);break;case"key":o++;d[g]=m(90);k-=m(90);break;case"comments":case"attachments":case"version":case"component":case"resolution":o++;d[g]=m(80);k-=m(80);break;default:d[g]=c}}if(j||q){k-=(c*(p.length-o));var b=250;if(j&&q){d.summary=Math.max(k/2,b);d.description=Math.max(k/2,b)}else{if(j){d.summary=Math.max(k,b)}else{d.description=Math.max(k,b)}}}else{if(!j&&!q&&(p.length>o)){c=k/(p.length-o);for(l=0;l<e;l++){if(!{resolution:true,key:true,type:true,priority:true,status:true}[p[l]]){d[p[l]]=c}}}}return d}});a.fixMenusShowingUnderWidgetInIE();jQuery(".jiraissues_table").each(function(f,j){var k=jQuery(j),h=k.children("fieldset"),e=a.getParamsFrom(h),c="jiraissues_table_"+f;k.append('<table id="'+c+'" style="display:none"></table>');k.css("width",e.width);var d=[];h.children(".columns").each(function(l){var m=jQuery(this).hasClass("nowrap");d[l]={display:this.name,name:this.value,nowrap:m,sortable:true,align:"left"}});var b=a.initializeColumnWidth(k,d);jQuery.each(d,function(l,m){m.width=b[m.name]});var g=jQuery("<div></div>");jQuery("<a></a>").attr({rel:"nofollow",href:e.clickableUrl}).text(e.title).appendTo(g);jQuery("#"+c).flexigrid({url:e.retrieverUrlHtml,method:"GET",dataType:"json",colModel:d,sortname:e.sortField,sortorder:e.sortOrder,usepager:true,title:g.html(),page:parseInt(e.requestedPage,10),useRp:false,rp:parseInt(e.resultsPerPage,10),showTableToggleBtn:true,height:(function(){return e.height?parseInt(e.height,10):480})(),onSuccess:function(){a.onSuccessFunction(j)},onSubmit:function(){a.onSubmitFunction(e.useCache,this);return true},preProcess:function(i){a.preProcessFunction(j,c,e.showTrustWarnings,i,e.nomsg);return i},onError:function(m,l,i){a.onErrorFunction(j,c,e.jiraissuesError,m,l,i)},onReload:function(){a.onReloadFunction(e.useCache,j,this);return true},errormsg:e.errormsg,pagestat:e.pagestat,procmsg:e.procmsg,nomsg:e.nomsg})});jQuery(".jiraissues_count").each(function(b,d){var c=jQuery(d);jQuery.ajax({cache:false,type:"GET",url:c.find(".url").text(),data:{useCache:c.find(".use-cache").text(),rp:c.find(".rp").text(),showCount:"true"},success:function(f){var e=c.find(".result");if(f==1){e.text(AJS.format("{0} issue",f))}else{e.text(AJS.format("{0} issues",f))}e.removeClass("hidden");jQuery(".calculating, .error, .data",c).remove()},error:function(h){var f=jQuery(".error",c).removeClass("hidden"),g=h.getResponseHeader("WWW-Authenticate")||"",j=false;if(h.status===401&&g.indexOf("OAuth")!=-1){var e=/OAuth realm\=\"([^\"]+)\"/,i=e.exec(g);if(i){f.empty().append(AJS.$("<a/>",{href:i[1],"class":"oauth-init"}).text("Authenticate").click(function(){AppLinks.authenticateRemoteCredentials(i[1],function(){window.location.reload()},function(){});return false})).append(AJS.$("<span/>",{text:" "+"to retrieve your issues"}));j=true}}if(!j){f.text(AJS.format(f.text(),h.status))}jQuery(".calculating, .result, .data",c).remove()}})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.synchrony-interop:synchrony-status-banner-loader', location = '/js/synchrony-down-banner-loader.js' */
require(["ajs","wrm"],function(b,a){b.toInit(function(){!0===a.data.claim("com.atlassian.confluence.plugins.synchrony-interop:synchrony-status-banner-loader.synchrony-status")&&a.require("wrc!synchrony-interop-down-banner")})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:quicknav', location = 'js/quicknav/util.js' */
var RYQ=RYQ||{};(function(){RYQ.util={analytics:{trackQuickNavOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-open"})},trackQuickNavPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-page"})},trackQuickNavRecentlyDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-more-recent"})}}}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:quicknav', location = 'js/quicknav/quicknav.js' */
var RYQ=RYQ||{};RYQ.QuickNavEntry=Backbone.Model.extend({classNameByType:{blogpost:"content-type-blogpost",page:"content-type-page"},parse:function(a){return{className:this.classNameByType[a.type],name:a.title,href:AJS.contextPath()+a.url,id:a.id,spaceName:a.space,lastSeen:a.lastSeen}}},{escape:function(b){var a=_.map(b,_.clone);_.each(a,function(c){c.name=_.escape(c.name);c.spaceName=_.escape(c.spaceName)});return a}});RYQ.QuickNavEntryCollection=Backbone.Collection.extend({model:RYQ.QuickNavEntry,url:AJS.contextPath()+"/rest/recentlyviewed/1.0/recent?limit=8",search:function(b){var a;if(AJS.$.trim(b).length===0){a=this.models}else{var c=b.match(/[^\s-]+/g);a=this.filter(function(e){var f=e.get("name");var d=f.toLowerCase();return _.all(c,function(g){return d.indexOf(g.toLowerCase())!==-1})})}this.trigger("filter",a);return a},comparator:function(a){return -(a.get("lastSeen"))}});(function(a){if(AJS.DarkFeatures.isEnabled("next.ui.search")){return}RYQ.QuickNav=Backbone.View.extend({initialize:function(){this.moreLink={className:"recently-viewed",href:"#",name:"More recently viewed pages..."};this.$input=a("#quick-search-query");this.makeDropdown();this.addShowHideHandlers();this.getHistory=_.once(this._getHistory);_.bindAll(this,"makeDropdown","addSearchResultBoostingHandler","_getHistory","render","addShowHideHandlers","_getItemsToShow","showQuickResults","onQuickSearch")},makeDropdown:function(){var c=function(d){a("a",d).each(function(){var h=a(this);var e=h.find("span");var g=e.data("properties");var f=g?g.spaceName:null;if(f&&!h.is(".content-type-spacedesc")){h.after(h.clone().attr("class","space-name").html(f));h.parent().addClass("with-space-name")}})};var b=this;this.$dropdown=AJS.inputDrivenDropdown({dropdownPlacement:function(d){b.$input.closest("form").find(".quick-nav-drop-down").append(d)},dropdownPostprocess:function(d){c(d)},ajsDropDownOptions:{className:"recently-viewed-dropdown"}})},addSearchResultBoostingHandler:function(){var b=this;a(window).on("quicksearch.ajax-success",function(g,f){var d=f.url.match("/json/contentnamesearch.action");var c=f.url.match(/rest\/quicknav\/\d\/search/);if(d||c){b.onQuickSearch(g,f)}})},_getHistory:function(){return this.collection.fetch().done(this.addSearchResultBoostingHandler)},render:function(){if(!AJS.Meta.get("remote-user")){return}var b=this.getHistory();b.done(_.bind(function(){if(AJS.dropDown.current==null&&this.collection.length!==0&&this.$input.val().length===0){this.showQuickResults()}},this));var c=this.$input;c.trigger("quick-search-loading-start");b.always(function(){c.trigger("quick-search-loading-stop")})},addShowHideHandlers:function(){var b=this;this.$input.on("focus",function(){b.render()}).on("click",function(c){c.stopPropagation();b.render()}).on("keyup",function(f){var c=f.which===27;var g=f.which===13;var d=a(this).val().length!==0;if(d||c){if(b.$dropdown.dd&&b.$dropdown.dd.$.is(":visible")){b.$dropdown.hide()}}else{if(!g){b.render()}}})},_getItemsToShow:function(){var c=this.collection.toJSON();var b=c.length>0&&c[0].id==AJS.Meta.get("page-id");if(b){c.shift()}return c},showQuickResults:function(){var b=RYQ.QuickNavEntry.escape(this._getItemsToShow());this.$dropdown.show([b,[this.moreLink]],"","");a(".recently-viewed-dropdown").on("click",".recently-viewed",function(c){c.preventDefault();a("#view-user-history-link").click();RYQ.util.analytics.trackQuickNavRecentlyDialogOpen()});a(".recently-viewed-dropdown").on("click",".with-space-name",function(c){RYQ.util.analytics.trackQuickNavPageOpen()});RYQ.util.analytics.trackQuickNavOpen()},onQuickSearch:function(l,f){var o=f.json.query;var c=_.map(this.collection.search(o),function(e){return e.attributes});c=RYQ.QuickNavEntry.escape(c);if(c.length==0){return}var m=f.json.contentNameMatches;var p=-1;for(var g=0;g<m.length;g++){var n=m[g][0].className;if(n=="content-type-blogpost"||n=="content-type-page"){p=g;break}}if(p!=-1){var h=m[p];var b=Math.min(h.length>4?2:6-h.length,c.length);h.unshift.apply(h,_(c).first(b));m[p]=_.uniq(h,function(e){return +e.id});if(h.length>6){var k=6-b;for(var d=k;d>0;d--){h.pop()}}}else{m.unshift(_(c).first(6))}}})}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'templates/recently.soy' */
// This file was automatically generated from recently.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RY.Templates.
 */

if (typeof RY == 'undefined') { var RY = {}; }
if (typeof RY.Templates == 'undefined') { RY.Templates = {}; }


RY.Templates.body = function(opt_data, opt_ignored) {
  return '<div id="recently-viewed" class="aui-group"><div class="aui-item"><div class="top"><div class="filter"><form class="aui"><input class="filter-input text" type="text" placeholder="' + soy.$$escapeHtmlAttribute('Filter') + '"></form></div></div><div class="pages"></div></div></div>';
};
if (goog.DEBUG) {
  RY.Templates.body.soyTemplateName = 'RY.Templates.body';
}


RY.Templates.pageCollection = function(opt_data, opt_ignored) {
  return '<div class="groups"></div><div class="empty"></div>';
};
if (goog.DEBUG) {
  RY.Templates.pageCollection.soyTemplateName = 'RY.Templates.pageCollection';
}


RY.Templates.pageGroup = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.title) + '</h3><ul/>';
};
if (goog.DEBUG) {
  RY.Templates.pageGroup.soyTemplateName = 'RY.Templates.pageGroup';
}


RY.Templates.pageItem = function(opt_data, opt_ignored) {
  return '<a href=' + soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)) + '><div class="page-icon"><span class="aui-icon content-type-' + soy.$$escapeHtmlAttribute(opt_data.type) + '">' + soy.$$escapeHtml(opt_data.type) + '</span></div><div class="page-title"><span class="ellipsis" href=' + soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)) + '>' + soy.$$escapeHtml(opt_data.title) + ' - ' + soy.$$escapeHtml(opt_data.space) + '</span></div></a>';
};
if (goog.DEBUG) {
  RY.Templates.pageItem.soyTemplateName = 'RY.Templates.pageItem';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/util.js' */
var RY=RY||{};(function(){var b=new Date();var c=new Date(b).getTime();var a=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime();var d=new Date(b.getFullYear(),b.getMonth(),b.getDate()-1).getTime();RY.util=RY.Util={analytics:{trackDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-dialog-open"})},trackPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-page-open"})}},quote:function(e){return(e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},diffInDays:function(g,f){var e=1000*60*60*24;return Math.floor((g-f)/e)},daysSince:function(e){if(e>=a){return 0}else{if(e>=d){return 1}else{return RY.util.diffInDays(c,e)}}},wait:function(h,j,f){var i,k,e;var g=function(){k=setTimeout(function(){h.apply(f,e)},j)};return function(){e=arguments;var l=new Date();if(i&&l-i<j){clearTimeout(k)}g();i=l}}}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-storage.js' */
var RY=RY||{};RY.RecentPageStorage=function(h){var f="com.atlassian.confluence.plugins.recently.viewed.pages.v1";var d=100;var c={};var b=function(){var i=function(k,l){if(k==="lastSeen"&&_.isString(l)){if(AJS.$.browser.msie){l=l.replace(/\-/g,"/");l=l.replace(/T.*$/,"")}return new Date(l).getTime()}else{return l}};try{c=JSON.parse(h.getItem(f),i)||{}}catch(j){c={}}return c};var g=function(){var i=_.values(c);var k=i.length-d;if(k>0){var j=_.sortBy(i,function(l){return l.lastSeen});_.times(k,function(){var l=j.shift();delete c[l.id]})}};var e=function(){g();try{h.setItem(f,JSON.stringify(c))}catch(i){}};this.addCurrentPage=function(i){if(!(i.id&&i.title)){return}b();a(i);e()};var a=function(i){var j=c[i.id];if(!j){c[i.id]=j={}}j=_.extend(j,i);j.lastSeen=new Date().getTime();j.count=j.count+1||1};this.getPages=function(){return _.values(b())}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/filter.js' */
var RY=RY||{};RY.FilterView=Backbone.View.extend({className:"filter",events:{"input .filter-input":"onInput","keyup .filter-input":"onInput","keydown .filter-input":"onKeydown"},initialize:function(){_.bindAll(this,"render","onInput","onKeydown","search");this.navigationEvents=this.options.navigationEvents;this.onInput=RY.util.wait(this.onInput,100,this)},render:function(){this.$input=this.$(".filter-input");return this},onInput:function(a){if(a&&_.contains([37,38,39,40],a.which)){return}this.search()},onKeydown:function(a){switch(a.which){case 13:this.navigationEvents.trigger("select");a.preventDefault();a.stopPropagation();break;case 38:this.navigationEvents.trigger("previous");a.preventDefault();break;case 40:this.navigationEvents.trigger("next");a.preventDefault();break}},search:function(){var a=this.$input.val();this.collection.search(a)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-model.js' */
var RY=RY||{};(function(){var a;if(typeof ConfluenceMobile!="undefined"){a=ConfluenceMobile.AppData.get("confluence-context-path")}else{a=AJS.contextPath()}RY.Page=Backbone.Model.extend({href:function(){return a+this.get("url")},daysSinceLastSeen:function(){return RY.util.daysSince(this.get("lastSeen"))}});RY.PageCollection=Backbone.Collection.extend({model:RY.Page,url:a+"/rest/recentlyviewed/1.0/recent?includeTrashedContent=true",search:function(c){var b;if(this._queryLength(c)===0){b=this.models}else{var d=c.match(/[^\s-]+/g);b=this.filter(function(g){var h=g.get("title");var f=g.get("space");var e=(h+f).toLowerCase();return _.all(d,function(i){return e.indexOf(i.toLowerCase())!==-1})})}this.trigger("filter",b,c);return b},_queryLength:function(b){if(!String.prototype.trim){return AJS.$.trim(b).length}return b.trim().length},comparator:function(b){return -(b.get("lastSeen"))}})})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page.js' */
var RY=RY||{};RY.PageView=Backbone.View.extend({tagName:"li",className:"ry-page",template:RY.Templates.pageItem,initialize:function(){_.bindAll(this,"hide","show","render")},hide:function(){this.$el.hide().removeClass("shown")},show:function(){this.$el.show().addClass("shown")},render:function(){var a=this.model.toJSON();a.href=this.model.href();this.$el.html(this.template(a));return this}});RY.PageGroupView=Backbone.View.extend({className:"group",template:RY.Templates.pageGroup,initialize:function(){_.bindAll(this,"hide","hideAll","show","showBorder","showPages","add","render");this.title=this.options.title;this.modelViews={}},hide:function(){this.$el.hide()},hideAll:function(){this.$el.removeClass("border").hide();_.invoke(_.values(this.modelViews),"hide")},show:function(){this.$el.show()},showBorder:function(){this.$el.addClass("border")},showPages:function(a){var c=this;var b=false;_.each(a,function(e){var d=c.modelViews[e.cid];if(d){b=true;d.show()}});if(b){this.show()}return b},add:function(b){var a=new RY.PageView({model:b});this.modelViews[b.cid]=a;this.$list.append(a.render().el)},render:function(){this.$el.html(this.template({title:this.title}));this.$list=this.$("ul");return this}});RY.PageNavigator=function(a,e,c){var g=null;function f(){return a.find("li.shown")}function b(i){pageItems=f();var h=pageItems.index(pageItems.filter(".highlight"));if(g){g.removeClass("highlight")}i+=h;if(i<0){i=pageItems.length-1}if(i>=pageItems.length){i=0}g=pageItems.eq(i);g.addClass("highlight")}function d(){if(!g.length){return}var k=e;var l=k.children();var j=k.height();var i=g.outerHeight(true);var h=g.position().top;if(h<0){if(f().index(g)===0){k.scrollTop(0);return}k.scrollTop(g.offset().top-l.offset().top)}else{if(h>j){k.scrollTop(g.offset().top-l.offset().top-j+i)}}}c.on("select",function(){if(g&&g.is(":visible")){RY.util.analytics.trackPageOpen();var h=g.find(".page-title span").attr("href");window.location=h}},this);c.on("previous",function(){b(-1);d()},this);c.on("next",function(){b(1);d()},this)};RY.PageCollectionView=Backbone.View.extend({template:RY.Templates.pageCollection,events:{"click .page-title a":RY.util.analytics.trackPageOpen},initialize:function(){_.bindAll(this,"checkEmpty","filter","_groupForPage","addOne","showEmptyMessage","clearEmptyMessage","addAll","render");this.modelViews={};this.collection.on("reset",this.addAll,this);this.collection.on("add",this.addOne,this);this.collection.on("filter",this.filter,this)},checkEmpty:function(a,e){var f=this.collection.isEmpty();var b=a.length===0;if(f||b){var c;if(f){c="Sorry mate, looks like you haven\u0027t visited any pages yet."}else{var d=AJS.contextPath()+"/dosearchsite.action?queryString="+encodeURIComponent(e);c="We didn\u0027t find any matching pages in your history."+" "+AJS.format("\u003ca href=\u0022{0}\u0022\u003eClick here\u003c/a\u003e to search for this term instead.",d)}this.showEmptyMessage(c)}else{this.clearEmptyMessage()}},filter:function(b,d){d=d||"";this.checkEmpty(b,d);var a=[this.$today,this.$yesterday,this.$older];_.invoke(a,"hideAll");var c=[];_.each(a,function(f){var e=f.showPages(b);if(e){c.push(f)}});if(c.length>1){c.pop();_.invoke(c,"showBorder")}},_groupForPage:function(a){var b=a.daysSinceLastSeen();if(b===0){return this.$today}else{if(b===1){return this.$yesterday}else{return this.$older}}},addOne:function(a){var b=this._groupForPage(a);b.add(a)},showEmptyMessage:function(a){this.$(".empty").html(AJS.$("<p>").html(a))},clearEmptyMessage:function(){this.$(".empty").html("")},addAll:function(){this.collection.each(this.addOne)},render:function(){this.$el.html(this.template());this.$today=new RY.PageGroupView({title:"Today"});this.$yesterday=new RY.PageGroupView({title:"Yesterday"});this.$older=new RY.PageGroupView({title:"Older"});var a=this.$(".groups");a.append(this.$today.render().el);a.append(this.$yesterday.render().el);a.append(this.$older.render().el);_.invoke([this.$today,this.$yesterday,this.$older],"hideAll");return this}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/main.js' */
var RY=RY||{};AJS.toInit(function(a){a("#view-user-history-link").unbind("click");a("#view-user-history-link").click(function(g){g.preventDefault();var c=new AJS.Dialog({width:600,height:500,id:"recently-viewed-dialog",closeOnOutsideClick:true});var f=a(RY.Templates.body());c.addHeader("Recently viewed pages");c.addPanel("SinglePanel",f);c.addLink("Close",function(e){e.hide()});var d=a("<div>",{"class":"dialog-tip"}).text("Hint: type \u0022g\u0022 and then \u0022r\u0022 anywhere to quickly open this menu");c.popup.element.find(".dialog-button-panel").append(d);var i=new RY.PageCollection();var b=new RY.PageCollectionView({collection:i});f.find(".pages").html(b.render().el);c.gotoPanel(0);c.show();var h=a("#recently-viewed-dialog").spin("large");i.fetch({success:function(){h.spinStop();var j=_.extend({},Backbone.Events);var k=new RY.PageNavigator(b.$el,f.parent(),j);var e=new RY.FilterView({collection:i,el:f.find(".filter"),navigationEvents:j}).render();e.search()}});RY.util.analytics.trackDialogOpen()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/quicknav/main.js' */
var RYQ=RYQ||{};AJS.toInit(function(){var b=new RYQ.QuickNavEntryCollection();var a=new RYQ.QuickNav({collection:b})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'js/space-menu.js' */
AJS.toInit(function(a){var c=a(Confluence.Templates.BrowseSpaces.spacesLink());a("#space-directory-link").replaceWith(a(c));var b=function(d){var e=a("#space-menu-link-content");e.html(d.template);if(AJS&&AJS.Confluence&&AJS.Confluence.Analytics&&AJS.Confluence.Analytics.setAnalyticsSource){AJS.Confluence.Analytics.setAnalyticsSource(e.find("a"),"spacemenu")}a("#create-space-header").click(function(){AJS.trigger("analytics",{name:"create-space-from-header"});Confluence.SpaceBlueprint.Dialog.launch();return false})};a("#space-menu-link-content").on("aui-dropdown2-show",function(){AJS.trigger("analytics",{name:"open-space-menu"});if(!a("#space-menu-link-content .aui-dropdown2-section")||!a("#space-menu-link-content .aui-dropdown2-section").length){a.ajax({url:Confluence.getContextPath()+"/rest/ia/1.0/spacesmenu",type:"GET",dataType:"json",cache:false,success:b})}return false})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'soy/space-menu.soy' */
// This file was automatically generated from space-menu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.BrowseSpaces.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.BrowseSpaces == 'undefined') { Confluence.Templates.BrowseSpaces = {}; }


Confluence.Templates.BrowseSpaces.spacesLink = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.trigger({menu: {id: 'space-menu-link-content'}, id: 'space-menu-link', tagName: 'a', extraClasses: 'aui-nav-link', title: 'Spaces', showIcon: true, text: 'Spaces'}) + aui.dropdown2.contents({id: 'space-menu-link-content', extraClasses: 'aui-style-default aui-dropdown2-in-header'});
};
if (goog.DEBUG) {
  Confluence.Templates.BrowseSpaces.spacesLink.soyTemplateName = 'Confluence.Templates.BrowseSpaces.spacesLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:space-ia-analytics', location = 'js/space-ia-analytics.js' */
(function(b){var c=AJS.Confluence.Analytics.setAnalyticsSource;function d(){var h=b(".acs-side-bar");var g=h.find("a:not(.external_link a, #acs-configure-link)");c(g,"sidebar");var f=h.find("[data-collapsed-tooltip='"+AJS.I18n.getText("Pages")+"']");c(f,"sidebar-pages");var j=h.find("[data-collapsed-tooltip='"+AJS.I18n.getText("Blog")+"']");c(j,"sidebar-blogs");var e=h.find(".quick-links-section li:not(.external_link) a");c(e,"spaceshortcut");var i=h.find(".ia-secondary-container a:not(.more-children-link)");if(h.find(".ia-secondary-container").data("tree-type")=="pages"){c(i,"contextnavchildmode")}else{if(h.find(".ia-secondary-container").data("tree-type")=="page-tree"){c(i,"contextnavpagetreemode")}else{c(i,"contextnav")}}}function a(e){return function(){AJS.trigger("analytics",{name:"space-ia-nav",data:{linkType:e}})}}AJS.toInit(function(e){e(".acs-side-bar").find(".ia-secondary-container .more-children-link").click(a("context-nav.more-children"));AJS.bind("sidebar.exit-configure-mode",d);AJS.bind("sidebar.flyout-triggered",function(g,f){a("flyout-triggered."+f.flyout)()});AJS.bind("pagetree-children-loaded",d);d()})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.aui.staging:persistable', location = 'js/persistable.js' */
define("confluence/persistable",["skate","confluence/storage-manager"],function(f,g){var d=g("confluence","userSettings");return f("data-persist",{type:f.types.ATTRIBUTE,created:function(b){if(!b.name)throw'Missing attribute "name"';var c=b.getAttribute("data-persist"),a=b.getAttribute("data-persist-scope"),a=a?b.name+"."+a.replace(/\./g,"-"):b.name,a=d.getItem(a),e=b.getAttribute("data-default-value");if(/value|checked/.test(c))a=a||e||null,null!==a&&("checked"===c&&(a="true"===a),b[c]=a);else throw"Persistable only works with 'value' or 'checked' attributes!";
},events:{change:function(b){var c=b.getAttribute("data-persist"),a=b.getAttribute("data-persist-scope"),a=a?b.name+"."+a.replace(/\./g,"-"):b.name,e=b.getAttribute("data-default-value");String(b[c])===e?d.removeItem(a):d.setItem(a,b[c],2592E3)}}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-quicknav:quicknav-resources', location = 'js/quick-nav.js' */
define("confluence-quicknav/quick-nav",["ajs","jquery","confluence/api/logger"],function(d,c,k){var g=[],e,h=function(a){return function(f){a.closest("form").find(".quick-nav-drop-down").append(f)}},i=function(a){"undefined"!==typeof a?g.push(a):k.log("WARN: Attempted to add a dropdown post-process function that was undefined.")},l=function(a){c("a",a).each(function(){var a=c(this),b=a.find("span").data("properties");if((b=b?b.spaceName:null)&&!a.is(".content-type-spacedesc"))a.after(a.clone().attr("class",
"space-name").html(b)),a.parent().addClass("with-space-name")})};return{addDropDownPostProcess:i,setMakeParams:function(a){e=a},init:function(){var a=c("#quick-search-query"),f=h(a),b=c("#space-blog-quick-search-query"),j=c("#confluence-space-key");a.quicksearch("/rest/quicknav/1/search",null,{dropdownPlacement:f,dropdownPostprocess:function(a){c.each(g,function(c,b){b&&b(a)})},makeParams:function(a){return e?e(a):{query:a}},ajsDropDownOptions:{className:"quick-search-dropdown"}});i(l);b.length&&
j.length&&b.quicksearch("/rest/quicknav/1/search?type=blogpost&spaceKey="+d("i").html(j.attr("content")).text(),null,{dropdownPlacement:h(b)})}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-quicknav/quick-nav","Confluence.QuickNav");require("confluence/module-exporter").safeRequire("confluence-quicknav/quick-nav",function(d){var c=require("ajs");!1===require("confluence/dark-features").isEnabled("next.ui.search")&&c.toInit(d.init)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = '/js/confluence-license-banner.js' */
require(["ajs","jquery"],function(a,b){a.toInit(function(){var d=WRM.data.claim("com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details");if(!d){a.warn("Unable to claim my required data");return}var c={destroyBanner:function(){b("#license-banner").slideUp(function(){b("#license-banner").remove()})},remindMeLater:function(){b.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({atl_token:a.Meta.get("atl-token")}),url:a.contextPath()+"/rest/licensebanner/1.0/reminder/later"});c.destroyBanner()},remindMeNever:function(){b.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({atl_token:a.Meta.get("atl-token")}),url:a.contextPath()+"/rest/licensebanner/1.0/reminder/never"});c.destroyBanner()},createBanner:function(g){var e;if(g.showLicenseExpiryBanner){e=Confluence.Templates.LicenseBanner.expiryBanner({days:g.daysBeforeLicenseExpiry,mac:g.renewUrl,sales:g.salesEmail})}else{if(g.showMaintenanceExpiryBanner){e=Confluence.Templates.LicenseBanner.maintenanceBanner({days:g.daysBeforeMaintenanceExpiry,mac:g.renewUrl,sales:g.salesEmail})}}if(e){var f=b(e);b("#full-height-container").prepend(f);b("#license-banner-later").click(function(h){h.preventDefault();c.remindMeLater()});b("#license-banner-never").click(function(h){h.preventDefault();c.remindMeNever()});f.find(".icon-close").click(function(h){h.preventDefault();c.remindMeLater()})}}};c.createBanner(d)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = 'soy/confluence-license-banner.soy' */
// This file was automatically generated from confluence-license-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.LicenseBanner.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.LicenseBanner == 'undefined') { Confluence.Templates.LicenseBanner = {}; }


Confluence.Templates.LicenseBanner.wrapper = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$filterNoAutoescape(opt_data.contentHTML) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.LicenseBanner.wrapper.soyTemplateName = 'Confluence.Templates.LicenseBanner.wrapper';
}


Confluence.Templates.LicenseBanner.expiryBanner = function(opt_data, opt_ignored) {
  var output = '';
  var renewTag__soy8 = '<a id="license-banner-my-link" target="_blank" href="' + soy.$$escapeHtml(opt_data.mac) + '">';
  var end__soy12 = '</a>';
  var mailTag__soy14 = '<a id="license-banner-sales-link" href="mailto:' + soy.$$escapeHtml(opt_data.sales) + '">';
  output += Confluence.Templates.LicenseBanner.wrapper({contentHTML: '' + aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="true">' + ((opt_data.days < 0) ? soy.$$filterNoAutoescape(AJS.format('Your license subscription has expired. This instance is now read-only. Please renew {0}online{1} or contact {2}sales{3}.',renewTag__soy8,end__soy12,mailTag__soy14,end__soy12)) : (opt_data.days == 0) ? soy.$$filterNoAutoescape(AJS.format('Your license subscription will expire today and Confluence will become read-only. Please renew {0}online{1} or contact {2}sales{3}.',renewTag__soy8,end__soy12,mailTag__soy14,end__soy12)) : soy.$$filterNoAutoescape(AJS.format('Your license subscription will expire in {0,choice,1#{0} day|1\x3c{0} days}. Confluence will become read-only after the expiry. Please renew {1}online{2} or contact {3}sales{4}.',opt_data.days,renewTag__soy8,end__soy12,mailTag__soy14,end__soy12))) + '</div>', isCloseable: opt_data.days > 7, id: 'license-banner'})});
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.LicenseBanner.expiryBanner.soyTemplateName = 'Confluence.Templates.LicenseBanner.expiryBanner';
}


Confluence.Templates.LicenseBanner.maintenanceBanner = function(opt_data, opt_ignored) {
  var output = '';
  var renewTag__soy39 = '<a id="license-banner-my-link" target="_blank" href="' + soy.$$escapeHtml(opt_data.mac) + '">';
  var end__soy43 = '</a>';
  var later__soy45 = '<a href="#" id="license-banner-later">';
  var never__soy47 = '<a href="#" id="license-banner-never">';
  output += Confluence.Templates.LicenseBanner.wrapper({contentHTML: '' + aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="false">' + ((opt_data.days < 0) ? soy.$$filterNoAutoescape(AJS.format('You no longer have access Support and Updates. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.',renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43)) : (opt_data.days == 0) ? soy.$$filterNoAutoescape(AJS.format('You will lose access to Support and Updates today. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.',renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43)) : soy.$$filterNoAutoescape(AJS.format('You will lose access to Support and Updates in {0,choice,1#{0} day|1\x3c{0} days}. {1}Renew online{2}, {3}remind me later{4} or {5}never remind me again{6}.',opt_data.days,renewTag__soy39,end__soy43,later__soy45,end__soy43,never__soy47,end__soy43))) + '</div>', id: 'license-banner'})});
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.LicenseBanner.maintenanceBanner.soyTemplateName = 'Confluence.Templates.LicenseBanner.maintenanceBanner';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:legacy-browser-metrics', location = '/js/legacy/browser-metrics.js' */
(function(){var a=window.BrowserMetrics||{};a.isFunction=function(b){return !!(b&&b.constructor&&b.call&&b.apply)};a.isEnabled=function(){if(a.enabled===undefined){a.enabled=true}return a.enabled};window.BrowserMetrics=a}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var f=5;var e=12000;var c=function(g){return Math.round(g)};var a=function(g){return Math.round(g*100)/100};var d=function(k){var h=(function(){var n=/^(\w+):\/\/([^\/]*)(.*)$/;return function(p){var o=p.match(n);if(!o){return{path:p}}return{scheme:o[1],host:o[2],path:o[3]}}}());var i=(function(){var n=["secureConnectionStart","requestStart","responseStart","responseEnd","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventEnd"];return function(o){if(k.performance){var s=k.performance.timing;var p=s.navigationStart;if(p){for(var r=0;r<n.length;++r){var q=n[r];var t=s[q];if(t){o(q,t-p)}}}}}}());var g=(function(){var o=[{key:"LOGIN",pattern:/^\/login.*/i},{key:"J-DASH",pattern:/^\/secure\/dashboard\.jspa.*/i},{key:"J-ISSUE",pattern:/^\/browse\/\w+\-\w+.*/i},{key:"J-NAV",pattern:/^\/issues.*/i},{key:"J-RAPID",pattern:/secure\/rapidboard\.jspa/i},{key:"SD-AGENT",pattern:/^(\/\w+)?\/servicedesk\/agent\/.*/i},{key:"SD-CUSTOMER",pattern:/^(\/\w+)?\/servicedesk\/customer\/.*/i},{key:"C-DASH",pattern:/^\/wiki(\/)?(\?.*|#.*)?$/i},{key:"C-DASH",pattern:/^\/wiki\/dashboard\.action.*$/i},{key:"C-SPACE",pattern:/^\/wiki\/display\/\w+(\?.*|#.*)?$/i},{key:"C-PAGE",pattern:/^\/wiki\/display\/\w+\/.*/i},{key:"C-PAGE",pattern:/^\/wiki\/pages\/viewpage\.action.*/i},{key:"C-BLOG",pattern:/^\/wiki\/display\/~\w+\/\d+\/\d+\/\d+\/.*/i},{key:"C-EDITOR",pattern:/^\/wiki\/pages\/editpage\.action.*/i},{key:"C-CREATE",pattern:/^\/wiki\/pages\/createpage\.action.*/i}];return function n(){var r=h(k.location.href).path;for(var p=0;p<o.length;++p){var q=o[p];if(r.match(q.pattern)){return q.key}}return null}}());function j(){var n=g();if(n){i(function(p,r){var o="browser.metrics."+p,q={version:f,page:n,value:r>e?"x":Math.ceil((r)/100),rawValue:c(r)};AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(o,q):AJS.trigger("analyticsEvent",{name:o,data:q})})}}function m(){try{j()}catch(n){if(window.console){window.console.log("Error reporting browser metrics: "+n)}}}function l(){if(k.performance.timing.loadEventEnd){m()}else{setTimeout(l,1000)}}if(k.performance&&k.performance.timing){l()}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initPageLoad=d}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:legacy-browser-metrics', location = '/js/legacy/browser-metrics-events.js' */
(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var e=5;var d=12000;var a=function(f){return Math.round(f*100)/100};var c=function(g){var l={};function h(){return g.performance&&g.performance.now?g.performance.now():new Date().getTime()}function n(o){return o===Object(o)}function k(o){if(n(o)){return o.eventName+"."+o.eventType}else{return o}}function m(o){if(n(o)){return o.eventName}else{return o}}function j(o){if(n(o)){return o.eventType}else{return""}}function f(o){var p=k(o);l[p]=h()}function i(r,u){var v=k(r);if(!l[v]){throw ("Error logging browser metrics event end: no start event for key '"+v+"'")}var t=h()-l[v];l[v]=null;var o=m(r),q=j(r);var p="browser.metrics.e."+o+(u?"."+u:""),s={version:e,value:t>d?"x":Math.ceil((t)/100),rawValue:a(t),eventType:q};g.AJS.Analytics?g.AJS.Analytics.triggerPrivacyPolicySafeEvent(p,s):g.AJS.trigger("analyticsEvent",{name:p,data:s})}return{start:f,end:i}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initEvents=c}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:legacy-browser-metrics', location = '/js/legacy/browser-metrics-init.js' */
(function(){var a=window.BrowserMetrics||{};if(a.isEnabled()){if(Math.random()<0.1){window.ATL_PERF&&window.ATL_PERF.initPageLoad&&window.ATL_PERF.initPageLoad(window)}window.ATL_PERF&&window.ATL_PERF.initEvents&&(function(){window.BrowserMetrics=window.ATL_PERF.initEvents(window)}())}}());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:clickable-resources', location = 'js/clickable.js' */
jQuery(function($) {
    $(".clickable").live("click", function(event) {
        // Ensure we don't override any normal links or nested clickables within the clickable element
        if ($(event.target).closest("a[href]").length === 0 && $(event.target).closest(".clickable").length === 1) {
            // Use the href from the clickable element or the first nested link
            var href = $(this).attr("href") || $('a[href]:first', this).attr("href");
            if (href) {
                location.href = href;
            }
        }
    });
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:alert-resources', location = 'js/alert.js' */
AJS.toInit(function () {

    AJS.$(".adaptavist-alert").each(function () {

        var title = $(this).attr('title');
        var type = $(this).attr('type').toLowerCase();
        var content = $(this).attr('contentBody');

        require('aui/flag')({
            type: type,
            title: title,
            body: content
        });
    });

});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:rollover-resource', location = 'js/rollover.js' */
AJS.toInit(function () {

    var allRolloverMacros = AJS.$('.rollover-parameters');

    AJS.$.each(allRolloverMacros, function (index, macro) {
        var targetID = macro.getAttribute('targetid');
        var normalClass = macro.getAttribute('normal-class');
        var overClass = macro.getAttribute('over-class');

        var targetElement = AJS.$('#' + targetID);
        var link = allRolloverMacros[index].getAttribute("rollover-link");

        if (targetID != null) {
            targetElement.addClass(normalClass);
            if (!(overClass === "${overClass}")) {
                targetElement.hover(
                    function () {
                        AJS.$(this).removeClass(normalClass);
                        AJS.$(this).addClass(overClass);
                    }, function () {
                        AJS.$(this).removeClass(overClass);
                        AJS.$(this).addClass(normalClass);
                    }
                );
            }

            if (!(link === "${link}")) {
                targetElement.html('<a class="external-link rolloverLink" rel="nofollow" href="" >' + targetElement.text() + '</a>');
                targetElement.children().attr('href', link);
            }
        }
    });
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:cfm-blueprint-wizard', location = 'soy/blueprint/wizard-page1.soy' */
// This file was automatically generated from wizard-page1.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CFM.Blueprints.
 */

if (typeof CFM == 'undefined') { var CFM = {}; }
if (typeof CFM.Blueprints == 'undefined') { CFM.Blueprints = {}; }


CFM.Blueprints.cfmBlueprintWizardPage1 = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item wizard-page-left"><form name="cfm-wizard-page-one" action="#" method="post" class="aui"><fieldset><div class="cfm-wizard-description">' + soy.$$escapeHtml('This wizard provides the ability to quick start a page that uses selected Content Formatting macros.') + '</div><div class="cfm-page-title-padding"><label for="text-input">Page title<span class="aui-icon icon-required cfm-req">required</span></label><input class="text medium-field" type="text" id="cfm-page-title" name="title" title="title"></input></div><div><label for="cfm-blueprints-dropdown" class="blueprints-label-padding">Templates</label><!-- Trigger --><a href="#cfm-blueprints-dropdown-trigger" aria-owns="cfm-blueprints-dropdown" aria-haspopup="true" class="aui-button aui-style-default aui-dropdown2-trigger cfm-blueprints-dropdown-text">Selection</a><!-- Dropdown --><div id="cfm-blueprints-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><ul><li class="cfm-blueprint-selected"><a href="#1mpj">Multi-Page Journey</a></li><li class="cfm-blueprint-selected"><a href="#2shp">Space Home Page</a></li><li class="cfm-blueprint-selected"><a href="#3f">Finance</a></li><li class="cfm-blueprint-selected"><a href="#4a">Academic</a></li><li class="cfm-blueprint-selected"><a href="#5b">Blog</a></li><li class="cfm-blueprint-selected"><a href="#6sr">Software Requirements</a></li></ul></div></div></div><div class="cfm-blueprint-description">' + soy.$$escapeHtml('Start by entering a page Title and selecting a template from the dropdown.') + '</div></fieldset></form></div><div class="cfm-vertical-line"></div><div class="aui-item"><div class="cfm-blueprints-picture">&nbsp;</div></div></div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.cfmBlueprintWizardPage1.soyTemplateName = 'CFM.Blueprints.cfmBlueprintWizardPage1';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:cfm-wizard-resources', location = 'soy/blueprint/wizard-page1.soy' */
// This file was automatically generated from wizard-page1.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CFM.Blueprints.
 */

if (typeof CFM == 'undefined') { var CFM = {}; }
if (typeof CFM.Blueprints == 'undefined') { CFM.Blueprints = {}; }


CFM.Blueprints.cfmBlueprintWizardPage1 = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item wizard-page-left"><form name="cfm-wizard-page-one" action="#" method="post" class="aui"><fieldset><div class="cfm-wizard-description">' + soy.$$escapeHtml('This wizard provides the ability to quick start a page that uses selected Content Formatting macros.') + '</div><div class="cfm-page-title-padding"><label for="text-input">Page title<span class="aui-icon icon-required cfm-req">required</span></label><input class="text medium-field" type="text" id="cfm-page-title" name="title" title="title"></input></div><div><label for="cfm-blueprints-dropdown" class="blueprints-label-padding">Templates</label><!-- Trigger --><a href="#cfm-blueprints-dropdown-trigger" aria-owns="cfm-blueprints-dropdown" aria-haspopup="true" class="aui-button aui-style-default aui-dropdown2-trigger cfm-blueprints-dropdown-text">Selection</a><!-- Dropdown --><div id="cfm-blueprints-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><ul><li class="cfm-blueprint-selected"><a href="#1mpj">Multi-Page Journey</a></li><li class="cfm-blueprint-selected"><a href="#2shp">Space Home Page</a></li><li class="cfm-blueprint-selected"><a href="#3f">Finance</a></li><li class="cfm-blueprint-selected"><a href="#4a">Academic</a></li><li class="cfm-blueprint-selected"><a href="#5b">Blog</a></li><li class="cfm-blueprint-selected"><a href="#6sr">Software Requirements</a></li></ul></div></div></div><div class="cfm-blueprint-description">' + soy.$$escapeHtml('Start by entering a page Title and selecting a template from the dropdown.') + '</div></fieldset></form></div><div class="cfm-vertical-line"></div><div class="aui-item"><div class="cfm-blueprints-picture">&nbsp;</div></div></div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.cfmBlueprintWizardPage1.soyTemplateName = 'CFM.Blueprints.cfmBlueprintWizardPage1';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:cfm-wizard-resources', location = 'soy/blueprint/wizard-page2.soy' */
// This file was automatically generated from wizard-page2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CFM.Blueprints.
 */

if (typeof CFM == 'undefined') { var CFM = {}; }
if (typeof CFM.Blueprints == 'undefined') { CFM.Blueprints = {}; }


CFM.Blueprints.cfmBlueprintWizardPage2 = function(opt_data, opt_ignored) {
  return '<div class="aui-group cfm-dialog-no-scroll"><div class="aui-item"><form name="cfm-wizard-page-two" action="#" method="post" class="aui"><fieldset class="rows"><div class="cfm-wizard-description">' + soy.$$escapeHtml('Please add the additional page or pages required for the Multi-Page Journey template.') + '</div><div class="aui-group"><div class="aui-item create-button-rows"><div class="cfm-wizard-page-two-validation"></div><table class="aui" id="cfm-wizard-dataTable"><thead><tr><th>Page Title</th><th>Actions</th></tr></thead><tbody><tr id="groupRow0"><td class="cfm-input-field"><input id="cfm-page-title-input-0" class="text buttonInputLabel" type="text" value="" required="required" tabindex="10"/></td><td class="cfm-actions"><input type="button" class="aui-button cfmAddPageTitleRowInput" value="+" data-row-index="0" tabindex="10"/><input type="button" class="aui-button cfmRemovePageTitleRowInput" data-row-index="0" value="-" tabindex="10" disabled/></td></tr></tbody></table></div></div></fieldset></form></div></div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.cfmBlueprintWizardPage2.soyTemplateName = 'CFM.Blueprints.cfmBlueprintWizardPage2';
}


CFM.Blueprints.addPageTitleRow = function(opt_data, opt_ignored) {
  return '<tr id="groupRow' + soy.$$escapeHtml(opt_data.rowIndex) + '"><td class="cfm-input-field"><input id="cfm-page-title-input-' + soy.$$escapeHtml(opt_data.rowIndex) + '" class="text buttonInputLabel" type="text" value="" required="required" tabindex="10"/></td><td class="cfm-actions"><input type="button" class="aui-button cfmAddPageTitleRowInput" value="+" data-row-index="' + soy.$$escapeHtml(opt_data.rowIndex) + '" tabindex="10"/><input type="button" class="aui-button cfmRemovePageTitleRowInput" data-row-index="' + soy.$$escapeHtml(opt_data.rowIndex) + '" value="-" tabindex="10"/></td></tr>';
};
if (goog.DEBUG) {
  CFM.Blueprints.addPageTitleRow.soyTemplateName = 'CFM.Blueprints.addPageTitleRow';
}


CFM.Blueprints.addDuplicateValidationMessage = function(opt_data, opt_ignored) {
  return '<div class="cfm-invalid-page-title">' + soy.$$escapeHtml('Each title must be unique') + '</div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.addDuplicateValidationMessage.soyTemplateName = 'CFM.Blueprints.addDuplicateValidationMessage';
}


CFM.Blueprints.addExistsValidationMessage = function(opt_data, opt_ignored) {
  return '<div class="cfm-invalid-page-title">' + soy.$$escapeHtml('A page with this title already exists') + '</div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.addExistsValidationMessage.soyTemplateName = 'CFM.Blueprints.addExistsValidationMessage';
}


CFM.Blueprints.addEmptyValidationMessage = function(opt_data, opt_ignored) {
  return '<div class="cfm-invalid-page-title">' + soy.$$escapeHtml('This field can not be empty') + '</div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.addEmptyValidationMessage.soyTemplateName = 'CFM.Blueprints.addEmptyValidationMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:cfm-wizard-resources', location = 'soy/blueprint/wizard-page3.soy' */
// This file was automatically generated from wizard-page3.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CFM.Blueprints.
 */

if (typeof CFM == 'undefined') { var CFM = {}; }
if (typeof CFM.Blueprints == 'undefined') { CFM.Blueprints = {}; }


CFM.Blueprints.cfmBlueprintWizardPage3 = function(opt_data, opt_ignored) {
  return '<div class="aui-group cfm-wizard-page-two"><div class="cfm-wizard-description">' + soy.$$escapeHtml('You finished the wizard setup successfully. Click create to get started with your template.') + '</div></div><div class="aui-item"><div class="cfm-blueprints-picture-complete">&nbsp;</div></div>';
};
if (goog.DEBUG) {
  CFM.Blueprints.cfmBlueprintWizardPage3.soyTemplateName = 'CFM.Blueprints.cfmBlueprintWizardPage3';
}


CFM.Blueprints.docoLink = function(opt_data, opt_ignored) {
  return '<a class="add-remove-customise-templates-trigger button-panel-link" href="https://www.adaptavist.com/doco/display/CFP/Templates" tabindex="-1">' + soy.$$escapeHtml('Documentation') + '</a>';
};
if (goog.DEBUG) {
  CFM.Blueprints.docoLink.soyTemplateName = 'CFM.Blueprints.docoLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:cfm-wizard-resources', location = 'js/blueprint-wizard.js' */
AJS.toInit(function ($) {

    var selectedBlueprint;
    var pageTwoData = {};
    var rowIndex = 1;
    var stepTwoTitles = [];

    function handleWizardPage1Submit(e, state) {
        var pageOneValidationElement = $('.cfm-blueprint-description');
        if (!state.pageData.title) {
            pageOneValidationElement.text("Please enter a unique page title");
            addValidationStyling(pageOneValidationElement);
            return false;
        }

        if (doesPageExist(state.pageData.title, state.wizardData.spaceKey)) {
            pageOneValidationElement.text("Page title already exists, please enter a unique title");
            addValidationStyling(pageOneValidationElement);
            return false;
        }

        if (!selectedBlueprint) {
            pageOneValidationElement.text("Please select a template from the dropdown");
            addValidationStyling(pageOneValidationElement);
            return false;
        }

        state.pageData.userSelectedBlueprint = selectedBlueprint;
        if (selectedBlueprint === 'Multi-Page Journey') {
            state.nextPageId = 'cfmBlueprintWizardPage2';
        } else {
            state.nextPageId = 'cfmBlueprintWizardPage3';
        }
        return true;
    }

    function handleWizardPage2Submit(e, state) {
        pageTwoData = {};
        stepTwoTitles = [];
        var success = true;
        var allPageTitles = [];
        resetValidation();
        $('#cfm-wizard-dataTable > tbody > tr').each(function (index) {
            allPageTitles.push($('#cfm-page-title').val());
            var pageTwoValidationElement;
            var pageTitle = $(this).find('.cfm-input-field > input').val();
            var pageIndex = 'page' + index;
            pageTwoData[pageIndex] = pageTitle;
            stepTwoTitles.push(pageTitle);

            //check if user provided same title twice
            if ($.inArray($(this).find('.buttonInputLabel').val(), allPageTitles) !== -1 && pageTitle || state.wizardData.pages.cfmBlueprintWizardPage1.title === pageTitle) {
                //add error text
                var pageTitleDuplicateValidationMessage = CFM.Blueprints.addDuplicateValidationMessage();
                $(this).find('.cfm-input-field').append(pageTitleDuplicateValidationMessage);
                //style the error message
                pageTwoValidationElement = $(this).find($('.cfm-invalid-page-title'));
                addValidationStyling(pageTwoValidationElement);
                success = false;
            } else {
                allPageTitles.push($(this).find('.buttonInputLabel').val());
            }

            if (doesPageExist(pageTitle, state.wizardData.spaceKey)) {
                if ($(this).find('.buttonInputLabel').val()) {
                    //show page title already exists message
                    var pageTitleExistsValidationMessage = CFM.Blueprints.addExistsValidationMessage();
                    $(this).find('.cfm-input-field').append(pageTitleExistsValidationMessage);
                    pageTwoValidationElement = $(this).find($('.cfm-invalid-page-title'));
                } else {
                    //show field empty message
                    var pageTitleEmptyValidationMessage = CFM.Blueprints.addEmptyValidationMessage();
                    $(this).find('.cfm-input-field').append(pageTitleEmptyValidationMessage);
                    pageTwoValidationElement = $(this).find($('.cfm-invalid-page-title'));
                }

                addValidationStyling(pageTwoValidationElement);
                $(this).find(pageTwoValidationElement).addClass('blueprint-validation');

                success = false;
            }
        });

        var errorMessages = $('.cfm-invalid-page-title');
        if ($(errorMessages).size() > 0) {
            errorMessages[0].scrollIntoView(false);
        }
        state.wizardData.pageTwoNewPageTitles = pageTwoData;
        return success;
    }

    function handleWizardPage3Submit(e, state) {
        //subsumes the normal blueprint wizard and use an action to complete the specified tasks
        if (state.wizardData.pages.cfmBlueprintWizardPage1.userSelectedBlueprint === "Blog") {
            $('#create-dialog').find('.button-panel-cancel-link').click();
            var blogPayload = {
                "title": state.wizardData.pages.cfmBlueprintWizardPage1.title,
                "space": state.wizardData.spaceKey
            };
            createBlog(blogPayload);
            e.preventDefault();
        } else if (state.wizardData.pages.cfmBlueprintWizardPage1.userSelectedBlueprint === "Multi-Page Journey") {
            $('#create-dialog').find('.button-panel-cancel-link').click();
            var journeyPayload = {
                "stepOnePageTitle": state.wizardData.pages.cfmBlueprintWizardPage1.title,
                "space": state.wizardData.spaceKey,
                "parentPageId": state.wizardData.parentPageId,
                "stepTwoPageTitles": stepTwoTitles
            };
            createJourneyPages(journeyPayload);
            e.preventDefault();
        } else {
            return true;
        }
    }

    function createBlog(blogPayload) {
        $.ajax({
            type: 'POST',
            async: false,
            url: AJS.params.baseUrl + '/cfm/blueprint/create/blog/cfm-create-blog.action',
            data: blogPayload
        }).success(function () {
            window.location.href = AJS.params.baseUrl + '/pages/viewrecentblogposts.action?key=' + blogPayload.space;
        }).error(function () {
            var failMessage = "Failed to call Content Formatting blueprint create blog action";
            console.log(failMessage);
        });
    }

    function createJourneyPages(journeyPayload) {
        $.ajax({
            type: 'POST',
            async: false,
            url: AJS.params.baseUrl + '/cfm/blueprint/create/journeypages/cfm-create-multi-page-journey-pages.action',
            data: journeyPayload
        }).success(function () {
            window.location.href = AJS.params.baseUrl + '/display/' + journeyPayload.space + '/' + journeyPayload.stepOnePageTitle;
        }).error(function () {
            var failMessage = "Failed to call Content Formatting blueprint create journey pages action";
            console.log(failMessage);
        });
    }

    function handleWizardPage1Input(e, state) {
        $('.dialog-button-panel').append(CFM.Blueprints.docoLink());
        $('.cfm-blueprints-picture').prop('class', 'cfm-blueprints-picture');
        var descriptionElement = $('.cfm-blueprint-description');
        //handle dropdown blueprint selection
        $('.cfm-blueprint-selected').on('click', function (event) {
            descriptionElement.removeClass('blueprint-validation');
            selectedBlueprint = event.target.text;
            $('.cfm-blueprints-dropdown-text').text(selectedBlueprint);
            descriptionElement.text(getBlueprintDescriptionAndUpdateImage('page1', selectedBlueprint));
        });
        //handle page title change
        $('#cfm-page-title').on('change', function () {
            descriptionElement.removeClass('blueprint-validation');
            descriptionElement.text(getBlueprintDescriptionAndUpdateImage('page1', selectedBlueprint));
        });
        //close dropdown if cancel button is clicked while dropdown open
        $('.dialog-button-panel .button-panel-link.button-panel-cancel-link').on('click', function () {
            $('#cfm-blueprints-dropdown').remove();
        });
    }

    function createKeyCodeRange(start, end) {
        var keyCodeArray = [];
        for (var i = start; i <= end; i++) {
            keyCodeArray.push(i);
        }
        return keyCodeArray;
    }

    function handleWizardPage2Input(e, state) {
        $('.dialog-button-panel').append(CFM.Blueprints.docoLink());
        var table = $('#cfm-wizard-dataTable');
        var keyCodeArray = createKeyCodeRange(48, 90);
        keyCodeArray.push(13);
        keyCodeArray.push(32);

        //add page title table row
        table.on('keypress click', '.cfmAddPageTitleRowInput', function (event) {
            if ($.inArray(event.which, keyCodeArray) === -1) {
                var tableRow = $('#cfm-wizard-dataTable > tbody > tr');
                var newRow = CFM.Blueprints.addPageTitleRow({rowIndex: rowIndex});
                rowIndex++;
                //add new table row on appropriate index
                tableRow.eq($.inArray($(event.target).parent().parent()[0], tableRow)).after(newRow);
                //make first row 'remove button' clickable
                $('#groupRow' + $('#cfm-wizard-dataTable tbody tr .cfmAddPageTitleRowInput')[0].getAttribute('data-row-index') + ' .cfm-actions .cfmRemovePageTitleRowInput').removeAttr('disabled');
            } else {
                event.preventDefault();
            }
        });

        //remove page title table row
        table.on('keypress click', '.cfmRemovePageTitleRowInput', function (event) {
            if (event.which !== 13 && event.which !== 32) {
                var rowIndex = event.target.getAttribute('data-row-index');
                $('#groupRow' + rowIndex).remove();
                //make first row 'remove button' disabled
                if ($('#cfm-wizard-dataTable tbody tr').length === 1) {
                    $('#groupRow' + $('#cfm-wizard-dataTable tbody tr .cfmAddPageTitleRowInput')[0].getAttribute('data-row-index') + ' .cfm-actions .cfmRemovePageTitleRowInput').prop('disabled', true);
                }
            } else {
                event.preventDefault();
            }
        });
    }

    function handleWizardPage3Input(e, state) {
        $('.dialog-button-panel').append(CFM.Blueprints.docoLink());
        $('.cfm-blueprint-description').text(getBlueprintDescriptionAndUpdateImage('page3', selectedBlueprint));
    }

    //displays the appropriate description message and image based on the selected blueprint and wizard dialog step.
    function getBlueprintDescriptionAndUpdateImage(dialogPage, selectedBlueprint) {
        var description;
        switch (selectedBlueprint) {
            case "Multi-Page Journey":
                description = "Create several pages that a user can follow from start to finish.";
                updateBlueprintImage(dialogPage, 'multi-page-journey');
                break;
            case "Space Home Page":
                description = "Design a new Space Home Page.";
                updateBlueprintImage(dialogPage, 'space-home-page');
                break;
            case "Finance":
                description = "This template displays financial performance data.";
                updateBlueprintImage(dialogPage, 'finance');
                break;
            case "Blog":
                description = "Get started with a blog.";
                updateBlueprintImage(dialogPage, 'blog');
                break;
            case "Software Requirements":
                description = "Create a software requirements document.";
                updateBlueprintImage(dialogPage, 'software-requirements');
                break;
            case "Academic":
                description = "Use mathematical formulae and cite works.";
                updateBlueprintImage(dialogPage, 'academic');
                break;
            default:
                description = "Start by entering a page Title and selecting a template from the dropdown.";
        }
        return description;
    }

    function updateBlueprintImage(dialogPage, selectedBlueprint) {
        var blueprintPictureElement = $('.cfm-blueprints-picture');
        var blueprintPictureElementComplete = $('.cfm-blueprints-picture-complete');
        if (dialogPage === 'page1') {
            blueprintPictureElement.prop('class', 'cfm-blueprints-picture');
            blueprintPictureElement.addClass(dialogPage).addClass(selectedBlueprint);
        } else {
            blueprintPictureElementComplete.prop('class', 'cfm-blueprints-picture-complete');
            blueprintPictureElementComplete.addClass(dialogPage).addClass(selectedBlueprint);
        }
    }

    function doesPageExist(pageTitle, spaceKey) {
        var success = false;
        $.ajax({
            type: 'GET',
            async: false,
            url: AJS.params.baseUrl + '/rest/api/content?spaceKey=' + spaceKey + '&title=' + pageTitle,
            dataType: 'json'
        }).success(function (json) {
            if (json.size > 0) {
                success = true;
            } else {
                success = false;
            }
        });
        return success;
    }

    function addValidationStyling(element) {
        element.addClass('blueprint-validation');
        element.addClass('validation-error');

        //shake error message
        setTimeout(function () {
            element.removeClass('validation-error');
        }, 100);
    }

    function resetValidation() {
        $('.cfm-invalid-page-title').remove();
    }

    //reset some elements when navigating backwards to page 1
    function handleWizardPage1PreRender() {
        selectedBlueprint = false;
    }

    Confluence.Blueprint.setWizard('com.adaptavist.confluence.contentFormattingMacros:cfm-blueprint-item', function (wizard) {
        wizard.on('submit.cfmBlueprintWizardPage1', handleWizardPage1Submit);
        wizard.on('submit.cfmBlueprintWizardPage2', handleWizardPage2Submit);
        wizard.on('submit.cfmBlueprintWizardPage3', handleWizardPage3Submit);
        wizard.on('pre-render.cfmBlueprintWizardPage1', handleWizardPage1PreRender);
        wizard.on('post-render.cfmBlueprintWizardPage1', handleWizardPage1Input);
        wizard.on('post-render.cfmBlueprintWizardPage2', handleWizardPage2Input);
        wizard.on('post-render.cfmBlueprintWizardPage3', handleWizardPage3Input);
    });
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.almworks.structure.confluence.helper:structure-confluence-helper-resources', location = '/js/structure-confluence-helper.js' */
/* global require */
(function() {
  var $ = require('jquery');
  var enabled = window.name === 'structure-confluence-page';
  if (!enabled) return;

  var traceFocusEnabled = false;

  var structureMessageChannel;

  try {
    
    applyOurStyle();
    makeLinksOpenInNewWindow();

    structureMessageChannel = new StructureMessageChannel();
    $(function() {
      structureMessageChannel.broadcast({name: 'load', pageId: getPageId()});
      structureMessageChannel.receive('saveDraft', saveDraft);
    });
    
    postFocusBlur(structureMessageChannel);
    postKnownShortcuts(structureMessageChannel);
    postMouseEvents(structureMessageChannel);
    structureMessageChannel.receive('focus', setFocus);
    // Must not be inside $(): when the user chooses "Resume editing" to edit draft, page is reloaded and the event is 
    //  fired from inside $(), so we won't catch it.
    suppressEditorDirtyWarning();
    suppressCommentDirtyWarning();
    traceIframeFocus();

    fixAdjustMainHeaderSizeLoop();

  } catch (e) {
    log('structure-confluence-helper failed', e);
  }

  // We need to hide extra elements - application header and menus, sidebar, footer.
  // It's important that we do it here
  function applyOurStyle() {
    $('head').append('<style type="text/css" id="structure-helper-bare">' +
        // Account for stupid aui-responsive-header which breaks when no menu items are visible.
        // The failing branch is not triggered if the header is there, but invisible.
      '#header {' +
      '  visibility: hidden !important;' +
      '  position: absolute !important;' +
      '  height: 0 !important;' +
      '}' +
      '' +
      '#header-precursor,' +
      '#footer,' +
      '.ia-splitter-left,' +
      '#splitter-sidebar,' +
      '#splitter > .vsplitbar {' +
      '  display: none !important;' +
      '}' +
      '' +
        // it is set from JS via style attribute, we override it here
      '#page .ia-splitter #main {' +
      '  margin-left: 0 !important;' +
      '}' +
      '' +
      '#main {' +
      '  border: none !important;' +
      '}' +
      '' +
      '#full-height-container, body {' +
      '  background-color: white !important;' +
      '}' +
      '' +
      '#splitter {' +
      '  height: 100% !important;' +
      '}' +
      '' +
      '#splitter-content {' +
      '  left: 0 !important;' +
      '  width: 100% !important;' +
      '  height: 100% !important;' +
      '}' +
        // Do not display top-level banners
      'body > div.aui-message {' +
      '  display: none' +
      '}' +

        // Refined Wiki STR-1270
      '#edge_design_top,' +
      '#rw_side_menu,' +
      '#rw_menu_bar_wrapper {' +
      '  display:none !important;' +
      '}' +
      '#rw_wrapper {' +
      '  margin: 0 !important;' +
      '}' +
      '#rw_main {' +
      '  width:100% !important;' +
      '  padding: 0 !important;' +
      '}' +
      '#edge_design_content {' +
      '  padding: 0 !important;' +
      '}' +
      '#rw_left_column {' +
      '  display: none !important;' +
      '}' +
      '#rw_main_column {' +
      '  margin: 0 !important;' +
      '  padding: 0 !important;' +
      '}' +
      '#rw_page_right {' +
      '  border: 0 !important;' +
      '  border-radius: 0 !important;' +
      '  -webkit-border-radius: 0 !important;' +
      '}' +
      '#rw_footer_wrapper {' +
      '  display: none !important;' +
      '}' +
      '</style>');
  }

  function makeLinksOpenInNewWindow() {
    $(safeFun(function makeLinksOpenInNewWindow0() {
      if (insertBase()) {
        // Set default target for all forms and the selected list of links:
        // - "Edit" link on the view page
        // - "Delete comment" link
        // All possible dynamically inserted forms are patched, however there is no known scenario when it's necessary - it's done just in case.
        // Despite the fact that edit-page-form is created dynamically, it's actually a clone of "inlinecommentform" form,
        // which is patched on a page load, so the edit-page-form will have correct target anyway
        $('form, a#editPageLink, a#viewPageLink, li.comment-action-remove > a, ol.aui-nav-pagination a, ul.pagination a').each(updateTargetAttr);
        attachNodeInsertionListeners();
      }
    }));

    function insertBase() {
      var newBase$;
      var oldBase$ = $('base');
      var href = null;
      if (oldBase$.length) {
        href = oldBase$.attr('href');
        log("Removing existing <base> element with target=" + oldBase$.attr('target') + " and href=" + href);
        oldBase$.remove();
      }
      var head$ = $('head');
      if (!head$.length) {
        log("No <head>, won't insert <base>");
        return false;
      }

      newBase$ = $('<base>');
      newBase$.attr('target', '_blank');
      if (href) newBase$.attr('href', href);
      head$.prepend(newBase$);
      return true;
    }

    function attachNodeInsertionListeners() {
      function updateInsertedNode(e) {
        var oe = e.originalEvent;
        if (oe && oe.animationName === 'StructurePagesNodeInserted') {
          updateTargetAttr.apply(e.target);
        }
      }

      $(document)
        .on('animationstart', updateInsertedNode)
        .on('MSAnimationStart', updateInsertedNode)
        .on('webkitAnimationStart', updateInsertedNode);
    }

    function updateTargetAttr() {
      var e$ = $(this);
      if (!e$.attr('target')) {
        e$.attr('target', '_self');
      }
    }
  }

  function StructureMessageChannel() {
    var MSG_PREFIX = 'structure.confluence.';
    var structureWindow = getStructureWindow();
    
    /**
     * Sends a message to all domains. NB: do not send informations about UI events and their data there!
     * @param {{name:string}} msg
     * */
    this.broadcast = function post(msg) {
      if (!structureWindow) return;
      try {
        msg.name = MSG_PREFIX + msg.name;
        structureWindow.postMessage(msg, '*');
      } catch (e) {
        log('structureMessageChannel failed to send ' + msg.name + ' ' + e);
      }
    };

    this.receive = function(name, handler) {
      var fullName = MSG_PREFIX + name;
      var listener = function(message) {
        var data = message && message.data;
        log('received ' + JSON.stringify(data));
        if (data && data['name'] === fullName) {
          handler(data);
        }        
      };
      window.addEventListener('message', listener, false);
    };
    
    return this;

    function getStructureWindow() {
      var parent = window.parent;
      if (parent && parent.name && parent.name.indexOf('structure-confluence-page') === 0) {
        if (parent.parent && parent.parent !== parent) {
          // topWindow.parent === topWindow
          return parent.parent;
        } else {
          log('parent window does not have parent');
        }
      } else {
        log('unknown parent window ' + (parent && parent.name) + ' ' + parent);
      }
    }
  }

  function postFocusBlur(structureMessageChannel) {
    $(window).on('focus blur', function(e) {
      structureMessageChannel.broadcast({name: e.type, iframeId: 'page-' + getPageId()});
    });
    
    // For editor iframe
    AJS.bind('rte-ready', safeFun(function postEditorFocusBlur() {
      listenNestedIframe(AJS.Rte.getEditorFrame());
    }));
    // For preview iframe
    $(document).bind('iframeAppended', safeFun(function postPreviewFocusBlur(e, iframe) {
      listenNestedIframe(iframe);
      tracePreviewIframeFocus(iframe);
    }));

    function listenNestedIframe(iframe) {
      $(iframe.contentWindow).on('focus blur', function (e) {
        structureMessageChannel.broadcast({name: e.type, iframeId: 'page-' + getPageId() + '-editor'});
      });

      // The editor should be focused now. For some reason, even though the focusing happens after our subscription,
      // we are not notified.
      structureMessageChannel.broadcast({name: 'focus', iframeId: 'page-' + getPageId() + '-editor'});
    }
  }
  
  function postKnownShortcuts(structureMessageChannel) {
    var modifiers = {shift: 1000, ctrl: 10000, alt: 100000, meta: 1000000};
    // See: Keyboard.js, keymap.js
    var shortcuts = {
      79: 'openIssue', // o
      1079: 'toggleIssueDetailsNoFocus', // Shift+o
      90: 'fullScreen.toggle', // z
      220: 'tabFocusPanel', // \
      // layouts
      110049 : 'layout.single',
      110050 : 'layout.double',
      110051 : 'layout.details',
      110052 : 'layout.history'
    };
    var disabledShortcuts = {
      67: 'createSubPage' // c
    };
    $(window).on('keydown', function(e) {
      var code = e.keyCode + modifiersFromEvent(e);
      if (!acceptTarget(e)) return true;
      if (disabledShortcuts[code]) return false;
      var action = shortcuts[code];
      if (action) {
        // todo domain-only
        structureMessageChannel.broadcast({name: 'action', action: action});
      }
    });

    function modifiersFromEvent(e) {
      var code = 0;
      if (e.shiftKey) code += modifiers.shift;
      if (e.ctrlKey) code += modifiers.ctrl;
      if (e.altKey) code += modifiers.alt;
      // workaround for stupid jQuery normalization
      if (e.originalEvent && e.originalEvent.metaKey) code += modifiers.meta;
      return code;
    }

    // Note: keypresses inside editor iframe are not captured on window, but keypresses in some other places are.
    // Known examples:
    // 1. Login form inputs.
    // 2. Page title input.
    function acceptTarget(e) {
      var target$ = $(e.target);
      // Don't handle keypresses in inputs. See also KeyboardManager.js::acceptTarget
      return !target$.is('input,textarea,select,button');
    }
  }

  function postMouseEvents() {
    $(window).on('mousemove', function(e) {
      structureMessageChannel.broadcast(mouseEventToMessage(e));
    });
    $(window).on('mouseup', function(e) {
      structureMessageChannel.broadcast(mouseEventToMessage(e));
    });

    function mouseEventToMessage(e) {
      var msg = {};
      msg.name = e.type;
      msg.date = new Date();
      var keys = ['screenX', 'screenY', 'ctrlKey', 'altKey', 'shiftKey', 'metaKey'];
      keys.forEach(function(key) {
        msg[key] = e[key];
      });
      return msg;
    }
  }
  
  function setFocus() {
    var rte = AJS && AJS.Rte;
    var editor = rte && rte.getEditor && rte.getEditor();
    if (editor) {
      rte.editorFocus(editor);
    } else {
      window.focus();
    }
  }
  
  function suppressEditorDirtyWarning() {
    AJS.bind('rte-ready', safeFun(function suppressEditorDirtyWarning0() {
      // Drafts are bound to unload message in the handler for the same event, we must execute after it, hence defer
      window.setTimeout(function() {
        var Drafts = getDrafts();
        if (Drafts) {
          Drafts.unBindUnloadMessage && Drafts.unBindUnloadMessage();
          log("Structure helper performed Confluence.Editor.Drafts.unBindUnloadMessage()");
          // Now bind save on beforeunload. Do all the same but suppress the message
          AJS.bind('beforeunload.editor', safeFun(function structureBeforeUnloadEditor() {
            // AJS.params.draftType is falsy if comment is being edited. 
            // If we proceed, we'll send invalid data to the server and cause exceptions to be raised.
            if (AJS.params && AJS.params.draftType) {
              Drafts.unloadMessage && Drafts.unloadMessage();
            }
          }));
        }
      }, 10);
    }));
  }
  
  function suppressCommentDirtyWarning() {
    // Hackety hack
    // The confirmation is shown by 'confluenceleavecomment' tinyMCE plugin, and there's no way to stop it except by 
    // mocking the things that it checks
    $(window).bind('beforeunload', safeFun(function structureBeforeUnloadComment() {
      // Only for comments. Mirroring the logic in tinymce-adapter.js::initTinyMce() which calls getProfileByContentType()
      if (AJS.Meta && AJS.Meta.get('content-type') === 'comment') {
        var Editor = Confluence && Confluence.Editor;
        var editorIsEmpty;
        if (Editor) {
          editorIsEmpty = Editor.isEmpty;
          Editor.isEmpty = returnTrue;
          // Restore back -- if we somehow end up not navigating away
          window.setTimeout(function () {
            Editor.isEmpty = editorIsEmpty;
          }, 10);
        }
      }
    }));
  }
  
  function saveDraft() {
    var Drafts = getDrafts();
    if (!Drafts) return;
    // If comment is being edited, we're also called here. If we proceed, we'll send invalid data to the server
    // and cause exceptions to be raised.
    if (!(AJS.params && AJS.params.draftType)) return; 
    // Copied from page-editor-drafts.js::unloadMessage() @ Confluence 5.7.
    Drafts.save({
      // Skip error handler because it shows a BRIGHT RED draft save ERROR due to the browser
      // cancelling in-flight ajax requests during page unload even if the server received the
      // draft request and saved it successfully but did not respond in time.
      skipErrorHandler: true
    });
  }
  
  function getDrafts() {
    return Confluence && Confluence.Editor && Confluence.Editor.Drafts;
  }
  
  function getPageId() {
    return AJS && AJS.Meta && parseInt(AJS.Meta.get('page-id'), 10) || '*';    
  }

  function traceIframeFocus() {
    if (traceFocusEnabled) {
      window.setInterval(function traceIframeFocusJob() {
        trace('[iframe] ' + describeActiveElement(document));
      }, 500);
    }
  }

  function tracePreviewIframeFocus(iframe) {
    if (traceFocusEnabled) {
      var interval = window.setInterval(function tracePreviewIframeFocusJob() {
        if (iframe.contentDocument) {
          trace('[preview] ' + describeActiveElement(iframe.contentDocument));
        } else {
          window.clearInterval(interval);
        }
      }, 500);
    }
  }

  function describeActiveElement(doc) {
    var desc = doc.hasFocus() ? 'hasFocus ' : '';
    var activeElem = doc.activeElement;
    desc += activeElem.tagName;
    if (activeElem.id) desc += "#" + activeElem.id;
    if (activeElem.className) desc += "." + activeElem.className;
    return desc;
  }

  function fixAdjustMainHeaderSizeLoop() {
    // PAGES-219 -- this function seems to do useful work (maintaining fixed width of the header) only
    // when sidebar is resized. It also causes a debounced cycle in certain cases within Pages.
    // Since we're hiding the sidebar, it seems to be no longer needed and it fixes the problem.
    $(function() {
      try {
        require('confluence/fh/utils/dom').adjustMainHeaderSize = function() {};
      } catch (e) {
        log('failed to fix loop with adjustMainHeaderSize()', e);
      }
    });
  }

  // Utilities
  
  function returnTrue() {
    return true;
  }
  
  function safeFun(fun) {
    return function () {
      try {
        fun.apply(this, arguments);
      } catch (e) {
        log('structure-helper function failed', e);
      }
    }
  }

  function trace(msg) {
    if (traceFocusEnabled) {
      log(msg);
    }
  }

  function log(msg, e) {
    try {
      if (console && console.log) {
        if (e) msg += ' ' + e + ' ' + e.stack;
        console.log(msg);
      }
    } catch (ignored) {}
  }
})();

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:common-header-resources', location = '/includes/js/header-user-menu.js' */
define("confluence/header-user-menu",["jquery","confluence/meta","underscore"],function(a,c,b){function d(){var b=c.get("current-user-avatar-uri-reference");a("#user-menu-link").find(".aui-avatar-inner img").attr("src",b)}return function(){b.defer(d)}});require("confluence/module-exporter").safeRequire("confluence/header-user-menu",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:general-analytics-bindings', location = '/includes/js/analytics-bindings.js' */
define("confluence/analytics-bindings",["jquery","confluence/analytics-support"],function(b,d){return function(){function e(a,c){b(a).on("click",".view-historical-version-trigger",function(){d.publish("confluence.page.view-historical.from-"+(c||"unknown"))})}function f(a,c){b(a).on("click",".restore-historical-version-trigger",function(){d.publish("confluence.page.restore-historical.from-"+(c||"unknown"))})}function g(a,c){b("#header .aui-header-secondary "+a).on("click",function(){var a=b(this).hasClass("aui-dropdown2-active")?
"expanded":"collapsed";d.publish("confluence.header.dropdown."+c,{state:a})})}e("#page-history-warning","navigation");e("#page-history-container","history");e(".diff-menu","diff");f("#page-history-warning","navigation");f("#page-history-container","history");g("#admin-menu-link","administration");g("#user-menu-link","profile")}});require("confluence/module-exporter").safeRequire("confluence/analytics-bindings",function(b){require("ajs").toInit(b)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-on-space-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-on-space.js' */
(function($){
    $(function () {
        function initBlueprint() {
            var BLUEPRINT_SPACE_KEY = "com.atlassian.confluence.extra.team-calendars:tc-on-space-blueprint-webitem";
            Confluence.Blueprint.setDirectCallback(BLUEPRINT_SPACE_KEY, function(e, state) {
                state.finalUrl = Confluence.getContextPath() + "/display/" + state.spaceKey + "/calendars?src=sidebar&openAddCalDialog=true";
            });
        }

        initBlueprint();
    });
}(AJS.$));

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload-read-only-mode-bootstrap', location = 'main/quick-reload-read-only-mode-bootstrap.js' */
require(["ajs","confluence/dark-features","confluence-quick-reload/main/quick-reload-manager","confluence-quick-reload/handlers/quick-reload-read-only-mode"],function(b,c,a,d){b.toInit(function(){c.isEnabled("quickreload.disabled")||(a.addHandler(d),a.enable())})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'templates/anchor.soy' */
// This file was automatically generated from anchor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace MyWork.Templates.Anchor.
 */

if (typeof MyWork == 'undefined') { var MyWork = {}; }
if (typeof MyWork.Templates == 'undefined') { MyWork.Templates = {}; }
if (typeof MyWork.Templates.Anchor == 'undefined') { MyWork.Templates.Anchor = {}; }


MyWork.Templates.Anchor.tasksFeatureDiscovery = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('See the tasks assigned to you, or created by you, in the Tasks tab of your profile.') + '</p><ul class="mw-tasks-discovery-controls"><li><a id="mw-tasks-discovery-view" href="' + soy.$$escapeHtml(opt_data.tasksUrl) + '" class="aui-button aui-style"><p>' + soy.$$escapeHtml('View Tasks') + '</p></a></li><li><a id="mw-tasks-discovery-dismiss" href="#">' + soy.$$escapeHtml('Dismiss') + '</a></li></ul>';
};
if (goog.DEBUG) {
  MyWork.Templates.Anchor.tasksFeatureDiscovery.soyTemplateName = 'MyWork.Templates.Anchor.tasksFeatureDiscovery';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/miniview-anchor.js' */
var MW=MW||{$:AJS.$||Zepto};MW.MV={};AJS.toInit(function(){if(AJS.Meta&&!AJS.Meta.get("remote-user")){return}MW.MV.AnchorManager=function(){var l=contextPath,h=l+"/plugins/servlet/notifications-miniview",p=0,e=/[?&]show-miniview/.test(window.location.search);function r(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s="[\\?\\#&]"+t+"=([^&#]*)";var v=new RegExp(s);var u=v.exec(window.location.search);if(u!==null){return decodeURIComponent(u[1].replace(/\+/g," "))}}var o=r("show-miniview");if(o){h+="#notification/"+o}function q(){var s="badge-i aui-icon aui-icon-small aui-iconfont-notification";MW.$("#notifications-anchor").html('<div class="'+s+'"></div><span class="badge-w"><span class="badge"></span></span>').attr("title","Open Notifications")}function f(u){var t=false,s;return function(){if(t){return s}t=true;s=u.apply(this,arguments);return s}}var n=f(function(){MW.Dialog.getOptions().closeOthers=false;MW.Dialog.preload=true;MW.Dialog.show();MW.Dialog.hide();MW.Dialog.getOptions().closeOthers=true});function k(s){return s<=9?s:"9+"}function j(s){var t=MW.$("#notifications-anchor"),u=t.find(".badge"),v=t.find(".aui-icon");u.html(k(s));p=s;if(s>0){t.addClass("unread").removeClass("read");if(t.is(":visible")&&!e){n()}}else{t.addClass("read").removeClass("unread")}}function m(){c("notifications",h);d()}function d(){MW.$(document).keydown(function(s){if(AJS.InlineDialog.current&&s.which==27&&!MW.$(s.target).is(":input")){AJS.InlineDialog.current.hide()}})}function i(){MW.$("#header-menu-bar").find(".ajs-drop-down").each(function(){this.hide()})}function c(x,v){var w;var u=function(){w=this};var s=function(){if(this.preload!==true){var y=JSON.stringify({markAllRead:true});MW.$("#"+x+"-miniview-iframe")[0].contentWindow.postMessage(y,"*")}};if(!window.addEventListener){window.attachEvent("onmessage",t)}else{window.addEventListener("message",t,false)}function t(A){function B(C){return C===location.protocol+"//"+location.host}if("escKey"===A.data){w.hide();MW.$("#notifications-anchor").focus();document.activeElement.blur()}else{if("getParentConfig"===A.data&&B(A.origin)){var z=JSON.stringify({parentConfig:{parentUrl:location.href,preload:MW.Dialog.preload,unread:p}}),y=MW.$("#"+x+"-miniview-iframe")[0].contentWindow;y.postMessage(z,"*");if(MW.Dialog.preload){MW.Dialog.preload=false}else{y.focus()}}}}MW.Dialog=AJS.InlineDialog(MW.$("#"+x+"-anchor"),x+"-miniview",function(B,z,C){if(MW.$(B).children().length===0){MW.$(B).append(MW.$('<iframe id="'+x+'-miniview-iframe" src="'+v+'" frameborder="0"></iframe>'))}else{var A=JSON.stringify({unread:p}),y=MW.$("#"+x+"-miniview-iframe")[0].contentWindow;y.postMessage(A,"*");setTimeout(function(){y.focus()},100)}i();C()},{width:500,height:520,hideDelay:null,initCallback:u,hideCallback:s,noBind:true});MW.Tasks=(function(){var A=300;var z=20;var B=16;var G;var D=AJS.$("#user-menu-link");var C=AJS.$("#user-menu-link-content");var y=C.find("#view-mytasks-link");var E=function(J,H,K){var I=MyWork.Templates.Anchor.tasksFeatureDiscovery({tasksUrl:AJS.contextPath()+"/plugins/inlinetasks/mytasks.action"});J.html(I);J.find("#mw-tasks-discovery-dismiss").click(function(){G.hide()});K()};var F=function(){MW.Dialog.hide();var J=function(){return C.is(":visible")};if(!J()){D.trigger("aui-button-invoke")}var H=function(){G.hide()};C.one("aui-dropdown2-hide",H);G=AJS.InlineDialog(y,"my-tasks-discovery",E,{hideCallback:function(){G.unbind("click focusin mousedown",I);C.unbind("aui-dropdown2-hide",H);if(J()){D.trigger("aui-button-invoke")}MW.$("#inline-dialog-my-tasks-discovery").remove()},gravity:"w",useLiveEvents:true,width:A,noBind:true});C.find(".user-item.active").removeClass("active");y.addClass("active");y.focus();var I=function(K){K.stopPropagation()};G.on("click focusin mousedown",I);G.show()};return{closeAndDiscoverMyTasks:F}})();MW.$("#"+x+"-anchor").click(function(y){y.preventDefault();if(MW.$("#"+x+"-miniview-iframe").is(":visible")){MW.Dialog.hide()}else{MW.Dialog.show()}});if(e){MW.$("#"+x+"-anchor").click()}}function g(){q();m()}return{setupAnchors:g,updateNotificationCount:j}}();MW.MV.AnchorManager.setupAnchors();var b=new MW.AnchorUtil(MW.$,contextPath,MW.MV.AnchorManager.updateNotificationCount);b.setupAnchors();MW.$("#notifications-anchor").click(function(){AJS.trigger("analytics",{name:"mywork.host.button.clicked.notifications",data:{}});MW.MV.AnchorManager.updateNotificationCount(0)});var a=function(){if(document.hidden){b.stopRequests(true)}else{b.startRequests()}};document.addEventListener("visibilitychange",a,false);if(typeof document.hidden==="undefined"){MW.$(window).focus(function(){b.startRequests()})}MW.$("body").click(function(){b.startRequests()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/util/anchor-util.js' */
MW.AnchorUtil=function(d,k,e){var f=30000,i=f,s,p=k+"/rest/mywork/latest/status/notification/count";var r=new Date().getTime();var b=5*60*1000;var t=1000*60*5;var h=1.25;var c=0;function q(u){window.clearInterval(s);s=undefined;if(u===true){i=f}}function o(){return(new Date().getTime()-r)<t}function m(){if(!o()||!s){l()}r=new Date().getTime()}function l(){if(s){clearTimeout(s)}s=setTimeout(function(){g()},c=n(c))}function a(w,u){var v=w*1000;b=u*1000||b;if(v&&v!=i){i=v;m()}}function n(u){return Math.min(o()?i:u*h,b)}function g(u){MW.$.getJSON(p+((u)?"?pageid="+u:""),function(w){a(w.timeout,w.maxTimeout);var v=w.count;e(v)});l()}function j(){var u=AJS&&AJS.Meta&&AJS.Meta.get&&(AJS.Meta.get("content-type")==="page"||AJS.Meta.get("content-type")==="blogpost");if(u){g(AJS.Meta.get("page-id"))}else{g()}m()}return{setupAnchors:j,startRequests:m,stopRequests:q,updateAnchors:g}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-select2', location = 'src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__63e2d0d906dfc9cc19eb6e8389c4f5a3=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-select2', location = 'src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__7dc2a1c33ff678de05f5aa1a9414d108=function(){"use strict";var b=__700a145ba3db9966cc95664c892049f8,d=b&&b.__esModule?b:{"default":b};__63e2d0d906dfc9cc19eb6e8389c4f5a3;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'net.kentcom.confluence-blog-tools:blog-tools-js', location = 'soy/blog-tools.soy' */
// This file was automatically generated from blog-tools.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ConfluenceBlogTools.Templates.Soy.
 */

if (typeof ConfluenceBlogTools == 'undefined') { var ConfluenceBlogTools = {}; }
if (typeof ConfluenceBlogTools.Templates == 'undefined') { ConfluenceBlogTools.Templates = {}; }
if (typeof ConfluenceBlogTools.Templates.Soy == 'undefined') { ConfluenceBlogTools.Templates.Soy = {}; }


ConfluenceBlogTools.Templates.Soy.blog2page = function(opt_data, opt_ignored) {
  return '<!-- Render the dialog --><section role="dialog" id="blog-to-page-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" data-aui-modal="true" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Convert Blog to Page') + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('You are about to permanently move this blog into the Pages area of this Space') + '<br></p><form class="aui"><table width="100%"><tr><td width="160px"><aui-label for="blog2page-select-page">' + soy.$$escapeHtml('Select new Parent page:') + '</aui-label></td><td><input type="hidden" class="blog-tool-select-width" id="blog2page-select-page"></input></td></tr></table></form><p>' + soy.$$escapeHtml('You can leave the Parent empty, the page will be a Child of this Spaces Home page') + '<br></p></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="blog-to-page-move" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Move') + '</button><button id="blog-to-page-cancel" class="aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  ConfluenceBlogTools.Templates.Soy.blog2page.soyTemplateName = 'ConfluenceBlogTools.Templates.Soy.blog2page';
}


ConfluenceBlogTools.Templates.Soy.page2blog = function(opt_data, opt_ignored) {
  return '<!-- Render the dialog --><section role="dialog" id="page-to-blog-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" data-aui-modal="true" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Convert Page to Blog') + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('You are about to permanently move this page into the blog area of this Space') + '<br></p><form class="aui"><ul width="100%" style="list-style: none;"><li><input class="checkbox" id="p2b-children" type="checkbox">' + soy.$$escapeHtml('Convert All Children') + '</input></li><li><input class="checkbox" id="p2b-comments" type="checkbox" checked>' + soy.$$escapeHtml('Include All Comments') + '</input></li><li><input class="checkbox" id="p2b-restrictions" type="checkbox" checked>' + soy.$$escapeHtml('Keep Page Restrictions') + '</input></li></ul></form><p id="p2b-children-text">' + soy.$$escapeHtml('If this page has Children, they will be orphaned') + '<br></p><p>' + soy.$$escapeHtml('Do you want to continue?') + '<br></p></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="page-to-blog-yes" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Yes') + '</button><button id="page-to-blog-cancel" class="aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  ConfluenceBlogTools.Templates.Soy.page2blog.soyTemplateName = 'ConfluenceBlogTools.Templates.Soy.page2blog';
}


ConfluenceBlogTools.Templates.Soy.blogError = function(opt_data, opt_ignored) {
  return '<!-- Render the dialog --><section role="dialog" id="blog-tools-error" class="aui-layer aui-dialog2 aui-dialog2-small aui-dialog2-warning" data-aui-modal="true" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Blog, Page and Template Tools') + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('This plugin has an invalid license') + '<br></p><p>' + soy.$$escapeHtml('Please contact your Confluence administrator') + '<br></p></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="blog-error-ok" class="aui-button aui-button-primary">' + soy.$$escapeHtml('OK') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  ConfluenceBlogTools.Templates.Soy.blogError.soyTemplateName = 'ConfluenceBlogTools.Templates.Soy.blogError';
}


ConfluenceBlogTools.Templates.Soy.duplicatePage = function(opt_data, opt_ignored) {
  return '<!-- Render the dialog --><section role="dialog" id="blog-tools-duplicate" class="aui-layer aui-dialog2 aui-dialog2-small aui-dialog2-warning" data-aui-modal="true" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Blog, Page and Template Tools') + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('The Page or Blog Title already exists') + '<br></p><p>' + soy.$$escapeHtml('Rename the Title and try again') + '<br></p></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="blog-duplicate-ok" class="aui-button aui-button-primary">' + soy.$$escapeHtml('OK') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  ConfluenceBlogTools.Templates.Soy.duplicatePage.soyTemplateName = 'ConfluenceBlogTools.Templates.Soy.duplicatePage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'net.kentcom.confluence-blog-tools:blog-tools-js', location = 'js/blog-tools.js' */
AJS.toInit(function(){AJS.$("#main").after(ConfluenceBlogTools.Templates.Soy.blog2page());AJS.$("#main").after(ConfluenceBlogTools.Templates.Soy.page2blog());AJS.$("#main").after(ConfluenceBlogTools.Templates.Soy.blogError());AJS.$("#main").after(ConfluenceBlogTools.Templates.Soy.duplicatePage());function n(){console.log("Checking Plugin License");var q;$.ajax({type:"GET",url:AJS.params.baseUrl+"/plugins/servlet/blogTools/pluginLicenseServlet",success:function(){console.log("License OK");q=true},error:function(){console.log("License INVALID");q=false},async:false});return q}var h=n();AJS.$("#blog2page-select-page").auiSelect2({ajax:{url:AJS.params.baseUrl+"/rest/api/content/search",dataType:"json",contentType:"application/json",type:"GET",quietMillis:1000,data:function(r){var q="";if(r.length>0){q='type=page AND space="'+AJS.params.spaceKey+'" AND title~"'+r.trim()+'*"';console.log(AJS.params.baseUrl+"/rest/api/content/search?cql="+q)}return{cql:q}},results:function(r){var q=[];if(r.size>0){$.each(r.results,function(s,t){q.push({id:t.id,text:t.title})})}return{results:q}}},placeholder:"Space Home Page",dropdownCssClass:"blog-tool-select-width",formatSearching:function(){return"Start typing page name..."}}).on("select2-close",function(){setTimeout(function(){$(".select2-container-active").removeClass("select2-container-active");$(":focus").blur()},1)});AJS.$("#page-to-blog-action").click(function(q){if(h){AJS.dialog2("#page-to-blog-dialog").show()}else{AJS.dialog2("#blog-tools-error").show()}q.preventDefault()});AJS.$("#blog-to-page-action").click(function(q){if(h){$("#blog2page-select-page").select2("val","");AJS.dialog2("#blog-to-page-dialog").show();$(".select2-container-active").removeClass("select2-container-active");$(":focus").blur()}else{AJS.dialog2("#blog-tools-error").show()}q.preventDefault()});var b=false;AJS.$("#blog-error-ok").click(function(q){AJS.dialog2("#blog-tools-error").hide();q.preventDefault();if(b){b=false;location.href=AJS.params.baseUrl+"/collector/pages.action?key="+AJS.params.spaceKey}});AJS.$("#blog-to-page-move").click(function(r){var q=$("#blog2page-select-page").select2("val");console.log("ParentId: "+q);r.preventDefault();AJS.$(".aui-dialog2-content").spin();$.post(AJS.params.baseUrl+"/plugins/servlet/blogTools/blogToPageServlet",{blogId:AJS.params.pageId,parentId:q}).always(function(s,t,u){AJS.$(".aui-dialog2-content").spinStop();AJS.dialog2("#blog-to-page-dialog").hide();if(u.status===200){location.href=AJS.params.baseUrl+s}})});AJS.$("#blog-to-page-cancel").click(function(q){q.preventDefault();AJS.dialog2("#blog-to-page-dialog").hide()});AJS.$("#p2b-children").click(function(q){console.log("checkbox changed: item:"+$(this).attr("value")+" val:"+$(this).is(":checked"));if($(this).is(":checked")){AJS.$("#p2b-children-text").text("All Children of this page will be Blogged")}else{AJS.$("#p2b-children-text").text("If this page has Children, they will be Orphaned")}});function g(q,r,t,s){$.post(AJS.params.baseUrl+"/plugins/servlet/blogTools/pageToBlogServlet",{pageId:q,children:r,comments:t,restrictions:s}).success(function(u,v,w){AJS.$(".aui-dialog2-content").spinStop();AJS.dialog2("#page-to-blog-dialog").hide();if(w.status===200){location.href=AJS.params.baseUrl+u}}).error(function(v,u){AJS.$(".aui-dialog2-content").spinStop();AJS.dialog2("#page-to-blog-dialog").hide();if(v.status===409){AJS.dialog2("#blog-tools-duplicate").show()}})}AJS.$("#blog-duplicate-ok").click(function(q){AJS.dialog2("#blog-tools-duplicate").hide();q.preventDefault()});AJS.$("#page-to-blog-yes").click(function(t){t.preventDefault();AJS.$(".aui-dialog2-content").spin();var s=$("#p2b-children").is(":checked");var r=$("#p2b-comments").is(":checked");var q=$("#p2b-restrictions").is(":checked");g(AJS.params.pageId,s,r,q)});AJS.$("#page-to-blog-cancel").click(function(q){q.preventDefault();AJS.dialog2("#page-to-blog-dialog").hide()});function j(){var r=AJS.Meta.get("draft-id");var q=AJS.Meta.get("content-type");return r>0&&q=="page"}function f(){var q=AJS.Meta.get("draft-id");var s=AJS.Meta.get("space-key");var r=document.getElementById("content-title").value;if(!e(q,s,r)){console.log("Save failed - aborting");return false}$.post(AJS.params.baseUrl+"/plugins/servlet/blogTools/createBlogServlet",{draftId:q,spaceKey:s,pageTitle:r,}).success(function(t){console.log("createBlog result - SUCCESS");l();k(q,s);$(window).unbind();location.href=AJS.params.baseUrl+t}).error(function(t){console.log("createBlog result - ERROR");console.log(t);if(t.status===403){console.log("License Error")}else{if(t.status===420){console.log("Missing Title");alert("This Blog Post needs a Title")}else{if(t.status===421){console.log("Duplicate Title");alert("There is already a Blog Post with a duplicate Title")}else{alert("Internal Server error: "+t.status);console.log("Something went wrong ("+t.status+")")}}}})}function l(){var q={dataType:"json",contentId:AJS.Meta.get("content-id"),draftType:AJS.Meta.get("draft-type")};AJS.safe.post(AJS.params.baseUrl+"/json/stopheartbeatactivity.action",q,function(){AJS.log("Stop heartbeat activity on",q.draftType,"id",q.contentId)}).always(function(){})}function k(r,s){console.log("Deleting Draft: "+r);var q;$.ajax({url:AJS.params.baseUrl+"/rest/tinymce/1/drafts/discard",type:"DELETE",contentType:"application/json",async:false,dataType:"json",data:JSON.stringify({draftId:r,pageId:"0",type:"page",spaceKey:s,}),success:function(t){console.log("Discard Draft - Success");console.log(t);q=true},error:function(){console.log("Discard Draft - Error");q=false}});return q}function e(r,t,s){console.log("Saving Draft: "+r);var q;$.ajax({url:AJS.params.baseUrl+"/rest/tinymce/1/drafts",type:"POST",contentType:"application/json",async:false,dataType:"json",data:JSON.stringify({draftId:r,pageId:"0",type:"page",title:s,spaceKey:t,content:window.parent.tinyMCE.get("wysiwygTextarea").getContent(),}),success:function(u){console.log("Save Draft - Success");console.log(u);q=true},error:function(){console.log("Save Draft - Error");q=false}});return q}function i(q){console.log("Now converting to Blog, checking License");if(h){console.log("License OK, now converting");f()}else{AJS.dialog2("#blog-tools-error").show();b=true}q.preventDefault();return false}function a(q){if(q.ctrlKey&&q.keyCode=="S".charCodeAt(0)){q.preventDefault();i(q);return false}return true}function p(){console.log("Converting this Page to BLOGPOST");document.onkeydown=function(r){return a(r)};$("#rte-button-publish").after('<button id="rte-button-publish" class="aui-button aui-button-primary" tabindex="101" >Publish Blog</button>');var q=document.getElementById("rte-button-publish");q.parentNode.removeChild(q);$("#rte-button-publish").on("click",i)}function d(){console.log("Handle Restriction Macro");var r=$("iframe#wysiwygTextarea_ifr");console.log(r);var q=document.getElementById("wysiwygTextarea_ifr").document.getElementsByClassName("wysiwyg-macro");console.log("x");console.log(q);$("body#tinymce > table.wysiwyg-macro").each(function(s){console.log(s);console.log($(this));console.log(this)})}if(typeof document.forms.createpageform!=="undefined"){console.log("Create Form");if(document.getElementById("sourceTemplateId")||j()){console.log("Page Template or Page Draft");var o=$("textarea#wysiwygTextarea").val();var c=o.search('data-macro-name="page-restrictions"');var m=o.search('data-macro-name="page-to-blog-macro"');if(c>0){d()}if(m>0){setTimeout(p,3000)}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.dialog-wizard:dialog-wizard-resources', location = '/soy/dialog-wizard.soy' */
// This file was automatically generated from dialog-wizard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.DialogWizard.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.DialogWizard == 'undefined') { Confluence.Templates.DialogWizard = {}; }


Confluence.Templates.DialogWizard.pageContainer = function(opt_data, opt_ignored) {
  return '<div class="dialog-wizard-page-wrapper"><div class="dialog-wizard-page-main"></div><div class="dialog-wizard-page-description">' + ((opt_data.descriptionHeaderLink && opt_data.descriptionHeader) ? '<h3><a href=\'' + soy.$$escapeHtml(opt_data.descriptionHeaderLink) + '\' target=\'_blank\'>' + soy.$$escapeHtml(opt_data.descriptionHeader) + '</a></h3>' : (opt_data.descriptionHeader) ? '<h3>' + soy.$$escapeHtml(opt_data.descriptionHeader) + '</h3>' : '') + '<p>' + soy.$$escapeHtml(opt_data.descriptionContent) + '</p></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.DialogWizard.pageContainer.soyTemplateName = 'Confluence.Templates.DialogWizard.pageContainer';
}


Confluence.Templates.DialogWizard.waitIcon = function(opt_data, opt_ignored) {
  return '<img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif">';
};
if (goog.DEBUG) {
  Confluence.Templates.DialogWizard.waitIcon.soyTemplateName = 'Confluence.Templates.DialogWizard.waitIcon';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.dialog-wizard:dialog-wizard-resources', location = '/js/dialog-wizard.js' */
(function($){function findNextPageId(pageId,pages){var thisPageIdIndex=-1;_.each(pages,function(element,index){if(element.id==pageId){thisPageIdIndex=index;return}});return pages[thisPageIdIndex+1].id}Confluence.DialogWizard=function(dialog,finalAction){function newPage(config,pageId,soyRenderContext,wizardData,wizard){var wizardPage=_.find(config.wizard.pages,function(page){return page.id==pageId});wizard.trigger("pre-render."+pageId,{soyRenderContext:soyRenderContext,wizardData:wizardData});try{var soyTemplateFunction=eval(wizardPage.templateKey);var $soyRender=$(soyTemplateFunction(soyRenderContext))}catch(e){throw Error("wizard points to a non-existent Soy template '"+wizardPage.templateKey+"'. Check your web-resources or server logs.")}$soyRender.find("a, area, button, input, object, select, textarea").attr("tabindex","10");var $panelContent;if(wizardPage.descriptionContent){$panelContent=$(Confluence.Templates.DialogWizard.pageContainer({descriptionHeaderLink:wizardPage.descriptionHeaderLink,descriptionHeader:wizardPage.descriptionHeader,descriptionContent:wizardPage.descriptionContent}));$panelContent.addClass("with-description").find(".dialog-wizard-page-main").append($soyRender)}else{$panelContent=$soyRender}var dialogPageId=pageId;if(dialog.id=="create-dialog"){dialogPageId="create-dialog-"+pageId}var page=dialog.addPage(dialogPageId).page[dialog.curpage];page.addHeader(wizardPage.title).addPanel("SinglePanel",$panelContent,"singlePanel");page.element.find("form").submit(function(){return false});if(wizardPage.descriptionContent){page.element.find(".dialog-panel-body").css({padding:0})}Confluence.Binder.autocompleteMultiUser($soyRender);Confluence.Binder.placeholder($soyRender);function nextCallback(ev){$soyRender.find(".placeholded").val("");var pageData={};var formArray=$soyRender.parent().find("form").serializeArray();_.each(formArray,function(item){pageData[item.name]=item.value});var e=$.Event("submit."+pageId);var state={$container:$soyRender,wizardData:wizardData,pageData:pageData};var validationDeferred=$.Deferred();validationDeferred.done(function(){wizardData.pages[pageId]=pageData;var nextPageId;if(state.nextPageId){nextPageId=state.nextPageId}else{nextPageId=!wizardPage.last&&findNextPageId(pageId,config.wizard.pages)}if(!state.nextPageId&&wizardPage.last){doFinalAction(ev,state,wizardData,finalAction,wizard);dialog.popup.element.find(":input,a").filter(":visible").disable().addClass("disabled");buttons.prepend(Confluence.Templates.DialogWizard.waitIcon())}else{newPage(config,nextPageId,soyRenderContext,wizardData,wizard)}});validationDeferred.fail(function(){AJS.log("dialog aborted by on-submit callback on page: "+pageId)});state.validationDeferred=validationDeferred;wizard.trigger(e,state);if(state.async){return}if(e.isDefaultPrevented()){validationDeferred.reject();return}validationDeferred.resolve()}var buttons=dialog.addFullButtonPanel(page,nextCallback,null,wizardPage.last);buttons.find(".button-panel-back").click(function(){delete wizardData.pages[pageId]});buttons.find(".aui-button-primary").attr("tabindex","10");$soyRender.find("input, select, textarea").eq(0).focus();wizard.trigger("post-render."+pageId,{$container:$soyRender,wizardData:wizardData})}function doFinalAction(ev,state,wizardData,finalAction,wizard){if(state.finalUrl){if(ev.type==="click"&&ev.which===2){window.open(state.finalUrl)}else{window.location=state.finalUrl}}else{_.each(wizardData.pages,function(pageData){_.extend(wizardData,pageData)});delete wizardData.pages;finalAction(ev,wizardData,null,wizard)}return{success:function(callback){callback()}}}return{newPage:newPage,doFinalAction:doFinalAction}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:common-template-resources', location = 'com/atlassian/confluence/plugins/blueprint/common/soy/common-templates.soy' */
// This file was automatically generated from common-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Blueprints.Common.Index.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Common == 'undefined') { Confluence.Blueprints.Common = {}; }
if (typeof Confluence.Blueprints.Common.Index == 'undefined') { Confluence.Blueprints.Common.Index = {}; }


Confluence.Blueprints.Common.Index.detailsSummaryMacro = function(opt_data, opt_ignored) {
  return '<ac:macro ac:name="detailssummary"><ac:parameter ac:name="label">' + soy.$$escapeHtml(opt_data.label) + '</ac:parameter><ac:parameter ac:name="spaces">' + soy.$$escapeHtml(opt_data.spaces) + '</ac:parameter><ac:parameter ac:name="firstcolumn">' + soy.$$escapeHtml(opt_data.firstcolumn) + '</ac:parameter><ac:parameter ac:name="headings">' + soy.$$escapeHtml(opt_data.headings) + '</ac:parameter><ac:parameter ac:name="blankTitle">' + soy.$$escapeHtml(opt_data.blankTitle) + '</ac:parameter><ac:parameter ac:name="blankDescription">' + soy.$$escapeHtml(opt_data.blankDescription) + '</ac:parameter><ac:parameter ac:name="contentBlueprintId">' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '</ac:parameter><ac:parameter ac:name="blueprintModuleCompleteKey">' + soy.$$escapeHtml(opt_data.blueprintModuleCompleteKey) + '</ac:parameter><ac:parameter ac:name="createButtonLabel">' + soy.$$escapeHtml(opt_data.createButtonLabel) + '</ac:parameter></ac:macro>';
};
if (goog.DEBUG) {
  Confluence.Blueprints.Common.Index.detailsSummaryMacro.soyTemplateName = 'Confluence.Blueprints.Common.Index.detailsSummaryMacro';
}


Confluence.Blueprints.Common.Index.createFromTemplateMacro = function(opt_data, opt_ignored) {
  return '<ac:macro ac:name="create-from-template"><ac:parameter ac:name="blueprintModuleCompleteKey">' + soy.$$escapeHtml(opt_data.moduleKey) + '</ac:parameter><ac:parameter ac:name="buttonLabel">' + soy.$$escapeHtml(opt_data.buttonLabel) + '</ac:parameter><ac:parameter ac:name="spaceKey">' + soy.$$escapeHtml(opt_data.spaceKey) + '</ac:parameter><ac:parameter ac:name="templateName">' + soy.$$escapeHtml(opt_data.templateName) + '</ac:parameter></ac:macro>';
};
if (goog.DEBUG) {
  Confluence.Blueprints.Common.Index.createFromTemplateMacro.soyTemplateName = 'Confluence.Blueprints.Common.Index.createFromTemplateMacro';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/how-to.soy' */
// This file was automatically generated from how-to.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Blueprints.Meeting.Notes.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Meeting == 'undefined') { Confluence.Blueprints.Meeting = {}; }
if (typeof Confluence.Blueprints.Meeting.Notes == 'undefined') { Confluence.Blueprints.Meeting.Notes = {}; }


Confluence.Blueprints.Meeting.Notes.howTo = function(opt_data, opt_ignored) {
  return '<h1>' + soy.$$escapeHtml('With meeting notes you can...') + '</h1><ol class="howto-steps"><li class="howto-step"><div><h3>' + soy.$$escapeHtml('Crowd-source your agenda') + '</h3><p>' + soy.$$escapeHtml('Distribute an agenda and keep meetings focused.') + '</p></div></li><li class="howto-step"><div><h3>' + soy.$$escapeHtml('Capture meeting minutes') + '</h3><p>' + soy.$$escapeHtml('Take notes and make them available to everyone.') + '</p></div></li><li class="howto-step"><div><h3>' + soy.$$escapeHtml('Create and assign tasks') + '</h3><p>' + soy.$$escapeHtml('Assign action items for attendees to work on afterward.') + '</p></div></li></ol>';
};
if (goog.DEBUG) {
  Confluence.Blueprints.Meeting.Notes.howTo.soyTemplateName = 'Confluence.Blueprints.Meeting.Notes.howTo';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/user-mention.soy' */
// This file was automatically generated from user-mention.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Meeting.Notes.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Meeting == 'undefined') { Confluence.Templates.Meeting = {}; }
if (typeof Confluence.Templates.Meeting.Notes == 'undefined') { Confluence.Templates.Meeting.Notes = {}; }


Confluence.Templates.Meeting.Notes.userMention = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.userkey) ? '<li><p><ac:link><ri:user ri:userkey="' + soy.$$escapeHtml(opt_data.userkey) + '" /></ac:link></p></li><li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml('@mention a person to add them as an attendee and they will be notified.') + '</ac:placeholder></p></li>' : '<li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml('@mention a person to add them as an attendee and they will be notified.') + '</ac:placeholder></p></li>');
};
if (goog.DEBUG) {
  Confluence.Templates.Meeting.Notes.userMention.soyTemplateName = 'Confluence.Templates.Meeting.Notes.userMention';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap-init.js' */
require(["atlassian-whisper/bootstrap"],function(a){a()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap.js' */
define("atlassian-whisper/bootstrap",["wrm/require"],function(a){return function(){var c=require("wrm/data").claim("com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap.WhisperData");if(!c||c.hasMessages!==true){return}var b=function(){try{localStorage.setItem("hermes.config.delivery-url",AJS.contextPath()+"/rest/whisper/1/messages");localStorage.setItem("hermes.config.store-url",AJS.contextPath()+"/rest/whisper/1/properties")}catch(d){return}require(["atlassian-whisper/hermes-init"],function(e){e(c)},undefined,c.syncInit)};if(c.syncInit){b()}else{AJS.$(function(){a("wr!com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-hermes",b)})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-questions:create-content-resources', location = 'widget/createcontent/ask-question.js' */
(function(b){function a(){var e="com.atlassian.confluence.plugins.confluence-questions:ask-a-question-blueprint-webitem";Confluence.Blueprint.setDirectCallback(e,function(g,f){f.finalUrl=Confluence.getContextPath()+"/questions/ask?src=createdialog"});function d(i,h){var g;if(h){if(h.config){g=h.config}else{if(h.item){g=h.item.data()}}}var f=g&&g.itemModuleCompleteKey||null;b(".create-dialog-body .space-select").select2("enable",f!==e)}AJS.bind(Confluence.Dialogs.Events.ITEM_SELECTED,d)}function c(){var d="com.atlassian.confluence.plugins.confluence-questions:ask-a-space-question-blueprint-webitem";Confluence.Blueprint.setDirectCallback(d,function(g,f){f.finalUrl=Confluence.getContextPath()+"/display/"+f.spaceKey+"/questions/ask?src=createdialog"})}a();c()}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-questions:util-resources', location = 'util/util.soy' */
// This file was automatically generated from util.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CQ.Templates.util.
 */

if (typeof CQ == 'undefined') { var CQ = {}; }
if (typeof CQ.Templates == 'undefined') { CQ.Templates = {}; }
if (typeof CQ.Templates.util == 'undefined') { CQ.Templates.util = {}; }


CQ.Templates.util.metaData = function(opt_data, opt_ignored, opt_ijData) {
  return '' + CQ.Templates.util.meta({prefix: 'ajs-', meta: opt_data.metaData}, null, opt_ijData);
};
if (goog.DEBUG) {
  CQ.Templates.util.metaData.soyTemplateName = 'CQ.Templates.util.metaData';
}


CQ.Templates.util.meta = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.meta) {
    var datumList9 = soy.$$getMapKeys(opt_data.meta);
    var datumListLen9 = datumList9.length;
    for (var datumIndex9 = 0; datumIndex9 < datumListLen9; datumIndex9++) {
      var datumData9 = datumList9[datumIndex9];
      output += '<meta name="' + ((opt_data.prefix) ? soy.$$escapeHtml(opt_data.prefix) : '') + soy.$$escapeHtml(datumData9) + '" content="' + soy.$$escapeHtml(opt_data.meta[datumData9]) + '">';
    }
  }
  return output;
};
if (goog.DEBUG) {
  CQ.Templates.util.meta.soyTemplateName = 'CQ.Templates.util.meta';
}


CQ.Templates.util.actionErrors = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.actionErrors && opt_data.actionErrors.length > 0) {
    var param25 = '<ul>';
    var errorList27 = opt_data.actionErrors;
    var errorListLen27 = errorList27.length;
    for (var errorIndex27 = 0; errorIndex27 < errorListLen27; errorIndex27++) {
      var errorData27 = errorList27[errorIndex27];
      param25 += '<li>' + soy.$$escapeHtml(errorData27) + '</li>';
    }
    param25 += '</ul>';
    output += aui.message.warning({titleContent: 'The following error(s) occurred:', closeable: 'true', id: 'messageIDattribute', content: param25}, null, opt_ijData);
  }
  return output;
};
if (goog.DEBUG) {
  CQ.Templates.util.actionErrors.soyTemplateName = 'CQ.Templates.util.actionErrors';
}


CQ.Templates.util.fieldErrors = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  if (opt_ijData.fieldErrors && opt_ijData.fieldErrors[opt_data.field]) {
    var errorList37 = opt_ijData.fieldErrors[opt_data.field];
    var errorListLen37 = errorList37.length;
    for (var errorIndex37 = 0; errorIndex37 < errorListLen37; errorIndex37++) {
      var errorData37 = errorList37[errorIndex37];
      output += aui.form.fieldError({message: ' + errorData37 + '}, null, opt_ijData);
    }
  }
  return output;
};
if (goog.DEBUG) {
  CQ.Templates.util.fieldErrors.soyTemplateName = 'CQ.Templates.util.fieldErrors';
}


CQ.Templates.util.dataAttributes = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.attributes) {
    var keyList44 = soy.$$getMapKeys(opt_data.attributes);
    var keyListLen44 = keyList44.length;
    for (var keyIndex44 = 0; keyIndex44 < keyListLen44; keyIndex44++) {
      var keyData44 = keyList44[keyIndex44];
      output += (keyData44.indexOf('data-') != -1) ? soy.$$escapeHtml(keyData44) + '="' + soy.$$escapeHtml(opt_data.attributes[keyData44]) + '"' : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  CQ.Templates.util.dataAttributes.soyTemplateName = 'CQ.Templates.util.dataAttributes';
}


CQ.Templates.util.contentMeta = function(opt_data, opt_ignored, opt_ijData) {
  var output = '<div class="cq-content-meta ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><ul>';
  var itemList58 = opt_data.items;
  var itemListLen58 = itemList58.length;
  for (var itemIndex58 = 0; itemIndex58 < itemListLen58; itemIndex58++) {
    var itemData58 = itemList58[itemIndex58];
    output += '<li class="' + ((itemData58.styleClass) ? 'cq-meta-li-' + soy.$$escapeHtml(itemData58.styleClass) : '') + ' ' + ((itemData58.id) ? 'cq-meta-li-' + soy.$$escapeHtml(itemData58.id) : '') + '"><a ' + ((itemData58.id) ? 'id="' + soy.$$escapeHtml(itemData58.id) + '"' : '') + ' href="' + soy.$$escapeHtml(itemData58.url) + '" class="' + soy.$$escapeHtml(itemData58.styleClass) + '"' + CQ.Templates.util.dataAttributes({attributes: itemData58.params}, null, opt_ijData) + '>' + ((itemData58.params && itemData58.params['iconClass']) ? '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(itemData58.params['iconClass']) + '"></span>&nbsp;' : '') + soy.$$escapeHtml(itemData58.label) + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  CQ.Templates.util.contentMeta.soyTemplateName = 'CQ.Templates.util.contentMeta';
}


CQ.Templates.util.compactInteger = function(opt_data, opt_ignored, opt_ijData) {
  return '' + ((opt_data.value > 999) ? '<div class="' + soy.$$escapeHtml(opt_data.extraClasses) + ' cq-tooltip" data-value="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.value) + '">' + soy.$$escapeHtml(require('cq/util/util').formatInteger(opt_data.value)) + '</div>' : '<div class="' + soy.$$escapeHtml(opt_data.extraClasses) + '" data-value="' + soy.$$escapeHtml(opt_data.value) + '">' + soy.$$escapeHtml(opt_data.value) + '</div>');
};
if (goog.DEBUG) {
  CQ.Templates.util.compactInteger.soyTemplateName = 'CQ.Templates.util.compactInteger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-hierarchy-plugin:confluence-copy-page-hierarchy-plugin-loader', location = 'js/loader.js' */
/**
 * Async resources loader for copy-page-hierarchy resources.
 */
require([
    'ajs',
    'wrm',
    'confluence/legacy'
], function (AJS, WRM, Confluence) {
    var COPY_CONTEXT = 'confluence-copy-page-hierarchy';
    var DELETE_CONTEXT = 'confluence-delete-page-hierarchy';

    AJS.toInit(function ($) {
        var $toolsCopyLink = $('#action-copy-page-link');
        var $toolsDeleteLink = $('#action-remove-content-link');

        _loadResourcesAsync($toolsCopyLink, COPY_CONTEXT);
        _loadResourcesAsync($toolsDeleteLink, DELETE_CONTEXT);
        _checkInProgressDeleteFlow($toolsDeleteLink);
    });

    /**
     * Loads the require resources for either copy or delete
     * @param {jQuery} $button The button that loads the resources
     * @param {string} context The WRM resource context to load
     * @returns {undefined}
     * @private
     */
    function _loadResourcesAsync($button, context) {
        if ($button.length) {
            $button.off('click');
            $button.on('click', function (e) {
                e.preventDefault();
                _loadResources($button, context);
            });
        }
    }

    /**
     * Function handler to run when the delete or copy button is clicked
     * @param {jQuery} $button The button that loads the resources
     * @param {string} context The WRM resource context to load
     * @returns {undefined}
     * @private
     */
    function _loadResources($button, context) {
        var $body = $('body');
        $button.off('click');

        var loadingIndicator = Confluence.PageLoadingIndicator($body);
        loadingIndicator.show();

        AJS.debug('Loading ' + context + ' resources...');
        WRM.require(['wrc!' + context], function () {
            loadingIndicator.hide();
            $button.addClass('confluencePageHierarchy');
            AJS.debug('Loaded ' + context + ' resources.');
        });
    }

    /**
     * Checks to see if there is a flow in progress based on url parameters
     * and loads the resources if the flow is in progress.
     * @param {jQuery} $toolsDeleteLink The Delete button, if present
     * @returns {undefined}
     * @private
     */
    function _checkInProgressDeleteFlow($toolsDeleteLink) {
        var hash = window.location.hash;
        if (hash.indexOf('delete-complete') === 1) {
            _loadResources($toolsDeleteLink, DELETE_CONTEXT);
        }
    }
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/jirachart.js' */
AJS.toInit(function(){AJS.$(".jira-chart-macro-img").load(function(a){AJS.log("Jira Chart Macro - chart image loaded");AJS.$(".insert-jira-chart-macro-button",window.parent.document).enable()}).error(function(d){AJS.log("Jira Chart Macro - chart image loaded error");AJS.$(".insert-jira-chart-macro-button",window.parent.document).disable();var e=AJS.$(d.target);var c=e.parent();var b=c.parent();c.remove();var a="Unable to render Jira chart macro due to an execution error.";AJS.messages.error(b,{body:a})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/twodimensionalchart-showlink.js' */
var TwoDimensionalShowLink=(function(e){var d=function(i){var h=e("#two-dimensional-chart-"+i);var g=h.position();e("<div />",{id:"twodimensional-dark-layout-"+i,"class":"jim-sortable-dark-layout",css:{top:g.top+"px",left:g.left+"px",width:h.width()+"px",height:h.height()+"px"}}).appendTo(h.parent())};var a=function(g){e("#twodimensional-dark-layout-"+g).remove()};var b=function(){var h=e(this).attr("data-chart-id");d(h);var g={pageId:e("#chart-page-id-"+h).val(),wikiMarkup:e("#chart-wiki-"+h).val(),isShowMore:e(this).attr("data-is-show-more")};AJS.$.ajax({type:"POST",dataType:"html",url:Confluence.getContextPath()+"/plugins/servlet/twoDimensionalShowMoreRenderer",data:g,success:function(i){if(e(i).find(".aui-message.error").length){var j=e(i).find(".message").text();e("#two-dimensional-chart-"+h).find(".show-error").html(j)}else{var k=e(i).find(".show-link-container a").attr("data-chart-id");e("#two-dimensional-chart-"+h).replaceWith(i);c(k)}a(h)},error:function(){e("#two-dimensional-chart-"+h).find(".show-error").html("Unable to render Jira chart macro. Execution has timed out.");a(h)}})};var c=function(g){e("#show-link-"+g).on("click",b)};var f=function(){e(".show-link-container a").each(function(){c(e(this).attr("data-chart-id"))})};return{init:f}})(AJS.$);AJS.$(function(){TwoDimensionalShowLink.init()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:synchrony-util', location = '/js/synchrony-util.js' */
define("confluence-collaborative-editor-plugin/synchrony-util",["ajs","jquery","underscore","confluence/meta","confluence/legacy"],function(k,g,x,v,p){var t;function b(z){var y=v.get(z);if(y===undefined){y=g('meta[name="ajs-'+z+'"]').attr("content");if(y!==undefined){v.set(z,y)}else{console.error("Missing '"+z+"' metadata value");if(d()){k.trigger("editor.error.message",{messageKey:"collaborative-editor-load-failure",message:k.I18n.getText("editor.collaborative-editing.refresh-editor.error"),close:"manual"})}}}return y}function i(){return"/"+b("synchrony-app-id")+"/confluence-"+p.getContentId()}function s(){return p.getContentId()!=="0"}function a(){return s()}function o(){return b("synchrony-base-url").split(",")}function f(){return(t?t:o()[0])+"/v1"}function r(){return b("use-xhr-fallback")}function q(y,z){return y+"/resources"+z}function l(z,y){return x.last(z.filter(function(A){return A.meta&&A.meta[y]}))}function e(z,y){return z.some(function(A){return A.meta&&A.meta.type===y})}function u(z,y){return z.some(function(A){return A.meta&&A.meta.trigger===y})}function n(){return Array.prototype.slice.call(arguments)}function j(y){p.debugTime&&p.debugTime(y)}function c(y){p.debugTimeEnd&&p.debugTimeEnd(y)}function w(y){return y+"/heartbeat"}function m(A){var z=g.Deferred();var y=o();h(z,A,y);return z.promise()}function h(y,C,A){if(A.length===0||C.length===0){y.reject();return}var z=A[0];var B=g.ajax({url:w(z),cache:false});B.done(function(E,H,D){if(D.status===200){t=z;var G=A.slice(1).length>0?"primary":"secondary";var F=t.indexOf("synchrony-proxy")>0?"synchrony-proxy":"synchrony-direct";v.set("synchrony-connection-order",G);v.set("synchrony-connection-type",F);g.when.apply(this,C.map(function(I){return g.ajax({url:q(z,I),dataType:"script",cache:true})})).then(function(){y.resolve()})}else{h(y,C,A.slice(1))}}).fail(function(){h(y,C,A.slice(1))})}function d(){return k.Rte.getEditor()&&k.Rte.getEditor().initialized}return{retrieveMetadata:b,getEntityId:i,synchronyReady:a,getServiceUrl:f,getXhrFallbackFlag:r,getLatestRevisionWithAttr:l,hasRevisionType:e,hasRevisionTrigger:u,asArray:n,time:j,timeEnd:c,loadScript:m,isEditorInitialised:d}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:synchrony-content', location = '/js/synchrony-content.js' */
define("confluence-collaborative-editor-plugin/synchrony-content",["jquery","underscore","ajs","confluence/meta","confluence/legacy","confluence-collaborative-editor-plugin/synchrony-util"],function(d,s,h,n,j,f){var q;function k(t){return t==="dummy-sync-rev"?null:t}function b(u,t){return"<body data-title='"+s.escape(u)+"'>"+t+"</body>"}function e(t){return !!d("<div>"+t+"</div>").find(".fatal-render-error").length}function r(u){if(u.syncRevSource==="limited"){return{error:"limited-mode"}}var v=u.title;var t=u.editorContent;return{title:v,raw:t,html:b(v,t),error:e(t),confRev:u.confRev,syncRev:k(u.syncRev),syncRevSource:u.syncRevSource}}function o(){return f.retrieveMetadata("new-page")}function l(t){return(t.firstChild&&t.firstChild.classList&&t.firstChild.classList.contains("synchrony-container")&&(/^\s*$/).test(t.firstChild.textContent))}function c(t){return !t.childNodes.length||(t.childNodes.length===1&&l(t))}function m(u,t){if(c(u)){t.setContent("")}}function p(){var v=d("#content-title").val();if(v!==q){var u=frames.wysiwygTextarea_ifr;var t=u.contentDocument!==undefined?u.contentDocument:u.document;t.body.setAttribute("data-title",v);q=v}}function i(t){if(t.hasAttribute("data-title")){var u=t.getAttribute("data-title");if(u!==q){d("#content-title").val(u);q=u}}}function g(){var u=d(document);var t="confluence.postpaste-fix";u.bind("prePaste",function(){h.trigger("synchrony.stop",{id:t})}).bind("postPaste",function(){setTimeout(function(){h.trigger("synchrony.start",{id:t})},0)})}function a(t){return/^\s+$/.test(t)||d(t).text().trim().length===0}return{getContent:r,isUnpublished:o,fixTinymceCaretContainer:m,writeTitleToRootElement:p,readTitleFromRootElement:i,bindPostPasteFix:g,isContentEmpty:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch-model.js' */
define("confluence-watch-button/watch-model",["ajs","backbone"],function(a,b){return b.Model.extend({saveSettings:function(e,f,c){this.trigger("request");var d=this;return a.safe.ajax({url:e,type:f?"POST":"DELETE",contentType:"application/json",dataType:"json",data:{}}).done(function(){d.set(c,f);d.trigger("sync",d)}).fail(function(){d.trigger("error")})},saveWatchPage:function(d){var c=a.contextPath()+"/rest/api/user/watch/content/"+this.get("pageId");return this.saveSettings(c,d,"watchingPage")},saveWatchBlogs:function(d){var c=a.contextPath()+"/rest/api/user/watch/space/"+this.get("spaceKey")+"?contentType=blogpost";return this.saveSettings(c,d,"watchingBlogs")},saveWatchSpace:function(d){var c=a.contextPath()+"/rest/api/user/watch/space/"+this.get("spaceKey");return this.saveSettings(c,d,"watchingSpace")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch-view.js' */
define("confluence-watch-button/watch-view",["jquery","ajs","underscore","backbone","confluence/flag"],function(c,a,b,e,d){return e.View.extend({events:{"change #cw-watch-page":"changeWatchPage","change #cw-watch-blogs":"changeWatchBlogs","change #cw-watch-space":"changeWatchSpace"},initialize:function(){b.bindAll(this,"render","initTooltips","changeWatchPage","changeWatchBlogs","changeWatchSpace","togglePageEnabledState","toggleBlogsEnabledState","startLoading","stopLoading","setTitle","_restoreCheckboxState","_disableAllElements","_rememberLastState","_revertToLastState");this.model.on("sync change:watchingSpace",this.togglePageEnabledState,this);this.model.on("change:watchingSpace",this.toggleBlogsEnabledState,this);this.model.on("request",this.startLoading,this);this.model.on("sync",this.setTitle,this);this.model.on("sync",this.stopLoading,this);this.model.on("sync",this._restoreCheckboxState,this);this.model.on("error",this._revertToLastState,this)},render:function(){this.$el.html(Confluence.Watch.Templates.dialogBody(this.model.toJSON()));this.initTooltips();this.setTitle(this.model);if(a.Meta.get("access-mode")==="READ_ONLY"){this._disableAllElements()}return this},_revertToLastState:function(){var i=this.currentModel.get("watchingPage");var j=this.currentModel.get("watchingSpace");var k=this.currentModel.get("watchingBlogs");var f=this.$("#cw-watch-page");f.prop("checked",i||j);f.prop("disabled",this.currentModel.get("watchPageDisabled"));var h=this.$("#cw-watch-space");h.prop("checked",j);h.prop("disabled",this.currentModel.get("watchSpaceDisabled"));var l=this.$("#cw-watch-blogs");l.prop("checked",k);l.prop("disabled",this.currentModel.get("watchBlogsDisabled"));this.$(".cw-manage-watchers").removeClass("disabled");this.model.set("watchingPage",i);this.model.set("watchingBlogs",k);this.model.set("watchingSpace",j);this.stopLoading();var g={close:"manual",type:"error",extraClasses:"confluence-menu-flag",fifo:true,stack:"menu"};this.errorFlag=new d(c.extend({},g,{body:"This site is read-only. You can\u0027t make changes right now."}))},_rememberLastState:function(){if(!!this.errorFlag){this.errorFlag.close()}this.currentModel=this.model.clone();this.currentModel.set("watchPageDisabled",this.$("#cw-watch-page").prop("disabled"));this.currentModel.set("watchSpaceDisabled",this.$("#cw-watch-space").prop("disabled"));this.currentModel.set("watchBlogsDisabled",this.$("#cw-watch-blogs").prop("disabled"));this.$targetCheckbox.prop("disabled",true)},_disableAllElements:function(){this.$("input[type='checkbox']").prop("disabled",true);this.$(".cw-manage-watchers").addClass("disabled")},_restoreCheckboxState:function(){this.$targetCheckbox.prop("disabled",false)},initTooltips:function(){this.$(".cw-tooltip").tooltip({gravity:"e",offset:5,delayIn:0});this.togglePageEnabledState(this.model);this.toggleBlogsEnabledState(this.model)},changeWatchPage:function(g){this.$targetCheckbox=c(g.target);this._rememberLastState();var f=this.$targetCheckbox.is(":checked");this.model.saveWatchPage(f)},changeWatchBlogs:function(g){this.$targetCheckbox=c(g.target);this._rememberLastState();var f=this.$targetCheckbox.is(":checked");this.model.saveWatchBlogs(f)},changeWatchSpace:function(g){this.$targetCheckbox=c(g.target);this._rememberLastState();var f=this.$targetCheckbox.is(":checked");this.model.saveWatchSpace(f)},togglePageEnabledState:function(f){var g=f.get("watchingPage");var i=f.get("watchingSpace");this.$("#cw-watch-page").prop("disabled",i);this.$("#cw-watch-page").prop("checked",g||i);var h=i?"You will receive updates for this page because you are watching this space.":"";this.$(".cw-tooltip-watch-page").attr("original-title",h)},toggleBlogsEnabledState:function(f){var i=f.get("watchingBlogs");var h=f.get("watchingSpace");this.$("#cw-watch-blogs").prop("disabled",h);this.$("#cw-watch-blogs").prop("checked",i||h);var g=h?"You are subscribed to all blog posts because you are watching this space.":"";this.$(".cw-tooltip-watch-blogs").attr("original-title",g)},startLoading:function(){this.$(".cw-status").addClass("loading")},stopLoading:function(){this.$(".cw-status").removeClass("loading")},setTitle:function(){var g=this.model.get("watchingPage");var k=this.model.get("watchingBlogs");var i=this.model.get("watchingSpace");var f=this.model.get("isBlogPost");function j(){if(i){return{title:"You are watching this space",description:"Receiving email updates for all content in this space.",}}if(g&&f&&k){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post and all new blog posts in this space.",}}if(g&&f){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post.",}}if(g){return{title:"You are watching this page",description:"Receiving email updates about changes to this page.",}}if(f&&k){return{title:"You are watching for new blog posts",description:"Receiving email updates for new blog posts in this space.",}}if(f){return{title:"You are not watching this blog",description:"Start watching to receive email updates about changes to this blog.",}}return{title:"You are not watching this page",description:"Start watching to receive email updates about changes to this page.",}}var h=j();this.$(".cw-title").text(h.title);this.$(".cw-title-description").text(h.description)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/notification.js' */
define("confluence-watch-button/watch-notification",["jquery","aui/flag"],function(b,a){return function(e){var c=document.getElementById("watch-notification");if(c!=null){c.close()}var d=a({type:"success",body:e,close:"auto"});d.setAttribute("id","watch-notification")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch.js' */
require(["jquery","underscore","ajs","confluence-watch-button/watch-model","confluence-watch-button/watch-view","confluence-watch-button/watch-notification"],function(b,i,h,f,d,g){h.toInit(function(){var j=b("#watch-content-button");if(!j.length){return}j.click(function(l){l.preventDefault()});var k=h.Meta.get("page-id");b.getJSON(h.contextPath()+"/rest/watch-button/1.0/watchState/"+k,function(l){i.extend(l,{pageId:k,spaceKey:h.Meta.get("space-key"),spaceName:h.Meta.get("space-name")});a(j,l);j.addClass("watch-state-initialised")})});function a(j,n){e(j,n);var m=new f(n);var l=new d({model:m});h.InlineDialog(j,"confluence-watch",function(p,o,q){l.setElement(p);l.render();q()},{width:325,offsetX:-180,cacheContent:false,hideDelay:null,hideCallback:function(){b(".tipsy").hide()}});m.on("change:watchingPage change:watchingBlogs change:watchingSpace",function(o){e(j,o.toJSON())});m.on("change:watchingPage",function(o,q){var p=q?"watch-page":"unwatch-page";h.trigger("analytics",{name:p})});m.on("change:watchingBlogs",function(o,q){var p=q?"watch-blogs":"unwatch-blogs";h.trigger("analytics",{name:p})});m.on("change:watchingSpace",function(o,q){var p=q?"watch-space":"unwatch-space";h.trigger("analytics",{name:p})});c(m);var k=false;b(document).on("keyup",function(){k=false});window.CW_watchPage=function(){if(k){return}k=true;var q=m.get("watchingSpace");var p=m.get("watchingPage");if(q){b("body, #splitter-content").animate({scrollTop:0},300,function(){j.click();setTimeout(function(){b(".cw-tooltip-watch-page").tipsy("show")},50)})}else{var r=!p;m.saveWatchPage(r);var o=r?"You started watching this page.":"You stopped watching this page.";g(o)}}}function e(k,q){var m=q.watchingPage;var j=q.isBlogPost&&q.watchingBlogs;var o=q.watchingSpace;if(m||j||o){var l=k.find(".aui-icon").removeClass("aui-iconfont-unwatch").addClass("aui-iconfont-watch");var n=h.format("{0}W{1}atching","<u>","</u>");k.prop("title","Stop watching (w)").children("span").empty().append(l).append(" "+n)}else{var l=k.find(".aui-icon").removeClass("aui-iconfont-watch").addClass("aui-iconfont-unwatch");var p=h.format("{0}W{1}atch","<u>","</u>");k.prop("title","Watch (w)").children("span").empty().append(l).append(" "+p)}}function c(j){j.on("change:watchingPage",function(k,m){var l=m?"watchpage.pageoperation":"unwatchpage.pageoperation";h.trigger(l)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'templates/watch.soy' */
// This file was automatically generated from watch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Watch.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Watch == 'undefined') { Confluence.Watch = {}; }
if (typeof Confluence.Watch.Templates == 'undefined') { Confluence.Watch.Templates = {}; }


Confluence.Watch.Templates.dialogBody = function(opt_data, opt_ignored) {
  return '<div class="cw-status"><h2 class="cw-title"></h2><p class="cw-title-description"></p></div><form class="aui cw-dialog"><div class="cw-tooltip cw-tooltip-watch-page"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-page" ' + ((opt_data.watchingPage) ? 'checked' : '') + '><label for="cw-watch-page">' + ((opt_data.isBlogPost) ? soy.$$escapeHtml('Watch blog post') : soy.$$escapeHtml('Watch page')) + '</label></div></div>' + ((opt_data.isBlogPost) ? '<div class="cw-tooltip cw-tooltip-watch-blogs"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-blogs" ' + ((opt_data.watchingBlogs) ? 'checked' : '') + '><label for="cw-watch-blogs">' + soy.$$escapeHtml('Watch for new blog posts in this space') + '</label></div></div>' : '') + '<div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-space" ' + ((opt_data.watchingSpace) ? 'checked' : '') + '><label for="cw-watch-space">' + soy.$$escapeHtml('Watch all content in this space') + '</label></div></form>' + ((opt_data.isAdmin) ? '<div class="cw-manage-watchers-wrapper"><button class="aui-button aui-button-link cw-manage-watchers">' + soy.$$escapeHtml('Manage Watchers') + '</button></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Watch.Templates.dialogBody.soyTemplateName = 'Confluence.Watch.Templates.dialogBody';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:share-dialog-service', location = 'js/service/share-page.js' */
define("confluence/share-page/service/share-page",["ajs","wrm","jquery"],function(b,a,d){var c="click.share-page";return{initDialog:function(f,h,g,i){var e=d(f);if(e.length){e.off(c).on(c,function(j){e.off(c);i.beforeLoad&&typeof i.beforeLoad==="function"&&i.beforeLoad();a.require(["wrc!share-page-async-loader"]).done(function(){i.afterLoad&&typeof i.afterLoad==="function"&&i.afterLoad();require("confluence/share-page/dialog-async-loader")(f,h,d.extend(false,{hideCallback:function(){i.onHide&&typeof i.onHide==="function"&&i.onHide()},width:250,hideDelay:3600000},g),i);e.click()});j.preventDefault();return false})}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:view-resources', location = 'js/view-init.js' */
require(["ajs","confluence/meta","confluence/share-page/service/share-page"],function(b,c,d){var e=c.get("content-type")==="page"?"Share this page":"Share this blog post";var a=c.get("content-type")==="page"?"Take a look at this page":"Take a look at this blog post";b.toInit(function(h){var g="#shareContentLink";var f=h(g);d.initDialog(g,"shareContentPopup",{},{heading:e,notePlaceholder:a,link:function(){return h('link[rel="shortlink"]').prop("href")},entityId:function(){return c.get("page-id")},restriction:function(){return require("confluence/share-page/fetch/content-restrictions")(c.get("content-id")).pipe(function(i){var k=i.read.restrictions.user.size||i.read.restrictions.group.size||i.update.restrictions.user.size||i.update.restrictions.group.size;var j={};if(k){j.type="restrict";j.message="Restrictions on this page may prevent people viewing or editing."}return j})},copyOption:"share",shareType:"view",contentType:c.get("content-type"),errorText:"An unexpected error occurred. Please try again.",beforeLoad:function(){f.find(".aui-icon").css("visibility","hidden");f.parent().spin({left:"10px"})},afterLoad:function(){f.find(".aui-icon").css("visibility","visible");f.parent().spinStop()},onHide:function(){h(".dashboard-actions .explanation").hide()}})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-analytics', location = '/includes/js/page.js' */
define("confluence/page",["ajs","jquery","confluence/analytics-support","window","document"],function(a,c,e,f,g){var i=a.Meta.get("page-id"),d=function(b,a){e.publish("confluence.page."+b,c.extend({pageID:i},a||{}))},j=(new Date).getTime();return function(){var b=c("#main-content");if(0!==b.length){d("view");b.on("click","a",function(a){a=-1<a.currentTarget.href.indexOf(f.location.host)?"internal":"external";d("link.click",{linkType:a})});var h=c(f),e=(new Date).getTime();h.on("scroll.content",a.debounce(function(){var a=
g.body.scrollTop+g.body.offsetHeight,c=b.offset().top+b.height();a>c&&(d("scroll-to-bottom",{secondsSinceReadyEvent:((new Date).getTime()-e)/1E3,secondsSincePageLoad:((new Date).getTime()-j)/1E3}),h.off("scroll.content"))},200));setTimeout(function(){d("reading")},3E5)}}});require("confluence/module-exporter").safeRequire("confluence/page",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/calendar-printing.soy' */
// This file was automatically generated from calendar-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 * @hassoydelcall {eventIcon}
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.renderCustomImagePrinting = function(opt_data, opt_ignored) {
  return '' + ((opt_data.eventType == 'jira-issue' || opt_data.eventType == 'jira-calendar') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', customClasses: opt_data.customClasses}) : (opt_data.eventType == 'jira-project-releases' || opt_data.eventType == 'jira-project-releases-calendar') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira_box', customClasses: opt_data.customClasses}) : (opt_data.eventType == 'greenhopper-sprint' || opt_data.eventType == 'jira-agile-sprint' || opt_data.eventType == 'jira-agile-sprint-calendar' || opt_data.eventType == 'greenhopper_sprint') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'sprints', customClasses: opt_data.customClasses}) : Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, customClasses: opt_data.customClasses}));
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderCustomImagePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderCustomImagePrinting';
}


Confluence.TeamCalendars.Templates.renderImagePrinting = function(opt_data, opt_ignored) {
  var output = '<span class="subcalendar-icon-container ';
  if (opt_data.customClasses) {
    var cssClassList24 = opt_data.customClasses;
    var cssClassListLen24 = cssClassList24.length;
    for (var cssClassIndex24 = 0; cssClassIndex24 < cssClassListLen24; cssClassIndex24++) {
      var cssClassData24 = cssClassList24[cssClassIndex24];
      output += soy.$$escapeHtml(cssClassData24) + ' ';
    }
  }
  output += '"  ' + ((opt_data.dataIcon) ? 'data-icon="' + soy.$$escapeHtml(opt_data.dataIcon) + '"' : '') + '>' + soy.$$getDelegateFn(soy.$$getDelTemplateId('eventIcon'), opt_data.imageName, true)(opt_data) + '</span>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderImagePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderImagePrinting';
}


Confluence.TeamCalendars.Templates.renderIconPrinting = function(opt_data, opt_ignored) {
  return '' + Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.icon});
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderIconPrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderIconPrinting';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/timezone-drop-down.soy' */
// This file was automatically generated from timezone-drop-down.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timeZoneDropDown = function(opt_data, opt_ignored) {
  var output = '';
  var timeZoneList3 = opt_data.timeZones;
  var timeZoneListLen3 = timeZoneList3.length;
  for (var timeZoneIndex3 = 0; timeZoneIndex3 < timeZoneListLen3; timeZoneIndex3++) {
    var timeZoneData3 = timeZoneList3[timeZoneIndex3];
    output += '<option value=' + soy.$$escapeHtml(timeZoneData3.name) + '>' + soy.$$escapeHtml(timeZoneData3.name) + ' (' + soy.$$escapeHtml(timeZoneData3.offset) + ')</option>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timeZoneDropDown.soyTemplateName = 'Confluence.TeamCalendars.Templates.timeZoneDropDown';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/subcalendar-panel-entry.soy' */
// This file was automatically generated from subcalendar-panel-entry.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-item " data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.subCalendar.id) + '"><div class="subcalendar-info"><div class="subcalendar-name"><span class="ellipsis_text"><b>' + soy.$$escapeHtml(opt_data.subCalendar.displayName) + '</b></span></div></div><ul class="child-subcalendars"/></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.customEventTypePanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + ' ' + soy.$$escapeHtml(opt_data.customEventType.icon) + '" data-custom-event-type-id="' + soy.$$escapeHtml(opt_data.customEventType.customEventTypeId) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><input title="Child Subcalendar Checkbox" type="checkbox" id="checkbox-' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" class="child-subcalendar-checkbox"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.customEventType.icon}) : Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.customEventType.icon})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.customEventType.title) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypePanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypePanelEntry';
}


Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + ' ' + ((opt_data.childSubCalendar.subscriptionType) ? ' ' + soy.$$escapeHtml(opt_data.childSubCalendar.subscriptionType) : soy.$$escapeHtml(opt_data.childSubCalendar.type)) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '"data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><input title="Child Subcalendar Checkbox" type="checkbox" id="checkbox-' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" class="child-subcalendar-checkbox"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.childSubCalendar.subscriptionType}) : Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.childSubCalendar.type})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.childSubCalendar.displayName) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.subCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: true}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarMenu';
}


Confluence.TeamCalendars.Templates.customEventTypeMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isCustomEventType: true, parentSubCalendar: opt_data.parentSubCalendar, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypeMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypeMenu';
}


Confluence.TeamCalendars.Templates.childSubCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarMenu';
}


Confluence.TeamCalendars.Templates.subCalendarPopupMenu = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-dropdown-menu ' + ((opt_data.isParent) ? 'parent-subCalendar' : '') + '"><div class="aui-dd-parent"><div class="aui-dd-trigger subcalendar-dropdown-menu-button"><button  class=\'aui-button aui-button-compact aui-button-subtle\'><span class="aui-icon aui-icon-small aui-iconfont-more">More</span></button></div><ul class="aui-dropdown">' + ((opt_data.subCalendar.menuOptions.showAddEvent) ? '<li><a href="#" class="subcalendar-addevent" title="' + soy.$$escapeHtml('Add a calendar event') + '">' + soy.$$escapeHtml('Add Event') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showDisplayLink) ? '<li class="subcalendar-display-hide"><a href="#" title="' + soy.$$escapeHtml('Hide Events') + '">' + soy.$$escapeHtml('Hide Events') + '</a></li><li class="subcalendar-display-show"><a href="#" title="' + soy.$$escapeHtml('Show Events') + '">' + soy.$$escapeHtml('Show Events') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showNotifications) ? ((opt_data.subCalendar.menuOptions.showWatch) ? '<li class="subcalendar-watch section-end"><a href="#" title="' + soy.$$escapeHtml('Watch this calendar') + '">' + soy.$$escapeHtml('Watch') + '</a></li><li class="subcalendar-unwatch section-end"><a href="#" title="' + soy.$$escapeHtml('Stop watching this calendar') + '">' + soy.$$escapeHtml('Stop Watching') + '</a></li>' : '') + '<li class="subcalendar-watching section-end"><a href="#" title="' + soy.$$escapeHtml('You\x27re watching this calendar via pages') + '">' + soy.$$escapeHtml('Watching') + '</a></li><li class="subcalendar-loading-watching-status section-end"><a href="#">' + soy.$$escapeHtml('Loading Watching Status') + '<span class="aui-icon aui-icon-wait"></span></a></li>' : '') + ((opt_data.subCalendar.menuOptions.showView) ? '<li><a href="#" class="subcalendar-view" title="' + soy.$$escapeHtml('View calendar details') + '">' + soy.$$escapeHtml('View Calendar') + '</a></li>' : '') + ((opt_data.parentSubCalendar && opt_data.parentSubCalendar.menuOptions.showEdit && opt_data.isCustomEventType) ? '<li><a href="#" class="custom-event-type-edit" title="' + soy.$$escapeHtml('Edit custom event type details') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showEdit) ? '<li><a href="#" class="subcalendar-edit" title="' + soy.$$escapeHtml('Edit calendar details') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRestrictions) ? '<li><a href="#" class="subcalendar-restrict" title="' + soy.$$escapeHtml('Restrict access to calendar') + '">' + soy.$$escapeHtml('Restrictions') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRemove) ? '<li class="section-end"><a href="#" class="subcalendar-remove" title="' + soy.$$escapeHtml('Remove calendar') + '">' + soy.$$escapeHtml('Remove...') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showShareAndSubscribe) ? ((opt_data.autoConvertSupported) ? '<li><a href="#" class="subcalendar-share-or-embed" title="' + soy.$$escapeHtml('Share calendar with others') + '">' + soy.$$escapeHtml('Embed') + '</a></li>' : '<li><a href="#" class="subcalendar-share" title="' + soy.$$escapeHtml('Share calendar with others') + '">' + soy.$$escapeHtml('Share') + '</a></li>') + ((opt_data.subCalendar.menuOptions.showSubscribe) ? '<li><a href="#" class="subcalendar-subscribe" title="' + soy.$$escapeHtml('Subscribe to calendar with calendar programs') + '">' + soy.$$escapeHtml('Subscribe') + '</a></li>' : '') + '<li><a href="#" class="subcalendar-icalexport" title="' + soy.$$escapeHtml('Export calendar in iCalendar format') + '">' + soy.$$escapeHtml('Export to iCalendar') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showReload) ? '<li class="section-end"><a href="#" class="subcalendar-reload" title="' + soy.$$escapeHtml('Refresh calendar') + '">' + soy.$$escapeHtml('Refresh') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showReminder) ? '<li class="subcalendar-reminder section-end"><a href="#" class="unreminder-me ' + ((opt_data.subCalendar.reminderMe == false) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('Don\x27t send me reminders for this event type') + '">' + soy.$$escapeHtml('Turn off reminders') + '</a><a href="#" class="reminder-me ' + ((opt_data.subCalendar.reminderMe) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('Send me reminders for this event type') + '">' + soy.$$escapeHtml('Turn on reminders') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showSettingReminder) ? '<li class="subcalendar-setting-reminder section-end"><a href="#" class="setting-reminder-setting" title="' + soy.$$escapeHtml('There\x27s no reminder for this event type. Add one now.') + '">' + soy.$$escapeHtml('Add Reminder') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showColourGrid) ? Confluence.TeamCalendars.Templates.subCalendarColourGrid(opt_data) : '') + '</ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPopupMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPopupMenu';
}


Confluence.TeamCalendars.Templates.subCalendarColourGrid = function(opt_data, opt_ignored) {
  var output = '<li class="color-grid"><div class="color-cells">';
  var subCalendarColorClassList231 = opt_data.subCalendarClasses;
  var subCalendarColorClassListLen231 = subCalendarColorClassList231.length;
  for (var subCalendarColorClassIndex231 = 0; subCalendarColorClassIndex231 < subCalendarColorClassListLen231; subCalendarColorClassIndex231++) {
    var subCalendarColorClassData231 = subCalendarColorClassList231[subCalendarColorClassIndex231];
    output += '<div class="' + soy.$$escapeHtml(subCalendarColorClassData231) + ' color-cell ' + ((subCalendarColorClassIndex231 % 7 == 0) ? ' clear' : '') + '" data-colour="' + soy.$$escapeHtml(subCalendarColorClassData231) + '"></div>';
  }
  output += '<div class="clear"></div></div></li>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarColourGrid.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarColourGrid';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-local-subcalendar.soy' */
// This file was automatically generated from edit-local-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editLocalCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="local"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-local"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '" data-template="{key}"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Time zone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editLocalCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editLocalCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-people-subcalendar.soy' */
// This file was automatically generated from edit-people-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editPeopleCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="people"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-people"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Time zone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editPeopleCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editPeopleCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-subscription-subcalendar.soy' */
// This file was automatically generated from edit-subscription-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="subscription"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-subscription"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-url"><label for="location">' + soy.$$escapeHtml('URL') + '<span class="aui-icon icon-required"></span></label><input name="location" id="location" type="text" class="text" autocomplete="off"><div class="description">' + soy.$$escapeHtml('iCal URL') + '</div><div class="error location-error"></div></div><div class="field-group field-group-username"><label for="username">' + soy.$$escapeHtml('User name') + '</label><input name="username" id="username" type="text" class="text"></div><div class="field-group field-group-password"><label for="password">' + soy.$$escapeHtml('Password') + '</label><input name="password" id="password" type="password" class="password"></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-jira-subcalendar.soy' */
// This file was automatically generated from edit-jira-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.hiddenJiraFields = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="jira"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value="">';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.hiddenJiraFields.soyTemplateName = 'Confluence.TeamCalendars.Templates.hiddenJiraFields';
}


Confluence.TeamCalendars.Templates.editJiraCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#">' + Confluence.TeamCalendars.Templates.hiddenJiraFields(null) + '<div class="form-mode create"><div class="subcalendar-type subcalendar-jira"><div class="jira-query-options option-project-selected"><fieldset class="group loading-dummy"><legend><span>' + soy.$$escapeHtml('Display') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><span class="spinner aui-icon aui-icon-wait"></span></div></fieldset><fieldset class="group query-group"><legend><span>' + soy.$$escapeHtml('Display') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><div class="radio radio-project"><input class="radio" type="radio" id="query-by-project" name="query-type" checked="checked" value="option-project"><label for="query-by-project">' + soy.$$escapeHtml('Project') + '</label></div><div class="radio radio-search-filter trailing-option"><input class="radio" type="radio" id="query-by-searchfilter" name="query-type" value="option-search-filter"><label for="query-by-searchfilter">' + soy.$$escapeHtml('Saved filter') + '</label></div><div class="radio radio-jql trailing-option"><input class="radio" type="radio" id="query-by-jql" name="query-type" value="option-jql"><label for="query-by-jql">' + soy.$$escapeHtml('JQL (advanced)') + '</label></div></div><div class="field-group hidden"><div class="error jiraQueryOptions-error"></div></div></fieldset><div class="field-group compatibility-group" style="position: relative;"><label for="project" class="hidden project-select-label">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><div class="option-project option disableable-option"><div class="option-content"><select class="select content option-value" name="project" id="project"></select><div class="unavailable-message field-value"></div></div><div class="error project-error"></div></div><div class="option-search-filter option disableable-option"><input type="text" class="text option-value hidden" id="searchFilter" name="searchFilter"><label for="searchFilter" class="hidden">' + soy.$$escapeHtml('Saved filter') + '</label><div class="option-content"><input type="text" class="text content" id="searchFilterName" name="searchFilterName"><label for="searchFilterName" class="hidden">' + soy.$$escapeHtml('Saved filter') + '</label><div class="unavailable-message field-value">' + soy.$$escapeHtml('No search filters found. Please create a Jira search filter.') + '</div><div class="search-filter-suggestions hidden"></div><div class="error searchFilterId-error"></div></div></div><div class="option-jql option"><textarea rows="20" cols="20" class="textarea option-value" id="jql" name="jql" wrap="off" autocomplete="off"></textarea><span class="jqlAutoCompleteSpinner hidden aui-icon aui-icon-wait"></span><div class="clear"></div><label for="jql" class="hidden">' + soy.$$escapeHtml('JQL (advanced)') + '</label><div class="error jql-error" id="jql-error"></div><div class="invisible jql-status"><div class="jql-ok hidden">' + soy.$$escapeHtml('Valid') + ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div><div class="jql-bad hidden">' + soy.$$escapeHtml('Invalid') + ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div></div></div></div><div class="date-fields-spinner-container hidden"><span class="aui-icon aui-icon-wait"></span><span>' + soy.$$escapeHtml('Loading dates to display...') + '</span></div><fieldset class="group field-group-jira field-group-jira-show hidden"><legend><span>' + soy.$$escapeHtml('Show') + '</span></legend><div class="dates"><div class="single-dates"><p class="subtitle">' + soy.$$escapeHtml('Single date:') + '</p><div class="date-fields"></div></div><div class="duration"><p class="subtitle">' + soy.$$escapeHtml('Date range:') + '</p><div class="date-fields"></div><p class="duration-desc">' + soy.$$escapeHtml('Display the time between a start and end date for an issue.') + '</p><a href="#" class="add-duration">' + soy.$$escapeHtml('Add start and end date...') + '</a></div><div class="clear"></div></div><div class="error dateFieldName-error"></div></fieldset><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-jira-subcalendar-duration.soy' */
// This file was automatically generated from edit-jira-subcalendar-duration.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations = function(opt_data, opt_ignored) {
  return '<p class="intro">' + soy.$$filterNoAutoescape('You can visualise the duration between two issue dates in Team Calendars. To do this, select your desired fields below or \x3ca href\x3d\x22https://confluence.atlassian.com/x/8QESCw\x22 target\x3d\x22_blank\x22\x3elearn more about creating custom dates\x3c/a\x3e.') + '</p><div class="duration-fields"><div class="duration-start"><select name="start-field"><option value="">' + soy.$$escapeHtml('Select start date...') + '</option></select></div><div class="duration-end"><select name="end-field"><option value="">' + soy.$$escapeHtml('Select end date...') + '</option></select></div><div class="clear"></div></div><div class="no-selectable-date-fields hidden"><p>' + soy.$$escapeHtml('No custom dates found for the selected Jira query.') + '</p><p class="add-fields"></p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/subcalendar-features-dialog.soy' */
// This file was automatically generated from subcalendar-features-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarFeatures = function(opt_data, opt_ignored) {
  return '<div class="feature-discovery"><p class="didyouknow description">' + soy.$$escapeHtml('Did you know you can also:') + '</p><div class="features-table-container' + ((! opt_data.autoConvertSupported) ? ' noautoconvert' : '') + '"><table cellspacing="0" class="' + soy.$$escapeHtml(opt_data.subCalendar.type) + '"><tbody><tr class="features"><td class="feature add-event"><a class="feature-icon" alt="' + soy.$$escapeHtml('Add') + '">' + soy.$$escapeHtml('Add') + '</a><p class="title">' + soy.$$escapeHtml('Add') + '</p><p class="feature-description">' + soy.$$escapeHtml('Add events to your calendar.') + '</p></td><td class="feature restrict"><a class="feature-icon" alt="' + soy.$$escapeHtml('Restrict') + '">' + soy.$$escapeHtml('Restrict') + '</a><p class="title">' + soy.$$escapeHtml('Restrict') + '</p><p class="feature-description">' + soy.$$escapeHtml('Restrict the calendar\x27s visibility so that only certain people can see or edit it.') + '</p></td><td class="feature embed"><a class="feature-icon" alt="' + soy.$$escapeHtml('Embed') + '">' + soy.$$escapeHtml('Embed') + '</a><p class="title">' + soy.$$escapeHtml('Embed') + '</p><p class="feature-description">' + soy.$$escapeHtml('Embed the calendar on a page or blog post.') + '</p></td><td class="feature embed-or-share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Embed') + '">' + soy.$$escapeHtml('Embed') + '</a><p class="title">' + soy.$$escapeHtml('Embed') + '</p><p class="feature-description">' + soy.$$escapeHtml('Share calendar with others.') + '</p></td><td class="feature share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Share') + '">' + soy.$$escapeHtml('Share') + '</a><p class="title">' + soy.$$escapeHtml('Share') + '</p><p class="feature-description">' + soy.$$escapeHtml('Share the calendar with other people for them to subscribe to.') + '</p></td></tr></tbody></table></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarFeatures.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarFeatures';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/subcalendar-privateurl-reset-dialog.soy' */
// This file was automatically generated from subcalendar-privateurl-reset-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl = function(opt_data, opt_ignored) {
  return '<p class="reset-reason">' + soy.$$filterNoAutoescape('Your subscription link for \x3cstrong class\x3d\x22calendar-title\x22\x3e\x3c/strong\x3e is private. If you have accidentally shared this link with others you may want to reset it.') + '</p><p class="reset-implication">' + soy.$$escapeHtml('Resetting the link to this calendar will mean you will need to re-subscribe to the calendar from your calendar application.') + '</p><div class="reset-progress"><div class="resetting"><span class="progress-icon aui-icon aui-icon-wait"></span><span class="progress-description">' + soy.$$escapeHtml('Resetting...') + '</span></div><div class="reset"><img class="progress-icon" src="' + soy.$$escapeHtml("") + '/images/icons/bullet_done.gif"><span class="progress-description">' + soy.$$escapeHtml('Subscription link has been reset.') + ' <a href="#" class="subscribe-to-calendar">' + soy.$$escapeHtml('Subscribe to this calendar') + '</a>.</span></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl.soyTemplateName = 'Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/subcalendar-restrict-dialog.soy' */
// This file was automatically generated from subcalendar-restrict-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.restrictSubCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId"><div class="field-group-permissions"><div class="permissions-type-select"><input type="radio" name="restriction-type" class="radio option-view-restrictions" id="option-view-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="view"><span>' + soy.$$escapeHtml('Restrict viewing') + '</span><input type="radio" name="restriction-type" class="radio option-edit-restrictions" id="option-edit-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="edit" checked="checked"><span>' + soy.$$escapeHtml('Restrict editing') + '</span></div><div class="permissions-details"><div class="permissions-input"><div class="user-picker-container"><input name="permissionsUserPicker" id="permissionsUserPicker-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" type="text" class="text autocomplete-user with-hint" value="' + soy.$$escapeHtml('Enter user name') + '" autocomplete="off" data-none-message="' + soy.$$escapeHtml('No user found. Press \x27enter\x27 to input as group.') + '" data-template="{title}" data-max="3"></div><div class="group-picker-container"><span class="or-text">' + soy.$$escapeHtml('or') + '</span><a class="group-picker-trigger" href="#">' + ((opt_data.pdlEnabled) ? '<span class="aui-icon aui-icon-small aui-iconfont-people">Insert meaningful text here for accessibility</span><span>' + soy.$$escapeHtml('Group...') + '</span>' : '<img class="group-picker-icon" src="' + soy.$$escapeHtml("") + '/images/icons/group_16.gif"><span>' + soy.$$escapeHtml('Group...') + '</span>') + '</a><div class="clear"></div></div></div><div class="clear"></div><div class="error permissions-error"></div><div class="view-permissions">' + ((opt_data.pdlEnabled) ? '<span class="aui-icon-small aui-iconfont-view"></span>' : '') + '<span class="no-view-restrictions">' + soy.$$escapeHtml('No view restrictions defined for this calendar') + '</span><span class="restricted-viewing-to">' + soy.$$escapeHtml('Viewing restricted to:') + '</span><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div><div class="clear"></div><div class="edit-permissions"><div class="no-edit-restrictions">' + soy.$$escapeHtml('No edit restrictions defined for this calendar') + '</div><div class="restricted-editing-to">' + soy.$$escapeHtml('Editing restricted to:') + '</div><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.restrictSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.restrictSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/subcalendar-remove-dialog.soy' */
// This file was automatically generated from subcalendar-remove-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.removeSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-remove aui" action="#" method="POST"><h3>' + soy.$$filterNoAutoescape('What would you like to do with \x26quot;\x3cspan class\x3d\x22calendar-to-remove\x22\x3e\x3c/span\x3e\x26quot;?') + '</h3><fieldset class="group radios"><div class="radio"><input class="radio" type="radio" name="remove" id="removefromviewoption" checked="checked"><label for="removefromviewoption">' + ((opt_data.inSpace == true) ? soy.$$escapeHtml('Remove this calendar from space calendar view.') : soy.$$escapeHtml('Remove this calendar from my calendar view.')) + '</label></div><div class="radio"><input class="radio" type="radio" name="remove" id="deletecalendaroption" ><label for="deletecalendaroption">' + soy.$$escapeHtml('Permanently delete this calendar for all users.') + '</label></div></fieldset></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.removeSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.removeSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-delete-confirm aui" action="#" method="POST"><input type="hidden" name="subCalendarId" value=""><p><strong>' + soy.$$filterNoAutoescape('Are you sure you want to delete \x26quot;\x3cspan class\x3d\x22calendar-to-delete\x22\x3e\x3c/span\x3e\x26quot;?') + ((opt_data.subscriberCount > 0) ? (opt_data.subscriberCount > 1) ? '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml(AJS.format('There are {0} people subscribed to this calendar.',opt_data.subscriberCount)) + '</span>' : '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml('There is 1 person subscribed to this calendar.') + '</span>' : '') + '</strong></p>' + ((opt_data.subCalendar.subscriptionType == 'jira' || opt_data.subCalendar.type == 'jira') ? soy.$$escapeHtml('Removing this calendar will not change anything in Jira. This calendar is only a view of it. The same view can be recreated again, if so desired, with the same parameters.') : '<p>' + soy.$$escapeHtml('All subscribers will be sent an iCalendar export of this calendar.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('If you need to restore the calendar at any time, simply choose the \x26quot;{0}\x26quot; option when adding a new calendar.','Import Calendar')) + '</p>') + '<div class="clear"></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/jira-subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from jira-subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents = function(opt_data, opt_ignored) {
  return '<div class="delete-jira-events-hint"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to remove \x27\x27{0}\x27\x27 from \x27\x27{1}\x27\x27?',opt_data.childName,opt_data.parentName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-search-result.soy' */
// This file was automatically generated from calendar-search-result.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarSearchResultTable = function(opt_data, opt_ignored) {
  return '<table><thead class="tc-subscription-header"><tr><th class="subcalendar-checkbox"></th><th class="subcalendar-name">' + soy.$$escapeHtml('Calendar') + '</th><th class="subcalendar-description">' + soy.$$escapeHtml('Description') + '</th><th class="subcalendar-space">' + soy.$$escapeHtml('Related space') + '</th><th class="subcalendar-subscribercount">' + soy.$$escapeHtml('Subscribers') + '</th></tr></thead></table><table class="confluenceTable tc-table-content"><tbody class="tc-subscription-result" data-page-size="10"></tbody></table>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResultTable.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResultTable';
}


Confluence.TeamCalendars.Templates.calendarSearchResult = function(opt_data, opt_ignored) {
  return '<tr><td class="confluenceTd"><input type="checkbox" class="subcalendar-select"></td><td class="confluenceTd subcalendar-name"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.name) + '" threedots="' + soy.$$escapeHtml(opt_data.name) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.name) + '</span></div></td><td class="confluenceTd subcalendar-description"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.description) + '" threedots="' + soy.$$escapeHtml(opt_data.description) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.description) + '</span></div></td><td class="confluenceTd subcalendar-space"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.relatedSpace) + '" threedots="' + soy.$$escapeHtml(opt_data.relatedSpace) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.relatedSpace) + '</span></div></td><td class="confluenceTd subcalendar-subscribercount"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.numSubscribers) + '" threedots="' + soy.$$escapeHtml(opt_data.numSubscribers) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.numSubscribers) + '</span></div></td></tr>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResult.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResult';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/js/timeline-view.js' */
//This code acts as an adapter for the CHAP timeline (see timeline.js) so it can work with fullcalendar.js and calendar-plugin.js.
(function($){
    Confluence.TeamCalendars.getTimelineAdapter = function(_element, _calendarPlugin, _calendarDiv, _fullCalendarView) {
        var calendarPlugin,
            calendarDiv,
            element,
            fullCalendarView,
            millisecondsInAWeek,
            today,
            visStart, //The start of the visible range
            visEnd, //The end of the visible range
            loadedRangeStart, //The start of the range that has been loaded
            loadedRangeEnd, //The end of the range that has been loaded
            events,
            timelineEvents, //The same events as above, but transformed into a format the timeline library understands
            eventDetailsDialog = null,
            timeline, //The CHAP timeline object
            //If lastModifiedSubCalendar is not null then we have modified a calendar in the timeline view and asked
            //CalendarPlugin to refresh the view. This will cause the calendar to be removed from the cache, and a
            //refresh to be preformed without the calendar, and then another refresh with the calendar. To avoid
            //flickering we ignore the first refresh in this case (see renderEvents()).
            lastModifiedSubCalendar = null,
            DEFAULT_TIMELINE_HEIGHT = 500,
            TIMELINE_INCREMENT = 0.2,
            lastSelectedEvent;

        //Initialisation
        calendarPlugin = _calendarPlugin;
        calendarDiv = _calendarDiv;
        element = _element;
        fullCalendarView = _fullCalendarView;
        millisecondsInAWeek = 1000 * 60 * 60 * 24 * 7;
        today = new Date();
        visStart = new Date(today.getTime() - millisecondsInAWeek * 2);
        visEnd = new Date(today.getTime() + millisecondsInAWeek * 2);
        fullCalendarView.visStart = visStart;
        fullCalendarView.visEnd = visEnd;
        loadedRangeStart = visStart;
        loadedRangeEnd = visEnd;

        function drawVisualization(data) {
            var height,
                options,
                oldScrollTop,
                oldHeight,

                saveScrollPos = function() {
                    if (timeline) {
                        oldScrollTop = timeline.dom.frame.scrollTop;
                        oldHeight = $( timeline.dom.content).height();
                    }
                },

                restoreScrollPos = function() {
                    var heightdiff = $(timeline.dom.content).height() - oldHeight;

                    if (heightdiff > 0) {
                        timeline.dom.frame.scrollTop = oldScrollTop + heightdiff;
                    } else {
                        timeline.dom.frame.scrollTop = oldScrollTop;
                    }
                },

                restoreSelection = function() {
                    if (lastSelectedEvent) {
                        var tmpTimelineEventElem = $("<div/>");

                        $.each(data, function(dataIdx, theData) {
                            var dataEventId = tmpTimelineEventElem.empty().html(theData.content).find("[data-event-id]").data("event-id");
                            if (dataEventId === lastSelectedEvent.id)
                                timeline.setSelection([ { "row" : dataIdx }], true);
                        });

                        lastSelectedEvent = null;
                    }
                },

                styleLabelEvent = function() {
                    var listItemEvent = $(timeline.dom.content).find(".timeline-event-content");
                    $.each(listItemEvent, function(dataIdx, theData) {
                        var parentItem = $(theData).parent();
                        if(parentItem !== undefined && parentItem.length > 0) {
                            var positionLeftItemEvent = $(parentItem).position().left;
                            var widthTimeline = $(timeline.dom.content).width();
                            if($(parentItem).width() >= widthTimeline) {
                                if(positionLeftItemEvent > 0) {
                                    $(theData).css("padding-left", (widthTimeline - positionLeftItemEvent)/2);
                                } else {
                                    if(widthTimeline >= ($(parentItem).width() + positionLeftItemEvent)) {
                                        $(theData).css("padding-left",($(parentItem).width() + positionLeftItemEvent)/2 - positionLeftItemEvent);
                                    } else {
                                        $(theData).css("padding-left", widthTimeline/2 - positionLeftItemEvent);
                                    }
                                }
                            } else {
                                var paddingLeft = ($(parentItem).width() + positionLeftItemEvent)/2 - positionLeftItemEvent;
                                if((widthTimeline >= ($(parentItem).width() + positionLeftItemEvent)) && paddingLeft >= 0 && (paddingLeft < $(parentItem).width())) {
                                    $(theData).css("padding-left", paddingLeft);
                                } else {
                                    $(theData).css("padding-left", 0);
                                }
                            }
                        }
                    });
                };

            height = calendarPlugin.getTimelineHeight(calendarDiv) || DEFAULT_TIMELINE_HEIGHT;

            var maxMonthToDisplayTimelineCalendar = parseInt(calendarPlugin.getMaxMonthToDisplayTimelineCalendar(calendarDiv)) || 6; // default 6 month maximum zoom

            //Configuration options for CHAP timeline.
            //See http://almende.github.com/chap-links-library/js/timeline/doc/#Configuration_Options
            options = {
                width:  "99%", //setting 'width 100%' causes the right border to be cutoff in myCalendar view
                height: "auto",
                viewHeight: height + "px", //Size of the containing frame
                minHeight: height,
                editable: true,
                enableKeys: true,
                axisOnTop: false,
                showNavigation: true,
                style: "box",
                start: visStart,
                end: visEnd,
                intervalMin: 1000 * 60 * 60 * 6, //6 hour minimum zoom
                intervalMax: millisecondsInAWeek * 4 * maxMonthToDisplayTimelineCalendar,
                MONTHS: calendarPlugin.getMonthNames(),
                DAYS: calendarPlugin.getDayNames()
            };

            saveScrollPos();

            timeline = new links.Timeline(element[0]);

            //Add event listeners
            links.events.addListener(timeline, 'select', onSelect);
            links.events.addListener(timeline, 'change', onChange);
            links.events.addListener(timeline, 'rangechange', onRangeChange);
            links.events.addListener(timeline, 'rangechanged', onRangeChanged);
            links.events.addListener(timeline, 'add', onAdd);
            links.events.addListener(timeline, 'moved', onMove);

            timeline.draw(data, options);

            restoreScrollPos();
            restoreSelection();
            styleLabelEvent();
            onRangeChange();
        }

        function onRangeChange() {
            hideEventDetailsDialog();
        }

        //Callback function for the select item
        function onSelect(event) {
            var calEvent = getSelectedEvent(),
                target = $(".timeline-event-box.timeline-event-selected"); //Gets selected box (one day event)

            if (!calEvent) {
                return;
            }

            if (!target.length) {
                target = $(".timeline-event-range.timeline-event-selected"); //Gets selected range
            }

            if (!isEditable(calEvent)) {
                timeline.setSelection([]); //Unselect the item so it can't be dragged and dropped.
            }

            if (calEvent.disableResizing) {
                $(".timeline-event-range-drag-left, .timeline-event-range-drag-right").addClass("hidden");
            } else {
                $(".timeline-event-range-drag-left, .timeline-event-range-drag-right").removeClass("hidden");
            }

            eventDetailsDialog = calendarPlugin.getEventDetailsDialog(calendarDiv, calEvent, target);
            //Setting the z-index higher is necessary to prevent any of the timeline event lines for going
            //on top of the dialog.
            eventDetailsDialog[0].style.zIndex = 1000;
            eventDetailsDialog.show();

            if (target.position().left < 0)
            {
                //Tragically the AUI inline dialog does not handle this case well at all. We push a function on to the
                //back of the execution stack to reposition the dialog at the left hand side of the timeline container.
                setTimeout(function() {
                    var left = target.parent().offset().left;
                    eventDetailsDialog.offset({left : left});
                }, 0);
            }
        }

        //Callback function for the change item
        function onChange() {
            var calEvent = getSelectedEvent(),
                timelineEvent = getSelectedTimelineEvent(),
                transformedEvent = transformEventForServer(calEvent, timelineEvent);

            lastSelectedEvent = calEvent;

            if (!isEditable(calEvent)) {
                //In theory this should not happen, but do this just in case.
                timeline.cancelChange();
            } else {
                var spinnerDefer = calendarPlugin.setSubCalendarSpinnerIconVisible(calendarDiv, true);
                calendarPlugin.updateEvent(
                        calendarDiv,
                        transformedEvent,
                        function(XMLHttpRequest, textStatus, errorThrown) {
                            if (spinnerDefer) spinnerDefer.resolve();
                            calendarPlugin.showAjaxError(
                                    calendarDiv,
                                    XMLHttpRequest,
                                    textStatus,
                                    errorThrown,
                                    calendarPlugin.ERROR_CLASS_EVENT_UPDATE);
                        },
                        function(responseEntity) {
                            if (spinnerDefer) spinnerDefer.resolve();
                            if (responseEntity.success) {
                                lastModifiedSubCalendar = calEvent.subCalendarId;
                                calendarPlugin.reloadSubCalendar(calendarDiv, calEvent.subCalendarId);
                            } else {
                                Confluence.TeamCalendars.setGenericErrors(
                                        calendarDiv,
                                        formatFieldErrors(responseEntity.fieldErrors),
                                        calendarPlugin.ERROR_CLASS_EVENT_UPDATE);
                            }
                        }
                )
            }

            hideEventDetailsDialog();
        }

        function onRangeChanged() {
            var range = timeline.getVisibleChartRange();
            updateVisibleRange(range.start.getTime(), range.end.getTime());
        }

        function updateDateDisplay(visStart, visEnd) {
            if (!visStart && !visEnd) {
                var visibleRange = timeline.getVisibleChartRange();
                visStart = new Date(visibleRange.start);
                visEnd = new Date(visibleRange.end);
            }

            // No format localisation here - not sure if it is worthwhile to
            Confluence.TeamCalendars.updateDateDisplay(
                calendarDiv,
                $.fullCalendar.formatDate(visStart, "dd MMM")
                    + " &mdash; "
                    + $.fullCalendar.formatDate(visEnd, "dd MMM, yyyy")
            );
        }

        function updateVisibleRange(rangeStart , rangeEnd) {
            var margin = (rangeEnd - rangeStart) / 2;

            visStart = new Date(rangeStart);
            visEnd = new Date(rangeEnd);

            if (loadedRangeStart.getTime() > rangeStart || loadedRangeEnd.getTime() < rangeEnd) {
                loadedRangeStart.setTime(rangeStart - margin);
                loadedRangeEnd.setTime(rangeEnd + margin);
                fullCalendarView.visStart = loadedRangeStart;
                fullCalendarView.visEnd = loadedRangeEnd;
                fullCalendarView.update();
            }

            updateDateDisplay(visStart, visEnd);
        }

        //Callback for adding an event
        function onAdd(properties) {
            Confluence.TeamCalendars.Dialogs.getEditEventDialog({
                    start : properties.start,
                    localizedStartTime : calendarPlugin.getDefaultStartTime(calendarDiv),
                    localizedEndTime : calendarPlugin.getDefaultEndTime(calendarDiv),
                    allDay : true
                },
                null,
                calendarPlugin,
                calendarDiv).show();
        }

        function onMove() {
            hideEventDetailsDialog();
        }

        //Helper functions
        function isEditable(event) {
            return calendarPlugin.isEventEditable(calendarDiv, event);
        }

        function getSelectedRow() {
            var row = undefined;
            var sel = timeline.getSelection();
            if (sel.length) {
                if (sel[0].row != undefined) {
                    row = sel[0].row;
                }
            }
            return row;
        }

        function getSelectedEvent() {
            return events[getSelectedRow()];
        }

        function getSelectedTimelineEvent() {
            return timelineEvents[getSelectedRow()];
        }

        function hideEventDetailsDialog() {
            eventDetailsDialog && eventDetailsDialog.hide();
        }

        //In theory this should never happen, but lets format the field error messages into something readable
        //just in case. This should save us some time with debugging.
        function formatFieldErrors(fieldErrors) {

            return $.map(fieldErrors, function(fieldError, i) {
                return fieldError.field + " : " + fieldError.errorMessages.toString()
            });
        }

        //Massage our events into the format that CAHP timeline uses.
        function transformToTimelineDataFormat(events) {
            function calculateEndDate(event) {
                var end;

                if (!event.allDay) {
                    return event.end;
                }

                //TEAMCAL-1035 - This causes the event to be rendered as a box, and not a duration. We want to do this
                //for all 'all day' events eventually, but it needs some design work. For now we do this only for Jira
                //versions.
                if (event.className[0] === "jira-version" || (event.className[0] === "jira-issue"  && event.localizedStartDate === event.localizedEndDate)) {
                    return null;
                }

                //So that all day events will be rendered properly in the timeline view
                end = event.end || new Date(event.start.getTime());
                end = new Date(end.getTime());
                end.setHours(end.getHours() + 23);
                end.setMinutes(59);
                end.setSeconds(59);
                return end;
            }

            function calculateEventContent(event) {
                var className = event.className[0];

                function calculateTitle() {
                    if ($.inArray("jira-version", event.className) !== -1 || $.inArray("jira-issue", event.className) !== -1)
                        return event.title;

                    if ($.inArray("other", event.className) !== -1 || event.eventType === "custom") {
                        if (event.shortTitle) {
                            return event.shortTitle + ": " + event.title;
                        } else {
                            if (event.invitees && event.invitees.length) {
                                return event.invitees[0].displayName + ": " + event.title;
                            } else {
                                return event.title;
                            }
                        }
                    } else {
                        return event.shortTitle || event.title;
                    }
                }

                switch (className) {
                    case "birthdays" :
                        return Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon({
                            eventId: event.id,
                            className: className,
                            title: calculateTitle()
                        });

                        break;
                    case "travel":
                    case "leaves":
                    case "other":
                        if (event.invitees && event.invitees.length) {
                            if (event.invitees.length > 1) {
                                return Confluence.TeamCalendars.Templates.timelineEventContent({
                                    eventId: event.id,
                                    iconClass: "people",
                                    title: calculateTitle()
                                });
                            } else {
                                return Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee({
                                    eventId: event.id,
                                    iconUrl: event.iconUrl,
                                    title:calculateTitle()
                                });
                            }
                        } else {
                            return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({
                                eventId: event.id,
                                title: event.title
                            });
                        }
                    break;

                    case "jira-issue" :
                    case "jira-version" :
                    case "greenhopper-sprint" :
                        return Confluence.TeamCalendars.Templates.timelineEventContent({
                            eventId: event.id,
                            iconClass: className,
                            title: calculateTitle()
                        });
                    break;
                }

                return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({
                    eventId: event.id,
                    title: event.title
                });
            }

            return $.map(events, function(event) {
                return {
                    start : event.start,
                    end : calculateEndDate(event),
                    content : calculateEventContent(event),
                    className : event.colorScheme
                };
            });
        }

        //Transform the events into the format that calednar-plugin will expect, which is really just the format
        //that the /calendar/events.json resource expects
        //event is a parameter in "our" format
        //timelineEvent is an event in the format used by CHAP timeline
        function transformEventForServer(event, timelineEvent) {
            var transformedEvent = {},
                eventSubCalendar = calendarPlugin.getSubCalendar(calendarDiv, event.subCalendarId);

            if (
                    event.className[0] == "jira-version" || (event.className[0] === "jira-issue"  && event.localizedStartDate === event.localizedEndDate) // Made this first condition because it seems that timelineEvent.end for JIRA version is null
                    || (event.allDay
                        && timelineEvent.end.getHours() == 23
                        && timelineEvent.end.getMinutes() == 59
                        )
                ) { //TEAMCAL-1035
                //If we get here assume we are still an all day event
                transformedEvent.allDayEvent = true;
                if (timelineEvent.end) {
                    timelineEvent.end.setHours(0);
                    timelineEvent.end.setMinutes(0);
                    timelineEvent.end.setSeconds(0);
                }
            } else {
                transformedEvent.allDayEvent = false;
            }

            transformedEvent.subCalendarId = eventSubCalendar.parentId;
            transformedEvent.uid = event._id;
            transformedEvent.originalStartDate = event.originalStart || "";
            transformedEvent.what = event.title;
            transformedEvent.url = event.workingUrl; // TEAMCAL-993
            transformedEvent.start = $.fullCalendar.formatDate(timelineEvent.start, "ddMMyyyyHHmm");
            transformedEvent.end = $.fullCalendar.formatDate(timelineEvent.end || timelineEvent.start, "ddMMyyyyHHmm");
            transformedEvent.where = event.where;
            transformedEvent.description = event.description;
            transformedEvent.freq = event.recur ? event.recur.freq : "";
            transformedEvent.byday = event.recur ? event.recur.byDay : "";
            transformedEvent.interval = event.recur ? event.recur.interval : "";
            transformedEvent.until = event.recur ? event.recur.localizedUntil || "" : "";
            transformedEvent.recurrenceId = event.recurId || "";
            transformedEvent.editAllInRecurrenceSeries = "false";
            transformedEvent.dragAndDropUpdate = true;
            transformedEvent.eventType = event.eventType;
            transformedEvent.customEventTypeId = event.customEventTypeId;

            if (eventSubCalendar.eventInviteesSupported) {
                transformedEvent.person = $.map(event.invitees || [], function(invitee) {
                    return invitee.id;
                });
            }

            return transformedEvent;
        }

        //Public interface to the timeline adapter
        return {
            renderEvents : function(_events) {
                var subCalIds = $.map(_events, function(event) { return event.subCalendarId });

                if (lastModifiedSubCalendar && $.inArray(lastModifiedSubCalendar, subCalIds) === -1) {
                    lastModifiedSubCalendar = null;
                    return;
                }

                events = _events;
                timelineEvents = transformToTimelineDataFormat(_events);
                drawVisualization(timelineEvents);
                updateDateDisplay();
            },

            setDate : function(date) {
                var viewSize = visEnd.getTime() - visStart.getTime();

                visStart = new Date(date.getTime() - (viewSize / 2));
                visEnd = new Date(date.getTime() + (viewSize / 2));
                updateVisibleRange(visStart.getTime(), visEnd.getTime());
            },

            next : function() {
                timeline.move(TIMELINE_INCREMENT);
                onRangeChanged();
            },

            prev : function() {
                timeline.move(-TIMELINE_INCREMENT);
                onRangeChanged();
            },

            gotoToday : function() {
                timeline.setVisibleChartRangeNow();
                onRangeChanged();
            }
        };
    };
})(AJS.$);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/require-oauth-message.soy' */
// This file was automatically generated from require-oauth-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.requireOauthMessage = function(opt_data, opt_ignored) {
  return '<div class="oauth-approve aui-message aui-message-hint hint" data-o-auth-url="' + soy.$$escapeHtml(opt_data.oAuthUrl) + '" data-sub-calendar-ids="' + soy.$$escapeHtml(opt_data.subCalendarIdsArrayJson) + '" data-sub-calendar-names="' + soy.$$escapeHtml(opt_data.subCalendarNamesArrayJson) + '"><p class="info-approve">' + soy.$$filterNoAutoescape(AJS.format('\x3ca href\x3d\x22#\x22 class\x3d\x22approve-dance\x22\x3e{0}\x3c/a\x3e to see events of \x3cspan class\x3d\x22subcalendar-names\x22\x3e{1}\x3c/span\x3e','Login \x26 Approve',opt_data.subCalendarName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.requireOauthMessage.soyTemplateName = 'Confluence.TeamCalendars.Templates.requireOauthMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/timeline-event-content.soy' */
// This file was automatically generated from timeline-event-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee = function(opt_data, opt_ignored) {
  return '<div class="user-icon-container"><img class="user-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '"><span class="single_person">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee';
}


Confluence.TeamCalendars.Templates.timelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.iconClass}) + '<div class="event-content-with-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '-icon" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContent';
}


Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container ' + soy.$$escapeHtml(opt_data.className) + '">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.className}) + '<div class="event-content" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon';
}


Confluence.TeamCalendars.Templates.defaultTimelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container"><span data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.defaultTimelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.defaultTimelineEventContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subscribe-dialog.soy' */
// This file was automatically generated from calendar-subscribe-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subscribeDialog = function(opt_data, opt_ignored) {
  return '<div class="subscribe-to-subcalendar"><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="mode"><div id="tc-subscribe-no-search-warning" class="hidden loading"><span>' + soy.$$escapeHtml('The version of Confluence you are using does not allow calendars to be searched. Here is a list of all calendars you may subscribe to.') + '</span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="preamble"><span id="subscribe-intro"></span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="search"><form class="aui"><textarea name="query" class="textarea" rows="1"></textarea></form><span class="spinner aui-icon aui-icon-wait"></span></div></div></div><div class="results"></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subscribeDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.subscribeDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-issue.soy' */
// This file was automatically generated from event-popup-issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupIssue = function(opt_data, opt_ignored) {
  return '<div class="event-field labeled-field field-jira-date"><span class="field-label">' + soy.$$escapeHtml(opt_data.event.extraProperties.dateField) + ':</span><div class="field-value">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraIssueDisplayDayDuration)) + '</div></div><div class="event-field labeled-field field-jira-assignee"><span class="field-label">' + soy.$$escapeHtml('Assignee') + ':</span><div class="field-value' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? ' assignee-with-link' : '') + '"><span class="plain-assignee-name">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</span>' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? '<a class="assignee-profile-link" href="' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeProfileUrl) + '">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</a>' : '') + '</div></div><div class="event-field labeled-field field-jira-status"><span class="field-label">' + soy.$$escapeHtml('Status') + ':</span><div class="field-value">' + soy.$$escapeHtml(opt_data.event.extraProperties.statusText) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.issueLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Issue') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupIssue.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupIssue';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-version.soy' */
// This file was automatically generated from event-popup-version.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupVersion = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="day-duration">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraVersionDisplayDayDuration)) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.summaryLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Summary') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewIssuesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Issues') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.releaseNotesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Release Notes') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupVersion.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupVersion';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-sprint.soy' */
// This file was automatically generated from event-popup-sprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupSprint = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('All day') + '</div></div><div class="event-field field-event-links"><div class="' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? 'with-sprint-homepage' : 'no-sprint-homepage') + '"><a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewBoardsUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Sprint') + '</a>' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? '<span class="sprintHomePageUrlContainer"> &middot; <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.sprintHomePageUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Sprint Home Page') + '</a></span>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupSprint.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupSprint';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup.soy' */
// This file was automatically generated from event-popup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopup = function(opt_data, opt_ignored) {
  var output = '<div class="event-details-popup ' + soy.$$escapeHtml(opt_data.contextClass) + '"><div class="' + soy.$$escapeHtml(opt_data.event.className) + '"><div class="event-icon-container"><img class="event-icon" src="' + soy.$$escapeHtml(opt_data.event.iconUrl) + '"></div><div class="event-fields"><div class="event-field field-subcalendar-name"><span class="lozenge ' + soy.$$escapeHtml(opt_data.event.colour) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</span><div class="name"><a href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/calendar/previewcalendar.action?subCalendarId=' + soy.$$escapeHtml(opt_data.event.subCalendarId) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</a></div></div><div class="event-field field-summary"><span class="field-title"> ' + soy.$$escapeHtml(opt_data.event.title) + '</span>' + ((opt_data.event.period) ? '<span class="event-field reminder-icon" title="' + soy.$$escapeHtml(opt_data.event.period) + '"></span>' : '') + '</div>' + ((opt_data.event.where) ? '<div class="event-field field-location">' + soy.$$escapeHtml(opt_data.event.where) + '</div>' : '');
  if (opt_data.event.inviteesSupported && opt_data.event.invitees && opt_data.event.invitees.length > 1) {
    output += '<div class="event-field field-invitees">';
    var inviteeList36 = opt_data.event.invitees;
    var inviteeListLen36 = inviteeList36.length;
    for (var inviteeIndex36 = 0; inviteeIndex36 < inviteeListLen36; inviteeIndex36++) {
      var inviteeData36 = inviteeList36[inviteeIndex36];
      output += '<img class="invitee" src="' + soy.$$escapeHtml(inviteeData36.avatarIconUrl) + '" title="' + soy.$$escapeHtml(inviteeData36.displayName) + '">';
    }
    output += '</div>';
  }
  if (opt_data.event.workingUrl) {
    output += '<div class="event-field field-link">';
    var eventLink__soy47 = '' + ((! opt_data.event.urlAlias) ? soy.$$escapeHtml(opt_data.event.workingUrl) : soy.$$escapeHtml(opt_data.event.urlAlias));
    output += '<a class="event-link" href="' + soy.$$escapeHtml(opt_data.event.workingUrl) + '" title="' + soy.$$escapeHtml(eventLink__soy47) + '">' + soy.$$escapeHtml(eventLink__soy47) + '</a></div>';
  }
  output += (opt_data.event.description) ? '<div class="event-field field-description">' + ((opt_data.event.descriptionRendered) ? soy.$$filterNoAutoescape(opt_data.event.descriptionRendered) : soy.$$escapeHtml(opt_data.event.description)) + '</div>' : '';
  if (opt_data.event.extraPropertiesTemplate) {
    output += '<div class="extra-fields">';
    switch (opt_data.event.extraPropertiesTemplate) {
      case 'event-details-version':
        output += Confluence.TeamCalendars.Templates.eventPopupVersion(opt_data);
        break;
      case 'event-details-issue':
        output += Confluence.TeamCalendars.Templates.eventPopupIssue(opt_data);
        break;
      case 'event-details-sprint':
        output += Confluence.TeamCalendars.Templates.eventPopupSprint(opt_data);
        break;
    }
    output += '</div>';
  }
  output += '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('All day') + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a class="event-delete edit-control" href="#">' + soy.$$escapeHtml('Delete') + '</a></div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopup.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopup';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/upcoming-events.soy' */
// This file was automatically generated from upcoming-events.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.upcomingEvents = function(opt_data, opt_ignored) {
  var output = '<div class="dashboard-calendar"><div class="events-container"><ul class="group-list">';
  var eventGroupList4 = opt_data.eventGroups;
  var eventGroupListLen4 = eventGroupList4.length;
  for (var eventGroupIndex4 = 0; eventGroupIndex4 < eventGroupListLen4; eventGroupIndex4++) {
    var eventGroupData4 = eventGroupList4[eventGroupIndex4];
    output += '<li class="event-group"><div class="group-details-container"><div class="group-details"><div class="group-headline' + ((eventGroupData4.today == true) ? ' today-headline' : '') + '"><span class="other-days" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '">' + soy.$$escapeHtml('Formatting...') + '</span><span class="today">' + soy.$$escapeHtml('Today') + '</span></div><ul class="events">';
    var eventList16 = eventGroupData4.events;
    var eventListLen16 = eventList16.length;
    for (var eventIndex16 = 0; eventIndex16 < eventListLen16; eventIndex16++) {
      var eventData16 = eventList16[eventIndex16];
      output += '<li data-event-id="' + soy.$$escapeHtml(eventData16.id) + '" data-sub-calendar-name="' + soy.$$escapeHtml(eventData16.subCalendar.name) + '"><div class="event-details"><div class="event-subcalendar ' + soy.$$escapeHtml(eventData16.subCalendar.color) + '" title="' + soy.$$escapeHtml(eventData16.subCalendar.name) + '"></div>' + ((eventData16.mediumIconUrl) ? '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.mediumIconUrl) + '">' : '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.iconUrl) + '">') + '<strong class="event-name">' + soy.$$escapeHtml(eventData16.title) + '</strong><span class="event-subcalendar-name">' + ((eventData16.parentSubCalendar) ? soy.$$escapeHtml(eventData16.parentSubCalendar.name) : soy.$$escapeHtml(eventData16.subCalendar.name)) + '</span><div class="event-description">' + ((eventData16.descriptionRendered) ? '<span class="ellipsis_text">' + soy.$$filterNoAutoescape(eventData16.descriptionRendered) + '</span>' : (eventData16.description) ? '<span class="ellipsis_text">' + soy.$$escapeHtml(eventData16.description) + '</span>' : '') + '</div></div><div class="clear"></div>' + ((eventIndex16 == eventListLen16 - 1) ? (0 < eventGroupData4.hiddenEventsCount) ? (1 < eventGroupData4.hiddenEventsCount) ? '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format('And {0} more events...',eventGroupData4.hiddenEventsCount)) + '</div>' : '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format('And {0} more event...',eventGroupData4.hiddenEventsCount)) + '</div>' : '' : '') + '</li>';
    }
    output += '</ul></div></div><div class="group-date' + ((eventGroupData4.today) ? ' first-group-date' : '') + '"><div class="day" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '">' + soy.$$escapeHtml(eventGroupData4.groupDay) + '</div><div class="month" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '"></div></div><div class="event-group-clear"></div></li>';
  }
  output += '</ul><a href="#" class="more-events hidden">' + soy.$$escapeHtml('More') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.upcomingEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.upcomingEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = '/com/atlassian/confluence/extra/calendar3/amd/shim/templates-amd.js' */
define("tc/templates", function () {
    return Confluence.TeamCalendars.Templates;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/amd/shim/dialogs-amd.js' */
define("tc/dialogs", function () {
    return Confluence.TeamCalendars.Dialogs;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/backbone-amd.js' */
//     Backbone.js 1.1.2 for TC only

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

(function(root, factory) {

    // Set up Backbone appropriately for the environment. Start with AMD.
    if (typeof define === 'function' && define.amd) {
        define(['underscore', 'jquery', 'exports'], function(_, $, exports) {
            // Export global even in AMD case in case this script is loaded with
            // others that may still expect a global Backbone.
            root.Backbone = factory(root, exports, _, $);
        });

        // Next for Node.js or CommonJS. jQuery may not be needed as a module.
    } else if (typeof exports !== 'undefined') {
        var _ = require('underscore');
        factory(root, exports, _);

        // Finally, as a browser global.
    } else {
        root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));
    }

}(this, function(root, Backbone, _, $) {

    // Initial Setup
    // -------------

    // Save the previous value of the `Backbone` variable, so that it can be
    // restored later on, if `noConflict` is used.
    var previousBackbone = root.Backbone;

    // Create local references to array methods we'll want to use later.
    var array = [];
    var slice = array.slice;

    // Current version of the library. Keep in sync with `package.json`.
    Backbone.VERSION = '1.1.2';

    // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns
    // the `$` variable.
    Backbone.$ = $;

    // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable
    // to its previous owner. Returns a reference to this Backbone object.
    Backbone.noConflict = function() {
        root.Backbone = previousBackbone;
        return this;
    };

    // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option
    // will fake `"PATCH"`, `"PUT"` and `"DELETE"` requests via the `_method` parameter and
    // set a `X-Http-Method-Override` header.
    Backbone.emulateHTTP = false;

    // Turn on `emulateJSON` to support legacy servers that can't deal with direct
    // `application/json` requests ... will encode the body as
    // `application/x-www-form-urlencoded` instead and will send the model in a
    // form param named `model`.
    Backbone.emulateJSON = false;

    // Backbone.Events
    // ---------------

    // A module that can be mixed in to *any object* in order to provide it with
    // custom events. You may bind with `on` or remove with `off` callback
    // functions to an event; `trigger`-ing an event fires all callbacks in
    // succession.
    //
    //     var object = {};
    //     _.extend(object, Backbone.Events);
    //     object.on('expand', function(){ alert('expanded'); });
    //     object.trigger('expand');
    //
    var Events = Backbone.Events = {

        // Bind an event to a `callback` function. Passing `"all"` will bind
        // the callback to all events fired.
        on: function(name, callback, context) {
            if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;
            this._events || (this._events = {});
            var events = this._events[name] || (this._events[name] = []);
            events.push({callback: callback, context: context, ctx: context || this});
            return this;
        },

        // Bind an event to only be triggered a single time. After the first time
        // the callback is invoked, it will be removed.
        once: function(name, callback, context) {
            if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;
            var self = this;
            var once = _.once(function() {
                self.off(name, once);
                callback.apply(this, arguments);
            });
            once._callback = callback;
            return this.on(name, once, context);
        },

        // Remove one or many callbacks. If `context` is null, removes all
        // callbacks with that function. If `callback` is null, removes all
        // callbacks for the event. If `name` is null, removes all bound
        // callbacks for all events.
        off: function(name, callback, context) {
            if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;

            // Remove all callbacks for all events.
            if (!name && !callback && !context) {
                this._events = void 0;
                return this;
            }

            var names = name ? [name] : _.keys(this._events);
            for (var i = 0, length = names.length; i < length; i++) {
                name = names[i];

                // Bail out if there are no events stored.
                var events = this._events[name];
                if (!events) continue;

                // Remove all callbacks for this event.
                if (!callback && !context) {
                    delete this._events[name];
                    continue;
                }

                // Find any remaining events.
                var remaining = [];
                for (var j = 0, k = events.length; j < k; j++) {
                    var event = events[j];
                    if (
                        callback && callback !== event.callback &&
                        callback !== event.callback._callback ||
                        context && context !== event.context
                        ) {
                        remaining.push(event);
                    }
                }

                // Replace events if there are any remaining.  Otherwise, clean up.
                if (remaining.length) {
                    this._events[name] = remaining;
                } else {
                    delete this._events[name];
                }
            }

            return this;
        },

        // Trigger one or many events, firing all bound callbacks. Callbacks are
        // passed the same arguments as `trigger` is, apart from the event name
        // (unless you're listening on `"all"`, which will cause your callback to
        // receive the true name of the event as the first argument).
        trigger: function(name) {
            if (!this._events) return this;
            var args = slice.call(arguments, 1);
            if (!eventsApi(this, 'trigger', name, args)) return this;
            var events = this._events[name];
            var allEvents = this._events.all;
            if (events) triggerEvents(events, args);
            if (allEvents) triggerEvents(allEvents, arguments);
            return this;
        },

        // Tell this object to stop listening to either specific events ... or
        // to every object it's currently listening to.
        stopListening: function(obj, name, callback) {
            var listeningTo = this._listeningTo;
            if (!listeningTo) return this;
            var remove = !name && !callback;
            if (!callback && typeof name === 'object') callback = this;
            if (obj) (listeningTo = {})[obj._listenId] = obj;
            for (var id in listeningTo) {
                obj = listeningTo[id];
                obj.off(name, callback, this);
                if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];
            }
            return this;
        }

    };

    // Regular expression used to split event strings.
    var eventSplitter = /\s+/;

    // Implement fancy features of the Events API such as multiple event
    // names `"change blur"` and jQuery-style event maps `{change: action}`
    // in terms of the existing API.
    var eventsApi = function(obj, action, name, rest) {
        if (!name) return true;

        // Handle event maps.
        if (typeof name === 'object') {
            for (var key in name) {
                obj[action].apply(obj, [key, name[key]].concat(rest));
            }
            return false;
        }

        // Handle space separated event names.
        if (eventSplitter.test(name)) {
            var names = name.split(eventSplitter);
            for (var i = 0, length = names.length; i < length; i++) {
                obj[action].apply(obj, [names[i]].concat(rest));
            }
            return false;
        }

        return true;
    };

    // A difficult-to-believe, but optimized internal dispatch function for
    // triggering events. Tries to keep the usual cases speedy (most internal
    // Backbone events have 3 arguments).
    var triggerEvents = function(events, args) {
        var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];
        switch (args.length) {
            case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;
            case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;
            case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;
            case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;
            default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;
        }
    };

    var listenMethods = {listenTo: 'on', listenToOnce: 'once'};

    // Inversion-of-control versions of `on` and `once`. Tell *this* object to
    // listen to an event in another object ... keeping track of what it's
    // listening to.
    _.each(listenMethods, function(implementation, method) {
        Events[method] = function(obj, name, callback) {
            var listeningTo = this._listeningTo || (this._listeningTo = {});
            var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
            listeningTo[id] = obj;
            if (!callback && typeof name === 'object') callback = this;
            obj[implementation](name, callback, this);
            return this;
        };
    });

    // Aliases for backwards compatibility.
    Events.bind   = Events.on;
    Events.unbind = Events.off;

    // Allow the `Backbone` object to serve as a global event bus, for folks who
    // want global "pubsub" in a convenient place.
    _.extend(Backbone, Events);

    // Backbone.Model
    // --------------

    // Backbone **Models** are the basic data object in the framework --
    // frequently representing a row in a table in a database on your server.
    // A discrete chunk of data and a bunch of useful, related methods for
    // performing computations and transformations on that data.

    // Create a new model with the specified attributes. A client id (`cid`)
    // is automatically generated and assigned for you.
    var Model = Backbone.Model = function(attributes, options) {
        var attrs = attributes || {};
        options || (options = {});
        this.cid = _.uniqueId('c');
        this.attributes = {};
        if (options.collection) this.collection = options.collection;
        if (options.parse) attrs = this.parse(attrs, options) || {};
        attrs = _.defaults({}, attrs, _.result(this, 'defaults'));
        this.set(attrs, options);
        this.changed = {};
        this.initialize.apply(this, arguments);
    };

    // Attach all inheritable methods to the Model prototype.
    _.extend(Model.prototype, Events, {

        // A hash of attributes whose current and previous value differ.
        changed: null,

        // The value returned during the last failed validation.
        validationError: null,

        // The default name for the JSON `id` attribute is `"id"`. MongoDB and
        // CouchDB users may want to set this to `"_id"`.
        idAttribute: 'id',

        // Initialize is an empty function by default. Override it with your own
        // initialization logic.
        initialize: function(){},

        // Return a copy of the model's `attributes` object.
        toJSON: function(options) {
            return _.clone(this.attributes);
        },

        // Proxy `Backbone.sync` by default -- but override this if you need
        // custom syncing semantics for *this* particular model.
        sync: function() {
            return Backbone.sync.apply(this, arguments);
        },

        // Get the value of an attribute.
        get: function(attr) {
            return this.attributes[attr];
        },

        // Get the HTML-escaped value of an attribute.
        escape: function(attr) {
            return _.escape(this.get(attr));
        },

        // Returns `true` if the attribute contains a value that is not null
        // or undefined.
        has: function(attr) {
            return this.get(attr) != null;
        },

        // Set a hash of model attributes on the object, firing `"change"`. This is
        // the core primitive operation of a model, updating the data and notifying
        // anyone who needs to know about the change in state. The heart of the beast.
        set: function(key, val, options) {
            var attr, attrs, unset, changes, silent, changing, prev, current;
            if (key == null) return this;

            // Handle both `"key", value` and `{key: value}` -style arguments.
            if (typeof key === 'object') {
                attrs = key;
                options = val;
            } else {
                (attrs = {})[key] = val;
            }

            options || (options = {});

            // Run validation.
            if (!this._validate(attrs, options)) return false;

            // Extract attributes and options.
            unset           = options.unset;
            silent          = options.silent;
            changes         = [];
            changing        = this._changing;
            this._changing  = true;

            if (!changing) {
                this._previousAttributes = _.clone(this.attributes);
                this.changed = {};
            }
            current = this.attributes, prev = this._previousAttributes;

            // Check for changes of `id`.
            if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];

            // For each `set` attribute, update or delete the current value.
            for (attr in attrs) {
                val = attrs[attr];
                if (!_.isEqual(current[attr], val)) changes.push(attr);
                if (!_.isEqual(prev[attr], val)) {
                    this.changed[attr] = val;
                } else {
                    delete this.changed[attr];
                }
                unset ? delete current[attr] : current[attr] = val;
            }

            // Trigger all relevant attribute changes.
            if (!silent) {
                if (changes.length) this._pending = options;
                for (var i = 0, length = changes.length; i < length; i++) {
                    this.trigger('change:' + changes[i], this, current[changes[i]], options);
                }
            }

            // You might be wondering why there's a `while` loop here. Changes can
            // be recursively nested within `"change"` events.
            if (changing) return this;
            if (!silent) {
                while (this._pending) {
                    options = this._pending;
                    this._pending = false;
                    this.trigger('change', this, options);
                }
            }
            this._pending = false;
            this._changing = false;
            return this;
        },

        // Remove an attribute from the model, firing `"change"`. `unset` is a noop
        // if the attribute doesn't exist.
        unset: function(attr, options) {
            return this.set(attr, void 0, _.extend({}, options, {unset: true}));
        },

        // Clear all attributes on the model, firing `"change"`.
        clear: function(options) {
            var attrs = {};
            for (var key in this.attributes) attrs[key] = void 0;
            return this.set(attrs, _.extend({}, options, {unset: true}));
        },

        // Determine if the model has changed since the last `"change"` event.
        // If you specify an attribute name, determine if that attribute has changed.
        hasChanged: function(attr) {
            if (attr == null) return !_.isEmpty(this.changed);
            return _.has(this.changed, attr);
        },

        // Return an object containing all the attributes that have changed, or
        // false if there are no changed attributes. Useful for determining what
        // parts of a view need to be updated and/or what attributes need to be
        // persisted to the server. Unset attributes will be set to undefined.
        // You can also pass an attributes object to diff against the model,
        // determining if there *would be* a change.
        changedAttributes: function(diff) {
            if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
            var val, changed = false;
            var old = this._changing ? this._previousAttributes : this.attributes;
            for (var attr in diff) {
                if (_.isEqual(old[attr], (val = diff[attr]))) continue;
                (changed || (changed = {}))[attr] = val;
            }
            return changed;
        },

        // Get the previous value of an attribute, recorded at the time the last
        // `"change"` event was fired.
        previous: function(attr) {
            if (attr == null || !this._previousAttributes) return null;
            return this._previousAttributes[attr];
        },

        // Get all of the attributes of the model at the time of the previous
        // `"change"` event.
        previousAttributes: function() {
            return _.clone(this._previousAttributes);
        },

        // Fetch the model from the server. If the server's representation of the
        // model differs from its current attributes, they will be overridden,
        // triggering a `"change"` event.
        fetch: function(options) {
            options = options ? _.clone(options) : {};
            if (options.parse === void 0) options.parse = true;
            var model = this;
            var success = options.success;
            options.success = function(resp) {
                if (!model.set(model.parse(resp, options), options)) return false;
                if (success) success(model, resp, options);
                model.trigger('sync', model, resp, options);
            };
            wrapError(this, options);
            return this.sync('read', this, options);
        },

        // Set a hash of model attributes, and sync the model to the server.
        // If the server returns an attributes hash that differs, the model's
        // state will be `set` again.
        save: function(key, val, options) {
            var attrs, method, xhr, attributes = this.attributes;

            // Handle both `"key", value` and `{key: value}` -style arguments.
            if (key == null || typeof key === 'object') {
                attrs = key;
                options = val;
            } else {
                (attrs = {})[key] = val;
            }

            options = _.extend({validate: true}, options);

            // If we're not waiting and attributes exist, save acts as
            // `set(attr).save(null, opts)` with validation. Otherwise, check if
            // the model will be valid when the attributes, if any, are set.
            if (attrs && !options.wait) {
                if (!this.set(attrs, options)) return false;
            } else {
                if (!this._validate(attrs, options)) return false;
            }

            // Set temporary attributes if `{wait: true}`.
            if (attrs && options.wait) {
                this.attributes = _.extend({}, attributes, attrs);
            }

            // After a successful server-side save, the client is (optionally)
            // updated with the server-side state.
            if (options.parse === void 0) options.parse = true;
            var model = this;
            var success = options.success;
            options.success = function(resp) {
                // Ensure attributes are restored during synchronous saves.
                model.attributes = attributes;
                var serverAttrs = model.parse(resp, options);
                if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
                if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
                    return false;
                }
                if (success) success(model, resp, options);
                model.trigger('sync', model, resp, options);
            };
            wrapError(this, options);

            method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
            if (method === 'patch') options.attrs = attrs;
            xhr = this.sync(method, this, options);

            // Restore attributes.
            if (attrs && options.wait) this.attributes = attributes;

            return xhr;
        },

        // Destroy this model on the server if it was already persisted.
        // Optimistically removes the model from its collection, if it has one.
        // If `wait: true` is passed, waits for the server to respond before removal.
        destroy: function(options) {
            options = options ? _.clone(options) : {};
            var model = this;
            var success = options.success;

            var destroy = function() {
                model.trigger('destroy', model, model.collection, options);
            };

            options.success = function(resp) {
                if (options.wait || model.isNew()) destroy();
                if (success) success(model, resp, options);
                if (!model.isNew()) model.trigger('sync', model, resp, options);
            };

            if (this.isNew()) {
                options.success();
                return false;
            }
            wrapError(this, options);

            var xhr = this.sync('delete', this, options);
            if (!options.wait) destroy();
            return xhr;
        },

        // Default URL for the model's representation on the server -- if you're
        // using Backbone's restful methods, override this to change the endpoint
        // that will be called.
        url: function() {
            var base =
                _.result(this, 'urlRoot') ||
                _.result(this.collection, 'url') ||
                urlError();
            if (this.isNew()) return base;
            return base.replace(/([^\/])$/, '$1/') + encodeURIComponent(this.id);
        },

        // **parse** converts a response into the hash of attributes to be `set` on
        // the model. The default implementation is just to pass the response along.
        parse: function(resp, options) {
            return resp;
        },

        // Create a new model with identical attributes to this one.
        clone: function() {
            return new this.constructor(this.attributes);
        },

        // A model is new if it has never been saved to the server, and lacks an id.
        isNew: function() {
            return !this.has(this.idAttribute);
        },

        // Check if the model is currently in a valid state.
        isValid: function(options) {
            return this._validate({}, _.extend(options || {}, { validate: true }));
        },

        // Run validation against the next complete set of model attributes,
        // returning `true` if all is well. Otherwise, fire an `"invalid"` event.
        _validate: function(attrs, options) {
            if (!options.validate || !this.validate) return true;
            attrs = _.extend({}, this.attributes, attrs);
            var error = this.validationError = this.validate(attrs, options) || null;
            if (!error) return true;
            this.trigger('invalid', this, error, _.extend(options, {validationError: error}));
            return false;
        }

    });

    // Underscore methods that we want to implement on the Model.
    var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit', 'chain'];

    // Mix in each Underscore method as a proxy to `Model#attributes`.
    _.each(modelMethods, function(method) {
        if (!_[method]) return;
        Model.prototype[method] = function() {
            var args = slice.call(arguments);
            args.unshift(this.attributes);
            return _[method].apply(_, args);
        };
    });

    // Backbone.Collection
    // -------------------

    // If models tend to represent a single row of data, a Backbone Collection is
    // more analogous to a table full of data ... or a small slice or page of that
    // table, or a collection of rows that belong together for a particular reason
    // -- all of the messages in this particular folder, all of the documents
    // belonging to this particular author, and so on. Collections maintain
    // indexes of their models, both in order, and for lookup by `id`.

    // Create a new **Collection**, perhaps to contain a specific type of `model`.
    // If a `comparator` is specified, the Collection will maintain
    // its models in sort order, as they're added and removed.
    var Collection = Backbone.Collection = function(models, options) {
        options || (options = {});
        if (options.model) this.model = options.model;
        if (options.comparator !== void 0) this.comparator = options.comparator;
        this._reset();
        this.initialize.apply(this, arguments);
        if (models) this.reset(models, _.extend({silent: true}, options));
    };

    // Default options for `Collection#set`.
    var setOptions = {add: true, remove: true, merge: true};
    var addOptions = {add: true, remove: false};

    // Define the Collection's inheritable methods.
    _.extend(Collection.prototype, Events, {

        // The default model for a collection is just a **Backbone.Model**.
        // This should be overridden in most cases.
        model: Model,

        // Initialize is an empty function by default. Override it with your own
        // initialization logic.
        initialize: function(){},

        // The JSON representation of a Collection is an array of the
        // models' attributes.
        toJSON: function(options) {
            return this.map(function(model){ return model.toJSON(options); });
        },

        // Proxy `Backbone.sync` by default.
        sync: function() {
            return Backbone.sync.apply(this, arguments);
        },

        // Add a model, or list of models to the set.
        add: function(models, options) {
            return this.set(models, _.extend({merge: false}, options, addOptions));
        },

        // Remove a model, or a list of models from the set.
        remove: function(models, options) {
            var singular = !_.isArray(models);
            models = singular ? [models] : _.clone(models);
            options || (options = {});
            for (var i = 0, length = models.length; i < length; i++) {
                var model = models[i] = this.get(models[i]);
                if (!model) continue;
                var id = this.modelId(model.attributes);
                if (id != null) delete this._byId[id];
                delete this._byId[model.cid];
                var index = this.indexOf(model);
                this.models.splice(index, 1);
                this.length--;
                if (!options.silent) {
                    options.index = index;
                    model.trigger('remove', model, this, options);
                }
                this._removeReference(model, options);
            }
            return singular ? models[0] : models;
        },

        // Update a collection by `set`-ing a new list of models, adding new ones,
        // removing models that are no longer present, and merging models that
        // already exist in the collection, as necessary. Similar to **Model#set**,
        // the core operation for updating the data contained by the collection.
        set: function(models, options) {
            options = _.defaults({}, options, setOptions);
            if (options.parse) models = this.parse(models, options);
            var singular = !_.isArray(models);
            models = singular ? (models ? [models] : []) : models.slice();
            var id, model, attrs, existing, sort;
            var at = options.at;
            var sortable = this.comparator && (at == null) && options.sort !== false;
            var sortAttr = _.isString(this.comparator) ? this.comparator : null;
            var toAdd = [], toRemove = [], modelMap = {};
            var add = options.add, merge = options.merge, remove = options.remove;
            var order = !sortable && add && remove ? [] : false;

            // Turn bare objects into model references, and prevent invalid models
            // from being added.
            for (var i = 0, length = models.length; i < length; i++) {
                attrs = models[i];

                // If a duplicate is found, prevent it from being added and
                // optionally merge it into the existing model.
                if (existing = this.get(attrs)) {
                    if (remove) modelMap[existing.cid] = true;
                    if (merge && attrs !== existing) {
                        attrs = this._isModel(attrs) ? attrs.attributes : attrs;
                        if (options.parse) attrs = existing.parse(attrs, options);
                        existing.set(attrs, options);
                        if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;
                    }
                    models[i] = existing;

                    // If this is a new, valid model, push it to the `toAdd` list.
                } else if (add) {
                    model = models[i] = this._prepareModel(attrs, options);
                    if (!model) continue;
                    toAdd.push(model);
                    this._addReference(model, options);
                }

                // Do not add multiple models with the same `id`.
                model = existing || model;
                if (!model) continue;
                id = this.modelId(model.attributes);
                if (order && (model.isNew() || !modelMap[id])) order.push(model);
                modelMap[id] = true;
            }

            // Remove nonexistent models if appropriate.
            if (remove) {
                for (var i = 0, length = this.length; i < length; i++) {
                    if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);
                }
                if (toRemove.length) this.remove(toRemove, options);
            }

            // See if sorting is needed, update `length` and splice in new models.
            if (toAdd.length || (order && order.length)) {
                if (sortable) sort = true;
                this.length += toAdd.length;
                if (at != null) {
                    for (var i = 0, length = toAdd.length; i < length; i++) {
                        this.models.splice(at + i, 0, toAdd[i]);
                    }
                } else {
                    if (order) this.models.length = 0;
                    var orderedModels = order || toAdd;
                    for (var i = 0, length = orderedModels.length; i < length; i++) {
                        this.models.push(orderedModels[i]);
                    }
                }
            }

            // Silently sort the collection if appropriate.
            if (sort) this.sort({silent: true});

            // Unless silenced, it's time to fire all appropriate add/sort events.
            if (!options.silent) {
                for (var i = 0, length = toAdd.length; i < length; i++) {
                    (model = toAdd[i]).trigger('add', model, this, options);
                }
                if (sort || (order && order.length)) this.trigger('sort', this, options);
            }

            // Return the added (or merged) model (or models).
            return singular ? models[0] : models;
        },

        // When you have more items than you want to add or remove individually,
        // you can reset the entire set with a new list of models, without firing
        // any granular `add` or `remove` events. Fires `reset` when finished.
        // Useful for bulk operations and optimizations.
        reset: function(models, options) {
            options || (options = {});
            for (var i = 0, length = this.models.length; i < length; i++) {
                this._removeReference(this.models[i], options);
            }
            options.previousModels = this.models;
            this._reset();
            models = this.add(models, _.extend({silent: true}, options));
            if (!options.silent) this.trigger('reset', this, options);
            return models;
        },

        // Add a model to the end of the collection.
        push: function(model, options) {
            return this.add(model, _.extend({at: this.length}, options));
        },

        // Remove a model from the end of the collection.
        pop: function(options) {
            var model = this.at(this.length - 1);
            this.remove(model, options);
            return model;
        },

        // Add a model to the beginning of the collection.
        unshift: function(model, options) {
            return this.add(model, _.extend({at: 0}, options));
        },

        // Remove a model from the beginning of the collection.
        shift: function(options) {
            var model = this.at(0);
            this.remove(model, options);
            return model;
        },

        // Slice out a sub-array of models from the collection.
        slice: function() {
            return slice.apply(this.models, arguments);
        },

        // Get a model from the set by id.
        get: function(obj) {
            if (obj == null) return void 0;
            var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);
            return this._byId[obj] || this._byId[id] || this._byId[obj.cid];
        },

        // Get the model at the given index.
        at: function(index) {
            return this.models[index];
        },

        // Return models with matching attributes. Useful for simple cases of
        // `filter`.
        where: function(attrs, first) {
            if (_.isEmpty(attrs)) return first ? void 0 : [];
            return this[first ? 'find' : 'filter'](function(model) {
                for (var key in attrs) {
                    if (attrs[key] !== model.get(key)) return false;
                }
                return true;
            });
        },

        // Return the first model with matching attributes. Useful for simple cases
        // of `find`.
        findWhere: function(attrs) {
            return this.where(attrs, true);
        },

        // Force the collection to re-sort itself. You don't need to call this under
        // normal circumstances, as the set will maintain sort order as each item
        // is added.
        sort: function(options) {
            if (!this.comparator) throw new Error('Cannot sort a set without a comparator');
            options || (options = {});

            // Run sort based on type of `comparator`.
            if (_.isString(this.comparator) || this.comparator.length === 1) {
                this.models = this.sortBy(this.comparator, this);
            } else {
                this.models.sort(_.bind(this.comparator, this));
            }

            if (!options.silent) this.trigger('sort', this, options);
            return this;
        },

        // Pluck an attribute from each model in the collection.
        pluck: function(attr) {
            return _.invoke(this.models, 'get', attr);
        },

        // Fetch the default set of models for this collection, resetting the
        // collection when they arrive. If `reset: true` is passed, the response
        // data will be passed through the `reset` method instead of `set`.
        fetch: function(options) {
            options = options ? _.clone(options) : {};
            if (options.parse === void 0) options.parse = true;
            var success = options.success;
            var collection = this;
            options.success = function(resp) {
                var method = options.reset ? 'reset' : 'set';
                collection[method](resp, options);
                if (success) success(collection, resp, options);
                collection.trigger('sync', collection, resp, options);
            };
            wrapError(this, options);
            return this.sync('read', this, options);
        },

        // Create a new instance of a model in this collection. Add the model to the
        // collection immediately, unless `wait: true` is passed, in which case we
        // wait for the server to agree.
        create: function(model, options) {
            options = options ? _.clone(options) : {};
            if (!(model = this._prepareModel(model, options))) return false;
            if (!options.wait) this.add(model, options);
            var collection = this;
            var success = options.success;
            options.success = function(model, resp) {
                if (options.wait) collection.add(model, options);
                if (success) success(model, resp, options);
            };
            model.save(null, options);
            return model;
        },

        // **parse** converts a response into a list of models to be added to the
        // collection. The default implementation is just to pass it through.
        parse: function(resp, options) {
            return resp;
        },

        // Create a new collection with an identical list of models as this one.
        clone: function() {
            return new this.constructor(this.models, {
                model: this.model,
                comparator: this.comparator
            });
        },

        // Define how to uniquely identify models in the collection.
        modelId: function (attrs) {
            return attrs[this.model.prototype.idAttribute || 'id'];
        },

        // Private method to reset all internal state. Called when the collection
        // is first initialized or reset.
        _reset: function() {
            this.length = 0;
            this.models = [];
            this._byId  = {};
        },

        // Prepare a hash of attributes (or other model) to be added to this
        // collection.
        _prepareModel: function(attrs, options) {
            if (this._isModel(attrs)) {
                if (!attrs.collection) attrs.collection = this;
                return attrs;
            }
            options = options ? _.clone(options) : {};
            options.collection = this;
            var model = new this.model(attrs, options);
            if (!model.validationError) return model;
            this.trigger('invalid', this, model.validationError, options);
            return false;
        },

        // Method for checking whether an object should be considered a model for
        // the purposes of adding to the collection.
        _isModel: function (model) {
            return model instanceof Model;
        },

        // Internal method to create a model's ties to a collection.
        _addReference: function(model, options) {
            this._byId[model.cid] = model;
            var id = this.modelId(model.attributes);
            if (id != null) this._byId[id] = model;
            model.on('all', this._onModelEvent, this);
        },

        // Internal method to sever a model's ties to a collection.
        _removeReference: function(model, options) {
            if (this === model.collection) delete model.collection;
            model.off('all', this._onModelEvent, this);
        },

        // Internal method called every time a model in the set fires an event.
        // Sets need to update their indexes when models change ids. All other
        // events simply proxy through. "add" and "remove" events that originate
        // in other collections are ignored.
        _onModelEvent: function(event, model, collection, options) {
            if ((event === 'add' || event === 'remove') && collection !== this) return;
            if (event === 'destroy') this.remove(model, options);
            if (event === 'change') {
                var prevId = this.modelId(model.previousAttributes());
                var id = this.modelId(model.attributes);
                if (prevId !== id) {
                    if (prevId != null) delete this._byId[prevId];
                    if (id != null) this._byId[id] = model;
                }
            }
            this.trigger.apply(this, arguments);
        }

    });

    // Underscore methods that we want to implement on the Collection.
    // 90% of the core usefulness of Backbone Collections is actually implemented
    // right here:
    var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',
        'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',
        'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',
        'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',
        'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',
        'lastIndexOf', 'isEmpty', 'chain', 'sample', 'partition'];

    // Mix in each Underscore method as a proxy to `Collection#models`.
    _.each(methods, function(method) {
        if (!_[method]) return;
        Collection.prototype[method] = function() {
            var args = slice.call(arguments);
            args.unshift(this.models);
            return _[method].apply(_, args);
        };
    });

    // Underscore methods that take a property name as an argument.
    var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];

    // Use attributes instead of properties.
    _.each(attributeMethods, function(method) {
        if (!_[method]) return;
        Collection.prototype[method] = function(value, context) {
            var iterator = _.isFunction(value) ? value : function(model) {
                return model.get(value);
            };
            return _[method](this.models, iterator, context);
        };
    });

    // Backbone.View
    // -------------

    // Backbone Views are almost more convention than they are actual code. A View
    // is simply a JavaScript object that represents a logical chunk of UI in the
    // DOM. This might be a single item, an entire list, a sidebar or panel, or
    // even the surrounding frame which wraps your whole app. Defining a chunk of
    // UI as a **View** allows you to define your DOM events declaratively, without
    // having to worry about render order ... and makes it easy for the view to
    // react to specific changes in the state of your models.

    // Creating a Backbone.View creates its initial element outside of the DOM,
    // if an existing element is not provided...
    var View = Backbone.View = function(options) {
        this.cid = _.uniqueId('view');
        options || (options = {});
        _.extend(this, _.pick(options, viewOptions));
        this._ensureElement();
        this.initialize.apply(this, arguments);
    };

    // Cached regex to split keys for `delegate`.
    var delegateEventSplitter = /^(\S+)\s*(.*)$/;

    // List of view options to be merged as properties.
    var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];

    // Set up all inheritable **Backbone.View** properties and methods.
    _.extend(View.prototype, Events, {

        // The default `tagName` of a View's element is `"div"`.
        tagName: 'div',

        // jQuery delegate for element lookup, scoped to DOM elements within the
        // current view. This should be preferred to global lookups where possible.
        $: function(selector) {
            return this.$el.find(selector);
        },

        // Initialize is an empty function by default. Override it with your own
        // initialization logic.
        initialize: function(){},

        // **render** is the core function that your view should override, in order
        // to populate its element (`this.el`), with the appropriate HTML. The
        // convention is for **render** to always return `this`.
        render: function() {
            return this;
        },

        // Remove this view by taking the element out of the DOM, and removing any
        // applicable Backbone.Events listeners.
        remove: function() {
            this._removeElement();
            this.stopListening();
            return this;
        },

        // Remove this view's element from the document and all event listeners
        // attached to it. Exposed for subclasses using an alternative DOM
        // manipulation API.
        _removeElement: function() {
            this.$el.remove();
        },

        // Change the view's element (`this.el` property) and re-delegate the
        // view's events on the new element.
        setElement: function(element) {
            this.undelegateEvents();
            this._setElement(element);
            this.delegateEvents();
            return this;
        },

        // Creates the `this.el` and `this.$el` references for this view using the
        // given `el`. `el` can be a CSS selector or an HTML string, a jQuery
        // context or an element. Subclasses can override this to utilize an
        // alternative DOM manipulation API and are only required to set the
        // `this.el` property.
        _setElement: function(el) {
            this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);
            this.el = this.$el[0];
        },

        // Set callbacks, where `this.events` is a hash of
        //
        // *{"event selector": "callback"}*
        //
        //     {
        //       'mousedown .title':  'edit',
        //       'click .button':     'save',
        //       'click .open':       function(e) { ... }
        //     }
        //
        // pairs. Callbacks will be bound to the view, with `this` set properly.
        // Uses event delegation for efficiency.
        // Omitting the selector binds the event to `this.el`.
        delegateEvents: function(events) {
            if (!(events || (events = _.result(this, 'events')))) return this;
            this.undelegateEvents();
            for (var key in events) {
                var method = events[key];
                if (!_.isFunction(method)) method = this[events[key]];
                if (!method) continue;
                var match = key.match(delegateEventSplitter);
                this.delegate(match[1], match[2], _.bind(method, this));
            }
            return this;
        },

        // Add a single event listener to the view's element (or a child element
        // using `selector`). This only works for delegate-able events: not `focus`,
        // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.
        delegate: function(eventName, selector, listener) {
            this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);
        },

        // Clears all callbacks previously bound to the view by `delegateEvents`.
        // You usually don't need to use this, but may wish to if you have multiple
        // Backbone views attached to the same DOM element.
        undelegateEvents: function() {
            if (this.$el) this.$el.off('.delegateEvents' + this.cid);
            return this;
        },

        // A finer-grained `undelegateEvents` for removing a single delegated event.
        // `selector` and `listener` are both optional.
        undelegate: function(eventName, selector, listener) {
            this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);
        },

        // Produces a DOM element to be assigned to your view. Exposed for
        // subclasses using an alternative DOM manipulation API.
        _createElement: function(tagName) {
            return document.createElement(tagName);
        },

        // Ensure that the View has a DOM element to render into.
        // If `this.el` is a string, pass it through `$()`, take the first
        // matching element, and re-assign it to `el`. Otherwise, create
        // an element from the `id`, `className` and `tagName` properties.
        _ensureElement: function() {
            if (!this.el) {
                var attrs = _.extend({}, _.result(this, 'attributes'));
                if (this.id) attrs.id = _.result(this, 'id');
                if (this.className) attrs['class'] = _.result(this, 'className');
                this.setElement(this._createElement(_.result(this, 'tagName')));
                this._setAttributes(attrs);
            } else {
                this.setElement(_.result(this, 'el'));
            }
        },

        // Set attributes from a hash on this view's element.  Exposed for
        // subclasses using an alternative DOM manipulation API.
        _setAttributes: function(attributes) {
            this.$el.attr(attributes);
        }

    });

    // Backbone.sync
    // -------------

    // Override this function to change the manner in which Backbone persists
    // models to the server. You will be passed the type of request, and the
    // model in question. By default, makes a RESTful Ajax request
    // to the model's `url()`. Some possible customizations could be:
    //
    // * Use `setTimeout` to batch rapid-fire updates into a single request.
    // * Send up the models as XML instead of JSON.
    // * Persist models via WebSockets instead of Ajax.
    //
    // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests
    // as `POST`, with a `_method` parameter containing the true HTTP method,
    // as well as all requests with the body as `application/x-www-form-urlencoded`
    // instead of `application/json` with the model in a param named `model`.
    // Useful when interfacing with server-side languages like **PHP** that make
    // it difficult to read the body of `PUT` requests.
    Backbone.sync = function(method, model, options) {
        var type = methodMap[method];

        // Default options, unless specified.
        _.defaults(options || (options = {}), {
            emulateHTTP: Backbone.emulateHTTP,
            emulateJSON: Backbone.emulateJSON
        });

        // Default JSON-request options.
        var params = {type: type, dataType: 'json'};

        // Ensure that we have a URL.
        if (!options.url) {
            params.url = _.result(model, 'url') || urlError();
        }

        // Ensure that we have the appropriate request data.
        if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
            params.contentType = 'application/json';
            params.data = JSON.stringify(options.attrs || model.toJSON(options));
        }

        // For older servers, emulate JSON by encoding the request into an HTML-form.
        if (options.emulateJSON) {
            params.contentType = 'application/x-www-form-urlencoded';
            params.data = params.data ? {model: params.data} : {};
        }

        // For older servers, emulate HTTP by mimicking the HTTP method with `_method`
        // And an `X-HTTP-Method-Override` header.
        if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
            params.type = 'POST';
            if (options.emulateJSON) params.data._method = type;
            var beforeSend = options.beforeSend;
            options.beforeSend = function(xhr) {
                xhr.setRequestHeader('X-HTTP-Method-Override', type);
                if (beforeSend) return beforeSend.apply(this, arguments);
            };
        }

        // Don't process data on a non-GET request.
        if (params.type !== 'GET' && !options.emulateJSON) {
            params.processData = false;
        }

        // Pass along `textStatus` and `errorThrown` from jQuery.
        var error = options.error;
        options.error = function(xhr, textStatus, errorThrown) {
            options.textStatus = textStatus;
            options.errorThrown = errorThrown;
            if (error) error.apply(this, arguments);
        };

        // Make the request, allowing the user to override any Ajax options.
        var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
        model.trigger('request', model, xhr, options);
        return xhr;
    };

    // Map from CRUD to HTTP for our default `Backbone.sync` implementation.
    var methodMap = {
        'create': 'POST',
        'update': 'PUT',
        'patch':  'PATCH',
        'delete': 'DELETE',
        'read':   'GET'
    };

    // Set the default implementation of `Backbone.ajax` to proxy through to `$`.
    // Override this if you'd like to use a different library.
    Backbone.ajax = function() {
        return Backbone.$.ajax.apply(Backbone.$, arguments);
    };

    // Backbone.Router
    // ---------------

    // Routers map faux-URLs to actions, and fire events when routes are
    // matched. Creating a new one sets its `routes` hash, if not set statically.
    var Router = Backbone.Router = function(options) {
        options || (options = {});
        if (options.routes) this.routes = options.routes;
        this._bindRoutes();
        this.initialize.apply(this, arguments);
    };

    // Cached regular expressions for matching named param parts and splatted
    // parts of route strings.
    var optionalParam = /\((.*?)\)/g;
    var namedParam    = /(\(\?)?:\w+/g;
    var splatParam    = /\*\w+/g;
    var escapeRegExp  = /[\-{}\[\]+?.,\\\^$|#\s]/g;

    // Set up all inheritable **Backbone.Router** properties and methods.
    _.extend(Router.prototype, Events, {

        // Initialize is an empty function by default. Override it with your own
        // initialization logic.
        initialize: function(){},

        // Manually bind a single named route to a callback. For example:
        //
        //     this.route('search/:query/p:num', 'search', function(query, num) {
        //       ...
        //     });
        //
        route: function(route, name, callback) {
            if (!_.isRegExp(route)) route = this._routeToRegExp(route);
            if (_.isFunction(name)) {
                callback = name;
                name = '';
            }
            if (!callback) callback = this[name];
            var router = this;
            Backbone.history.route(route, function(fragment) {
                var args = router._extractParameters(route, fragment);
                if (router.execute(callback, args, name) !== false) {
                    router.trigger.apply(router, ['route:' + name].concat(args));
                    router.trigger('route', name, args);
                    Backbone.history.trigger('route', router, name, args);
                }
            });
            return this;
        },

        // Execute a route handler with the provided parameters.  This is an
        // excellent place to do pre-route setup or post-route cleanup.
        execute: function(callback, args, name) {
            if (callback) callback.apply(this, args);
        },

        // Simple proxy to `Backbone.history` to save a fragment into the history.
        navigate: function(fragment, options) {
            Backbone.history.navigate(fragment, options);
            return this;
        },

        // Bind all defined routes to `Backbone.history`. We have to reverse the
        // order of the routes here to support behavior where the most general
        // routes can be defined at the bottom of the route map.
        _bindRoutes: function() {
            if (!this.routes) return;
            this.routes = _.result(this, 'routes');
            var route, routes = _.keys(this.routes);
            while ((route = routes.pop()) != null) {
                this.route(route, this.routes[route]);
            }
        },

        // Convert a route string into a regular expression, suitable for matching
        // against the current location hash.
        _routeToRegExp: function(route) {
            route = route.replace(escapeRegExp, '\\$&')
                .replace(optionalParam, '(?:$1)?')
                .replace(namedParam, function(match, optional) {
                    return optional ? match : '([^/?]+)';
                })
                .replace(splatParam, '([^?]*?)');
            return new RegExp('^' + route + '(?:\\?([\\s\\S]*))?$');
        },

        // Given a route, and a URL fragment that it matches, return the array of
        // extracted decoded parameters. Empty or unmatched parameters will be
        // treated as `null` to normalize cross-browser behavior.
        _extractParameters: function(route, fragment) {
            var params = route.exec(fragment).slice(1);
            return _.map(params, function(param, i) {
                // Don't decode the search params.
                if (i === params.length - 1) return param || null;
                return param ? decodeURIComponent(param) : null;
            });
        }

    });

    // Backbone.History
    // ----------------

    // Handles cross-browser history management, based on either
    // [pushState](http://diveintohtml5.info/history.html) and real URLs, or
    // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)
    // and URL fragments. If the browser supports neither (old IE, natch),
    // falls back to polling.
    var History = Backbone.History = function() {
        this.handlers = [];
        _.bindAll(this, 'checkUrl');

        // Ensure that `History` can be used outside of the browser.
        if (typeof window !== 'undefined') {
            this.location = window.location;
            this.history = window.history;
        }
    };

    // Cached regex for stripping a leading hash/slash and trailing space.
    var routeStripper = /^[#\/]|\s+$/g;

    // Cached regex for stripping leading and trailing slashes.
    var rootStripper = /^\/+|\/+$/g;

    // Cached regex for stripping urls of hash.
    var pathStripper = /#.*$/;

    // Has the history handling already been started?
    History.started = false;

    // Set up all inheritable **Backbone.History** properties and methods.
    _.extend(History.prototype, Events, {

        // The default interval to poll for hash changes, if necessary, is
        // twenty times a second.
        interval: 50,

        // Are we at the app root?
        atRoot: function() {
            var path = this.location.pathname.replace(/[^\/]$/, '$&/');
            return path === this.root && !this.location.search;
        },

        // Gets the true hash value. Cannot use location.hash directly due to bug
        // in Firefox where location.hash will always be decoded.
        getHash: function(window) {
            var match = (window || this).location.href.match(/#(.*)$/);
            return match ? match[1] : '';
        },

        // Get the pathname and search params, without the root.
        getPath: function() {
            var path = decodeURI(this.location.pathname + this.location.search);
            var root = this.root.slice(0, -1);
            if (!path.indexOf(root)) path = path.slice(root.length);
            return path.slice(1);
        },

        // Get the cross-browser normalized URL fragment from the path or hash.
        getFragment: function(fragment) {
            if (fragment == null) {
                if (this._hasPushState || !this._wantsHashChange) {
                    fragment = this.getPath();
                } else {
                    fragment = this.getHash();
                }
            }
            return fragment.replace(routeStripper, '');
        },

        // Start the hash change handling, returning `true` if the current URL matches
        // an existing route, and `false` otherwise.
        start: function(options) {
            if (History.started) throw new Error('Backbone.history has already been started');
            History.started = true;

            // Figure out the initial configuration. Do we need an iframe?
            // Is pushState desired ... is it available?
            this.options          = _.extend({root: '/'}, this.options, options);
            this.root             = this.options.root;
            this._wantsHashChange = this.options.hashChange !== false;
            this._hasHashChange   = 'onhashchange' in window;
            this._wantsPushState  = !!this.options.pushState;
            this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);
            this.fragment         = this.getFragment();

            // Add a cross-platform `addEventListener` shim for older browsers.
            var addEventListener = window.addEventListener || function (eventName, listener) {
                return attachEvent('on' + eventName, listener);
            };

            // Normalize root to always include a leading and trailing slash.
            this.root = ('/' + this.root + '/').replace(rootStripper, '/');

            // Proxy an iframe to handle location events if the browser doesn't
            // support the `hashchange` event, HTML5 history, or the user wants
            // `hashChange` but not `pushState`.
            if (!this._hasHashChange && this._wantsHashChange && (!this._wantsPushState || !this._hasPushState)) {
                var iframe = document.createElement('iframe');
                iframe.src = 'javascript:0';
                iframe.style.display = 'none';
                iframe.tabIndex = -1;
                var body = document.body;
                // Using `appendChild` will throw on IE < 9 if the document is not ready.
                this.iframe = body.insertBefore(iframe, body.firstChild).contentWindow;
                this.navigate(this.fragment);
            }

            // Depending on whether we're using pushState or hashes, and whether
            // 'onhashchange' is supported, determine how we check the URL state.
            if (this._hasPushState) {
                addEventListener('popstate', this.checkUrl, false);
            } else if (this._wantsHashChange && this._hasHashChange && !this.iframe) {
                addEventListener('hashchange', this.checkUrl, false);
            } else if (this._wantsHashChange) {
                this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
            }

            // Transition from hashChange to pushState or vice versa if both are
            // requested.
            if (this._wantsHashChange && this._wantsPushState) {

                // If we've started off with a route from a `pushState`-enabled
                // browser, but we're currently in a browser that doesn't support it...
                if (!this._hasPushState && !this.atRoot()) {
                    this.location.replace(this.root + '#' + this.getPath());
                    // Return immediately as browser will do redirect to new url
                    return true;

                    // Or if we've started out with a hash-based route, but we're currently
                    // in a browser where it could be `pushState`-based instead...
                } else if (this._hasPushState && this.atRoot()) {
                    this.navigate(this.getHash(), {replace: true});
                }

            }

            if (!this.options.silent) return this.loadUrl();
        },

        // Disable Backbone.history, perhaps temporarily. Not useful in a real app,
        // but possibly useful for unit testing Routers.
        stop: function() {
            // Add a cross-platform `removeEventListener` shim for older browsers.
            var removeEventListener = window.removeEventListener || function (eventName, listener) {
                return detachEvent('on' + eventName, listener);
            };

            // Remove window listeners.
            if (this._hasPushState) {
                removeEventListener('popstate', this.checkUrl, false);
            } else if (this._wantsHashChange && this._hasHashChange && !this.iframe) {
                removeEventListener('hashchange', this.checkUrl, false);
            }

            // Clean up the iframe if necessary.
            if (this.iframe) {
                document.body.removeChild(this.iframe.frameElement);
                this.iframe = null;
            }

            // Some environments will throw when clearing an undefined interval.
            if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);
            History.started = false;
        },

        // Add a route to be tested when the fragment changes. Routes added later
        // may override previous routes.
        route: function(route, callback) {
            this.handlers.unshift({route: route, callback: callback});
        },

        // Checks the current URL to see if it has changed, and if it has,
        // calls `loadUrl`, normalizing across the hidden iframe.
        checkUrl: function(e) {
            var current = this.getFragment();
            if (current === this.fragment && this.iframe) {
                current = this.getHash(this.iframe);
            }
            if (current === this.fragment) return false;
            if (this.iframe) this.navigate(current);
            this.loadUrl();
        },

        // Attempt to load the current URL fragment. If a route succeeds with a
        // match, returns `true`. If no defined routes matches the fragment,
        // returns `false`.
        loadUrl: function(fragment) {
            fragment = this.fragment = this.getFragment(fragment);
            return _.any(this.handlers, function(handler) {
                if (handler.route.test(fragment)) {
                    handler.callback(fragment);
                    return true;
                }
            });
        },

        // Save a fragment into the hash history, or replace the URL state if the
        // 'replace' option is passed. You are responsible for properly URL-encoding
        // the fragment in advance.
        //
        // The options object can contain `trigger: true` if you wish to have the
        // route callback be fired (not usually desirable), or `replace: true`, if
        // you wish to modify the current URL without adding an entry to the history.
        navigate: function(fragment, options) {
            if (!History.started) return false;
            if (!options || options === true) options = {trigger: !!options};

            var url = this.root + (fragment = this.getFragment(fragment || ''));

            // Strip the hash and decode for matching.
            fragment = decodeURI(fragment.replace(pathStripper, ''));

            if (this.fragment === fragment) return;
            this.fragment = fragment;

            // Don't include a trailing slash on the root.
            if (fragment === '' && url !== '/') url = url.slice(0, -1);

            // If pushState is available, we use it to set the fragment as a real URL.
            if (this._hasPushState) {
                this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);

                // If hash changes haven't been explicitly disabled, update the hash
                // fragment to store history.
            } else if (this._wantsHashChange) {
                this._updateHash(this.location, fragment, options.replace);
                if (this.iframe && (fragment !== this.getHash(this.iframe))) {
                    // Opening and closing the iframe tricks IE7 and earlier to push a
                    // history entry on hash-tag change.  When replace is true, we don't
                    // want this.
                    if(!options.replace) this.iframe.document.open().close();
                    this._updateHash(this.iframe.location, fragment, options.replace);
                }

                // If you've told us that you explicitly don't want fallback hashchange-
                // based history, then `navigate` becomes a page refresh.
            } else {
                return this.location.assign(url);
            }
            if (options.trigger) return this.loadUrl(fragment);
        },

        // Update the hash location, either replacing the current entry, or adding
        // a new one to the browser history.
        _updateHash: function(location, fragment, replace) {
            if (replace) {
                var href = location.href.replace(/(javascript:|#).*$/, '');
                location.replace(href + '#' + fragment);
            } else {
                // Some browsers require that `hash` contains a leading #.
                location.hash = '#' + fragment;
            }
        }

    });

    // Create the default Backbone.history.
    Backbone.history = new History;

    // Helpers
    // -------

    // Helper function to correctly set up the prototype chain, for subclasses.
    // Similar to `goog.inherits`, but uses a hash of prototype properties and
    // class properties to be extended.
    var extend = function(protoProps, staticProps) {
        var parent = this;
        var child;

        // The constructor function for the new subclass is either defined by you
        // (the "constructor" property in your `extend` definition), or defaulted
        // by us to simply call the parent's constructor.
        if (protoProps && _.has(protoProps, 'constructor')) {
            child = protoProps.constructor;
        } else {
            child = function(){ return parent.apply(this, arguments); };
        }

        // Add static properties to the constructor function, if supplied.
        _.extend(child, parent, staticProps);

        // Set the prototype chain to inherit from `parent`, without calling
        // `parent`'s constructor function.
        var Surrogate = function(){ this.constructor = child; };
        Surrogate.prototype = parent.prototype;
        child.prototype = new Surrogate;

        // Add prototype properties (instance properties) to the subclass,
        // if supplied.
        if (protoProps) _.extend(child.prototype, protoProps);

        // Set a convenience property in case the parent's prototype is needed
        // later.
        child.__super__ = parent.prototype;

        return child;
    };

    // Set up inheritance for the model, collection, router, view and history.
    Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;

    // Throw an error when a URL is needed, and none is supplied.
    var urlError = function() {
        throw new Error('A "url" property or function must be specified');
    };

    // Wrap an optional error callback with a fallback error event.
    var wrapError = function(model, options) {
        var error = options.error;
        options.error = function(resp) {
            if (error) error(model, resp, options);
            model.trigger('error', model, resp, options);
        };
    };

    return Backbone;

}));


if (typeof Backbone !== "undefined") {
    var backboneTCVersion = Backbone.noConflict();

    define('tc-backbone', ['underscore'], function () {
        return backboneTCVersion;
    });
}
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:amd', location = '/com/atlassian/confluence/extra/calendar3/lib/amd/shim/wrm-amd.js' */
define('wrm', function() {
    return WRM;
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-init-common', location = 'com/atlassian/confluence/extra/calendar3/components/initialiser/init-resources.js' */
define('tc/init-resources', ['wrm', 'jquery'], function(WRM, $) {
    var removeSpinner = function($elem) {
        return $elem.removeClass('spinner').removeClass('aui-icon').removeClass('aui-icon-wait');
    };

    return {
        requireResources: function() {
            WRM.require([
                'wrc!com.atlassian.confluence.extra.team-calendars.resources-batch'
            ], function () {
                removeSpinner($('div.plugin-calendar'));
                require(['tc/calendar-plugin'], function(CalendarPlugin) {
                    CalendarPlugin.onTeamCalendarsLoaded();
                });
            }).fail(function () {
                removeSpinner($('div.plugin-calendar')).text('Failed to load calendar resources');
            });
        }
    }
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-init', location = 'com/atlassian/confluence/extra/calendar3/components/initialiser/initialiser.js' */
/**
 * Confluence 5.7 doesn't have a amd module for skate so we rely in the global version
 * Confluence 5.9 includes skate
 *
 * The old version of skate uses create as callback and the new one uses ready.
 */
require(['ajs', 'tc/init-resources'], function(AJS, Initialiser) {
    var initSkateComponent = function (skate) {
        skate('calendar-container', {
            type: skate.types.CLASS,
            attached: function () {
                Initialiser.requireResources();
            },
            create: function () {
                Initialiser.requireResources();
            },
            ready: function () {
                Initialiser.requireResources();
            }
        });
    };

    var confVersion = AJS.Meta.get('version-number').split('.');
    // any version prior to 5.9 will rely in the global skate
    if (confVersion[0] === '5' && confVersion[1] < 9) {
        initSkateComponent(window.skate);
    } else {
        require(['skate'], function (skate) {
            initSkateComponent(skate);
        });
    }
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:blog-post-resources', location = 'com/atlassian/confluence/plugins/macros/advanced/blog-posts.js' */
jQuery(function(a){a(".macro-blank-experience .create-post").bind("click",function(){var b=AJS.Meta.get("base-url")+"/pages/createblogpost.action?spaceKey="+AJS.Meta.get("space-key");window.location=b})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.multimedia:flash-autosize', location = 'javascript/flash-autosize.js' */
AJS.toInit(function(b){function a(e,d){var c;if(d>=20){AJS.log("unable to auto size flash - took too long to load");return}c=b([]);e.each(function(){var g=b(this);var i;var f;if(this.GetVariable){if(!g.attr("height")){i=this.GetVariable("height");if(i){g.height(i)}else{c=c.add(g);return}}if(!g.attr("width")){f=this.GetVariable("width");if(f){g.width(f)}else{c=c.add(g);return}}}});if(c.length){setTimeout(function(){a(c,d+1)},100)}}a(b('embed[type="application/x-shockwave-flash"]'),0);b(window).bind("render-content-loaded",function(d,c){a(b('embed[type="application/x-shockwave-flash"]',c),0)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.mohamicorp.html.source.editor.for.confluence:html-source-editor-view-storage-javascript', location = 'jscripts/source-editor/view-source.js' */
/*
 * Copyright © 2012 - 2013 Atlassian Corporation Pty Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
AJS.toInit(function($) {
    if($('#action-view-storage-link').length) {
        // "View Storage Format" link - remove the one we added via a web item
        $('#action-source-editor-view-storage-link').closest('li').hide();
    }
})

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.view-source:view-source-menu-resources', location = 'com/atlassian/confluence/plugins/viewsource/js/viewsource.js' */
define("confluence-view-source/viewsource",["jquery","window"],function(a,b){return function(){a("#action-view-source-link").click(function(a){b.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");a.preventDefault();return!1})}});require("confluence/module-exporter").safeRequire("confluence-view-source/viewsource",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.view-storage-format:view-storage-menu-resources', location = 'com/atlassian/confluence/plugins/viewstorage/js/viewstorage.js' */
AJS.toInit(function(a){a(".view-storage-link, .view-storage-link a").click(function(b){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");b.preventDefault();return false})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-loader', location = '/js/loader.js' */
require(["ajs","wrm"],function(b,a){!(b.$(".page-gadget").length)&&b.toInit(function(){a.require(["wrc!request-access-plugin"])})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-hide-traditional', location = 'jscripts/add-comment-hider.js' */
define("confluence-quick-edit/add-comment-hider",[],function(){return function(a){a("#comments-actions").hide()}});require("confluence/module-exporter").safeRequire("confluence-quick-edit/add-comment-hider",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};